(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(`.mr-query-section[data-v-5fa34660]{background-color:var(--color-blue-1);color:var(--color-white);padding:3rem 8.75rem}.mr-query-section__container[data-v-5fa34660]{display:flex;gap:3rem;align-items:center}.mr-query-section__icon--desktop[data-v-5fa34660]{flex:1 1 auto}.mr-query-section__icon--desktop svg[data-v-5fa34660]{width:12.5rem;height:12.5rem}.mr-query-section__main[data-v-5fa34660]{flex-shrink:0;width:48rem}.mr-query-section__title[data-v-5fa34660]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.mr-query-section__title-text[data-v-5fa34660]{font-family:var(--font-heading);font-size:var(--font-size-h3);font-weight:var(--font-weight-medium);line-height:var(--line-height-95)}.mr-query-section__description[data-v-5fa34660]{font-family:var(--font-heading);font-size:var(--font-size-h7);line-height:var(--line-height-110);margin-bottom:2.5rem}.mr-query-section__icon--mobile[data-v-5fa34660]{display:none}.mr-query-section__input-group[data-v-5fa34660]{display:flex;gap:1.5rem;align-items:flex-end;margin-bottom:1.5rem}.mr-query-section__input[data-v-5fa34660]{flex:1 1 auto;display:flex;align-items:center;color:var(--color-blue-1);font-size:var(--font-size-body-sm);line-height:var(--line-height-140);min-height:3.2rem;padding:.75rem 1rem;box-sizing:border-box;border-radius:var(--radius-2);border:2px solid var(--color-purple-1);outline:none;-ms-overflow-style:none;scrollbar-width:none}.mr-query-section__input[data-v-5fa34660]::placeholder{color:var(--color-blue-1)}.mr-query-section__input[data-v-5fa34660]::-webkit-scrollbar{display:none}.mr-query-section__input[data-v-5fa34660]::-webkit-resizer{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 14 14' fill='none'%3E%3Cpath d='M2 12L12 2' stroke='%23AF45C9' stroke-width='2'/%3E%3Cpath d='M8 12L12 8' stroke='%23AF45C9' stroke-width='2'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:bottom right;background-size:.875rem .875rem}.mr-query-section__button[data-v-5fa34660]{display:flex;align-items:center;justify-content:center;padding:.875rem 1.125rem;border-radius:var(--radius-full);background-color:var(--color-purple-1);color:var(--color-cream-1);font-size:var(--font-size-nav-lg);font-weight:var(--font-weight-bold);line-height:var(--line-height-110);letter-spacing:var(--letter-spacing-tight)}.mr-query-section__footer[data-v-5fa34660]{display:flex;gap:1.25rem;align-items:center}.mr-query-section__footer-button[data-v-5fa34660]{display:flex;align-items:center;gap:.375rem;background-color:transparent;color:var(--color-cream-1);font-size:var(--font-size-nav-lg);font-weight:var(--font-weight-bold);line-height:var(--line-height-110);letter-spacing:var(--letter-spacing-tight)}.mr-query-section__footer-button svg[data-v-5fa34660]{width:.875rem;height:.85rem}@media(max-width:768px){.mr-query-section[data-v-5fa34660]{padding:3rem 1.25rem}.mr-query-section__icon--desktop[data-v-5fa34660]{display:none}.mr-query-section__main[data-v-5fa34660]{width:100%}.mr-query-section__icon--mobile[data-v-5fa34660]{display:block;flex-shrink:0}.mr-query-section__icon--mobile svg[data-v-5fa34660]{width:5rem;height:5rem}.mr-query-section__title-text[data-v-5fa34660]{font-size:var(--font-size-h6);line-height:var(--line-height-100)}.mr-query-section__input-group[data-v-5fa34660]{flex-direction:column;align-items:flex-start;gap:1rem;margin-bottom:2.5rem}.mr-query-section__input[data-v-5fa34660]{width:100%;resize:none}}.mr-explore-block__title[data-v-b23aa5b4]{font-family:var(--font-heading);font-size:var(--font-size-h4);font-weight:var(--font-weight-medium);line-height:var(--line-height-100);margin-bottom:1.5rem}.mr-explore-block__dropdown[data-v-b23aa5b4]{position:relative;width:18.5rem;height:3rem;margin-bottom:3rem}.mr-explore-block__dropdown-header[data-v-b23aa5b4]{display:flex;align-items:center;justify-content:space-between;height:100%;padding:0 1rem;border-radius:var(--radius-2);background:var(--color-blue-5);cursor:pointer;font-size:var(--font-size-nav-sm);font-weight:var(--font-weight-medium);line-height:var(--line-height-110);color:var(--color-blue-1)}.mr-explore-block__dropdown-header.mr-explore-block__dropdown-header--open[data-v-b23aa5b4]{border-bottom-left-radius:0;border-bottom-right-radius:0}.mr-explore-block__dropdown-list[data-v-b23aa5b4]{position:absolute;top:100%;left:0;width:100%;border-radius:0 0 var(--radius-8) var(--radius-8);background-color:var(--color-cream-1);z-index:10}.mr-explore-block__dropdown-item[data-v-b23aa5b4]{padding:1rem;font-size:var(--font-size-nav-sm);font-weight:var(--font-weight-medium);line-height:var(--line-height-110);color:var(--color-blue-1);cursor:pointer}.mr-explore-block__dropdown-item.mr-explore-block__dropdown-item--selected[data-v-b23aa5b4]{background:var(--color-blue-6)}.mr-explore-block__description[data-v-b23aa5b4]{font-family:var(--font-heading);font-size:var(--font-size-h5);line-height:var(--line-height-120);margin-bottom:1rem}.mr-explore-block__question-list[data-v-b23aa5b4]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.mr-explore-block__question-item[data-v-b23aa5b4]{display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem;min-height:10.625rem;border-radius:var(--radius-24);background-color:var(--color-blue-7);cursor:pointer}.mr-explore-block__question-item-text[data-v-b23aa5b4]{font-family:var(--font-heading);font-size:var(--font-size-h8);font-weight:var(--font-weight-medium);line-height:var(--line-height-100);margin-bottom:1rem}.mr-explore-block__question-item-tag[data-v-b23aa5b4]{font-size:var(--font-size-tag);font-weight:var(--font-weight-bold);line-height:var(--line-height-100);padding:.375rem .5rem;border-radius:var(--radius-full);border:1.5px solid var(--color-purple-1);width:fit-content}@media(max-width:768px){.mr-explore-block__title[data-v-b23aa5b4]{font-size:var(--font-size-h8)}.mr-explore-block__question-list[data-v-b23aa5b4]{display:flex;flex-direction:column}}.mr-answer-panel[data-v-97bc808c]{width:100%;display:flex;flex-direction:column;gap:.125rem}.mr-answer-panel__header[data-v-97bc808c]{display:flex;align-items:center;justify-content:space-between;border-radius:var(--radius-12) var(--radius-12) 0 0;background-color:var(--color-blue-1);padding:.8125rem 1rem;cursor:pointer}.mr-answer-panel__header-title[data-v-97bc808c]{display:flex;align-items:center;gap:.625rem;font-size:var(--font-size-eyebrow);font-weight:var(--font-weight-bold);line-height:var(--line-height-100);color:var(--color-cream-1);text-transform:uppercase}.mr-answer-panel__header-collapse-icon[data-v-97bc808c]{display:flex;align-items:center;justify-content:center}.mr-answer-panel__list[data-v-97bc808c]{display:flex;flex-direction:column;gap:.125rem}.mr-answer-panel__list-item[data-v-97bc808c]{padding:.6875rem 1rem;border-left:.5rem solid var(--color-blue-5);background-color:var(--color-blue-7);font-size:var(--font-size-nav-sm);line-height:var(--line-height-110);color:var(--color-blue-1);cursor:pointer}.mr-answer-panel__list-item.mr-answer-panel__list-item--highlight[data-v-97bc808c]{border-left-color:var(--color-purple-1);font-weight:var(--font-weight-bold);letter-spacing:var(--letter-spacing-tight)}.mr-history-panel[data-v-affc0155]{width:100%;display:flex;flex-direction:column;gap:.125rem}.mr-history-panel__header[data-v-affc0155]{display:flex;align-items:center;justify-content:space-between;border-radius:var(--radius-12) var(--radius-12) 0 0;background-color:var(--color-blue-1);padding:.8125rem 1rem;cursor:pointer}.mr-history-panel__header-title[data-v-affc0155]{display:flex;align-items:center;gap:.625rem;font-size:var(--font-size-eyebrow);font-weight:var(--font-weight-bold);line-height:var(--line-height-100);color:var(--color-cream-1);text-transform:uppercase}.mr-history-panel__header-collapse-icon[data-v-affc0155]{display:flex;align-items:center;justify-content:center}.mr-history-panel__list[data-v-affc0155]{display:flex;flex-direction:column;gap:.125rem}.mr-history-panel__list-item[data-v-affc0155]{padding:.6875rem 1rem;border-left:.5rem solid var(--color-blue-5);background-color:var(--color-blue-7);font-size:var(--font-size-nav-sm);line-height:var(--line-height-110);color:var(--color-blue-1);cursor:pointer}.mr-history-panel__list-item.mr-history-panel__list-item--empty-state[data-v-affc0155]{cursor:default;font-style:italic}.mr-history-panel__footer[data-v-affc0155]{display:flex;align-items:center;justify-content:end;margin-top:1rem}.mr-history-panel__clear-history-button[data-v-affc0155]{display:flex;align-items:center;gap:.375rem;background-color:transparent;color:var(--color-blue-1);font-size:var(--font-size-nav-lg);font-weight:var(--font-weight-bold);line-height:var(--line-height-110);letter-spacing:var(--letter-spacing-tight)}.mr-answer-section[data-v-b375de93]{padding:3rem var(--page-padding-x-desktop) 6rem var(--page-padding-x-desktop);display:flex;background-color:var(--color-white);gap:3rem}.mr-answer-section__main[data-v-b375de93]{flex-shrink:0;width:48rem}.mr-answer-section__sticky-navigation-container[data-v-b375de93]{flex:1 1 auto}.mr-answer-section__question[data-v-b375de93]{font-family:var(--font-heading);font-size:var(--font-size-h4);font-weight:var(--font-weight-medium);margin-bottom:1.5rem}.mr-answer-section__answer[data-v-b375de93]{color:var(--color-text);font-size:var(--font-size-body-lg)}.mr-answer-section__answer [data-v-b375de93] .miso-markdown>*{margin-bottom:1.5rem}.mr-answer-section__answer [data-v-b375de93] .miso-markdown p{line-height:var(--line-height-150)}.mr-answer-section__answer [data-v-b375de93] .miso-markdown a{color:var(--color-purple-1);text-decoration:underline}.mr-answer-section__answer [data-v-b375de93] .miso-markdown img{width:100%}.mr-answer-section__answer [data-v-b375de93] .miso-citation-link{margin-right:.25rem}.mr-answer-section__answer [data-v-b375de93] .miso-citation-link:before{content:attr(data-index);font-size:var(--font-size-citation-index);font-weight:var(--font-weight-bold);color:var(--color-blue-1);display:inline-flex;width:1.125rem;height:1.125rem;justify-content:center;align-items:center;aspect-ratio:1/1;border-radius:var(--radius-4);border:1.25px solid var(--color-blue-1)}.mr-answer-section__actions-container[data-v-b375de93]{margin-top:1.5rem;margin-bottom:2.5rem;display:flex;gap:1rem;align-items:center;justify-content:flex-end}.mr-answer-section__actions-container button[data-v-b375de93]{height:1.5rem;width:1.5rem;display:flex;align-items:center;justify-content:center;background-color:transparent}.mr-answer-section__show-more-container[data-v-b375de93]{display:flex;align-items:center;justify-content:end;margin-top:1.25rem}.mr-answer-section__show-more-button[data-v-b375de93]{display:flex;align-items:center;justify-content:end;gap:.375rem;background-color:transparent;color:var(--color-blue-1);font-size:var(--font-size-nav-lg);line-height:var(--line-height-110)}.mr-answer-section__sources-container[data-v-b375de93],.mr-answer-section__related-questions-container[data-v-b375de93]{border-top:2px solid var(--color-blue-4);padding:2.5rem 0}.mr-answer-section__sources-title[data-v-b375de93],.mr-answer-section__related-questions-title[data-v-b375de93]{font-family:var(--font-heading);font-size:var(--font-size-h4);font-weight:var(--font-weight-medium);line-height:var(--line-height-100);margin-bottom:.625rem}.mr-answer-section__sources-count[data-v-b375de93],.mr-answer-section__related-questions-count[data-v-b375de93]{font-size:var(--font-size-body-lg);line-height:var(--line-height-150);margin-bottom:2rem}.mr-answer-section__sources-list[data-v-b375de93]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.mr-answer-section__sources-list a[data-v-b375de93]{text-decoration:none;color:var(--color-blue-1)}.mr-answer-section__source-item[data-v-b375de93]{display:flex;flex-direction:column;padding:1.5rem 2rem;gap:2rem;border-radius:var(--radius-24);background-color:var(--color-blue-7)}.mr-answer-section__source-item-title[data-v-b375de93]{font-family:var(--font-heading);font-size:var(--font-size-h8);font-weight:var(--font-weight-medium);line-height:var(--line-height-100);height:4.875rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;line-clamp:3;overflow:hidden}.mr-answer-section__source-item-metadata-container[data-v-b375de93]{display:flex;align-items:center;justify-content:space-between}.mr-answer-section__source-item-date[data-v-b375de93]{font-size:var(--font-size-h9);font-weight:var(--font-weight-medium);line-height:var(--line-height-100)}.mr-answer-section__source-item-index[data-v-b375de93]{font-size:var(--font-size-citation-index);font-weight:var(--font-weight-bold);color:var(--color-blue-1);display:inline-flex;width:1.125rem;height:1.125rem;justify-content:center;align-items:center;aspect-ratio:1/1;border-radius:var(--radius-4);border:1.25px solid var(--color-blue-1)}.mr-answer-section__related-questions-list[data-v-b375de93]{display:flex;flex-direction:column;gap:1rem}.mr-answer-section__related-question-item[data-v-b375de93]{display:flex;align-items:center;text-align:left;padding:1.5rem;border-radius:var(--radius-24);background-color:var(--color-blue-7);font-size:var(--font-size-nav-sm);font-weight:var(--font-weight-bold);line-height:var(--line-height-110);letter-spacing:var(--letter-spacing-tight)}.mr-answer-section__panels-group[data-v-b375de93]{position:sticky;top:2rem;display:flex;flex-direction:column;gap:3rem}.mr-answer-section__answer-panel-container--mobile[data-v-b375de93],.mr-answer-section__history-panel-container--mobile[data-v-b375de93]{display:none}.mr-answer-section__answer-panel-container--mobile[data-v-b375de93]{margin-bottom:3rem}.mr-answer-section__history-panel-container--mobile[data-v-b375de93]{margin-top:3rem}.mr-answer-section__feedback-button[data-v-b375de93]{color:var(--color-blue-5)}.mr-answer-section__feedback-button.mr-answer-section__feedback-button--is-selected[data-v-b375de93]{color:var(--color-purple-1)}@media(max-width:768px){.mr-answer-section[data-v-b375de93]{padding:1.5rem var(--page-padding-x-mobile) 3rem var(--page-padding-x-mobile)}.mr-answer-section__main[data-v-b375de93]{width:100%}.mr-answer-section__sticky-navigation-container[data-v-b375de93]{display:none}.mr-answer-section__question[data-v-b375de93]{font-size:var(--font-size-h8)}.mr-answer-section__answer[data-v-b375de93]{font-size:var(--font-size-body-sm)}.mr-answer-section__answer [data-v-b375de93] .miso-markdown p{line-height:var(--line-height-140)}.mr-answer-section__sources-title[data-v-b375de93],.mr-answer-section__related-questions-title[data-v-b375de93]{font-size:var(--font-size-h8);line-height:var(--line-height-100)}.mr-answer-section__sources-count[data-v-b375de93],.mr-answer-section__related-questions-count[data-v-b375de93]{font-size:var(--font-size-body-sm);line-height:var(--line-height-140)}.mr-answer-section__sources-list[data-v-b375de93]{display:flex;flex-direction:column;gap:1.5rem}.mr-answer-section__source-item-title[data-v-b375de93]{height:auto;display:block}.mr-answer-section__answer-panel-container--mobile[data-v-b375de93],.mr-answer-section__history-panel-container--mobile[data-v-b375de93]{display:block}}@layer preflight{#miso-answers *,#miso-answers :after,#miso-answers :before,#miso-answers ::backdrop,#miso-answers ::file-selector-button{margin:0;padding:0}#miso-answers *,#miso-answers :after,#miso-answers :before,#miso-answers ::backdrop,#miso-answers ::file-selector-button{box-sizing:border-box;border:0 solid}#miso-answers h1,#miso-answers h2,#miso-answers h3,#miso-answers h4,#miso-answers h5,#miso-answers h6{font-size:inherit;font-weight:inherit}#miso-answers button{cursor:pointer}}@layer preflight,components;#miso-answers{--font-heading: founders-grotesk, sans-serif;--font-body: reader-pro, sans-serif;--font-size-h1: 5.375rem;--font-size-h3: 3.75rem;--font-size-h4: 2.5rem;--font-size-h5: 1.875rem;--font-size-h6: 1.875rem;--font-size-h7: 1.5625rem;--font-size-h8: 1.625rem;--font-size-h9: 1.375rem;--font-size-body-sm: 1.0625rem;--font-size-body-lg: 1.25rem;--font-size-nav-sm: 1rem;--font-size-nav-lg: 1.125rem;--font-size-tag: .875rem;--font-size-eyebrow: .875rem;--font-size-citation-index: .8125rem;--line-height-95: 95%;--line-height-100: 100%;--line-height-110: 110%;--line-height-120: 120%;--line-height-140: 140%;--line-height-150: 150%;--font-weight-bold: 700;--font-weight-medium: 500;--font-weight-normal: 400;--letter-spacing-tight: -.01125rem;--color-white: #ffffff;--color-cream-1: #fdfdf9;--color-cream-2: #fffffc;--color-blue-1: #042e43;--color-blue-4: #abb9c0;--color-blue-5: #c0c8cc;--color-blue-6: #e8ebed;--color-blue-7: #f2f4f5;--color-purple-1: #af45c9;--color-purple-5: #efdaf4;--color-orange-2: #ffd3a0;--color-text: #444444;--color-overlay: rgba(0, 0, 0, .4);--radius-2: .125rem;--radius-4: .25rem;--radius-8: .5rem;--radius-12: .75rem;--radius-24: 1.5rem;--radius-88: 5.5rem;--radius-full: calc(infinity * 1px);--page-padding-x-desktop: 7.5rem;--page-padding-x-mobile: 1.5rem}#miso-answers{font-family:var(--font-body);font-weight:var(--font-weight-normal);color:var(--color-blue-1);background-color:var(--color-cream-1)}.mr-page-section{padding:0 var(--page-padding-x-desktop)}@media(max-width:768px){.mr-page-section{padding:0 var(--page-padding-x-mobile)}}`)),document.head.appendChild(e)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
(function(){"use strict";/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ri(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ne={},ms=[],ct=()=>{},Zo=()=>!1,Fn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ii=t=>t.startsWith("onUpdate:"),Ce=Object.assign,oi=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},uh=Object.prototype.hasOwnProperty,X=(t,e)=>uh.call(t,e),D=Array.isArray,gs=t=>Mn(t)==="[object Map]",Xo=t=>Mn(t)==="[object Set]",F=t=>typeof t=="function",fe=t=>typeof t=="string",Lt=t=>typeof t=="symbol",oe=t=>t!==null&&typeof t=="object",ec=t=>(oe(t)||F(t))&&F(t.then)&&F(t.catch),tc=Object.prototype.toString,Mn=t=>tc.call(t),fh=t=>Mn(t).slice(8,-1),sc=t=>Mn(t)==="[object Object]",ci=t=>fe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qs=ri(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),jn=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},dh=/-\w/g,Nt=jn(t=>t.replace(dh,e=>e.slice(1).toUpperCase())),hh=/\B([A-Z])/g,Ut=jn(t=>t.replace(hh,"-$1").toLowerCase()),nc=jn(t=>t.charAt(0).toUpperCase()+t.slice(1)),ai=jn(t=>t?`on${nc(t)}`:""),Dt=(t,e)=>!Object.is(t,e),qn=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},rc=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},li=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ic;const Bn=()=>ic||(ic=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ui(t){if(D(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=fe(n)?gh(n):ui(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(fe(t)||oe(t))return t}const _h=/;(?![^(]*\))/g,ph=/:([^]+)/,mh=/\/\*[^]*?\*\//g;function gh(t){const e={};return t.replace(mh,"").split(_h).forEach(s=>{if(s){const n=s.split(ph);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Yt(t){let e="";if(fe(t))e=t;else if(D(t))for(let s=0;s<t.length;s++){const n=Yt(t[s]);n&&(e+=n+" ")}else if(oe(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const bh=ri("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function oc(t){return!!t||t===""}const cc=t=>!!(t&&t.__v_isRef===!0),Ue=t=>fe(t)?t:t==null?"":D(t)||oe(t)&&(t.toString===tc||!F(t.toString))?cc(t)?Ue(t.value):JSON.stringify(t,ac,2):String(t),ac=(t,e)=>cc(e)?ac(t,e.value):gs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[fi(n,i)+" =>"]=r,s),{})}:Xo(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>fi(s))}:Lt(e)?fi(e):oe(e)&&!D(e)&&!sc(e)?String(e):e,fi=(t,e="")=>{var s;return Lt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ee;class lc{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ee,!e&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ee;try{return Ee=this,e()}finally{Ee=s}}}on(){++this._on===1&&(this.prevScope=Ee,Ee=this)}off(){this._on>0&&--this._on===0&&(Ee=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function uc(t){return new lc(t)}function di(){return Ee}function fc(t,e=!1){Ee&&Ee.cleanups.push(t)}let re;const hi=new WeakSet;class dc{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ee&&Ee.active&&Ee.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,hi.has(this)&&(hi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_c(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wc(this),pc(this);const e=re,s=tt;re=this,tt=!0;try{return this.fn()}finally{mc(this),re=e,tt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)gi(e);this.deps=this.depsTail=void 0,wc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?hi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){mi(this)&&this.run()}get dirty(){return mi(this)}}let hc=0,Bs,Hs;function _c(t,e=!1){if(t.flags|=8,e){t.next=Hs,Hs=t;return}t.next=Bs,Bs=t}function _i(){hc++}function pi(){if(--hc>0)return;if(Hs){let e=Hs;for(Hs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Bs;){let e=Bs;for(Bs=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function pc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function mc(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),gi(n),wh(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function mi(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(gc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function gc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===zs)||(t.globalVersion=zs,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!mi(t))))return;t.flags|=2;const e=t.dep,s=re,n=tt;re=t,tt=!0;try{pc(t);const r=t.fn(t._value);(e.version===0||Dt(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{re=s,tt=n,mc(t),t.flags&=-3}}function gi(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)gi(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function wh(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let tt=!0;const bc=[];function at(){bc.push(tt),tt=!1}function lt(){const t=bc.pop();tt=t===void 0?!0:t}function wc(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=re;re=void 0;try{e()}finally{re=s}}}let zs=0;class yh{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hn{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!re||!tt||re===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==re)s=this.activeLink=new yh(re,this),re.deps?(s.prevDep=re.depsTail,re.depsTail.nextDep=s,re.depsTail=s):re.deps=re.depsTail=s,yc(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=re.depsTail,s.nextDep=void 0,re.depsTail.nextDep=s,re.depsTail=s,re.deps===s&&(re.deps=n)}return s}trigger(e){this.version++,zs++,this.notify(e)}notify(e){_i();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{pi()}}}function yc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)yc(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const zn=new WeakMap,Jt=Symbol(""),bi=Symbol(""),Vs=Symbol("");function Se(t,e,s){if(tt&&re){let n=zn.get(t);n||zn.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new Hn),r.map=n,r.key=s),r.track()}}function St(t,e,s,n,r,i){const o=zn.get(t);if(!o){zs++;return}const c=a=>{a&&a.trigger()};if(_i(),e==="clear")o.forEach(c);else{const a=D(t),u=a&&ci(s);if(a&&s==="length"){const l=Number(n);o.forEach((f,_)=>{(_==="length"||_===Vs||!Lt(_)&&_>=l)&&c(f)})}else switch((s!==void 0||o.has(void 0))&&c(o.get(s)),u&&c(o.get(Vs)),e){case"add":a?u&&c(o.get("length")):(c(o.get(Jt)),gs(t)&&c(o.get(bi)));break;case"delete":a||(c(o.get(Jt)),gs(t)&&c(o.get(bi)));break;case"set":gs(t)&&c(o.get(Jt));break}}pi()}function Eh(t,e){const s=zn.get(t);return s&&s.get(e)}function bs(t){const e=Q(t);return e===t?e:(Se(e,"iterate",Vs),Ge(t)?e:e.map(pe))}function Vn(t){return Se(t=Q(t),"iterate",Vs),t}const Sh={__proto__:null,[Symbol.iterator](){return wi(this,Symbol.iterator,pe)},concat(...t){return bs(this).concat(...t.map(e=>D(e)?bs(e):e))},entries(){return wi(this,"entries",t=>(t[1]=pe(t[1]),t))},every(t,e){return vt(this,"every",t,e,void 0,arguments)},filter(t,e){return vt(this,"filter",t,e,s=>s.map(pe),arguments)},find(t,e){return vt(this,"find",t,e,pe,arguments)},findIndex(t,e){return vt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return vt(this,"findLast",t,e,pe,arguments)},findLastIndex(t,e){return vt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return vt(this,"forEach",t,e,void 0,arguments)},includes(...t){return yi(this,"includes",t)},indexOf(...t){return yi(this,"indexOf",t)},join(t){return bs(this).join(t)},lastIndexOf(...t){return yi(this,"lastIndexOf",t)},map(t,e){return vt(this,"map",t,e,void 0,arguments)},pop(){return Ws(this,"pop")},push(...t){return Ws(this,"push",t)},reduce(t,...e){return Ec(this,"reduce",t,e)},reduceRight(t,...e){return Ec(this,"reduceRight",t,e)},shift(){return Ws(this,"shift")},some(t,e){return vt(this,"some",t,e,void 0,arguments)},splice(...t){return Ws(this,"splice",t)},toReversed(){return bs(this).toReversed()},toSorted(t){return bs(this).toSorted(t)},toSpliced(...t){return bs(this).toSpliced(...t)},unshift(...t){return Ws(this,"unshift",t)},values(){return wi(this,"values",pe)}};function wi(t,e,s){const n=Vn(t),r=n[e]();return n!==t&&!Ge(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=s(i.value)),i}),r}const vh=Array.prototype;function vt(t,e,s,n,r,i){const o=Vn(t),c=o!==t&&!Ge(t),a=o[e];if(a!==vh[e]){const f=a.apply(t,i);return c?pe(f):f}let u=s;o!==t&&(c?u=function(f,_){return s.call(this,pe(f),_,t)}:s.length>2&&(u=function(f,_){return s.call(this,f,_,t)}));const l=a.call(o,u,n);return c&&r?r(l):l}function Ec(t,e,s,n){const r=Vn(t);let i=s;return r!==t&&(Ge(t)?s.length>3&&(i=function(o,c,a){return s.call(this,o,c,a,t)}):i=function(o,c,a){return s.call(this,o,pe(c),a,t)}),r[e](i,...n)}function yi(t,e,s){const n=Q(t);Se(n,"iterate",Vs);const r=n[e](...s);return(r===-1||r===!1)&&Si(s[0])?(s[0]=Q(s[0]),n[e](...s)):r}function Ws(t,e,s=[]){at(),_i();const n=Q(t)[e].apply(t,s);return pi(),lt(),n}const Th=ri("__proto__,__v_isRef,__isVue"),Sc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lt));function Ah(t){Lt(t)||(t=String(t));const e=Q(this);return Se(e,"has",t),e.hasOwnProperty(t)}class vc{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?Rc:xc:i?Cc:Oc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=D(e);if(!r){let a;if(o&&(a=Sh[s]))return a;if(s==="hasOwnProperty")return Ah}const c=Reflect.get(e,s,ae(e)?e:n);if((Lt(s)?Sc.has(s):Th(s))||(r||Se(e,"get",s),i))return c;if(ae(c)){const a=o&&ci(s)?c:c.value;return r&&oe(a)?Yn(a):a}return oe(c)?r?Yn(c):Kn(c):c}}class Tc extends vc{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const a=Mt(i);if(!Ge(n)&&!Mt(n)&&(i=Q(i),n=Q(n)),!D(e)&&ae(i)&&!ae(n))return a||(i.value=n),!0}const o=D(e)&&ci(s)?Number(s)<e.length:X(e,s),c=Reflect.set(e,s,n,ae(e)?e:r);return e===Q(r)&&(o?Dt(n,i)&&St(e,"set",s,n):St(e,"add",s,n)),c}deleteProperty(e,s){const n=X(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&St(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!Lt(s)||!Sc.has(s))&&Se(e,"has",s),n}ownKeys(e){return Se(e,"iterate",D(e)?"length":Jt),Reflect.ownKeys(e)}}class Ac extends vc{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Oh=new Tc,Ch=new Ac,xh=new Tc(!0),Rh=new Ac(!0),Ei=t=>t,Wn=t=>Reflect.getPrototypeOf(t);function Ih(t,e,s){return function(...n){const r=this.__v_raw,i=Q(r),o=gs(i),c=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,u=r[t](...n),l=s?Ei:e?Zn:pe;return!e&&Se(i,"iterate",a?bi:Jt),{next(){const{value:f,done:_}=u.next();return _?{value:f,done:_}:{value:c?[l(f[0]),l(f[1])]:l(f),done:_}},[Symbol.iterator](){return this}}}}function Qn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function kh(t,e){const s={get(r){const i=this.__v_raw,o=Q(i),c=Q(r);t||(Dt(r,c)&&Se(o,"get",r),Se(o,"get",c));const{has:a}=Wn(o),u=e?Ei:t?Zn:pe;if(a.call(o,r))return u(i.get(r));if(a.call(o,c))return u(i.get(c));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Se(Q(r),"iterate",Jt),r.size},has(r){const i=this.__v_raw,o=Q(i),c=Q(r);return t||(Dt(r,c)&&Se(o,"has",r),Se(o,"has",c)),r===c?i.has(r):i.has(r)||i.has(c)},forEach(r,i){const o=this,c=o.__v_raw,a=Q(c),u=e?Ei:t?Zn:pe;return!t&&Se(a,"iterate",Jt),c.forEach((l,f)=>r.call(i,u(l),u(f),o))}};return Ce(s,t?{add:Qn("add"),set:Qn("set"),delete:Qn("delete"),clear:Qn("clear")}:{add(r){!e&&!Ge(r)&&!Mt(r)&&(r=Q(r));const i=Q(this);return Wn(i).has.call(i,r)||(i.add(r),St(i,"add",r,r)),this},set(r,i){!e&&!Ge(i)&&!Mt(i)&&(i=Q(i));const o=Q(this),{has:c,get:a}=Wn(o);let u=c.call(o,r);u||(r=Q(r),u=c.call(o,r));const l=a.call(o,r);return o.set(r,i),u?Dt(i,l)&&St(o,"set",r,i):St(o,"add",r,i),this},delete(r){const i=Q(this),{has:o,get:c}=Wn(i);let a=o.call(i,r);a||(r=Q(r),a=o.call(i,r)),c&&c.call(i,r);const u=i.delete(r);return a&&St(i,"delete",r,void 0),u},clear(){const r=Q(this),i=r.size!==0,o=r.clear();return i&&St(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Ih(r,t,e)}),s}function Gn(t,e){const s=kh(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(X(s,r)&&r in n?s:n,r,i)}const $h={get:Gn(!1,!1)},Ph={get:Gn(!1,!0)},Lh={get:Gn(!0,!1)},Nh={get:Gn(!0,!0)},Oc=new WeakMap,Cc=new WeakMap,xc=new WeakMap,Rc=new WeakMap;function Uh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Dh(t){return t.__v_skip||!Object.isExtensible(t)?0:Uh(fh(t))}function Kn(t){return Mt(t)?t:Jn(t,!1,Oh,$h,Oc)}function Fh(t){return Jn(t,!1,xh,Ph,Cc)}function Yn(t){return Jn(t,!0,Ch,Lh,xc)}function HA(t){return Jn(t,!0,Rh,Nh,Rc)}function Jn(t,e,s,n,r){if(!oe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Dh(t);if(i===0)return t;const o=r.get(t);if(o)return o;const c=new Proxy(t,i===2?n:s);return r.set(t,c),c}function Ft(t){return Mt(t)?Ft(t.__v_raw):!!(t&&t.__v_isReactive)}function Mt(t){return!!(t&&t.__v_isReadonly)}function Ge(t){return!!(t&&t.__v_isShallow)}function Si(t){return t?!!t.__v_raw:!1}function Q(t){const e=t&&t.__v_raw;return e?Q(e):t}function vi(t){return!X(t,"__v_skip")&&Object.isExtensible(t)&&rc(t,"__v_skip",!0),t}const pe=t=>oe(t)?Kn(t):t,Zn=t=>oe(t)?Yn(t):t;function ae(t){return t?t.__v_isRef===!0:!1}function xe(t){return Ic(t,!1)}function Xn(t){return Ic(t,!0)}function Ic(t,e){return ae(t)?t:new Mh(t,e)}class Mh{constructor(e,s){this.dep=new Hn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Q(e),this._value=s?e:pe(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||Ge(e)||Mt(e);e=n?e:Q(e),Dt(e,s)&&(this._rawValue=e,this._value=n?e:pe(e),this.dep.trigger())}}function J(t){return ae(t)?t.value:t}function Tt(t){return F(t)?t():J(t)}const jh={get:(t,e,s)=>e==="__v_raw"?t:J(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return ae(r)&&!ae(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function kc(t){return Ft(t)?t:new Proxy(t,jh)}class qh{constructor(e){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new Hn,{get:n,set:r}=e(s.track.bind(s),s.trigger.bind(s));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Bh(t){return new qh(t)}function Hh(t){const e=D(t)?new Array(t.length):{};for(const s in t)e[s]=$c(t,s);return e}class zh{constructor(e,s,n){this._object=e,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Eh(Q(this._object),this._key)}}class Vh{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Wh(t,e,s){return ae(t)?t:F(t)?new Vh(t):oe(t)&&arguments.length>1?$c(t,e,s):xe(t)}function $c(t,e,s){const n=t[e];return ae(n)?n:new zh(t,e,s)}class Qh{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Hn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&re!==this)return _c(this,!0),!0}get value(){const e=this.dep.track();return gc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Gh(t,e,s=!1){let n,r;return F(t)?n=t:(n=t.get,r=t.set),new Qh(n,r,s)}const er={},tr=new WeakMap;let Zt;function Kh(t,e=!1,s=Zt){if(s){let n=tr.get(s);n||tr.set(s,n=[]),n.push(t)}}function Yh(t,e,s=ne){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:c,call:a}=s,u=$=>r?$:Ge($)||r===!1||r===0?At($,1):At($);let l,f,_,w,m=!1,v=!1;if(ae(t)?(f=()=>t.value,m=Ge(t)):Ft(t)?(f=()=>u(t),m=!0):D(t)?(v=!0,m=t.some($=>Ft($)||Ge($)),f=()=>t.map($=>{if(ae($))return $.value;if(Ft($))return u($);if(F($))return a?a($,2):$()})):F(t)?e?f=a?()=>a(t,2):t:f=()=>{if(_){at();try{_()}finally{lt()}}const $=Zt;Zt=l;try{return a?a(t,3,[w]):t(w)}finally{Zt=$}}:f=ct,e&&r){const $=f,B=r===!0?1/0:r;f=()=>At($(),B)}const y=di(),C=()=>{l.stop(),y&&y.active&&oi(y.effects,l)};if(i&&e){const $=e;e=(...B)=>{$(...B),C()}}let I=v?new Array(t.length).fill(er):er;const L=$=>{if(!(!(l.flags&1)||!l.dirty&&!$))if(e){const B=l.run();if(r||m||(v?B.some((we,te)=>Dt(we,I[te])):Dt(B,I))){_&&_();const we=Zt;Zt=l;try{const te=[B,I===er?void 0:v&&I[0]===er?[]:I,w];I=B,a?a(e,3,te):e(...te)}finally{Zt=we}}}else l.run()};return c&&c(L),l=new dc(f),l.scheduler=o?()=>o(L,!1):L,w=$=>Kh($,!1,l),_=l.onStop=()=>{const $=tr.get(l);if($){if(a)a($,4);else for(const B of $)B();tr.delete(l)}},e?n?L(!0):I=l.run():o?o(L.bind(null,!0),!0):l.run(),C.pause=l.pause.bind(l),C.resume=l.resume.bind(l),C.stop=C,C}function At(t,e=1/0,s){if(e<=0||!oe(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,ae(t))At(t.value,e,s);else if(D(t))for(let n=0;n<t.length;n++)At(t[n],e,s);else if(Xo(t)||gs(t))t.forEach(n=>{At(n,e,s)});else if(sc(t)){for(const n in t)At(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&At(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Qs=[];let Ti=!1;function zA(t,...e){if(Ti)return;Ti=!0,at();const s=Qs.length?Qs[Qs.length-1].component:null,n=s&&s.appContext.config.warnHandler,r=Jh();if(n)ws(n,s,11,[t+e.map(i=>{var o,c;return(c=(o=i.toString)==null?void 0:o.call(i))!=null?c:JSON.stringify(i)}).join(""),s&&s.proxy,r.map(({vnode:i})=>`at <${Aa(s,i.type)}>`).join(`
`),r]);else{const i=[`[Vue warn]: ${t}`,...e];r.length&&i.push(`
`,...Zh(r)),console.warn(...i)}lt(),Ti=!1}function Jh(){let t=Qs[Qs.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function Zh(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...Xh(s))}),e}function Xh({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,r=` at <${Aa(t.component,t.type,n)}`,i=">"+s;return t.props?[r,...e_(t.props),i]:[r+i]}function e_(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...Pc(n,t[n]))}),s.length>3&&e.push(" ..."),e}function Pc(t,e,s){return fe(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:ae(e)?(e=Pc(t,Q(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):F(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=Q(e),s?e:[`${t}=`,e])}function ws(t,e,s,n){try{return n?t(...n):t()}catch(r){sr(r,e,s)}}function ut(t,e,s,n){if(F(t)){const r=ws(t,e,s,n);return r&&ec(r)&&r.catch(i=>{sr(i,e,s)}),r}if(D(t)){const r=[];for(let i=0;i<t.length;i++)r.push(ut(t[i],e,s,n));return r}}function sr(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ne;if(e){let c=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const l=c.ec;if(l){for(let f=0;f<l.length;f++)if(l[f](t,a,u)===!1)return}c=c.parent}if(i){at(),ws(i,null,10,[t,a,u]),lt();return}}t_(t,s,r,n,o)}function t_(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const Re=[];let ft=-1;const ys=[];let jt=null,Es=0;const Lc=Promise.resolve();let nr=null;function Xt(t){const e=nr||Lc;return t?e.then(this?t.bind(this):t):e}function s_(t){let e=ft+1,s=Re.length;for(;e<s;){const n=e+s>>>1,r=Re[n],i=Gs(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function Ai(t){if(!(t.flags&1)){const e=Gs(t),s=Re[Re.length-1];!s||!(t.flags&2)&&e>=Gs(s)?Re.push(t):Re.splice(s_(e),0,t),t.flags|=1,Nc()}}function Nc(){nr||(nr=Lc.then(Fc))}function n_(t){D(t)?ys.push(...t):jt&&t.id===-1?jt.splice(Es+1,0,t):t.flags&1||(ys.push(t),t.flags|=1),Nc()}function Uc(t,e,s=ft+1){for(;s<Re.length;s++){const n=Re[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Re.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Dc(t){if(ys.length){const e=[...new Set(ys)].sort((s,n)=>Gs(s)-Gs(n));if(ys.length=0,jt){jt.push(...e);return}for(jt=e,Es=0;Es<jt.length;Es++){const s=jt[Es];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}jt=null,Es=0}}const Gs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Fc(t){try{for(ft=0;ft<Re.length;ft++){const e=Re[ft];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ws(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ft<Re.length;ft++){const e=Re[ft];e&&(e.flags&=-2)}ft=-1,Re.length=0,Dc(),nr=null,(Re.length||ys.length)&&Fc()}}let Ke=null,Mc=null;function rr(t){const e=Ke;return Ke=t,Mc=t&&t.type.__scopeId||null,e}function r_(t,e=Ke,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&ga(-1);const i=rr(e);let o;try{o=t(...r)}finally{rr(i),n._d&&ga(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function qt(t,e){if(Ke===null)return t;const s=mr(Ke),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,c,a=ne]=e[r];i&&(F(i)&&(i={mounted:i,updated:i}),i.deep&&At(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:c,modifiers:a}))}return t}function es(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const c=r[o];i&&(c.oldValue=i[o].value);let a=c.dir[n];a&&(at(),ut(a,s,8,[t.el,c,t,e]),lt())}}const i_=Symbol("_vte"),o_=t=>t.__isTeleport,c_=Symbol("_leaveCb");function Oi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Oi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function jc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ks(t){const e=_r(),s=Xn(null);if(e){const r=e.refs===ne?e.refs={}:e.refs;Object.defineProperty(r,t,{enumerable:!0,get:()=>s.value,set:i=>s.value=i})}return s}const ir=new WeakMap;function Ys(t,e,s,n,r=!1){if(D(t)){t.forEach((m,v)=>Ys(m,e&&(D(e)?e[v]:e),s,n,r));return}if(Js(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Ys(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?mr(n.component):n.el,o=r?null:i,{i:c,r:a}=t,u=e&&e.r,l=c.refs===ne?c.refs={}:c.refs,f=c.setupState,_=Q(f),w=f===ne?Zo:m=>X(_,m);if(u!=null&&u!==a){if(qc(e),fe(u))l[u]=null,w(u)&&(f[u]=null);else if(ae(u)){u.value=null;const m=e;m.k&&(l[m.k]=null)}}if(F(a))ws(a,c,12,[o,l]);else{const m=fe(a),v=ae(a);if(m||v){const y=()=>{if(t.f){const C=m?w(a)?f[a]:l[a]:a.value;if(r)D(C)&&oi(C,i);else if(D(C))C.includes(i)||C.push(i);else if(m)l[a]=[i],w(a)&&(f[a]=l[a]);else{const I=[i];a.value=I,t.k&&(l[t.k]=I)}}else m?(l[a]=o,w(a)&&(f[a]=o)):v&&(a.value=o,t.k&&(l[t.k]=o))};if(o){const C=()=>{y(),ir.delete(t)};C.id=-1,ir.set(t,C),ze(C,s)}else qc(t),y()}}}function qc(t){const e=ir.get(t);e&&(e.flags|=8,ir.delete(t))}Bn().requestIdleCallback,Bn().cancelIdleCallback;const Js=t=>!!t.type.__asyncLoader,Bc=t=>t.type.__isKeepAlive;function a_(t,e){Hc(t,"a",e)}function l_(t,e){Hc(t,"da",e)}function Hc(t,e,s=ke){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(or(e,n,s),s){let r=s.parent;for(;r&&r.parent;)Bc(r.parent.vnode)&&u_(n,e,s,r),r=r.parent}}function u_(t,e,s,n){const r=or(e,t,n,!0);Vc(()=>{oi(n[e],r)},s)}function or(t,e,s=ke,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{at();const c=on(s),a=ut(e,s,t,o);return c(),lt(),a});return n?r.unshift(i):r.push(i),i}}const Ot=t=>(e,s=ke)=>{(!cn||t==="sp")&&or(t,(...n)=>e(...n),s)},f_=Ot("bm"),zc=Ot("m"),d_=Ot("bu"),h_=Ot("u"),__=Ot("bum"),Vc=Ot("um"),p_=Ot("sp"),m_=Ot("rtg"),g_=Ot("rtc");function b_(t,e=ke){or("ec",t,e)}const w_=Symbol.for("v-ndc");function Zs(t,e,s,n){let r;const i=s,o=D(t);if(o||fe(t)){const c=o&&Ft(t);let a=!1,u=!1;c&&(a=!Ge(t),u=Mt(t),t=Vn(t)),r=new Array(t.length);for(let l=0,f=t.length;l<f;l++)r[l]=e(a?u?Zn(pe(t[l])):pe(t[l]):t[l],l,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let c=0;c<t;c++)r[c]=e(c+1,c,void 0,i)}else if(oe(t))if(t[Symbol.iterator])r=Array.from(t,(c,a)=>e(c,a,void 0,i));else{const c=Object.keys(t);r=new Array(c.length);for(let a=0,u=c.length;a<u;a++){const l=c[a];r[a]=e(t[l],l,a,i)}}else r=[];return r}const Ci=t=>t?Sa(t)?mr(t):Ci(t.parent):null,Xs=Ce(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ci(t.parent),$root:t=>Ci(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Kc(t),$forceUpdate:t=>t.f||(t.f=()=>{Ai(t.update)}),$nextTick:t=>t.n||(t.n=Xt.bind(t.proxy)),$watch:t=>B_.bind(t)}),xi=(t,e)=>t!==ne&&!t.__isScriptSetup&&X(t,e),y_={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:c,appContext:a}=t;let u;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(xi(n,e))return o[e]=1,n[e];if(r!==ne&&X(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&X(u,e))return o[e]=3,i[e];if(s!==ne&&X(s,e))return o[e]=4,s[e];Ri&&(o[e]=0)}}const l=Xs[e];let f,_;if(l)return e==="$attrs"&&Se(t.attrs,"get",""),l(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(s!==ne&&X(s,e))return o[e]=4,s[e];if(_=a.config.globalProperties,X(_,e))return _[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return xi(r,e)?(r[e]=s,!0):n!==ne&&X(n,e)?(n[e]=s,!0):X(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i,type:o}},c){let a,u;return!!(s[c]||t!==ne&&c[0]!=="$"&&X(t,c)||xi(e,c)||(a=i[0])&&X(a,c)||X(n,c)||X(Xs,c)||X(r.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:X(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Wc(t){return D(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Ri=!0;function E_(t){const e=Kc(t),s=t.proxy,n=t.ctx;Ri=!1,e.beforeCreate&&Qc(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:c,provide:a,inject:u,created:l,beforeMount:f,mounted:_,beforeUpdate:w,updated:m,activated:v,deactivated:y,beforeDestroy:C,beforeUnmount:I,destroyed:L,unmounted:$,render:B,renderTracked:we,renderTriggered:te,errorCaptured:z,serverPrefetch:V,expose:ue,inheritAttrs:Le,components:Ne,directives:qe,filters:We}=e;if(u&&S_(u,n,null),o)for(const H in o){const W=o[H];F(W)&&(n[H]=W.bind(s))}if(r){const H=r.call(s,s);oe(H)&&(t.data=Kn(H))}if(Ri=!0,i)for(const H in i){const W=i[H],bt=F(W)?W.bind(s,s):F(W.get)?W.get.bind(s,s):ct,Fs=!F(W)&&F(W.set)?W.set.bind(s):ct,Oe=pt({get:bt,set:Fs});Object.defineProperty(n,H,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:ye=>Oe.value=ye})}if(c)for(const H in c)Gc(c[H],n,s,H);if(a){const H=F(a)?a.call(s):a;Reflect.ownKeys(H).forEach(W=>{x_(W,H[W])})}l&&Qc(l,t,"c");function Z(H,W){D(W)?W.forEach(bt=>H(bt.bind(s))):W&&H(W.bind(s))}if(Z(f_,f),Z(zc,_),Z(d_,w),Z(h_,m),Z(a_,v),Z(l_,y),Z(b_,z),Z(g_,we),Z(m_,te),Z(__,I),Z(Vc,$),Z(p_,V),D(ue))if(ue.length){const H=t.exposed||(t.exposed={});ue.forEach(W=>{Object.defineProperty(H,W,{get:()=>s[W],set:bt=>s[W]=bt,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===ct&&(t.render=B),Le!=null&&(t.inheritAttrs=Le),Ne&&(t.components=Ne),qe&&(t.directives=qe),V&&jc(t)}function S_(t,e,s=ct){D(t)&&(t=Ii(t));for(const n in t){const r=t[n];let i;oe(r)?"default"in r?i=tn(r.from||n,r.default,!0):i=tn(r.from||n):i=tn(r),ae(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Qc(t,e,s){ut(D(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Gc(t,e,s,n){let r=n.includes(".")?da(s,n):()=>s[n];if(fe(t)){const i=e[t];F(i)&&dt(r,i)}else if(F(t))dt(r,t.bind(s));else if(oe(t))if(D(t))t.forEach(i=>Gc(i,e,s,n));else{const i=F(t.handler)?t.handler.bind(s):e[t.handler];F(i)&&dt(r,i,t)}}function Kc(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let a;return c?a=c:!r.length&&!s&&!n?a=e:(a={},r.length&&r.forEach(u=>cr(a,u,o,!0)),cr(a,e,o)),oe(e)&&i.set(e,a),a}function cr(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&cr(t,i,s,!0),r&&r.forEach(o=>cr(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const c=v_[o]||s&&s[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const v_={data:Yc,props:Jc,emits:Jc,methods:en,computed:en,beforeCreate:Ie,created:Ie,beforeMount:Ie,mounted:Ie,beforeUpdate:Ie,updated:Ie,beforeDestroy:Ie,beforeUnmount:Ie,destroyed:Ie,unmounted:Ie,activated:Ie,deactivated:Ie,errorCaptured:Ie,serverPrefetch:Ie,components:en,directives:en,watch:A_,provide:Yc,inject:T_};function Yc(t,e){return e?t?function(){return Ce(F(t)?t.call(this,this):t,F(e)?e.call(this,this):e)}:e:t}function T_(t,e){return en(Ii(t),Ii(e))}function Ii(t){if(D(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Ie(t,e){return t?[...new Set([].concat(t,e))]:e}function en(t,e){return t?Ce(Object.create(null),t,e):e}function Jc(t,e){return t?D(t)&&D(e)?[...new Set([...t,...e])]:Ce(Object.create(null),Wc(t),Wc(e??{})):e}function A_(t,e){if(!t)return e;if(!e)return t;const s=Ce(Object.create(null),t);for(const n in e)s[n]=Ie(t[n],e[n]);return s}function Zc(){return{app:null,config:{isNativeTag:Zo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let O_=0;function C_(t,e){return function(n,r=null){F(n)||(n=Ce({},n)),r!=null&&!oe(r)&&(r=null);const i=Zc(),o=new WeakSet,c=[];let a=!1;const u=i.app={_uid:O_++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:hp,get config(){return i.config},set config(l){},use(l,...f){return o.has(l)||(l&&F(l.install)?(o.add(l),l.install(u,...f)):F(l)&&(o.add(l),l(u,...f))),u},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),u},component(l,f){return f?(i.components[l]=f,u):i.components[l]},directive(l,f){return f?(i.directives[l]=f,u):i.directives[l]},mount(l,f,_){if(!a){const w=u._ceVNode||ve(n,r);return w.appContext=i,_===!0?_="svg":_===!1&&(_=void 0),t(w,l,_),a=!0,u._container=l,l.__vue_app__=u,mr(w.component)}},onUnmount(l){c.push(l)},unmount(){a&&(ut(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,f){return i.provides[l]=f,u},runWithContext(l){const f=ts;ts=u;try{return l()}finally{ts=f}}};return u}}let ts=null;function x_(t,e){if(ke){let s=ke.provides;const n=ke.parent&&ke.parent.provides;n===s&&(s=ke.provides=Object.create(n)),s[t]=e}}function tn(t,e,s=!1){const n=_r();if(n||ts){let r=ts?ts._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&F(e)?e.call(n&&n.proxy):e}}function R_(){return!!(_r()||ts)}const Xc={},ea=()=>Object.create(Xc),ta=t=>Object.getPrototypeOf(t)===Xc;function I_(t,e,s,n=!1){const r={},i=ea();t.propsDefaults=Object.create(null),sa(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:Fh(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function k_(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,c=Q(r),[a]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let f=0;f<l.length;f++){let _=l[f];if(ar(t.emitsOptions,_))continue;const w=e[_];if(a)if(X(i,_))w!==i[_]&&(i[_]=w,u=!0);else{const m=Nt(_);r[m]=ki(a,c,m,w,t,!1)}else w!==i[_]&&(i[_]=w,u=!0)}}}else{sa(t,e,r,i)&&(u=!0);let l;for(const f in c)(!e||!X(e,f)&&((l=Ut(f))===f||!X(e,l)))&&(a?s&&(s[f]!==void 0||s[l]!==void 0)&&(r[f]=ki(a,c,f,void 0,t,!0)):delete r[f]);if(i!==c)for(const f in i)(!e||!X(e,f))&&(delete i[f],u=!0)}u&&St(t.attrs,"set","")}function sa(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,c;if(e)for(let a in e){if(qs(a))continue;const u=e[a];let l;r&&X(r,l=Nt(a))?!i||!i.includes(l)?s[l]=u:(c||(c={}))[l]=u:ar(t.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(i){const a=Q(s),u=c||ne;for(let l=0;l<i.length;l++){const f=i[l];s[f]=ki(r,a,f,u[f],t,!X(u,f))}}return o}function ki(t,e,s,n,r,i){const o=t[s];if(o!=null){const c=X(o,"default");if(c&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&F(a)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const l=on(r);n=u[s]=a.call(null,e),l()}}else n=a;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!c?n=!1:o[1]&&(n===""||n===Ut(s))&&(n=!0))}return n}const $_=new WeakMap;function na(t,e,s=!1){const n=s?$_:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},c=[];let a=!1;if(!F(t)){const l=f=>{a=!0;const[_,w]=na(f,e,!0);Ce(o,_),w&&c.push(...w)};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!i&&!a)return oe(t)&&n.set(t,ms),ms;if(D(i))for(let l=0;l<i.length;l++){const f=Nt(i[l]);ra(f)&&(o[f]=ne)}else if(i)for(const l in i){const f=Nt(l);if(ra(f)){const _=i[l],w=o[f]=D(_)||F(_)?{type:_}:Ce({},_),m=w.type;let v=!1,y=!0;if(D(m))for(let C=0;C<m.length;++C){const I=m[C],L=F(I)&&I.name;if(L==="Boolean"){v=!0;break}else L==="String"&&(y=!1)}else v=F(m)&&m.name==="Boolean";w[0]=v,w[1]=y,(v||X(w,"default"))&&c.push(f)}}const u=[o,c];return oe(t)&&n.set(t,u),u}function ra(t){return t[0]!=="$"&&!qs(t)}const $i=t=>t==="_"||t==="_ctx"||t==="$stable",Pi=t=>D(t)?t.map(ht):[ht(t)],P_=(t,e,s)=>{if(e._n)return e;const n=r_((...r)=>Pi(e(...r)),s);return n._c=!1,n},ia=(t,e,s)=>{const n=t._ctx;for(const r in t){if($i(r))continue;const i=t[r];if(F(i))e[r]=P_(r,i,n);else if(i!=null){const o=Pi(i);e[r]=()=>o}}},oa=(t,e)=>{const s=Pi(e);t.slots.default=()=>s},ca=(t,e,s)=>{for(const n in e)(s||!$i(n))&&(t[n]=e[n])},L_=(t,e,s)=>{const n=t.slots=ea();if(t.vnode.shapeFlag&32){const r=e._;r?(ca(n,e,s),s&&rc(n,"_",r,!0)):ia(e,n)}else e&&oa(t,e)},N_=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=ne;if(n.shapeFlag&32){const c=e._;c?s&&c===1?i=!1:ca(r,e,s):(i=!e.$stable,ia(e,r)),o=e}else e&&(oa(t,e),o={default:1});if(i)for(const c in r)!$i(c)&&o[c]==null&&delete r[c]},ze=Y_;function U_(t){return D_(t)}function D_(t,e){const s=Bn();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:c,createComment:a,setText:u,setElementText:l,parentNode:f,nextSibling:_,setScopeId:w=ct,insertStaticContent:m}=t,v=(d,h,b,T=null,E=null,S=null,k=void 0,x=null,O=!!h.dynamicChildren)=>{if(d===h)return;d&&!rn(d,h)&&(T=ni(d),ye(d,E,S,!0),d=null),h.patchFlag===-2&&(O=!1,h.dynamicChildren=null);const{type:A,ref:U,shapeFlag:P}=h;switch(A){case lr:y(d,h,b,T);break;case Bt:C(d,h,b,T);break;case ur:d==null&&I(h,b,T,k);break;case me:Ne(d,h,b,T,E,S,k,x,O);break;default:P&1?B(d,h,b,T,E,S,k,x,O):P&6?qe(d,h,b,T,E,S,k,x,O):(P&64||P&128)&&A.process(d,h,b,T,E,S,k,x,O,Nn)}U!=null&&E?Ys(U,d&&d.ref,S,h||d,!h):U==null&&d&&d.ref!=null&&Ys(d.ref,null,S,d,!0)},y=(d,h,b,T)=>{if(d==null)n(h.el=c(h.children),b,T);else{const E=h.el=d.el;h.children!==d.children&&u(E,h.children)}},C=(d,h,b,T)=>{d==null?n(h.el=a(h.children||""),b,T):h.el=d.el},I=(d,h,b,T)=>{[d.el,d.anchor]=m(d.children,h,b,T,d.el,d.anchor)},L=({el:d,anchor:h},b,T)=>{let E;for(;d&&d!==h;)E=_(d),n(d,b,T),d=E;n(h,b,T)},$=({el:d,anchor:h})=>{let b;for(;d&&d!==h;)b=_(d),r(d),d=b;r(h)},B=(d,h,b,T,E,S,k,x,O)=>{h.type==="svg"?k="svg":h.type==="math"&&(k="mathml"),d==null?we(h,b,T,E,S,k,x,O):V(d,h,E,S,k,x,O)},we=(d,h,b,T,E,S,k,x)=>{let O,A;const{props:U,shapeFlag:P,transition:N,dirs:j}=d;if(O=d.el=o(d.type,S,U&&U.is,U),P&8?l(O,d.children):P&16&&z(d.children,O,null,T,E,Li(d,S),k,x),j&&es(d,null,T,"created"),te(O,d,d.scopeId,k,T),U){for(const ie in U)ie!=="value"&&!qs(ie)&&i(O,ie,null,U[ie],S,T);"value"in U&&i(O,"value",null,U.value,S),(A=U.onVnodeBeforeMount)&&_t(A,T,d)}j&&es(d,null,T,"beforeMount");const K=F_(E,N);K&&N.beforeEnter(O),n(O,h,b),((A=U&&U.onVnodeMounted)||K||j)&&ze(()=>{A&&_t(A,T,d),K&&N.enter(O),j&&es(d,null,T,"mounted")},E)},te=(d,h,b,T,E)=>{if(b&&w(d,b),T)for(let S=0;S<T.length;S++)w(d,T[S]);if(E){let S=E.subTree;if(h===S||ma(S.type)&&(S.ssContent===h||S.ssFallback===h)){const k=E.vnode;te(d,k,k.scopeId,k.slotScopeIds,E.parent)}}},z=(d,h,b,T,E,S,k,x,O=0)=>{for(let A=O;A<d.length;A++){const U=d[A]=x?Ht(d[A]):ht(d[A]);v(null,U,h,b,T,E,S,k,x)}},V=(d,h,b,T,E,S,k)=>{const x=h.el=d.el;let{patchFlag:O,dynamicChildren:A,dirs:U}=h;O|=d.patchFlag&16;const P=d.props||ne,N=h.props||ne;let j;if(b&&ss(b,!1),(j=N.onVnodeBeforeUpdate)&&_t(j,b,h,d),U&&es(h,d,b,"beforeUpdate"),b&&ss(b,!0),(P.innerHTML&&N.innerHTML==null||P.textContent&&N.textContent==null)&&l(x,""),A?ue(d.dynamicChildren,A,x,b,T,Li(h,E),S):k||W(d,h,x,null,b,T,Li(h,E),S,!1),O>0){if(O&16)Le(x,P,N,b,E);else if(O&2&&P.class!==N.class&&i(x,"class",null,N.class,E),O&4&&i(x,"style",P.style,N.style,E),O&8){const K=h.dynamicProps;for(let ie=0;ie<K.length;ie++){const se=K[ie],Be=P[se],He=N[se];(He!==Be||se==="value")&&i(x,se,Be,He,E,b)}}O&1&&d.children!==h.children&&l(x,h.children)}else!k&&A==null&&Le(x,P,N,b,E);((j=N.onVnodeUpdated)||U)&&ze(()=>{j&&_t(j,b,h,d),U&&es(h,d,b,"updated")},T)},ue=(d,h,b,T,E,S,k)=>{for(let x=0;x<h.length;x++){const O=d[x],A=h[x],U=O.el&&(O.type===me||!rn(O,A)||O.shapeFlag&198)?f(O.el):b;v(O,A,U,null,T,E,S,k,!0)}},Le=(d,h,b,T,E)=>{if(h!==b){if(h!==ne)for(const S in h)!qs(S)&&!(S in b)&&i(d,S,h[S],null,E,T);for(const S in b){if(qs(S))continue;const k=b[S],x=h[S];k!==x&&S!=="value"&&i(d,S,x,k,E,T)}"value"in b&&i(d,"value",h.value,b.value,E)}},Ne=(d,h,b,T,E,S,k,x,O)=>{const A=h.el=d?d.el:c(""),U=h.anchor=d?d.anchor:c("");let{patchFlag:P,dynamicChildren:N,slotScopeIds:j}=h;j&&(x=x?x.concat(j):j),d==null?(n(A,b,T),n(U,b,T),z(h.children||[],b,U,E,S,k,x,O)):P>0&&P&64&&N&&d.dynamicChildren?(ue(d.dynamicChildren,N,b,E,S,k,x),(h.key!=null||E&&h===E.subTree)&&aa(d,h,!0)):W(d,h,b,U,E,S,k,x,O)},qe=(d,h,b,T,E,S,k,x,O)=>{h.slotScopeIds=x,d==null?h.shapeFlag&512?E.ctx.activate(h,b,T,k,O):We(h,b,T,E,S,k,O):ps(d,h,O)},We=(d,h,b,T,E,S,k)=>{const x=d.component=rp(d,T,E);if(Bc(d)&&(x.ctx.renderer=Nn),ip(x,!1,k),x.asyncDep){if(E&&E.registerDep(x,Z,k),!d.el){const O=x.subTree=ve(Bt);C(null,O,h,b),d.placeholder=O.el}}else Z(x,d,h,b,E,S,k)},ps=(d,h,b)=>{const T=h.component=d.component;if(G_(d,h,b))if(T.asyncDep&&!T.asyncResolved){H(T,h,b);return}else T.next=h,T.update();else h.el=d.el,T.vnode=h},Z=(d,h,b,T,E,S,k)=>{const x=()=>{if(d.isMounted){let{next:P,bu:N,u:j,parent:K,vnode:ie}=d;{const yt=la(d);if(yt){P&&(P.el=ie.el,H(d,P,k)),yt.asyncDep.then(()=>{d.isUnmounted||x()});return}}let se=P,Be;ss(d,!1),P?(P.el=ie.el,H(d,P,k)):P=ie,N&&qn(N),(Be=P.props&&P.props.onVnodeBeforeUpdate)&&_t(Be,K,P,ie),ss(d,!0);const He=_a(d),wt=d.subTree;d.subTree=He,v(wt,He,f(wt.el),ni(wt),d,E,S),P.el=He.el,se===null&&K_(d,He.el),j&&ze(j,E),(Be=P.props&&P.props.onVnodeUpdated)&&ze(()=>_t(Be,K,P,ie),E)}else{let P;const{el:N,props:j}=h,{bm:K,m:ie,parent:se,root:Be,type:He}=d,wt=Js(h);ss(d,!1),K&&qn(K),!wt&&(P=j&&j.onVnodeBeforeMount)&&_t(P,se,h),ss(d,!0);{Be.ce&&Be.ce._def.shadowRoot!==!1&&Be.ce._injectChildStyle(He);const yt=d.subTree=_a(d);v(null,yt,b,T,d,E,S),h.el=yt.el}if(ie&&ze(ie,E),!wt&&(P=j&&j.onVnodeMounted)){const yt=h;ze(()=>_t(P,se,yt),E)}(h.shapeFlag&256||se&&Js(se.vnode)&&se.vnode.shapeFlag&256)&&d.a&&ze(d.a,E),d.isMounted=!0,h=b=T=null}};d.scope.on();const O=d.effect=new dc(x);d.scope.off();const A=d.update=O.run.bind(O),U=d.job=O.runIfDirty.bind(O);U.i=d,U.id=d.uid,O.scheduler=()=>Ai(U),ss(d,!0),A()},H=(d,h,b)=>{h.component=d;const T=d.vnode.props;d.vnode=h,d.next=null,k_(d,h.props,T,b),N_(d,h.children,b),at(),Uc(d),lt()},W=(d,h,b,T,E,S,k,x,O=!1)=>{const A=d&&d.children,U=d?d.shapeFlag:0,P=h.children,{patchFlag:N,shapeFlag:j}=h;if(N>0){if(N&128){Fs(A,P,b,T,E,S,k,x,O);return}else if(N&256){bt(A,P,b,T,E,S,k,x,O);return}}j&8?(U&16&&Ln(A,E,S),P!==A&&l(b,P)):U&16?j&16?Fs(A,P,b,T,E,S,k,x,O):Ln(A,E,S,!0):(U&8&&l(b,""),j&16&&z(P,b,T,E,S,k,x,O))},bt=(d,h,b,T,E,S,k,x,O)=>{d=d||ms,h=h||ms;const A=d.length,U=h.length,P=Math.min(A,U);let N;for(N=0;N<P;N++){const j=h[N]=O?Ht(h[N]):ht(h[N]);v(d[N],j,b,null,E,S,k,x,O)}A>U?Ln(d,E,S,!0,!1,P):z(h,b,T,E,S,k,x,O,P)},Fs=(d,h,b,T,E,S,k,x,O)=>{let A=0;const U=h.length;let P=d.length-1,N=U-1;for(;A<=P&&A<=N;){const j=d[A],K=h[A]=O?Ht(h[A]):ht(h[A]);if(rn(j,K))v(j,K,b,null,E,S,k,x,O);else break;A++}for(;A<=P&&A<=N;){const j=d[P],K=h[N]=O?Ht(h[N]):ht(h[N]);if(rn(j,K))v(j,K,b,null,E,S,k,x,O);else break;P--,N--}if(A>P){if(A<=N){const j=N+1,K=j<U?h[j].el:T;for(;A<=N;)v(null,h[A]=O?Ht(h[A]):ht(h[A]),b,K,E,S,k,x,O),A++}}else if(A>N)for(;A<=P;)ye(d[A],E,S,!0),A++;else{const j=A,K=A,ie=new Map;for(A=K;A<=N;A++){const Qe=h[A]=O?Ht(h[A]):ht(h[A]);Qe.key!=null&&ie.set(Qe.key,A)}let se,Be=0;const He=N-K+1;let wt=!1,yt=0;const Un=new Array(He);for(A=0;A<He;A++)Un[A]=0;for(A=j;A<=P;A++){const Qe=d[A];if(Be>=He){ye(Qe,E,S,!0);continue}let Et;if(Qe.key!=null)Et=ie.get(Qe.key);else for(se=K;se<=N;se++)if(Un[se-K]===0&&rn(Qe,h[se])){Et=se;break}Et===void 0?ye(Qe,E,S,!0):(Un[Et-K]=A+1,Et>=yt?yt=Et:wt=!0,v(Qe,h[Et],b,null,E,S,k,x,O),Be++)}const oh=wt?M_(Un):ms;for(se=oh.length-1,A=He-1;A>=0;A--){const Qe=K+A,Et=h[Qe],ch=h[Qe+1],ah=Qe+1<U?ch.el||ch.placeholder:T;Un[A]===0?v(null,Et,b,ah,E,S,k,x,O):wt&&(se<0||A!==oh[se]?Oe(Et,b,ah,2):se--)}}},Oe=(d,h,b,T,E=null)=>{const{el:S,type:k,transition:x,children:O,shapeFlag:A}=d;if(A&6){Oe(d.component.subTree,h,b,T);return}if(A&128){d.suspense.move(h,b,T);return}if(A&64){k.move(d,h,b,Nn);return}if(k===me){n(S,h,b);for(let P=0;P<O.length;P++)Oe(O[P],h,b,T);n(d.anchor,h,b);return}if(k===ur){L(d,h,b);return}if(T!==2&&A&1&&x)if(T===0)x.beforeEnter(S),n(S,h,b),ze(()=>x.enter(S),E);else{const{leave:P,delayLeave:N,afterLeave:j}=x,K=()=>{d.ctx.isUnmounted?r(S):n(S,h,b)},ie=()=>{S._isLeaving&&S[c_](!0),P(S,()=>{K(),j&&j()})};N?N(S,K,ie):ie()}else n(S,h,b)},ye=(d,h,b,T=!1,E=!1)=>{const{type:S,props:k,ref:x,children:O,dynamicChildren:A,shapeFlag:U,patchFlag:P,dirs:N,cacheIndex:j}=d;if(P===-2&&(E=!1),x!=null&&(at(),Ys(x,null,b,d,!0),lt()),j!=null&&(h.renderCache[j]=void 0),U&256){h.ctx.deactivate(d);return}const K=U&1&&N,ie=!Js(d);let se;if(ie&&(se=k&&k.onVnodeBeforeUnmount)&&_t(se,h,d),U&6)si(d.component,b,T);else{if(U&128){d.suspense.unmount(b,T);return}K&&es(d,null,h,"beforeUnmount"),U&64?d.type.remove(d,h,b,Nn,T):A&&!A.hasOnce&&(S!==me||P>0&&P&64)?Ln(A,h,b,!1,!0):(S===me&&P&384||!E&&U&16)&&Ln(O,h,b),T&&Ms(d)}(ie&&(se=k&&k.onVnodeUnmounted)||K)&&ze(()=>{se&&_t(se,h,d),K&&es(d,null,h,"unmounted")},b)},Ms=d=>{const{type:h,el:b,anchor:T,transition:E}=d;if(h===me){js(b,T);return}if(h===ur){$(d);return}const S=()=>{r(b),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(d.shapeFlag&1&&E&&!E.persisted){const{leave:k,delayLeave:x}=E,O=()=>k(b,S);x?x(d.el,S,O):O()}else S()},js=(d,h)=>{let b;for(;d!==h;)b=_(d),r(d),d=b;r(h)},si=(d,h,b)=>{const{bum:T,scope:E,job:S,subTree:k,um:x,m:O,a:A}=d;ua(O),ua(A),T&&qn(T),E.stop(),S&&(S.flags|=8,ye(k,d,h,b)),x&&ze(x,h),ze(()=>{d.isUnmounted=!0},h)},Ln=(d,h,b,T=!1,E=!1,S=0)=>{for(let k=S;k<d.length;k++)ye(d[k],h,b,T,E)},ni=d=>{if(d.shapeFlag&6)return ni(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const h=_(d.anchor||d.el),b=h&&h[i_];return b?_(b):h};let Jo=!1;const ih=(d,h,b)=>{d==null?h._vnode&&ye(h._vnode,null,null,!0):v(h._vnode||null,d,h,null,null,null,b),h._vnode=d,Jo||(Jo=!0,Uc(),Dc(),Jo=!1)},Nn={p:v,um:ye,m:Oe,r:Ms,mt:We,mc:z,pc:W,pbc:ue,n:ni,o:t};return{render:ih,hydrate:void 0,createApp:C_(ih)}}function Li({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function ss({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function F_(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function aa(t,e,s=!1){const n=t.children,r=e.children;if(D(n)&&D(r))for(let i=0;i<n.length;i++){const o=n[i];let c=r[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[i]=Ht(r[i]),c.el=o.el),!s&&c.patchFlag!==-2&&aa(o,c)),c.type===lr&&c.patchFlag!==-1&&(c.el=o.el),c.type===Bt&&!c.el&&(c.el=o.el)}}function M_(t){const e=t.slice(),s=[0];let n,r,i,o,c;const a=t.length;for(n=0;n<a;n++){const u=t[n];if(u!==0){if(r=s[s.length-1],t[r]<u){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)c=i+o>>1,t[s[c]]<u?i=c+1:o=c;u<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function la(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:la(e)}function ua(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const j_=Symbol.for("v-scx"),q_=()=>tn(j_);function dt(t,e,s){return fa(t,e,s)}function fa(t,e,s=ne){const{immediate:n,deep:r,flush:i,once:o}=s,c=Ce({},s),a=e&&n||!e&&i!=="post";let u;if(cn){if(i==="sync"){const w=q_();u=w.__watcherHandles||(w.__watcherHandles=[])}else if(!a){const w=()=>{};return w.stop=ct,w.resume=ct,w.pause=ct,w}}const l=ke;c.call=(w,m,v)=>ut(w,l,m,v);let f=!1;i==="post"?c.scheduler=w=>{ze(w,l&&l.suspense)}:i!=="sync"&&(f=!0,c.scheduler=(w,m)=>{m?w():Ai(w)}),c.augmentJob=w=>{e&&(w.flags|=4),f&&(w.flags|=2,l&&(w.id=l.uid,w.i=l))};const _=Yh(t,e,c);return cn&&(u?u.push(_):a&&_()),_}function B_(t,e,s){const n=this.proxy,r=fe(t)?t.includes(".")?da(n,t):()=>n[t]:t.bind(n,n);let i;F(e)?i=e:(i=e.handler,s=e);const o=on(this),c=fa(r,i.bind(n),s);return o(),c}function da(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const H_=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Nt(e)}Modifiers`]||t[`${Ut(e)}Modifiers`];function z_(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||ne;let r=s;const i=e.startsWith("update:"),o=i&&H_(n,e.slice(7));o&&(o.trim&&(r=s.map(l=>fe(l)?l.trim():l)),o.number&&(r=s.map(li)));let c,a=n[c=ai(e)]||n[c=ai(Nt(e))];!a&&i&&(a=n[c=ai(Ut(e))]),a&&ut(a,t,6,r);const u=n[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,ut(u,t,6,r)}}const V_=new WeakMap;function ha(t,e,s=!1){const n=s?V_:e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},c=!1;if(!F(t)){const a=u=>{const l=ha(u,e,!0);l&&(c=!0,Ce(o,l))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!i&&!c?(oe(t)&&n.set(t,null),null):(D(i)?i.forEach(a=>o[a]=null):Ce(o,i),oe(t)&&n.set(t,o),o)}function ar(t,e){return!t||!Fn(e)?!1:(e=e.slice(2).replace(/Once$/,""),X(t,e[0].toLowerCase()+e.slice(1))||X(t,Ut(e))||X(t,e))}function VA(){}function _a(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:c,emit:a,render:u,renderCache:l,props:f,data:_,setupState:w,ctx:m,inheritAttrs:v}=t,y=rr(t);let C,I;try{if(s.shapeFlag&4){const $=r||n,B=$;C=ht(u.call(B,$,l,f,w,_,m)),I=c}else{const $=e;C=ht($.length>1?$(f,{attrs:c,slots:o,emit:a}):$(f,null)),I=e.props?c:W_(c)}}catch($){sn.length=0,sr($,t,1),C=ve(Bt)}let L=C;if(I&&v!==!1){const $=Object.keys(I),{shapeFlag:B}=L;$.length&&B&7&&(i&&$.some(ii)&&(I=Q_(I,i)),L=Ss(L,I,!1,!0))}return s.dirs&&(L=Ss(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(s.dirs):s.dirs),s.transition&&Oi(L,s.transition),C=L,rr(y),C}const W_=t=>{let e;for(const s in t)(s==="class"||s==="style"||Fn(s))&&((e||(e={}))[s]=t[s]);return e},Q_=(t,e)=>{const s={};for(const n in t)(!ii(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function G_(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:c,patchFlag:a}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return n?pa(n,o,u):!!o;if(a&8){const l=e.dynamicProps;for(let f=0;f<l.length;f++){const _=l[f];if(o[_]!==n[_]&&!ar(u,_))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:n===o?!1:n?o?pa(n,o,u):!0:!!o;return!1}function pa(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!ar(s,i))return!0}return!1}function K_({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const ma=t=>t.__isSuspense;function Y_(t,e){e&&e.pendingBranch?D(t)?e.effects.push(...t):e.effects.push(t):n_(t)}const me=Symbol.for("v-fgt"),lr=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),ur=Symbol.for("v-stc"),sn=[];let Ve=null;function Y(t=!1){sn.push(Ve=t?null:[])}function J_(){sn.pop(),Ve=sn[sn.length-1]||null}let nn=1;function ga(t,e=!1){nn+=t,t<0&&Ve&&e&&(Ve.hasOnce=!0)}function ba(t){return t.dynamicChildren=nn>0?Ve||ms:null,J_(),nn>0&&Ve&&Ve.push(t),t}function ee(t,e,s,n,r,i){return ba(R(t,e,s,n,r,i,!0))}function fr(t,e,s,n,r){return ba(ve(t,e,s,n,r,!0))}function wa(t){return t?t.__v_isVNode===!0:!1}function rn(t,e){return t.type===e.type&&t.key===e.key}const ya=({key:t})=>t??null,dr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?fe(t)||ae(t)||F(t)?{i:Ke,r:t,k:e,f:!!s}:t:null);function R(t,e=null,s=null,n=0,r=null,i=t===me?0:1,o=!1,c=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ya(e),ref:e&&dr(e),scopeId:Mc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ke};return c?(Ni(a,s),i&128&&t.normalize(a)):s&&(a.shapeFlag|=fe(s)?8:16),nn>0&&!o&&Ve&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Ve.push(a),a}const ve=Z_;function Z_(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===w_)&&(t=Bt),wa(t)){const c=Ss(t,e,!0);return s&&Ni(c,s),nn>0&&!i&&Ve&&(c.shapeFlag&6?Ve[Ve.indexOf(t)]=c:Ve.push(c)),c.patchFlag=-2,c}if(dp(t)&&(t=t.__vccOpts),e){e=X_(e);let{class:c,style:a}=e;c&&!fe(c)&&(e.class=Yt(c)),oe(a)&&(Si(a)&&!D(a)&&(a=Ce({},a)),e.style=ui(a))}const o=fe(t)?1:ma(t)?128:o_(t)?64:oe(t)?4:F(t)?2:0;return R(t,e,s,n,r,o,i,!0)}function X_(t){return t?Si(t)||ta(t)?Ce({},t):t:null}function Ss(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:c,transition:a}=t,u=e?tp(r||{},e):r,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&ya(u),ref:e&&e.ref?s&&i?D(i)?i.concat(dr(e)):[i,dr(e)]:dr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==me?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ss(t.ssContent),ssFallback:t.ssFallback&&Ss(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&n&&Oi(l,a.clone(l)),l}function ep(t=" ",e=0){return ve(lr,null,t,e)}function hr(t,e){const s=ve(ur,null,t);return s.staticCount=e,s}function st(t="",e=!1){return e?(Y(),fr(Bt,null,t)):ve(Bt,null,t)}function ht(t){return t==null||typeof t=="boolean"?ve(Bt):D(t)?ve(me,null,t.slice()):wa(t)?Ht(t):ve(lr,null,String(t))}function Ht(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ss(t)}function Ni(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(D(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Ni(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!ta(e)?e._ctx=Ke:r===3&&Ke&&(Ke.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else F(e)?(e={default:e,_ctx:Ke},s=32):(e=String(e),n&64?(s=16,e=[ep(e)]):s=8);t.children=e,t.shapeFlag|=s}function tp(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Yt([e.class,n.class]));else if(r==="style")e.style=ui([e.style,n.style]);else if(Fn(r)){const i=e[r],o=n[r];o&&i!==o&&!(D(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function _t(t,e,s,n=null){ut(t,e,7,[s,n])}const sp=Zc();let np=0;function rp(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||sp,i={uid:np++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:na(n,r),emitsOptions:ha(n,r),emit:null,emitted:null,propsDefaults:ne,inheritAttrs:n.inheritAttrs,ctx:ne,data:ne,props:ne,attrs:ne,slots:ne,refs:ne,setupState:ne,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=z_.bind(null,i),t.ce&&t.ce(i),i}let ke=null;const _r=()=>ke||Ke;let pr,Ui;{const t=Bn(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};pr=e("__VUE_INSTANCE_SETTERS__",s=>ke=s),Ui=e("__VUE_SSR_SETTERS__",s=>cn=s)}const on=t=>{const e=ke;return pr(t),t.scope.on(),()=>{t.scope.off(),pr(e)}},Ea=()=>{ke&&ke.scope.off(),pr(null)};function Sa(t){return t.vnode.shapeFlag&4}let cn=!1;function ip(t,e=!1,s=!1){e&&Ui(e);const{props:n,children:r}=t.vnode,i=Sa(t);I_(t,n,i,e),L_(t,r,s||e);const o=i?op(t,e):void 0;return e&&Ui(!1),o}function op(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,y_);const{setup:n}=s;if(n){at();const r=t.setupContext=n.length>1?ap(t):null,i=on(t),o=ws(n,t,0,[t.props,r]),c=ec(o);if(lt(),i(),(c||t.sp)&&!Js(t)&&jc(t),c){if(o.then(Ea,Ea),e)return o.then(a=>{va(t,a)}).catch(a=>{sr(a,t,0)});t.asyncDep=o}else va(t,o)}else Ta(t)}function va(t,e,s){F(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:oe(e)&&(t.setupState=kc(e)),Ta(t)}function Ta(t,e,s){const n=t.type;t.render||(t.render=n.render||ct);{const r=on(t);at();try{E_(t)}finally{lt(),r()}}}const cp={get(t,e){return Se(t,"get",""),t[e]}};function ap(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,cp),slots:t.slots,emit:t.emit,expose:e}}function mr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(kc(vi(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Xs)return Xs[s](t)},has(e,s){return s in e||s in Xs}})):t.proxy}const lp=/(?:^|[-_])\w/g,up=t=>t.replace(lp,e=>e.toUpperCase()).replace(/[-_]/g,"");function fp(t,e=!0){return F(t)?t.displayName||t.name:t.name||e&&t.__name}function Aa(t,e,s=!1){let n=fp(e);if(!n&&e.__file){const r=e.__file.match(/([^/\\]+)\.\w+$/);r&&(n=r[1])}if(!n&&t&&t.parent){const r=i=>{for(const o in i)if(i[o]===e)return o};n=r(t.components||t.parent.type.components)||r(t.appContext.components)}return n?up(n):s?"App":"Anonymous"}function dp(t){return F(t)&&"__vccOpts"in t}const pt=(t,e)=>Gh(t,e,cn),hp="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Di;const Oa=typeof window<"u"&&window.trustedTypes;if(Oa)try{Di=Oa.createPolicy("vue",{createHTML:t=>t})}catch{}const Ca=Di?t=>Di.createHTML(t):t=>t,_p="http://www.w3.org/2000/svg",pp="http://www.w3.org/1998/Math/MathML",Ct=typeof document<"u"?document:null,xa=Ct&&Ct.createElement("template"),mp={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Ct.createElementNS(_p,t):e==="mathml"?Ct.createElementNS(pp,t):s?Ct.createElement(t,{is:s}):Ct.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Ct.createTextNode(t),createComment:t=>Ct.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ct.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{xa.innerHTML=Ca(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const c=xa.content;if(n==="svg"||n==="mathml"){const a=c.firstChild;for(;a.firstChild;)c.appendChild(a.firstChild);c.removeChild(a)}e.insertBefore(c,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},gp=Symbol("_vtc");function bp(t,e,s){const n=t[gp];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const gr=Symbol("_vod"),Ra=Symbol("_vsh"),ns={name:"show",beforeMount(t,{value:e},{transition:s}){t[gr]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):an(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),an(t,!0),n.enter(t)):n.leave(t,()=>{an(t,!1)}):an(t,e))},beforeUnmount(t,{value:e}){an(t,e)}};function an(t,e){t.style.display=e?t[gr]:"none",t[Ra]=!e}const wp=Symbol(""),yp=/(?:^|;)\s*display\s*:/;function Ep(t,e,s){const n=t.style,r=fe(s);let i=!1;if(s&&!r){if(e)if(fe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();s[c]==null&&br(n,c,"")}else for(const o in e)s[o]==null&&br(n,o,"");for(const o in s)o==="display"&&(i=!0),br(n,o,s[o])}else if(r){if(e!==s){const o=n[wp];o&&(s+=";"+o),n.cssText=s,i=yp.test(s)}}else e&&t.removeAttribute("style");gr in t&&(t[gr]=i?n.display:"",t[Ra]&&(n.display="none"))}const Ia=/\s*!important$/;function br(t,e,s){if(D(s))s.forEach(n=>br(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=Sp(t,e);Ia.test(s)?t.setProperty(Ut(n),s.replace(Ia,""),"important"):t[n]=s}}const ka=["Webkit","Moz","ms"],Fi={};function Sp(t,e){const s=Fi[e];if(s)return s;let n=Nt(e);if(n!=="filter"&&n in t)return Fi[e]=n;n=nc(n);for(let r=0;r<ka.length;r++){const i=ka[r]+n;if(i in t)return Fi[e]=i}return e}const $a="http://www.w3.org/1999/xlink";function Pa(t,e,s,n,r,i=bh(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS($a,e.slice(6,e.length)):t.setAttributeNS($a,e,s):s==null||i&&!oc(s)?t.removeAttribute(e):t.setAttribute(e,i?"":Lt(s)?String(s):s)}function La(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Ca(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(c!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const c=typeof t[e];c==="boolean"?s=oc(s):s==null&&c==="string"?(s="",o=!0):c==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(r||e)}function vs(t,e,s,n){t.addEventListener(e,s,n)}function vp(t,e,s,n){t.removeEventListener(e,s,n)}const Na=Symbol("_vei");function Tp(t,e,s,n,r=null){const i=t[Na]||(t[Na]={}),o=i[e];if(n&&o)o.value=n;else{const[c,a]=Ap(e);if(n){const u=i[e]=xp(n,r);vs(t,c,u,a)}else o&&(vp(t,c,o,a),i[e]=void 0)}}const Ua=/(?:Once|Passive|Capture)$/;function Ap(t){let e;if(Ua.test(t)){e={};let n;for(;n=t.match(Ua);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ut(t.slice(2)),e]}let Mi=0;const Op=Promise.resolve(),Cp=()=>Mi||(Op.then(()=>Mi=0),Mi=Date.now());function xp(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ut(Rp(n,s.value),e,5,[n])};return s.value=t,s.attached=Cp(),s}function Rp(t,e){if(D(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Da=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ip=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?bp(t,n,o):e==="style"?Ep(t,s,n):Fn(e)?ii(e)||Tp(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kp(t,e,n,o))?(La(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Pa(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!fe(n))?La(t,Nt(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Pa(t,e,n,o))};function kp(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Da(e)&&F(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Da(e)&&fe(s)?!1:e in t}const Fa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return D(e)?s=>qn(e,s):e};function $p(t){t.target.composing=!0}function Ma(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ji=Symbol("_assign"),Pp={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[ji]=Fa(r);const i=n||r.props&&r.props.type==="number";vs(t,e?"change":"input",o=>{if(o.target.composing)return;let c=t.value;s&&(c=c.trim()),i&&(c=li(c)),t[ji](c)}),s&&vs(t,"change",()=>{t.value=t.value.trim()}),e||(vs(t,"compositionstart",$p),vs(t,"compositionend",Ma),vs(t,"change",Ma))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[ji]=Fa(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?li(t.value):t.value,a=e??"";c!==a&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===a)||(t.value=a))}},Lp=["ctrl","shift","alt","meta"],Np={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Lp.some(s=>t[`${s}Key`]&&!e.includes(s))},Up=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=((r,...i)=>{for(let o=0;o<e.length;o++){const c=Np[e[o]];if(c&&c(r,e))return}return t(r,...i)}))},Dp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Fp=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=(r=>{if(!("key"in r))return;const i=Ut(r.key);if(e.some(o=>o===i||Dp[o]===i))return t(r)}))},Mp=Ce({patchProp:Ip},mp);let ja;function jp(){return ja||(ja=U_(Mp))}const qp=((...t)=>{const e=jp().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=Hp(n);if(!r)return;const i=e._component;!F(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,Bp(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function Bp(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Hp(t){return fe(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qa;const wr=t=>qa=t,Ba=Symbol();function qi(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ln;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ln||(ln={}));function zp(){const t=uc(!0),e=t.run(()=>xe({}));let s=[],n=[];const r=vi({install(i){wr(r),r._a=i,i.provide(Ba,r),i.config.globalProperties.$pinia=r,n.forEach(o=>s.push(o)),n=[]},use(i){return this._a?s.push(i):n.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:e});return r}const Ha=()=>{};function za(t,e,s,n=Ha){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),n())};return!s&&di()&&fc(r),r}function Ts(t,...e){t.slice().forEach(s=>{s(...e)})}const Vp=t=>t(),Va=Symbol(),Bi=Symbol();function Hi(t,e){t instanceof Map&&e instanceof Map?e.forEach((s,n)=>t.set(n,s)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const s in e){if(!e.hasOwnProperty(s))continue;const n=e[s],r=t[s];qi(r)&&qi(n)&&t.hasOwnProperty(s)&&!ae(n)&&!Ft(n)?t[s]=Hi(r,n):t[s]=n}return t}const Wp=Symbol();function Qp(t){return!qi(t)||!Object.prototype.hasOwnProperty.call(t,Wp)}const{assign:zt}=Object;function Gp(t){return!!(ae(t)&&t.effect)}function Kp(t,e,s,n){const{state:r,actions:i,getters:o}=e,c=s.state.value[t];let a;function u(){c||(s.state.value[t]=r?r():{});const l=Hh(s.state.value[t]);return zt(l,i,Object.keys(o||{}).reduce((f,_)=>(f[_]=vi(pt(()=>{wr(s);const w=s._s.get(t);return o[_].call(w,w)})),f),{}))}return a=Wa(t,u,e,s,n,!0),a}function Wa(t,e,s={},n,r,i){let o;const c=zt({actions:{}},s),a={deep:!0};let u,l,f=[],_=[],w;const m=n.state.value[t];!i&&!m&&(n.state.value[t]={}),xe({});let v;function y(z){let V;u=l=!1,typeof z=="function"?(z(n.state.value[t]),V={type:ln.patchFunction,storeId:t,events:w}):(Hi(n.state.value[t],z),V={type:ln.patchObject,payload:z,storeId:t,events:w});const ue=v=Symbol();Xt().then(()=>{v===ue&&(u=!0)}),l=!0,Ts(f,V,n.state.value[t])}const C=i?function(){const{state:V}=s,ue=V?V():{};this.$patch(Le=>{zt(Le,ue)})}:Ha;function I(){o.stop(),f=[],_=[],n._s.delete(t)}const L=(z,V="")=>{if(Va in z)return z[Bi]=V,z;const ue=function(){wr(n);const Le=Array.from(arguments),Ne=[],qe=[];function We(H){Ne.push(H)}function ps(H){qe.push(H)}Ts(_,{args:Le,name:ue[Bi],store:B,after:We,onError:ps});let Z;try{Z=z.apply(this&&this.$id===t?this:B,Le)}catch(H){throw Ts(qe,H),H}return Z instanceof Promise?Z.then(H=>(Ts(Ne,H),H)).catch(H=>(Ts(qe,H),Promise.reject(H))):(Ts(Ne,Z),Z)};return ue[Va]=!0,ue[Bi]=V,ue},$={_p:n,$id:t,$onAction:za.bind(null,_),$patch:y,$reset:C,$subscribe(z,V={}){const ue=za(f,z,V.detached,()=>Le()),Le=o.run(()=>dt(()=>n.state.value[t],Ne=>{(V.flush==="sync"?l:u)&&z({storeId:t,type:ln.direct,events:w},Ne)},zt({},a,V)));return ue},$dispose:I},B=Kn($);n._s.set(t,B);const te=(n._a&&n._a.runWithContext||Vp)(()=>n._e.run(()=>(o=uc()).run(()=>e({action:L}))));for(const z in te){const V=te[z];if(ae(V)&&!Gp(V)||Ft(V))i||(m&&Qp(V)&&(ae(V)?V.value=m[z]:Hi(V,m[z])),n.state.value[t][z]=V);else if(typeof V=="function"){const ue=L(V,z);te[z]=ue,c.actions[z]=V}}return zt(B,te),zt(Q(B),te),Object.defineProperty(B,"$state",{get:()=>n.state.value[t],set:z=>{y(V=>{zt(V,z)})}}),n._p.forEach(z=>{zt(B,o.run(()=>z({store:B,app:n._a,pinia:n,options:c})))}),m&&i&&s.hydrate&&s.hydrate(B.$state,m),u=!0,l=!0,B}/*! #__NO_SIDE_EFFECTS__ */function Qa(t,e,s){let n;const r=typeof e=="function";n=r?s:e;function i(o,c){const a=R_();return o=o||(a?tn(Ba,null):null),o&&wr(o),o=qa,o._s.has(t)||(r?Wa(t,e,n,o):Kp(t,n,o)),o._s.get(t)}return i.$id=t,i}function Ga(t,e){return di()?(fc(t,e),!0):!1}const Ka=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Yp=Object.prototype.toString,Jp=t=>Yp.call(t)==="[object Object]",rs=()=>{},Zp=Xp();function Xp(){var t,e,s;return Ka&&((t=window)===null||t===void 0||(t=t.navigator)===null||t===void 0?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window)===null||e===void 0||(e=e.navigator)===null||e===void 0?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test((s=window)===null||s===void 0?void 0:s.navigator.userAgent))}function Ya(...t){if(t.length!==1)return Wh(...t);const e=t[0];return typeof e=="function"?Yn(Bh(()=>({get:e,set:rs}))):xe(e)}function zi(t){return Array.isArray(t)?t:[t]}function em(t,e,s){return dt(t,e,{...s,immediate:!0})}const un=Ka?window:void 0;function is(t){var e;const s=Tt(t);return(e=s?.$el)!==null&&e!==void 0?e:s}function Vi(...t){const e=[],s=()=>{e.forEach(c=>c()),e.length=0},n=(c,a,u,l)=>(c.addEventListener(a,u,l),()=>c.removeEventListener(a,u,l)),r=pt(()=>{const c=zi(Tt(t[0])).filter(a=>a!=null);return c.every(a=>typeof a!="string")?c:void 0}),i=em(()=>{var c,a;return[(c=(a=r.value)===null||a===void 0?void 0:a.map(u=>is(u)))!==null&&c!==void 0?c:[un].filter(u=>u!=null),zi(Tt(r.value?t[1]:t[0])),zi(J(r.value?t[2]:t[1])),Tt(r.value?t[3]:t[2])]},([c,a,u,l])=>{if(s(),!c?.length||!a?.length||!u?.length)return;const f=Jp(l)?{...l}:l;e.push(...c.flatMap(_=>a.flatMap(w=>u.map(m=>n(_,w,m,f)))))},{flush:"post"}),o=()=>{i(),s()};return Ga(s),o}let Ja=!1;function tm(t,e,s={}){const{window:n=un,ignore:r=[],capture:i=!0,detectIframe:o=!1,controls:c=!1}=s;if(!n)return c?{stop:rs,cancel:rs,trigger:rs}:rs;if(Zp&&!Ja){Ja=!0;const y={passive:!0};Array.from(n.document.body.children).forEach(C=>C.addEventListener("click",rs,y)),n.document.documentElement.addEventListener("click",rs,y)}let a=!0;const u=y=>Tt(r).some(C=>{if(typeof C=="string")return Array.from(n.document.querySelectorAll(C)).some(I=>I===y.target||y.composedPath().includes(I));{const I=is(C);return I&&(y.target===I||y.composedPath().includes(I))}});function l(y){const C=Tt(y);return C&&C.$.subTree.shapeFlag===16}function f(y,C){const I=Tt(y),L=I.$.subTree&&I.$.subTree.children;return L==null||!Array.isArray(L)?!1:L.some($=>$.el===C.target||C.composedPath().includes($.el))}const _=y=>{const C=is(t);if(y.target!=null&&!(!(C instanceof Element)&&l(t)&&f(t,y))&&!(!C||C===y.target||y.composedPath().includes(C))){if("detail"in y&&y.detail===0&&(a=!u(y)),!a){a=!0;return}e(y)}};let w=!1;const m=[Vi(n,"click",y=>{w||(w=!0,setTimeout(()=>{w=!1},0),_(y))},{passive:!0,capture:i}),Vi(n,"pointerdown",y=>{const C=is(t);a=!u(y)&&!!(C&&!y.composedPath().includes(C))},{passive:!0}),o&&Vi(n,"blur",y=>{setTimeout(()=>{var C;const I=is(t);((C=n.document.activeElement)===null||C===void 0?void 0:C.tagName)==="IFRAME"&&!I?.contains(n.document.activeElement)&&e(y)},0)},{passive:!0})].filter(Boolean),v=()=>m.forEach(y=>y());return c?{stop:v,cancel:()=>{a=!1},trigger:y=>{a=!0,_(y),a=!1}}:v}function sm(){const t=Xn(!1),e=_r();return e&&zc(()=>{t.value=!0},e),t}function nm(t){const e=sm();return pt(()=>(e.value,!!t()))}function rm(t,e,s={}){const{window:n=un,...r}=s;let i;const o=nm(()=>n&&"ResizeObserver"in n),c=()=>{i&&(i.disconnect(),i=void 0)},a=dt(pt(()=>{const l=Tt(t);return Array.isArray(l)?l.map(f=>is(f)):[is(l)]}),l=>{if(c(),o.value&&n){i=new ResizeObserver(e);for(const f of l)f&&i.observe(f,r)}},{immediate:!0,flush:"post"}),u=()=>{c(),a()};return Ga(u),{isSupported:o,stop:u}}function im(t=un,e){t&&typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame(e):e()}function om(t={}){var e,s;const{window:n=un}=t,r=Ya(t?.element),i=Ya((e=t?.input)!==null&&e!==void 0?e:""),o=(s=t?.styleProp)!==null&&s!==void 0?s:"height",c=Xn(1),a=Xn(0);function u(){var l;if(!r.value)return;let f="";r.value.style[o]="1px",c.value=(l=r.value)===null||l===void 0?void 0:l.scrollHeight;const _=Tt(t?.styleTarget);_?_.style[o]=`${c.value}px`:f=`${c.value}px`,r.value.style[o]=f}return dt([i,r],()=>Xt(u),{immediate:!0}),dt(c,()=>{var l;return t==null||(l=t.onResize)===null||l===void 0?void 0:l.call(t)}),rm(r,([{contentRect:l}])=>{a.value!==l.width&&im(n,()=>{a.value=l.width,u()})}),t?.watch&&dt(t.watch,u,{immediate:!0,deep:!0}),{textarea:r,input:i,triggerResize:u}}const As=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},cm={},am={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 200 200",fill:"none"};function lm(t,e){return Y(),ee("svg",am,[...e[0]||(e[0]=[R("path",{d:"M123.669 110.669L169.919 157.002C171.669 158.836 172.586 161.002 172.586 163.669C172.586 166.336 171.669 168.502 169.919 170.252C168.169 172.002 165.919 172.919 163.253 172.919C160.586 172.919 158.419 172.002 156.586 170.252L110.336 124.002",fill:"#8196A1"},null,-1),R("path",{d:"M79.0035 135.247C71.0035 135.247 62.8368 133.497 55.0868 129.831C41.6702 123.414 31.5868 112.164 26.6702 98.164C21.7535 84.164 22.5035 69.0806 28.9202 55.664C35.3368 42.2473 46.5868 32.164 60.5868 27.2473C74.5868 22.3306 89.6702 23.0806 103.087 29.4973C107.837 31.7473 109.837 37.4973 107.587 42.2473C105.337 46.9973 99.5868 49.0806 94.8368 46.7473C86.0868 42.5806 76.1701 41.9973 67.0035 45.2473C57.8368 48.4973 50.4202 55.0806 46.2535 63.914C42.0868 72.7473 41.5035 82.5806 44.7535 91.7473C48.0035 100.914 54.5868 108.331 63.4202 112.497C81.5868 121.164 103.337 113.497 112.003 95.3306C114.253 90.5806 120.003 88.5806 124.753 90.8306C129.503 93.0806 131.587 98.8306 129.253 103.581C119.753 123.497 99.7535 135.164 79.0035 135.164V135.247Z",fill:"#8196A1"},null,-1),R("path",{d:"M141.83 113.414C127.997 67.0804 137.413 76.4971 91.0801 62.6637C88.9967 61.9971 88.9967 59.1637 91.0801 58.4971C137.413 44.6637 127.997 54.0804 141.83 7.74707C142.497 5.66374 145.33 5.66374 145.997 7.74707C159.83 54.0804 150.413 44.6637 196.747 58.4971C198.83 59.1637 198.83 61.9971 196.747 62.6637C150.413 76.4971 159.83 67.0804 145.997 113.414C145.33 115.497 142.497 115.497 141.83 113.414Z",fill:"#8196A1"},null,-1),R("path",{d:"M99.002 188.584C92.502 166.667 96.9186 171.167 75.002 164.584C74.002 164.251 74.002 162.917 75.002 162.584C96.9186 156.084 92.4186 160.501 99.002 138.584C99.3353 137.584 100.669 137.584 101.002 138.584C107.502 160.501 103.085 156.001 125.002 162.584C126.002 162.917 126.002 164.251 125.002 164.584C103.085 171.084 107.585 166.667 101.002 188.584C100.669 189.584 99.3353 189.584 99.002 188.584Z",fill:"#8196A1"},null,-1)])])}const Za=As(cm,[["render",lm]]),Xa="1.12.6";function um(){return new AbortController().signal}function fm(...t){const e=t.length;if(e===0)return um();if(e===1)return t[0];const s=new AbortController;for(const n of t)if(!(!n||!n.addEventListener)){if(n.aborted)return AbortSignal.abort(n.reason);n.addEventListener("abort",()=>s.abort(n.reason))}return s.signal}const ge=Object.freeze({ASK:"ask",SEARCH:"search",RECOMMENDATION:"recommendation",INTERACTIONS:"interactions"}),Ye=Object.freeze({QUESTIONS:"questions",RELATED_QUESTIONS:"related_questions",TRENDING_QUESTIONS:"trending_questions",SEARCH:"search",AUTOCOMPLETE:"autocomplete",SEARCH_AUTOCOMPLETE:"search_autocomplete",MGET:"mget",USER_TO_PRODUCTS:"user_to_products",USER_TO_CATEGORIES:"user_to_categories",USER_TO_ATTRIBUTES:"user_to_attributes",USER_TO_TRENDING:"user_to_trending",USER_TO_HISTORY:"user_to_history",PRODUCT_TO_PRODUCTS:"product_to_products",UPLOAD:"upload"}),fn=Object.freeze(Object.defineProperty({__proto__:null,GROUP:ge,NAME:Ye},Symbol.toStringTag,{value:"Module"}));function Wi(t,e){if(!t)return;const s=t.indexOf(e);s>-1&&t.splice(s,1)}function dm(t,e){if(!t)return;const s=t.findIndex(e);s>-1&&t.splice(s,1)}function os(t){return Array.isArray(t)?t:t===void 0?[]:[t]}function G(t){if(typeof t!="object")return t;const e={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s]!==void 0&&(e[s]=t[s]);return e}function yr(t){return t==null}function hm(t,e,s){if(t.has(e))return t.get(e);const n=s(e);return t.set(e,n),n}function Vt(t,e,s){s=typeof s=="string"?[s]:s,Object.defineProperties(t,s.reduce((n,r)=>(n[r]={get:()=>{const i=e[r];return typeof i=="function"?i.bind(e):i}},n),{}))}function _m(t,e,s){s=typeof s=="string"?[s]:s,Object.defineProperties(t,s.reduce((n,r)=>(n[r]={get:()=>e[r],set:i=>{e[r]=i}},n),{}))}function ce(t,e){for(const s in e)e.hasOwnProperty(s)&&Object.defineProperty(t,s,{value:e[s]})}function pm(t,e){const s=Symbol.for(e);Object.defineProperty(t,s,{value:!0}),Object.defineProperty(t,"isTypeOf",{value:n=>n&&n instanceof t||typeof n.constructor=="function"&&n.constructor[s]===!0})}function el(t){return t.replace(/-([a-z])/g,e=>e[1].toUpperCase())}function tl(t){return t.replace(/[-_][a-z]/g,e=>e[1].toUpperCase())}function sl(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function mm(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function gm(t){return t.replaceAll("-","_")}function bm(t){return t.replace(/[-_]([a-zA-Z])/g,(e,s)=>` ${s}`)}class nl{constructor(e,{duration:s=0,onDuration:n,offDuration:r,state:i}={}){if(typeof e!="function")throw new Error(`Callback must be a function: ${e}`);this._callback=e,Object.defineProperty(this,"durations",{value:Object.freeze({on:n!==void 0?n:s,off:r!==void 0?r:s})}),this._value=this._state=!!i,this._active=!0}get active(){return this._active}get state(){return this._state}get value(){return this._value}set value(e){if(e=!!e,this._value===e)return;wm(this);const s=this.durations[e?"on":"off"];s?this._timeout=setTimeout(()=>rl(this,e),s):rl(this,e),this._value=e}disconnect(){this._active=!1}}function wm(t){t._timeout&&(clearTimeout(t._timeout),t._timeout=void 0)}function rl(t,e){t._state!==e&&(t._state=e,t._active&&t._callback(e))}function ym(t){return typeof t=="string"?document.querySelector(t):t}function Qi(t,e,{root:s=t.ownerDocument}={}){for(;t&&t!==s;t=t.parentElement){const n=e(t);if(n!==void 0)return n}}function Em(t){const{tagName:e}=t;customElements.define(e,t);for(const s of document.querySelectorAll(e))customElements.upgrade(s)}async function Er(t){return new Promise((e,s)=>{window.requestAnimationFrame(async n=>{try{await t(n),e()}catch(r){s(r)}})})}async function Gi(t,{area:e=.5,duration:s=1e3,signal:n}={}){return t=ym(t),new Promise((r,i)=>{const o=new nl(a=>{a&&(o.disconnect(),c.disconnect(),r())},{onDuration:s}),c=new IntersectionObserver(a=>{o.value=a[0].isIntersecting},{threshold:e});c.observe(t),n&&n.addEventListener&&n.addEventListener("abort",()=>{o.disconnect(),c.disconnect(),i(new DOMException("Aborted","AbortError"))})})}async function Sm(){document.readyState==="loading"&&await new Promise(t=>{document.addEventListener("DOMContentLoaded",t,{once:!0})})}function nt(t){return t=`${t}`,t&&t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function dn(){return vm()||Tm()||Am()}function vm(){return crypto&&crypto.randomUUID?crypto.randomUUID():void 0}function Tm(){if(!URL||!URL.createObjectURL||URL.revokeObjectURL||!Blob)return;const t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substring(e.lastIndexOf("/")+1)}function Am(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}function Om(t,e){const s=Sr(()=>window.localStorage.getItem(t)),n=Sr(()=>Cm(t)),r=s||n||`${e()}`;return r&&!s&&Sr(()=>window.localStorage.setItem(t,r)),r&&!n&&Sr(()=>xm(t,r)),r}function Cm(t){const e=`; ${document.cookie}`,s=`; ${encodeURIComponent(t)}=`,n=e.indexOf(s);if(n<0)return;const r=n+s.length,i=e.indexOf(";",r);return decodeURIComponent(i<0?e.substring(r):e.substring(r,i))}function xm(t,e){document.cookie=`${encodeURIComponent(t)}=${encodeURIComponent(e)}; max-age=31536000; path=/`}function Sr(t){try{return t()}catch(e){if(!Rm(e))throw e}}function Rm(t){return t.name==="SecurityError"}function Im(t,e,s){return t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(e)+"="+encodeURIComponent(`${s}`)}function vr(t){return new km(t)}class km{constructor(e){this._value=e;const s=n=>{this._value=n};ce(this,{set:s,args:(...n)=>s(n),t:()=>s(!0),f:()=>s(!1),merge:n=>s({...this._value,...n})})}get value(){return this._value}}class xt{constructor(){const e=this;e.promise=new Promise((s,n)=>{e.resolve=s,e.reject=n}),Object.freeze(this)}}class $m{constructor(){this._index=-1,this._done=!1,this._aborted=!1,this._abortReason=void 0,this._error=void 0}get aborted(){return this._aborted}get abortReason(){return this._abortReason}get done(){return this._done}update(e,s=!1){this._done||(this._value=e,this._done=s,this._index++,this._resolution&&(this._resolution.resolve(),this._resolution=void 0))}error(e){this._error=e,this._resolution&&(this._resolution.reject(e),this._resolution=void 0)}abort(e){this._aborted=!0,this._abortReason=e,this._resolution&&(e instanceof Error?this._resolution.reject(e):this._resolution.resolve(),this._resolution=void 0)}async*[Symbol.asyncIterator](){let e=0;for(;;){if(this._error)throw this._error;if(this._aborted||(e>this._index&&(this._resolution||(this._resolution=new xt),await this._resolution.promise),this._aborted))break;const s=this._done,n=this._index+1;if(yield this._value,this._aborted||s)break;e=n}}}function Pm(t,{interval:e=1e3,errorLimit:s=10,onError:n,onResponse:r,signal:i}={}){if(i&&i.aborted)return[];let o=0,c,a=!1,u;function l(){c&&clearInterval(c),a=!0}const f=new $m;return c=setInterval(async()=>{let _,w,m;try{if([_,w,m]=await t(i?{signal:i}:{}),a||!yr(u)&&m<=u)return;yr(m)||(u=m),r&&r(_,w,m),o=0}catch(v){n&&n(v),o++,o>s&&(l(),f.error(v));return}f.update(_,w),w&&l()},e),i&&i.addEventListener&&i.addEventListener("abort",()=>{l(),f.abort(i.reason)}),f}function Lm(t,{onError:e=n=>console.error(n),transform:s=n=>n}={}){try{s(t)()}catch(n){e(n)}}function il(t,e){const s=window[t]||(window[t]=[]);if(s._processed)return;s._processed=!0;const n=r=>Lm(r,e);Object.defineProperty(s,"push",{value:n});for(const r of s)n(r)}const Nm="1.12.6";let Um;try{Um=document.currentScript}catch{}async function ol(t){try{let e=Dm(t);return e||(e=document.createElement("link"),e.rel="stylesheet",e.href=t,document.head.appendChild(e)),Fm(e)}catch(e){console.error(e)}}function cl(t){return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${Nm}/dist/css/${t}.css`}function Dm(t){return document.head.querySelector(`link[href="${t}"]`)}async function Fm(t){await Mm(t),await jm(t)}async function Mm(t){if(!t.sheet)return new Promise((e,s)=>{let n;t.onerror=()=>{n&&clearInterval(n),s()},n=setInterval(()=>{t.sheet&&(n&&clearInterval(n),e())},100)})}async function jm(t){if(!al(t))return new Promise(e=>{let s;s=setInterval(()=>{al(t)&&(s&&clearInterval(s),e())},100)})}function al(t){for(const e of document.styleSheets)if(e.ownerNode===t)return!0;return!1}function ll(t){let e;return s=>{e&&clearTimeout(e),e=setTimeout(()=>{e=void 0,s()},t)}}function ul(t,{depth:e=5,...s}={}){return Ki(t,e)}function Ki(t,e,s){if(e<=0)return"(...)";switch(typeof t){case"object":if(t)return t.length!==void 0?Array.prototype.map.call(t,n=>Ki(n,e-1)):t instanceof Node?Bm(t):qm(t,e);default:return t}}function qm(t,e,s){const n={};if(e<=0)return n;for(const r in t){const i=t[r];typeof i!="function"&&(r.startsWith("_")&&typeof i=="object"&&i.constructor.name!=="Object"||(n[r]=Ki(i,e-1)))}return n}function Bm(t){return t instanceof Element?`<${t.tagName.toLowerCase()}${t.id?` id="${t.id}"`:""}${t.className?` class="${t.className}"`:""}>`:`[TextNode](${t.length})`}function hn(t,e){const s=Object.getOwnPropertyDescriptors(e),n=Object.getOwnPropertyDescriptors(t);for(const[r,i]of Object.entries(s))r!=="constructor"&&n[r]===void 0&&Object.defineProperty(t,r,i)}function Tr(t){const e={},s=new Set;for(let n=t;n!==Object.prototype;n=Object.getPrototypeOf(n)){const r=Object.getOwnPropertyDescriptors(n);for(const i in r){if(i==="constructor"||i.startsWith("_")||s.has(i))continue;s.add(i);const{value:o}=r[i];o&&(e[i]=typeof o=="function"?o.bind(t):o)}}return Object.freeze(e)}function Ar(t={},e={}){const s=t.metadata||e.metadata?G({...t.metadata,...e.metadata}):void 0,n=t._meta||e._meta?G({...t._meta,...e._meta}):void 0;return G({...t,...e,metadata:s,_meta:n})}function Je(t={},e={}){const s=t.context&&t.context.custom_context||e.context&&e.context.custom_context?G({...t.context&&t.context.custom_context,...e.context&&e.context.custom_context}):void 0,n=t.context||e.context?G({...t.context,...e.context,custom_context:s}):void 0;return G({...t,...e,context:n})}const Hm=100,zm=4;function Vm(t){const e=Wm(t);return(s,n,r,i)=>{const o=e(r,n);return s+Math.max(i-r,0)*o/1e3}}function Wm({speed:t=Hm,acceleration:e=zm}={}){if(typeof t=="function")return t;if(typeof t!="number")throw new Error(`Invalid speed: ${t}`);if(typeof e!="number")throw new Error(`Invalid acceleration: ${e}`);return(s,n)=>{let r=t*(Math.random()+.5);return e>0&&n!==void 0&&s>n&&(r*=1+(s-n)*e/1e3),r}}const Yi=Symbol.for("miso:resources");class Qm{constructor(){this._resources=new Map;const e=window[Yi]||[];for(const s of e)try{const[n,r]=s;this.push([n,r])}catch{}}push([e,s]){fl(this._resources,e).resolve(s)}async get(e){return fl(this._resources,e).promise}}function fl(t,e){if(t.has(e))return t.get(e);const s=new xt;return t.set(e,s),s}function Gm(){return window[Yi]||(window[Yi]=new Qm)}class Km{constructor(e,s){this._dispatchRequested=!1,this._requests=[],this._run=e,this._error=s||(n=>console.error(n)),this._bulkId=0,this._dispatch=this._dispatch.bind(this)}get info(){return{bulkId:this._bulkId,index:this._requests.length}}async run(e){const s=new xt;return this._requests.push({action:e,resolution:s}),this._requestDispatch(),s.promise}_requestDispatch(){this._dispatchRequested||(this._dispatchRequested=!0,setTimeout(this._dispatch))}_dispatch(){if(!this._dispatchRequested)return;this._dispatchRequested=!1;const e=this._requests,s=this._bulkId++;this._requests=[];try{this._run(e,{bulkId:s})}catch(n){this._error(n)}}}class Os{constructor({target:e,error:s,replays:n=[]}={}){if(this._error=s||(r=>console.error(r)),!Array.isArray(n))throw new Error(`Replays option must be an array of strings: ${n}`);this._replays=new Set(n),this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={},e&&this._injectSubscribeInterface(e)}emit(e,s){const n={data:s,meta:{name:e,ts:Date.now()}},r=this._namedCallbacks[e];if(r)for(const i of r)i(n);for(const i of this._unnamedCallbacks)i(n);this._shallStoreForReplay(e)&&(this._pastEvents[e]||(this._pastEvents[e]=[])).push(n)}on(e,s){return this._checkName(e),this._checkCallback(s),this._on(e,this._wrapCallback(s))}once(e){this._checkName(e);const s=this;return new Promise((n,r)=>{const i=s._on(e,o=>{setTimeout(()=>i());try{n(o)}catch(c){r(c)}})})}clear(){this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={}}_checkName(e){if(typeof e!="string")throw new Error(`Event name should be a string: ${e}`)}_checkCallback(e){if(typeof e!="function")throw new Error(`Event callback should be a function: ${e}`)}_shallStoreForReplay(e){return this._replays.has(e)}_wrapCallback(e){const s=this;return({data:n,meta:r})=>{try{e(n,r)}catch(i){s._error(i)}}}_on(e,s){if(e==="*"?this._unnamedCallbacks.push(s):(this._namedCallbacks[e]||(this._namedCallbacks[e]=[])).push(s),e==="*")for(const n in this._pastEvents)this._pastEvents[n].forEach(s);else this._pastEvents[e]&&this._pastEvents[e].forEach(s);return()=>this._off(e,s)}_off(e,s){if(e==="*")Wi(this._unnamedCallbacks,s);else{const n=this._namedCallbacks[e];n&&Wi(n,s)}}_injectSubscribeInterface(e){Vt(e,this,["on","once"])}}function Ym(t,e){if(t!==void 0&&typeof t!="string"&&e===void 0&&(e=t,t=void 0),t!==void 0&&(typeof t!="string"||!t))throw new Error(`Invalid Component name: "${t}"`);return Object.freeze({name:t,parent:e,path:Jm(t,e),uuid:dn()})}function Jm(t,e){return Object.freeze([...e&&e.meta&&e.meta.path||[],...t?[t]:[]])}class De{constructor(e,s){const n=Ym(e,s);ce(this,{meta:n});const r=this._error=this._error.bind(this);this._events=new Os({target:this,error:r,replays:["child"]}),this._warn=this._warn.bind(this),s=n.parent,s&&s._events&&s._events.emit("child",this)}_warn(...e){const s=this.meta.parent;(s&&s._warn||console.warn)(...e)}_error(...e){const s=this.meta.parent;(s&&s._error||console.error)(...e)}}pm(De,"miso:component");class dl extends De{constructor(e,s,{libName:n,keyName:r}={}){switch(super(e,s),this._events._replays.add("register"),this._libraries={},this._libResolutions={},this._libName=n,typeof r){case"string":this._keyFn=(i=>i[r]);break;case"function":this._keyFn=r;break;default:throw new Error(`Expect keyName to be a string or a function: ${r}`)}}isRegistered(e){return this._checkKey(e),!!this._libraries[e]}get registered(){return Object.values(this._libraries)}async whenRegistered(e){if(this.isRegistered(e))return this._libraries[e];const{promise:s}=this._libResolutions[e]||(this._libResolutions[e]=new xt);return s}register(...e){for(const s of e)this._register(s)}_checkKey(e){if(typeof e!="string"||!e)throw new Error(`Expect key to be a non-empty string: ${e}`)}_checkLib(e){if(typeof e!="function")throw new Error(`Expect lib to be a class or function: ${e}`)}_register(e){this._checkLib(e);const s=this._keyFn(e);this._checkKey(s);const n=this._libraries||(this._libraries={});n[s],n[s]=e,this._libResolutions[s]&&this._libResolutions[s].resolve(e),this._events.emit("register",e)}}class Zm{constructor(e,s){this._callback=e,this._options=s||{},s!==!1&&(this._intersection=new IntersectionObserver(this._handleIntersection.bind(this),{threshold:s.area||.5}),this._continuity=new nl(this._handleContinuity.bind(this),{onDuration:s.duration||1e3})),this._displayed=void 0,this._intersecting=!1,this._triggered=new Set}observe(e){this._options!==!1&&this._intersection.observe(e)}unobserve(e){this._options!==!1&&this._intersection.unobserve(e)}display(e){this._options!==!1&&(this._triggered.has(e)&&(e=void 0),this._displayed!==e&&(this._displayed=e,this._continuity.value=!1,this._syncContinuity()))}disconnect(){this._options!==!1&&(this._continuity.disconnect(),this._intersection.disconnect())}get triggeredCount(){return this._triggered.size}get triggered(){return new Set(this._triggered)}_syncContinuity(){this._continuity.value=this._intersecting&&this._displayed!==void 0}_handleIntersection(e){this._intersecting=e[0].isIntersecting,this._syncContinuity()}_handleContinuity(e){const s=this._displayed;if(e&&s!==void 0){if(this._triggered.has(s))return;this._triggered.add(s),this._displayed=void 0,this._callback(s)}}}class Xm{constructor(e){this._ac=new AbortController,this._timeout=e,this.touch()}clear(){this._timeoutId!==void 0&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}touch(){this.clear(),this._timeoutId=setTimeout(()=>this.abort(),this._timeout)}get signal(){return this._ac.signal}abort(e){this.clear(),this._ac.abort(e||new Error(`Stall timeout: data stay unchanged for ${this._timeout/1e3} seconds.`))}}const hl=Object.freeze({DATA_ENDPOINT:"https://api-edge.askmiso.com/v1",EVENT_ENDPOINT:"https://api.askmiso.com/v1"});class _l{constructor(e,s){this._client=e,this._root=s,this._bulk=new Km(this._runBulkFetch.bind(this),e._error.bind(e))}async fetch(e,s,{method:n="POST",headers:r,timeout:i}={}){const{apiKey:o,request:c={}}=this._client.options;i=i||c.timeout;const a=n!=="GET"&&s!=null?JSON.stringify(s):void 0,u=i?AbortSignal.timeout(i):void 0,l=await(this._root._customFetch||window.fetch)(e,G({method:n,headers:r,body:a,cache:"no-cache",mode:"cors",signal:u})),f=await l.json();if(l.status>=400||f.errors){var _=new Error(f.message);throw _.data=f,_.status=l.status,_}return f}get bulkInfo(){return this._bulk.info}async fetchForBulk(e,s,n,{method:r}={}){if(r&&r!=="POST")throw new Error(`Non-POST API is not supported in bulk mode: ${url}`);return this._bulk.run({apiGroup:e,apiName:s,payload:n})}async _runBulkFetch(e){const s=this.url(["bulk"]),n={requests:e.map(({action:{apiGroup:i,apiName:o,payload:c}})=>({api_name:`${i}/${o}`,body:c}))},{data:r}=await this.fetch(s,n);for(let i=0,o=e.length;i<o;i++){const{resolution:c}=e[i],{error:a,status_code:u,body:l}=r[i];u>=400||a?c.reject({status_code:u,body:l}):c.resolve(l)}}sendBeacon(e,s,{method:n}={}){if(n&&n!=="POST")throw new Error(`Non-POST API is not supported in useBeacon mode: ${e}`);if(!(this._root._customSendBeacon?this._root._customSendBeacon(e,JSON.stringify(s)):window.navigator.sendBeacon(e,JSON.stringify(s))))throw new Error(`Send beacon unsuccessful: ${e}`)}url(e){const{apiKey:s}=this._client.options,n=e.filter(i=>i).join("/");return`${`${this.getApiEndpoint(n)}/${n}`}?api_key=${window.encodeURIComponent(s)}`}getApiEndpoint(e){const{dataEndpoint:s=hl.DATA_ENDPOINT,eventEndpoint:n=hl.EVENT_ENDPOINT}=this._client.options;return e==="interactions"?n:s}applyUrlPasses(e,{apiGroup:s,apiName:n,url:r}){const i=this._client;for(const o of this._root._urlPasses)try{r=o({client:i,apiGroup:s,apiName:n,url:r})||r}catch(c){(e._error||console.error)(c)}return r}applyPayloadPasses(e,{apiGroup:s,apiName:n,payload:r}){const i=this._client;for(const o of this._root._payloadPasses)try{r=o({client:i,apiGroup:s,apiName:n,payload:r})||r}catch(c){(e._error||console.error)(c)}return r}applyHeaderPasses(e,{apiGroup:s,apiName:n,payload:r,headers:i,options:o}){const c=this._client;for(const a of this._root._headersPasses)try{i=a({client:c,apiGroup:s,apiName:n,payload:r,headers:i,options:o})||i}catch(u){(e._error||console.error)(u)}return i}}class _n extends De{constructor(e,s){super(s,e),this._apiPath=s,this.helpers=e.helpers,this.clientOptions=e._client.options,this.context=e._client.context}async _run(e,s,n={}){const{bulk:r}=n,i=r?{bulk:this.helpers.bulkInfo}:void 0,o=this._apiPath,c=this._url({apiGroup:o,apiName:e,payload:s,options:n}),a=this._headers({apiGroup:o,apiName:e,payload:s,options:n});s=this._preprocess({apiGroup:o,apiName:e,payload:s,options:n});const u={apiGroup:o,apiName:e,payload:s,url:c,headers:a,options:n};this._events.emit("request",{...u,...i});const l=await this._send(u),f={...u,response:l};return this._events.emit("response",{...f,...i}),this._postprocess(f)}_headers({apiGroup:e,apiName:s,payload:n,options:r}){return this.helpers.applyHeaderPasses(this,{apiGroup:e,apiName:s,payload:n,headers:{},options:r})}_preprocess({apiGroup:e,apiName:s,payload:n,options:r}){return this.helpers.applyPayloadPasses(this,{apiGroup:e,apiName:s,payload:n,options:r})}_url({apiGroup:e,apiName:s,options:n}){const r=this.helpers.url([e,s],n);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:s,url:r,options:n})}async _send({apiGroup:e,apiName:s,url:n,headers:r,payload:i,options:{bulk:o,...c}={}}){return o?this.helpers.fetchForBulk(e,s,i):this.helpers.fetch(n,i,{...c,headers:r})}_postprocess({response:e}){return e.data}}const{GROUP:eg,NAME:pl}=fn;class ml extends _n{constructor(e){super(e,eg.INTERACTIONS)}async upload(e,s){try{return await this._run(pl.UPLOAD,e,s)}catch(n){if(n.status===400&&n.message&&n.message.toLowerCase().indexOf("playground")>-1)this._warn("Ignore interactions uploaded to playground app.");else throw n}}_url({apiGroup:e,apiName:s,options:n}){const r=this.helpers.url([this._apiPath],n);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:s,url:r,options:n})}_preprocess({apiGroup:e,apiName:s,payload:n}){return s===pl.UPLOAD&&(n=this._normalizeUploadPayload(n)),super._preprocess({apiGroup:e,apiName:s,payload:n})}_normalizeUploadPayload(e){if(typeof e!="object")throw new Error(`Interactions payload has to be either an object or an array of objects: ${e}`);return Array.isArray(e)||(e=[e]),{data:e}}async _send({options:{useBeacon:e=!0,...s}={},...n}){if(e){const{url:r,payload:i}=n;return this.helpers.sendBeacon(r,i,s),{}}else return super._send({...n,options:s})}}class tg{constructor(e={}){this._ac=new AbortController,this._options=e}async get(e){return this._get({...this._options,...e})}_get(e){throw new Error("Not implemented")}abort(e){this._ac.abort(e)}[Symbol.asyncIterator](){const e=async({signal:u}={})=>{const l=await this.get();return[l,this._isFinished(l),this._revisionOf(l)]};let{pollingInterval:s,signal:n,stallTimeout:r=12e4,...i}=this._options;const o=new Xm(r);n=fm(this._ac.signal,o.signal,n);let c;return Pm(e,{interval:s,signal:n,onResponse:(u,l)=>{l?o.clear():this._isUpdated(c,u)&&o.touch(),c=u},...i})[Symbol.asyncIterator]()}_isFinished(e){return!!(e&&e.finished)}_isUpdated(e,s){return!e||e.answer_stage!==s.answer_stage||Or(e.answer)!==Or(s.answer)||Or(e.reasoning)!==Or(s.reasoning)}_revisionOf(e){return e&&e.revision}}class gl extends tg{constructor(e,s,n,r){super(r),this._api=e,this._method=s,this._id=n}async _get(e){return this._api[this._method](this._id,e)}}function Or(t=""){return t.length}const{GROUP:sg,NAME:Rt}=fn;let bl=class extends _n{constructor(e){super(e,sg.ASK)}async questions(e,s={}){if(El(e)&&(e={question_id:e}),e.question_id)return new wl(this,e,s);const n=await this._run(Rt.QUESTIONS,e,s);return new wl(this,n,s)}async _questions(e,s){return this._run(Rt.QUESTIONS,e,s)}async _questionGet(e,s){return this._run(`${Rt.QUESTIONS}/${e}/answer`,void 0,{...s,method:"GET"})}async relatedQuestions(e,s={}){return this._run(Rt.RELATED_QUESTIONS,e,s)}async trendingQuestions(e,s={}){return this._run(Rt.TRENDING_QUESTIONS,e,s)}async search(e,s={}){if(El(e)&&(e={question_id:e}),e.question_id)return new yl(this,e,s);const n=await this._run(Rt.SEARCH,e,s);return n.question_id?new yl(this,n,s):n}async _searchGet(e,s){return this._run(`${Rt.QUESTIONS}/${e}/answer`,void 0,{...s,method:"GET"})}async autocomplete(e,s){return this._run(Rt.AUTOCOMPLETE,e,s)}async searchAutocomplete(e,s){return this._run(Rt.SEARCH_AUTOCOMPLETE,e,s)}};class wl extends gl{constructor(e,s,n={}){super(e,"_questionGet",s.question_id,n),this._response=s}get questionId(){return this._id}}class yl extends gl{constructor(e,s,n={}){super(e,"_searchGet",s.question_id,n),ce(this,s),this._response=s}get questionId(){return this._id}}function El(t){return typeof t=="string"&&t.charAt(0)!=="{"}const{GROUP:ng,NAME:Ji}=fn;let Sl=class extends _n{constructor(e){super(e,ng.SEARCH)}async search(e,s){return this._run(Ji.SEARCH,e,s)}async autocomplete(e,s){return this._run(Ji.AUTOCOMPLETE,e,s)}async multipleGet(e,s){return this._run(Ji.MGET,e,s)}};const{GROUP:rg,NAME:Cs}=fn;let vl=class extends _n{constructor(e){super(e,rg.RECOMMENDATION)}async userToProducts(e,s){return this._run(Cs.USER_TO_PRODUCTS,e,s)}async userToCategories(e,s){return this._run(Cs.USER_TO_CATEGORIES,e,s)}async userToAttributes(e,s){return this._run(Cs.USER_TO_ATTRIBUTES,e,s)}async userToTrending(e,s){return this._run(Cs.USER_TO_TRENDING,e,s)}async userToHistory(e,s){return this._run(Cs.USER_TO_HISTORY,e,s)}async productToProducts(e,s){return this._run(Cs.PRODUCT_TO_PRODUCTS,e,s)}};class Tl extends De{constructor(e,s){super("api",e),this._client=e,this.helpers=new _l(e,s),this.interactions=new ml(this),this.ask=new bl(this),this.search=new Sl(this),this.recommendation=new vl(this)}}const ig=Object.freeze(Object.defineProperty({__proto__:null,Api:Tl,ApiBase:_n,ApiHelpers:_l,Ask:bl,Interactions:ml,Recommendation:vl,Search:Sl},Symbol.toStringTag,{value:"Module"}));let Al=class extends De{constructor(e){super("context",e),this._client=e}};const og={api:ig,context:{Context:Al}};class cg{constructor(e){ce(this,{install:e})}}function ag(t,e,s){const n=t.slice(4);if(e==="dev"){const r=s.src,i=r.indexOf("?"),o=i<0?r.length:i,c=r.lastIndexOf("/",o)+1,a=r.indexOf(".",c),u=a<0?"":r.slice(a,o);return`${r.slice(0,c)}plugins/${n}${u}`}else return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${e}/dist/umd/plugins/${n}.min.js`}class lg extends dl{constructor(e){super("plugins",e,{libName:"plugin class",keyName:"id"}),this._root=e,this._currentScript=document.currentScript,this._events._replays.add("install").add("subtree"),this._installed={},this._installedResolutions={},this._useRequests={},this._subtrees=[],this.context=new ug(this,og),this.plugins=new fg(this)}isInstalled(e){return this._checkKey(e),!!this._installed[e]}get installed(){return Object.values(this._installed)}get(e){return this._installed[e]}getPluginClass(e){return this._libraries[e]}use(e,s){if(typeof e=="function"&&e.id&&typeof e.id=="string"){this.register(e),this.use(e.id,s);return}let n;if(typeof e=="string"&&this.isInstalled(e)){n=this.get(e),this._tryConfig(n,s);return}if(typeof e=="string"&&!this.isRegistered(e)){(this._useRequests[e]||(this._useRequests[e]=[])).push(s);return}n=this._instantiate(e,s),this._install(n)}async install(e,s){return this.use(e,s),typeof e=="string"&&!this.isRegistered(e)&&await this._tryRegisterRemotely(e),this.whenInstalled(e)}async whenInstalled(e){if(typeof e=="function"&&e.id&&typeof e.id=="string"&&(e=e.id),this.isInstalled(e))return this.get(e);const{promise:s}=this._installedResolutions[e]||(this._installedResolutions[e]=new xt);return s}addSubtree(e){this._subtrees.push(e),this._events.emit("subtree",e)}addPayloadPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._payloadPasses.push(e)}addHeadersPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._headersPasses.push(e)}addUrlPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._urlPasses.push(e)}setCustomFetch(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._customFetch=e}setCustomSendBeacon(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._customSendBeacon=e}onHubUpdate(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubUpdateCallbacks.push(e)}onHubEmit(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubEmitCallbacks.push(e)}_tryConfig(e,s){s!==void 0&&(typeof e.config=="function"?(e.config(s),this._events.emit("config",[e,s])):this._warn(`Attempt to pass options to plugin "${e.id}", which offers no config() method.`))}_instantiate(e,s){switch(typeof e){case"string":this._checkKey(e);const n=this._libraries[e];if(!n)throw new Error(`Plugin class not found: ${e}`);const r=new n;return ce(r,{id:e}),this._tryConfig(r,s),r;case"function":return new cg(e)}throw new Error(`Unexpected parameters: ${e}`)}_install(e){if(typeof e.install!="function")throw new Error(`Expect plugin.install to be a function: ${e}`);try{e.installed=!1,e.install(this.MisoClient,this.context),e.installed=!0}catch(s){throw s}e.id&&(this._installed[e.id]=e,this._installedResolutions[e.id]&&(this._installedResolutions[e.id].resolve(e),delete this._installedResolutions[e.id])),this._events.emit("install",e)}_register(e){super._register(e),this._fulfillUseRequests(e.id)}_fulfillUseRequests(e){const s=this._useRequests[e];if(s){for(const n of s)try{this.use(e,n)}catch(r){this._error(r)}delete this._useRequests[e]}}async _tryRegisterRemotely(e){if(e.startsWith("std:"))try{await this._registerStdRemotely(e);return}catch(s){console.error(s)}throw new Error(`Cannot register plugin remotely: ${e}`)}async _registerStdRemotely(e){const{version:s}=this._root,n=s==="dev"?`plugin:${e}@dev:${this.MisoClient.uuid}`:`plugin:${e}@${s}`;if(!document.querySelector(`script[data-request="${n}"]`)){const i=document.createElement("script");i.async=!0,i.src=ag(e,s,this._currentScript),i.setAttribute("data-request",n),document.head.appendChild(i)}const r=await new Gm().get(n);!this.isRegistered(e)&&this.register(r)}}class ug{constructor(e,s){Vt(this,e,["getPluginClass","addSubtree","addPayloadPass","addHeadersPass","addUrlPass","setCustomFetch","setCustomSendBeacon","onHubUpdate","onHubEmit","whenInstalled","whenRegistered"]),ce(this,{classes:s})}}class fg{constructor(e){Vt(this,e,["installed","registered","isInstalled","isRegistered","whenInstalled","whenRegistered","get","register","use","install"])}}class dg extends De{constructor(){super(),this._events._replays.add("create"),this._pluginRoot=new lg(this),this._clients=[],this._payloadPasses=[],this._headersPasses=[],this._urlPasses=[],this._customFetch=void 0,this._customSendBeacon=void 0,this._hubUpdateCallbacks=[],this._hubEmitCallbacks=[],this.version=Xa,this._cmdRes=new xt}get instances(){return[...this._clients]}async any(){return this._clients[0]||this._any||(this._any=(await this._events.once("create")).data)}get cmdDone(){return this._cmdRes.promise}}const Wt=new dg;function hg(t){const e=Wt._pluginRoot;return Wt.MisoClient=e.MisoClient=t,Vt(t,Wt,["version","instances","any","meta","on","once","cmdDone"]),Vt(t,e,["plugins"]),t}function _g(t){Wt._clients.push(t),Wt._events.emit("create",t)}function pg(){Wt._cmdRes.resolve()}const mg=Object.freeze(Object.defineProperty({__proto__:null,debounce:ll,viewable:Gi},Symbol.toStringTag,{value:"Module"})),{currentScript:Ol}=document;let Zi=class Dn extends De{static attach(){if((window.MisoClients||(window.MisoClients=[])).push(Dn),window.MisoClient){window.MisoClient!==Dn&&console.warn(`window.MisoClient already exists: (${window.MisoClient.version}).`);return}window.MisoClient=Dn}static debug(){}constructor(e){super("client",Wt),this._config(e),this.context=new Al(this),this.api=new Tl(this,Wt),_g(this)}get version(){return Dn.version}_config(e){this.options=Object.freeze(this._normalizeOptions(e))}_normalizeOptions(e={}){if(typeof e=="string"&&(e={apiKey:e}),e.readConfigFromScriptUrl&&(e={...this._readConfigFromScriptUrl(),...e}),!e.apiKey)throw new Error("Require API key to initialize miso client.");return e.request&&e.request.sendApiKeyByHeader&&console.warn('`sendApiKeyByHeader` option is deprecated. Please call `MisoClient.plugins.use("std:header-api-key");` instead.'),e.dataEndpoint=e.dataEndpoint||e.apiHost,e.eventEndpoint=e.eventEndpoint||e.apiHost,delete e.apiHost,G(e)}_readConfigFromScriptUrl(){const e=Ol.src||Ol.href,s=new URL(new Request(e).url).searchParams;return G({apiKey:s.get("api_key")||void 0})}};Zi.helpers=mg,ce(Zi,{uuid:dn()});const It=hg(Zi),{GROUP:gg,NAME:bg}=fn,wg="std:context";class yg extends De{static get id(){return wg}constructor(){super("context")}install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this)),s.addHeadersPass(this._modifyHeaders.bind(this)),s.addPayloadPass(this._modifyPayload.bind(this))}_injectClient(e){const s=new Sg(this);_m(e.context,s,["anonymous_id","user_id","user_hash","user_type","site","auth"])}_modifyHeaders({client:e,headers:s}){const{auth:n}=e.context;return n&&(s={...s,Authorization:n}),s}_modifyPayload({client:e,apiGroup:s,apiName:n,payload:r}){if(!r)return r;switch(s){case gg.INTERACTIONS:return n===bg.UPLOAD?this._modifyPayloadForInteractions(e,r):r;default:return this._modifyPayloadForQueries(e,r)}}_modifyPayloadForQueries(e,s){const{user_id:n,user_hash:r,user_type:i,anonymous_id:o,site:c}=e.context;return Ar(s,{...n?{user_id:n,user_type:i,user_hash:r}:{anonymous_id:o},metadata:c?{site:c}:void 0})}_modifyPayloadForInteractions(e,{data:s}){const{anonymous_id:n,user_id:r,site:i}=e.context,o={anonymous_id:n,user_id:r},c=i?{site:i}:void 0,a=c?{custom_context:c}:void 0;return s=s.map(u=>Je(u,{...o,context:a})),{data:s}}}let Cl;function Eg(){return Cl||(Cl=Om("miso_anonymous_id",dn))}class Sg{constructor(e){this._plugin=e,this._props={}}get anonymous_id(){return this._props.anonymous_id||Eg()}set anonymous_id(e){this._requireString("anonymous_id",e),this._set("anonymous_id",e)}get user_id(){return this._props.user_id}set user_id(e){this._requireString("user_id",e),this._set("user_id",e)}get user_hash(){return this._props.user_hash}set user_hash(e){this._requireString("user_hash",e),this._set("user_hash",e)}get user_type(){return this._props.user_type}set user_type(e){this._requireString("user_type",e),this._set("user_type",e)}get site(){return this._props.site}set site(e){this._requireString("site",e),this._set("site",e)}get auth(){return this._props.auth}set auth(e){this._requireString("auth",e),this._set("auth",e)}_set(e,s){this._props[e]=s,this._plugin._events.emit("set",`${e} = '${s}'`)}_requireString(e,s){if(typeof s!="string"&&typeof s<"u")throw new Error(`${e} must be a string`);return s}}const vg="std:page-info";class Tg{static get id(){return vg}constructor(){}install(e,{addPayloadPass:s}){s(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:s,payload:n}){return e==="interactions"&&s==="upload"?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:e}){return e=e.map(s=>({...s,context:{...Ag(),...s.context}})),{data:e}}}function Ag(){return G({page:Og(),campaign:Cg()})}function Og(){return G({url:window.location.href,referrer:document.referrer||void 0,title:document.title})}function Cg(){const t=new URLSearchParams(window.location.search);let e=G({source:t.get("utm_source")||void 0,medium:t.get("utm_medium")||void 0,name:t.get("utm_campaign")||void 0,term:t.get("utm_term")||void 0,content:t.get("utm_content")||void 0});return Object.keys(e).length===0?void 0:e}const xg="std:auto-events";class Rg extends De{static get id(){return xg}constructor(){super("auto-events"),this._contexts=new WeakMap}install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this)),s.addPayloadPass(this._captureApiRequest.bind(this))}_injectClient(e){const s=new Ig(this);this._contexts.set(e,s),e.autoEvents=s.interface}_captureApiRequest({client:e,apiGroup:s,apiName:n,payload:r}){switch(s){case ge.SEARCH:switch(n){case Ye.SEARCH:this._captureSearchApiRequest(e,r);break}break}}_captureSearchApiRequest(e,{q:s}){if(!s||s==="*")return;const n=this._contexts.get(e);!n||!n._config.search||e.api.interactions.upload({type:"search",search:{keywords:s},context:{custom_context:{channel:"miso_api"}}})}}class Ig{constructor(e){this._plugin=e,this._config={search:!0},this.interface=Object.freeze({config:this.config.bind(this)})}config(e={}){if(typeof e!="object")throw new Error(`Config options must be an object or undefined: ${e}`);for(const s of e){if(!this._config.hasOwnProperty(s))continue;const n=this._config[s],r=e[s];r!==n&&(this._config[s]=n,this._plugin._events.emit("config",`${s}: ${n} -> ${r}`))}return Object.freeze({...this._config})}}const kg="std:interactions";class $g{static get id(){return kg}constructor(){}install(e,{addPayloadPass:s}){s(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:s,payload:n}){return e==="interactions"&&s==="upload"?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:e}){return{data:e.map(Pg)}}}function Pg(t){const{context:e={}}=t,s={...e.custom_context,sdk_version:Xa};return s.uuid||(s.uuid=dn()),{...t,context:{...e,custom_context:s}}}const Xi="std:native-fetch";function Lg(t){return t.toString().indexOf("[native code]")>-1}let eo,xl;const Rl=(()=>{if(Lg(window.fetch))return eo="original",window.fetch;try{const t=document.createElement("iframe");return t.style.display="none",document.head.appendChild(t),eo="borrowed",t.contentWindow.fetch}catch(t){xl=t}})();class Ng{static get id(){return Xi}install(e,s){if(!Rl){e.debug(`<plugin:${Xi}>`,"[error]",`Failed to obtain native fetch: ${xl.message}`);return}s.setCustomFetch(Rl),e.debug(`<plugin:${Xi}>`,"[info]",`Using ${eo} native fetch`)}}const Ug="std:api-patch";class Dg extends De{static get id(){return Ug}constructor(){super("api-patch")}install(e,s){s.addSubtree(this),s.addPayloadPass(this._patchApiPayload.bind(this))}_patchApiPayload(e){let{payload:s,...n}=e;return s&&(s=this._copyMetadataToMeta(s,n),s=this._suppressMetadata(s,n),s=this._suppressUserType(s,n),s)}_copyMetadataToMeta(e,{apiGroup:s}){switch(s){case ge.ASK:return e.metadata?{...e,_meta:e.metadata}:e;default:return e}}_suppressMetadata(e,{apiGroup:s}){switch(s){case ge.SEARCH:case ge.RECOMMENDATION:const{_meta:n,metadata:r,...i}=e;return i;default:return e}}_suppressUserType(e,{apiGroup:s}){switch(s){case ge.SEARCH:case ge.RECOMMENDATION:const{user_type:n,...r}=e;return r;default:return e}}}const Il="std:header-api-key";class Fg{static get id(){return Il}install(e,s){s.addUrlPass(this._modifyUrl.bind(this)),s.addHeadersPass(this._modifyHeaders.bind(this)),e.debug(`<plugin:${Il}>`,"[info]","Send API key in header")}_modifyUrl({url:e}){return e.replace(/[?&]api_key=[^&]*/g,"")}_modifyHeaders({client:e,headers:s}){const{apiKey:n}=e.options;return n?{...s,"X-API-KEY":n}:s}}const Cr="miso-logdump",kl="miso-logdump",$l=`${kl}__download-btn`,Pl="Miso Log";class Mg{constructor(e={}){this._options=e,this._logs=[]}config(e={}){this._options={...this._options,...e}}async showDownloadButton(){await zg();let e=document.getElementById(Cr);if(!e){const s=document.createElement("div");s.textContent=this._options.logDownloadButtonText||Pl,s.classList.add($l),s.addEventListener("click",()=>this.download()),e=document.createElement("div"),e.id=Cr,e.classList.add(kl),e.appendChild(s),document.body.appendChild(e)}e.style.display="block"}_syncUi(){const e=document.getElementById(Cr),s=e&&e.querySelector(`.${$l}`);s&&(s.textContent=this._options.logDownloadButtonText||Pl)}hideDownloadButton(){const e=document.getElementById(Cr);e&&(e.style.display="none")}download(){const e=this._logs,s=new Blob([qg(e)],{type:"application/json"}),n=URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download=this._filename(),r.click()}_filename(){let{logFilename:e}=this._options;if(typeof e=="function"){const s=Ll();e=e({timestamp:s})}return e&&typeof e=="string"?e:jg()}clear(){this._logs=[]}}function jg(){return`miso-log.${Ll()}.jsonl`}function Ll(){return new Date().toISOString().replaceAll(/[\:\.]/g,"-")}function qg(t){return t.map(e=>JSON.stringify(ul(Bg(e),{depth:10}))).join(`
`)}function Bg(t){if(t[0]==="<progressive-markdown>"){const e=t.length;return[...t.slice(0,e-1),Hg(t[e-1])]}return t}function Hg(t){return t&&ul(t,{depth:2})}let Nl;async function zg(){return Nl||(Nl=ol(cl("logdump")))}const Ul="std:debug";class Vg{constructor(e={}){this._options=e,this._logs=new Mg(e)}static get id(){return Ul}install(e){this._injectComponents(e),e.debug=(...s)=>this._logr(...s),e.logs=this._logs}config(e={}){this._options={...this._options,...e},this._logs.config(e),e.preserveLog&&this._log(Ul,"ua",window.navigator.userAgent)}_injectComponents(e,s=[]){e.on("child",n=>this._injectComponents(n,s)),e.on("subtree",n=>this._injectComponents(n,s.concat(e.meta.path))),e.on("*",(n,r)=>this._handleEvent(e,r,n,s))}_handleEvent(e,{name:s},n,r=[]){if(s==="child"||s==="subtree")return;const i=r.concat(e.meta.path);if(!i.length)switch(s){case"create":this._handleCreateClient(s,n);return}switch(i[0]){case"client":switch(i[1]){case"api":this._handleApiEvent(s,{...n,groupName:i[2]});return}break;case"plugins":i.length===1?this._handlePluginsEvent(s,n):this._handlePluginSpecificEvent(i[1],i.slice(2),s,n);return}this._logw(i.join("."),s,n)}_handleCreateClient(e,s){this._logw("client",e,s)}_handleApiEvent(e,{groupName:s,apiName:n,url:r,bulk:i,...o}){const c=new URL(r).pathname,a=["api",e];if(i&&a.push(`(bulk ${i.bulkId})`),a.push(`POST ${c}`),s==="interactions"){const u=o.payload.data[0],{type:l,custom_action_name:f,context:{custom_context:{property:_}={}}={}}=u,w=l==="custom"&&f?`${l}:${f}`:l;a.push(_?`${w} (${_})`:`${w}`)}a.push([{...o,url:r}]),this._log(...a)}_handlePluginsEvent(e,s){let n=[];Array.isArray(s)&&(n=s.slice(1),s=s[0]),this._log("plugins",e,`${s.id||"(anonymous)"}`,[s,...n])}_handlePluginSpecificEvent(e,s,n,r){this._logw([e,s.join(".")],n,r)}_getPath(e){const s=[];for(let n=e;n;n=n.meta.parent)n.meta.name&&s.push(n.meta.name);return s.reverse()}_logw(e,s,n){n===void 0?this._log(e,s):Array.isArray(n)?this._log(e,s,...n.map(Dl)):this._log(e,s,Dl(n))}_log(e,s,...n){this._logr(Gg(e),Kg(s),...n)}_logr(...e){const s=this._options.console||{};this._options.preserveLog&&this._logs._logs.push(e),console.log(Wg(s),Qg(s),...e)}}function Wg({text:t="Miso"}={}){return`%c${t}`}function Qg({color:t="#fff",background:e="#334cbb"}={}){return`color: ${t}; background-color: ${e}; padding: 2px 2px 1px 4px;`}function Gg(t){return`<${typeof t=="string"?t:t.filter(e=>e).join("/")}>`}function Kg(t){return`[${t}]`}function Dl(t){const e=typeof t;return e==="function"||e==="object"&&!Array.isArray(t)?[t]:t}const Yg="std:dry-run";class Jg{constructor(e={}){this._options=e,this.id="std:dry-run",this.name="dry-run"}static get id(){return Yg}install(e,{addUrlPass:s}){s(this._modifyUrl.bind(this))}_modifyUrl({apiGroup:e,apiName:s,url:n}){return e==="interactions"&&s==="upload"?Im(n,"dry_run","1"):n}}function Fl(t,e){return e==null||e<=t?t:t+Math.floor(Math.random()*(e-t+1))}const Zg={"code-span":()=>["`","`"],"emphasis-1":()=>so(to(1),2),"emphasis-2":()=>so(to(2),2),"emphasis-3":()=>so(to(3),2),strikethrough:()=>["~","~"],link:({url:t="https://miso.ai"}={})=>["[",`](${t})`]};function to(t=[1,3]){return t=typeof t=="number"?t:Fl(...t),"_*".charAt(Fl(0,1)).repeat(t)}const Xg=Object.keys(Zg);new Set(Xg);function so(t,e){const s=[];for(let n=0;n<e;n++)s.push(typeof t=="function"?t():t);return s}It.plugins.register(Vg,Jg,Ng,Fg),It.plugins.use(yg),It.plugins.use(Tg),It.plugins.use(Rg),It.plugins.use($g),It.plugins.use(Dg);const eb="data-miso-product-id",no="default",g=Object.freeze({CONTAINER:"container",BANNER:"banner",QUERY:"query",FEEDBACK:"feedback",PRODUCTS:"products",CATEGORIES:"categories",ATTRIBUTES:"attributes",RESULTS:"results",ITEMS:"items",QUESTION:"question",ANSWER:"answer",REASONING:"reasoning",IMAGES:"images",SOURCES:"sources",RELATED_RESOURCES:"related_resources",FOLLOW_UP_QUESTIONS:"follow_up_questions",QUERY_SUGGESTIONS:"query_suggestions",RELATED_QUESTIONS:"related_questions",AFFILIATION:"affiliation",KEYWORDS:"keywords",FACETS:"facets",TOTAL:"total",MORE:"more",SORT:"sort",ERROR:"error"}),tb=new Set([g.PRODUCTS,g.CATEGORIES,g.ATTRIBUTES,g.RESULTS,g.ITEMS,g.QUESTION,g.ANSWER,g.REASONING,g.IMAGES,g.SOURCES,g.RELATED_RESOURCES,g.FOLLOW_UP_QUESTIONS,g.QUERY_SUGGESTIONS,g.RELATED_QUESTIONS,g.AFFILIATION,g.FACETS,g.TOTAL]);function sb(t){return tb.has(t)}const nb=new Set([g.PRODUCTS,g.IMAGES,g.SOURCES,g.RELATED_RESOURCES]);function rb(t){return nb.has(t)}const $e=Object.freeze({IMPRESSION:"impression",VIEWABLE:"viewable",CLICK:"click",SUBMIT:"submit",FEEDBACK:"feedback"}),Ml=[$e.IMPRESSION,$e.VIEWABLE,$e.CLICK,$e.SUBMIT,$e.FEEDBACK],jl=[$e.IMPRESSION,$e.VIEWABLE,$e.CLICK],ib=new Set(jl);function ob(t){return ib.has(t)}const pn=Object.freeze({UNTRACKED:"untracked",TRACKING:"tracking",TRIGGERED:"triggered"}),M=Object.freeze({INITIAL:"initial",LOADING:"loading",ERRONEOUS:"erroneous",READY:"ready",ONGOING:"ongoing",DONE:"done",EMPTY:"empty",NONEMPTY:"nonempty",UNANSWERABLE:"unanswerable"}),cs=Object.freeze({ORGANIC:"_organic",SUGGESTED_QUESTIONS:"_suggested_questions",INLINE_QUESTION_LINK:"_inline_question_link"});function ql(t){if(Ml.indexOf(t)<0)throw new Error(`Unrecognized event type: ${t}`)}function cb(t){if(t!==pn.UNTRACKED&&t!==pn.TRACKING&&t!==pn.TRIGGERED)throw new Error(`Unrecognized tracking status: ${t}`)}const _e=Object.freeze({API:"api",LAYOUTS:"layouts",DATA_PROCESSOR:"dataProcessor",TRACKERS:"trackers",INTERACTIONS:"interactions",FILTERS:"filters",PAGINATION:"pagination",TEMPLATES:"templates"}),Qt=Object.freeze({QUERY:"query",REFINE:"refine",MORE:"more"});function mn(t,e){return Object.freeze({...t,...e,members:ab(t.members,e.members),mappings:Object.freeze({...t.mappings,...e.mappings})})}function ab(t=[],e=[]){return[...new Set([...t,...e])]}function lb(t,e){return t&&t.length?e&&e.length?[...t,...e]:t:e}function as(t,e){let s={};for(const n of t)n&&(s=e(s,n));return G(s)}function xr(t){if(t===void 0)throw new Error(`Expect options to be an object or a boolean value: ${t}`);return typeof t=="boolean"&&(t={active:t}),t}function ub([t,e]=[]){if(t===!1)return{actor:!1};typeof t=="object"&&e===void 0&&(e=t,t=void 0);let s;if(t&&t.indexOf("/")!==-1&&([s,t]=t.split("/")),t&&typeof t!="string"||e!==void 0&&typeof e!="object")throw new Error(`Invalid arguments for useApi(): ${t}, ${e}`);return G({group:s,name:t,payload:e})}function Bl(...t){return t[t.length-1]===!1?!1:as(t,(e,s)=>Object.assign(e,{...s,payload:Ar(e.payload,s.payload)}))}function fb(t={}){if(t===!1)return!1;const{results:e,...s}=t;e!==void 0&&(console.warn(`useLayouts({ results: ... }) is deprecated, use useLayouts({ ${g.PRODUCTS}: ... }) instead`),t={...s,[g.PRODUCTS]:e});const n={};for(const[r,i]of Object.entries(t))n[db(r)]=Hl(i);return n}function db(t){return t=mm(t),t=gm(t),t}function Hl(t){if(t===void 0)return;let[e,s]=os(t);return typeof e=="object"&&(s=e,e=void 0),[e,s]}function hb(...t){return t[t.length-1]===!1?!1:as(t,(e,s)=>{for(const[n,r]of Object.entries(s))e[n]=_b(e[n],r);return e})}function _b(t,e){return e=Hl(e),e[0]===!1?e:t&&e?[e[0]||t[0],pb(t[1],e[1])]:e||t}function pb(t,e){return{...t,...e,link:{...t&&t.link,...e&&e.link},templates:{...t&&t.templates,...e&&e.templates}}}function mb(t){t=os(t);for(const e of t)if(typeof e!="function")throw new Error(`Expect data processor options to be a function: ${e}`);return t}function gb(...t){return t.flat().filter(Boolean)}const Ze=Object.freeze({active:!0,impression:Object.freeze({active:!0}),viewable:Object.freeze({active:!0,area:.5,duration:1e3}),click:Object.freeze({active:!0,lenient:!1})});function bb(t={}){t=xr(t);const{active:e,...s}=t,n={};for(const[r,i]of Object.entries(s))n[r]=wb(i);return{active:e,...n}}function wb(t={}){t=xr(t);const{active:e,...s}=t;for(const[n,r]of Object.entries(s))yb(r);return t}function yb(t={}){return t=xr(t),t}function Eb(...t){return t[t.length-1]===!1?!1:as(t,(e,s)=>{for(const[n,r]of Object.entries(s))r!==void 0&&(e[n]=n==="active"?r:Sb(e[n],r));return e})}function Sb(t={},e={}){const s={...t};for(const[n,r]of Object.entries(e))r!==void 0&&(s[n]=Ml.includes(n)?vb(t[n],r):r);return s}function vb(t={},e={}){return{...t,...e}}function Tb(t){if(t===void 0)return;if(t===!1)return{handle:()=>{}};const e=os(t.preprocess);for(const s of e)if(typeof s!="function")throw new Error(`Expect preprocess options to be a function: ${s}`);if(t.handle&&typeof t.handle!="function")throw new Error(`Expect handle options to be a function: ${t.handle}`);return{...t,preprocess:e}}function Ab(...t){return t[t.length-1]===!1?!1:as(t,(e,s)=>Object.assign(e,{...s,preprocess:lb(e.preprocess,s.preprocess)}))}const Ob=xr;function Cb(...t){return t[t.length-1]===!1?!1:as(t,(e,s)=>Object.assign(e,s))}function xb(t){if(t===void 0)throw new Error(`Expect pagination options to be an object or a boolean value: ${t}`);return typeof t=="boolean"&&(t={active:t}),t}function Rb(...t){return t[t.length-1]===!1?!1:as(t,(e,s)=>Object.assign(e,s))}function Ib(t={}){const e={};for(const[s,n]of Object.entries(t))e[s]=zl(n);return e}function zl(t){return t===void 0?void 0:typeof t!="function"?()=>t:t}function kb(...t){return as(t,(e,s)=>{for(const[n,r]of Object.entries(s))e[n]=$b(e[n],r);return e})}function $b(t,e){return zl(e)||t}const Pb=[{key:_e.API,normalize:ub,merge:Bl},{key:_e.LAYOUTS,normalize:fb,merge:hb},{key:_e.DATA_PROCESSOR,normalize:mb,merge:gb},{key:_e.TRACKERS,normalize:bb,merge:Eb},{key:_e.INTERACTIONS,normalize:Tb,merge:Ab},{key:_e.FILTERS,normalize:Ob,merge:Cb},{key:_e.PAGINATION,normalize:xb,merge:Rb},{key:_e.TEMPLATES,normalize:Ib,merge:kb}];class Vl{constructor(){this._events=new Os({target:this}),this._globals={}}_notify(e){this._events.emit(e),this._events.emit("_update",e)}}class Wl{constructor(e={},s={}){this._events=new Os({target:this}),this._defaults=s,this._context=e||{},this._locals={},ce(this,{resolved:new Ql(this),defaults:s}),e&&e.on&&(this._unsubscribes=[e.on("_update",n=>this._notify(n))])}_notify(e){this.resolved._invalidate(e),this._events.emit(e)}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}}class Ql{constructor(e){this._options=e,this._cache={}}_invalidate(e){this._cache[e]=void 0}_get({key:e,merge:s}){if(this._cache[e]===void 0){const n=this._options,r=n._context[e];this._cache[e]=s(n._defaults[e],r&&r.get(),n._locals[e])}return this._cache[e]}}class Gl{constructor(e,s,n,r,i){this._options=e,this._store=s,this._key=n,this._normalize=o=>o!==void 0?r(o):void 0,this._merge=i}get(){return this._store[this._key]}set(e){this._set(this._normalize(e))}merge(e){this._set(this._merge(this.get(),this._normalize(e)))}_set(e){this._store[this._key]=e,this._options._notify(this._key)}}for(const t of Pb){const{key:e,normalize:s,merge:n}=t;Object.defineProperty(Vl.prototype,e,{get:function(){const r=`_${e}`;return this[r]||(this[r]=new Gl(this,this._globals,e,s,n))}}),Object.defineProperty(Wl.prototype,e,{get:function(){const r=`_${e}`;return this[r]||(this[r]=new Gl(this,this._locals,e,s,n))}}),Object.defineProperty(Ql.prototype,e,{get:function(){return this._get(t)}})}const Lb=[_e.API,_e.LAYOUTS,_e.DATA_PROCESSOR,_e.TRACKERS,_e.INTERACTIONS];function gn(t,e=Lb){for(const s of e)Nb(t,s)}function Nb(t,e){if(e==="api")Object.assign(t,{useApi(...s){return this._options.api.merge(s),this},clearApi(){return this._options.api.set(),this}});else{const s=Ub(e);Object.assign(t,{[`use${s}`](n){return this._options[e].merge(n),this},[`clear${s}`](){return this._options[e].set(),this}})}}function Ub(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Kl="q",Db="qs";function Fb({setValue:t=!0,focus:e=!0,updateUrl:s=!0,param:n=Kl,sourceParam:r=Db,...i}={}){return{setValue:t,focus:e,updateUrl:s,param:n,sourceParam:r,...i}}function Yl(t={}){const{setValue:e,focus:s,param:n,sourceParam:r}=this._autoQuery=Fb(t),i=new URLSearchParams(window.location.search),o=i.get(n),c=i.get(r)||void 0,{layout:a}=this._views.get(g.QUERY);a&&(o&&e&&(a.value=o),!o&&s&&a.focus()),o&&this.query(G({q:o,qs:c}))}function Jl({value:t,request:e}){if(!this._autoQuery||!this._autoQuery.updateUrl)return;const{param:s,sourceParam:n}=this._autoQuery,r=t&&(t.question||t.keyword)||e&&e.payload&&(e.payload.question||e.payload.q),i=e&&e.payload&&e.payload.metadata&&e.payload.metadata.question_source;if(!r)return;const o=new URL(window.location),c=o.searchParams.get(s),a=o.searchParams.get(n)||cs.ORGANIC;r===c&&i===a||(o.searchParams.set(s,r),i===cs.ORGANIC?o.searchParams.delete(n):o.searchParams.set(n,i),window.history.replaceState({},"",o))}class ro extends De{constructor(e,s,n){super(e,s),this._name=e,this._plugin=s,this._client=n,this._options=new Vl}}gn(ro.prototype);function Rr(){return"session"}function io(){return"completions"}function xs(){return"filters"}function Gt(){return"query"}function oo(){return"request"}function Zl(){return"response"}function Te(){return"data"}function kt(t){return t?`view:${t}`:"view"}function co(){return"tracker"}function Xl(){return"interaction"}function eu(){return"feedback"}function tu(){return"input"}function ao(){return"more"}class Mb{constructor(e={}){(this._events=new Os)._injectSubscribeInterface(this),this._options=e,this._states={},ce(this,{states:new Proxy(this._states,{set(){}})})}update(e,s,n={}){this._states[e]=Object.freeze(s);const r=Object.freeze({action:"update",name:e,state:s,...n});typeof this._options.onUpdate=="function"&&this._options.onUpdate(r),n.silent||this._events.emit(e,s),typeof this._options.onEmit=="function"&&this._options.onEmit(r)}trigger(e,s){const n=Object.freeze({action:"trigger",name:e,state:s});typeof this._options.onUpdate=="function"&&this._options.onUpdate(n),this._events.emit(e,s),typeof this._options.onEmit=="function"&&this._options.onEmit(n)}}class jb{constructor(e){this._hub=e,this._sessionIndex=0}restart(){const e=Object.freeze({uuid:dn(),index:this._sessionIndex++,meta:{}});this._hub.update(Rr(),e)}}function su(t,e){if(!e)return!1;const{session:s}=t.states;return s&&s.index===e.index}class qb{constructor(e,{source:s,options:n,polling:r=!0}){this._hub=e,this._source=s,this._options=n,this._polling=r,this._unsubscribes=[e.on(Rr(),i=>this._handleSession(i)),e.on(oo(),i=>this._handleRequest(i))]}get active(){return this._options.resolved.api.actor!==!1}get source(){return this._source}_handleSession(e){(!this._session||e.index!==this._session.index)&&(this._ac&&this._ac.abort({type:"new-session",message:"A new session is created, discarding the old one."}),this._ac=new AbortController),this._session=e}async _handleRequest(e){if(!this.active)return;const{session:s,...n}=e;try{const{signal:r}=this._ac||{},i={...e.options,signal:r},o=await this._source({session:s,...n,options:i});if(o&&o[Symbol.asyncIterator]){if(o._response&&this._emitResponseWithSessionCheck({session:s,request:n,value:o._response}),this._polling){let c;for await(c of o){if(!su(this._hub,s))break;this._emitResponse({session:s,request:n,value:c})}}}else this._emitResponseWithSessionCheck({session:s,request:n,value:o})}catch(r){this._error(r),this._emitResponseWithSessionCheck({session:s,request:n,error:r})}}_emitResponseWithSessionCheck(e){su(this._hub,e.session)&&this._emitResponse(e)}_emitResponse(e){this._hub.update(Zl(),e)}_error(e){console.error(e)}_destroy(){this._ac&&this._ac.abort({type:"data-actor-destroy",message:"Data actor is destroyed."});for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class Bb{constructor(e){this._get=typeof e=="function"?e:()=>e,this._handlers=[],this._elementUpdatedHandlers=[],this.sync()}get current(){return this._element}on(e,s){if(e==="element")return this._onElementUpdated(s);const n=this._get();return n&&n.addEventListener(e,s),this._handlers.push({event:e,handler:s}),()=>this._off(e,s)}_off(e,s){const n=this._get();n&&n.removeEventListener(e,s),dm(this._handlers,r=>r.handler===s)}_onElementUpdated(e){return this._elementUpdatedHandlers.push(e),()=>{Wi(this._elementUpdatedHandlers,e)}}sync({silent:e=!1}={}){const s=this._get();if(this._element===s)return;if(this._offAllFromCurrentElement(),s)for(const{event:r,handler:i}of this._handlers)s.addEventListener(r,i);const n=this._element;if(this._element=s,!e)for(const r of this._elementUpdatedHandlers)try{r(s,n)}catch(i){console.error(i)}}_offAllFromCurrentElement(){if(this._element)for(const{event:e,handler:s}of this._handlers)this._element.removeEventListener(e,s)}destroy(){this._offAllFromCurrentElement()}}const{IMPRESSION:Hb,VIEWABLE:zb,CLICK:Vb}=$e,{UNTRACKED:Ir,TRIGGERED:Wb}=pn,nu=Object.freeze({[Hb]:Ir,[zb]:Ir,[Vb]:Ir});class ru{constructor(e){this.sessionId=e,this._states=new Map}getFullState(e){const s=this._states.get(this._getKey(e));return s?{...s}:nu}get(e,s){const n=this._states.get(this._getKey(e));return n&&n[s]||Ir}set(e,s,n){ql(s),cb(n);for(const r of os(e))this._setOne(r,s,n)}untriggered(e,s){return e.filter(n=>this.get(n,s)!==Wb)}_getKey(e){return e.product_id||e.text||e.id||e}_setOne(e,s,n){hm(this._states,this._getKey(e),()=>({...nu}))[s]=n}}const Qb=[Symbol("itemless")];class lo{constructor({hub:e,role:s,options:n}){this._hub=e,this._role=s,this._options=n,this._states=new ru(this._getSessionId())}get options(){return typeof this._options=="function"?this._options():this._options}getState(e){return this._states.getFullState(e)}_trigger(e,s,n){ql(e);const{options:r}=this;if(!r||r.active===!1)return;this._syncSession();const{deduplicated:i=!0,itemless:o=!1}=r;if(i){if(o&&(s=Qb),s=this._states.untriggered(os(s),e),s.length===0)return;this._states.set(s,e,pn.TRIGGERED)}this._sendToHub({type:e,items:o?void 0:s,...n})}submit({value:e}){this._syncSession(),this._sendToHub({type:$e.SUBMIT,value:e})}_sendToHub(e){this._hub.trigger(co(),Object.freeze(G({role:this._role,...e})))}_syncSession(){const e=this._getSessionId();e&&(!this._states||e!==this._states.sessionId)&&(this._states=new ru(e))}_getSessionId(){const{session:e}=this._getViewState()||{};return e&&e.uuid}_getMisoId(){const e=this._getViewState();return e&&e.meta&&e.meta.miso_id||void 0}_getRequestPayload(){const{request:e}=this._getViewState()||{};return e&&e.payload}_getViewState(){return this._hub.states[kt(this._role)]}}for(const t of jl)lo.prototype[t]=function(e,s){this._trigger(t,e,s)};function Gb(t,e){return t===e||t&&e&&t.status===e.status&&t.error===e.error&&t.value===e.value&&t.ongoing===e.ongoing&&iu(t)===iu(e)&&Kb(t.session,e.session)}function Kb(t,e){return t===e||t&&e&&t.uuid===e.uuid}function iu(t){return t&&t.meta&&t.meta.empty}class ou{constructor(e,s){this._events=new Os({target:this}),this._views=e,this._mapping=cu((e._roles.mappings||{})[s]||s),ce(this,{role:s,interface:new Yb(this)})}get hub(){return this._views._hub}get element(){return this._element}set element(e){e!==this._element&&(this._element&&this._safeApplyOnLayout("unrender",this._element),this._element=e,this._proxyElement&&this._proxyElement.sync(),this._events.emit("element",e),this.refresh({force:!0}))}get proxyElement(){return this._proxyElement||(this._proxyElement=new Bb(()=>this.element)),this._proxyElement}get layout(){return this._layout}set layout(e){if(e===this._layout)return;if(e&&typeof e.render!="function")throw new Error("Render function is mandatory in a layout.");const{element:s}=this;s&&this._safeApplyOnLayout("unrender",s),this._safeApplyOnLayout("destroy"),this._layout=e,e&&(e._view=this,typeof e.initialize=="function"&&e.initialize(this)),this.refresh({force:!0})}get tracker(){const{role:e}=this;if(e===g.CONTAINER)return this._views._getContainerTracker();if(!this._tracker){const{hub:s}=this;this._tracker=new lo({hub:s,role:e,options:()=>this.trackerOptions})}return this._tracker}get workflow(){return this._views._workflow}get workflowOptions(){return this._views._options.resolved}get trackerOptions(){return this._views._getTrackerOptions(this.role)}get filters(){return this._views.filters}async refresh({force:e=!1,data:s}={}){if(!this._layout)return;const{element:n}=this;if(!n)return;const r=this._data;if(this._data=s=this._sliceData(s||this._views._getData()),!e&&Gb(s,r))return;const{session:i,status:o,ongoing:c,request:a,meta:u,value:l}=s,f={session:i,status:o,ongoing:c,request:a,meta:u,data:l,...Jb(this.role,s)},_=(w={},m)=>{w!==!1&&this.updateState({...f,...w},m)};try{await this._layout.render(n,s,{notifyUpdate:_})}catch(w){this._error(w),_({error:w})}}updateState(e,{silent:s=!1}={}){const n=e.error?M.ERRONEOUS:e.status;e=this._state=Object.freeze(G({...e,status:n}));const{role:r}=this;this.hub.update(kt(r),e,{silent:s})}_sliceData(e){const{value:s,error:n,status:r,meta:i,...o}=e,c={value:this._mapping(e,this),status:r,data:s,meta:i,...o};return this.role===g.CONTAINER&&(c.meta={...i,empty:this._isContainerEmpty(e)}),G(c)}_isContainerEmpty(e){const{element:s}=this;if(!s)return!1;for(const{role:n}of s.components){if(!sb(n))continue;const i=cu((this._views._roles.mappings||{})[n]||n)(e,this);if(!au(n,i))return!1}return!0}_syncSize(){this._element&&this._safeApplyOnLayout("syncSize",this._element)}_safeApplyOnLayout(e,...s){if(!(!this._layout||typeof this._layout[e]!="function"))try{this._layout[e](...s)}catch(n){this._error(n)}}_error(e){this._views._error(e)}_destroy(){this._safeApplyOnLayout("destroy"),this._proxyElement&&this._proxyElement.destroy()}}class Yb{constructor(e){Vt(this,e,["role","layout","element","proxyElement","refresh","on","tracker"])}}function cu(t){switch(typeof t){case"function":return t;case"string":return e=>e.value&&e.value[t];default:throw new Error(`Invalid mapping function: ${t}`)}}function Jb(t,e){return Zb(e)?{empty:!!au(t,e&&e.value)}:{}}function Zb(t){return t.status===M.READY&&!t.ongoing}function au(t,e){switch(t){case g.ANSWER:case g.REASONING:return!e||!e.value;default:return e===void 0||(Array.isArray(e)||typeof e=="string")&&!e.length}}function Xb(t={},e={}){return Object.freeze(G({...t,...e,facets:Object.freeze(G({...t.facets,...e.facets}))}))}function ew({sort:t}={}){return G({facets:Object.freeze({}),sort:tw(t)})}function tw(t){if(!t)return;const{options:e=[]}=t;for(const s of e)if(s.default)return Object.freeze(s);return Object.freeze(e[0])}class sw{constructor(e,{facets:s}={}){this._views=e,this._hub=e._hub;const n=this._error=this._error.bind(this);this._events=new Os({target:this,error:n}),ce(this,{facets:new nw(this,s)}),this._unsubscribes=[e._options.on("filters",()=>this._syncOptions())],this._syncOptions(),this._states=void 0}_syncOptions(){const e=this._views._options.resolved.filters;this._initialStates=ew(e),this.apply({silent:!0})}_getStates(){return this._states||this._initialStates}update(e){const s=this._getStates();this._states=Xb({...s,...e});const n=this._getStates();this._events.emit("update",{updates:e,states:n,oldStates:s})}reset({silent:e=!1}={}){const s=this._states;this._states=void 0;const n=this._getStates();this._hub.update(xs(),n,{silent:e}),this._events.emit("reset",{states:n,oldStates:s})}apply({silent:e=!1}={}){const s=this._getStates();this._hub.update(xs(),s,{silent:e}),!e&&this._events.emit("apply")}_error(e){this._views._error(e)}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class nw{constructor(e,s={}){this._filters=e,this._options=s}isSelected(e,s){return this._getFieldValues(e).includes(s)}select(e,s){this.isSelected(e,s)||this._select(e,s)}unselect(e,s){this.isSelected(e,s)&&this._unselect(e,s)}toggle(e,s){this.isSelected(e,s)?this._unselect(e,s):this._select(e,s)}_getFieldValues(e){return this._filters._getStates().facets[e]||[]}_select(e,s){const n=this._options.multivalued?[...this._getFieldValues(e),s]:[s];n.sort(),this._filters.update({facets:{[e]:n}})}_unselect(e,s){let n=this._getFieldValues(e).filter(r=>r!==s);n.length===0&&(n=void 0),this._filters.update({facets:{[e]:n}})}}const lu=Symbol.for("miso:tracked");function uo(t){return!!t[lu]}function fo(t){t[lu]=!0}const kr=Object.freeze({impression:Object.freeze({}),viewable:Object.freeze({area:.5,duration:1e3}),click:Object.freeze({lenient:!1})});function ho(t,e){return!!e&&{...t,...e}}function rw(t){if(t===!1)return!1;if(t===!0&&(t={}),typeof t!="object")throw new Error(`Invalid options: ${t}`);const{impression:e={},viewable:s={},click:n={},...r}=t;return G({...kr,...r,impression:ho(kr.impression,e),viewable:ho(kr.viewable,s),click:ho(kr.click,n)})}function iw(t={},e){return t?typeof t.validate=="function"?t.validate(e):t.lenient?!0:!(uo(e)||e.button!==0||e.defaultPrevented||!Qi(e.target,s=>s.tagName==="A"&&s.href||void 0)):!1}class ow{constructor(e,{workflow:s,extensions:n,layouts:r,roles:i,options:o}){this._hub=e,this._workflow=s,this._workflowName=s._name,this._extensions=n,this._layoutFactory=r,this._options=o,this._roles=i,this._containers=new Map,this._containerTracker=void 0,this._views={},this._filters=new sw(this);for(const a of i.members)a!==g.CONTAINER&&(this._views[a]=new ou(this,a));ce(this,{interface:new cw(this),trackers:new aw(this,i.members)});const c=()=>this.syncSize();window.addEventListener("resize",c),this._unsubscribes=[()=>window.removeEventListener("resize",c),e.on(Te(),a=>this.refresh({data:a})),o.on("layouts",()=>this._syncLayouts())],this._syncLayouts()}get filters(){return this._filters}addContainer(e){if(this._containers.has(e))return;const s=new ou(this,g.CONTAINER);s.layout=this._createLayout(g.CONTAINER),s.element=e,this._containers.set(e,s);const{components:n}=e;for(const r of n)this.addComponent(r)}removeContainer(e){const s=this._containers.get(e);if(!s)return;const{components:n}=e;for(const r of n)this.removeComponent(r);s._destroy(),this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e}removeComponent(e){this._getViewByElement(e).element=void 0}updateComponentRole(e,s,n){}containsElement(e){return this._containers.has(e)||this._views[e.role]}refreshElement(e){const s=e.isContainer?this._containers.get(e):this._getViewByElement(e);s&&s.refresh({force:!0})}_getViewByElement(e){let{role:s}=e;if(!s)throw new Error("Component must have a role");return this.get(s)}_syncLayouts(){const{layouts:e}=this._options.resolved;if(e===!1){for(const s of this._containers.values())s.layout=void 0;for(const s of Object.values(this._views))s.layout=void 0}else for(let[s,[n,r]]of Object.entries(e)){const i=()=>this._layoutFactory.create(n,{...r,role:s,workflow:this._workflowName});if(s===g.CONTAINER)for(const o of this._containers.values())o.layout=i();else{const o=this.get(s);o&&(o.layout=i())}}}_createLayout(e){const s=this._options.resolved.layouts[e];if(!s)return;const[n,r]=s;return this._layoutFactory.create(n,{...r,role:e,workflow:this._workflowName})}get(e){return this._views[e]}get views(){return this._getViews(!0)}_getViews(e=!0){return e?[...this._containers.values(),...Object.values(this._views)]:[...Object.values(this._views),...this._containers.values()]}syncSize(){for(const e of Object.values(this._views))e._syncSize()}async refresh({force:e,data:s}={}){s=this._getData(s);let n=this._getViews(!0);await Promise.all(n.map(r=>r.refresh({force:e,data:s})))}_getData(e){return e||this._hub.states[Te()]}_getTrackerOptions(e){const s=this._options.resolved.trackers;return rw(s&&s[e]||!1)}_getContainerTracker(){if(!this._containerTracker){const e=this._hub,s=g.CONTAINER;this._containerTracker=new lo({hub:e,role:s,itemless:!0,options:()=>this._getTrackerOptions(s)})}return this._containerTracker}_error(e){console.error(e)}_destroy({dom:e}={}){for(const s of this._getViews(!1))s._destroy();for(const s of this._unsubscribes)s();this._unsubscribes=[],this._filters._destroy()}}class cw{constructor(e){this._actor=e,Vt(this,e,["syncSize","refresh","trackers","filters"])}get(e){return this._actor.get(e).interface}get all(){return this._actor.views.map(e=>e.interface)}}class aw{constructor(e,s){this._views=e;for(const n of s)n!==g.CONTAINER&&Object.defineProperty(this,n,{get:()=>e.get(n).tracker});Object.defineProperty(this,g.CONTAINER,{get:()=>e._getContainerTracker()})}}class lw{constructor(e){this._hub=e,this._unsubscribes=[e.on(eu(),s=>this._trigger(s))]}_trigger(e){this._hub.trigger(co(),{type:$e.FEEDBACK,result_type:"answer",value:e.unselected?"unselected":e.value})}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class uw{constructor(e,{client:s,options:n}){this._client=s,this._options=n,this._unsubscribes=[e.on(Xl(),r=>this._handle(r))]}_handle(e){e=os(e),e.length!==0&&this._client.api.interactions.upload(e,{merge:!0})}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}function uu(t){return async({group:e,name:s,payload:n,options:r})=>{if(e===ge.ASK)switch(s){case Ye.QUESTIONS:return t.api.ask.questions(n,r);case Ye.SEARCH:return t.api.ask.search(n,r)}return t.api[e]._run(s,n,r)}}class _o{constructor({role:e,workflow:s,...n}={}){ce(this,{role:e,workflow:s,options:n}),this._unsubscribes=[],this._rendered=new WeakMap,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}async render(e,s,n={}){this._syncElement(e);const r=this._rendered.get(e),i=vr(!1);s=this._preprocess({state:s,rendered:r},{skip:i.t})||s,this._updatePending(s,n),i.value||this._handleInput({state:s,rendered:r},n)}_syncElement(e){this._element!==e&&this._rendered.delete(this._element),this._element=e}_preprocess({state:e}){return e}_updatePending(e,s){this._pending=[Object.freeze(e),s]}_takePending(){const e=this._pending;return this._pending=void 0,e}_handleInput(){this._requestRaf()}_requestRaf(){this._requested||(this._requested=!0,Er(e=>this._doRaf(e)))}_doRaf(e){this._requested&&(this._requested=!1,this._applyRender(e))}_applyRender(e,s={}){if(!this._pending)return;let[n,{notifyUpdate:r}]=this._takePending();n=Object.freeze({...n,timestamp:e});const i=this._rendered.get(this._element),o=vr([]),c=vr({});this._render(this._element,{state:n,rendered:i,timestamp:e},{notifyUpdate:o.args,writeToState:c.merge,...s}),n=Object.freeze({...n,...c.value}),this._rendered.set(this._element,n),r&&r(...o.value),this._afterRender(this._element,n)}_render(){throw new Error("Unimplemented")}_afterRender(){}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[],this._view=void 0,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}}function fu(...t){return t.reduce((e,s)=>(e[s]=fw(s),e),{})}function fw(t){return()=>{throw new Error(`Template '${t}' is not implemented.`)}}function dw(t,e,s,n){const{templates:r}=t,[i,o]=Kt(t,s);return[i,(r.imageBlock||Is)(t,s,n),(r.infoBlock||r.productInfoBlock||po)(t,s,n),o].join("")}function hw(t,e,s){const[n,r]=Kt(t,s);return`${n}${s.value||s.text||s}${r}`}function _w(t,e,s,n){const{templates:r}=t,[i,o]=Kt(t,s);return[i,(r.imageBlock||Is)(t,s,n),(r.infoBlock||r.articleInfoBlock||hu)(t,s,n),(r.indexBlock||wo)(t,s,n),o].join("")}function du(t,e,s,n){const{templates:r}=t,[i,o]=Kt(t,s);return[i,(r.indexBlock||wo)(t,s,n),(r.infoBlock||r.articleInfoBlock||mo)(t,s,n),o].join("")}function pw(t,e,s,n){const{templates:r}=t,[i,o]=Kt(t,s);return[i,(r.imageBlock||Is)(t,s,n),(r.infoBlock||r.imageInfoBlock||_u)(t,s,n),o].join("")}function mw(t,e,s,n){const{templates:r}=t,[i,o]=Kt(t,s,{link:!1});return[i,(r.infoBlock||r.affiliationInfoBlock||gw)(t,s,n),(r.imageBlock||Is)(t,s,{brand:!0,...n}),o].join("")}function gw(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__item-info-container">${[(r.titleBlock||Rs)(t,e,s),(r.descriptionBlock||$r)(t,e,s),(r.priceBlock||bo)(t,e,s),(r.ctaBlock||yo)(t,e,s)].join("")}</div>`}function po(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__item-info-container">${[(r.titleBlock||Rs)(t,e,s),(r.descriptionBlock||$r)(t,e,s),(r.priceBlock||bo)(t,e,s)].join("")}</div>`}function hu(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__item-info-container">${[(r.titleBlock||Rs)(t,e,s),(r.dateBlock||go)(t,e,s),(r.descriptionBlock||$r)(t,e,s),(r.ctaBlock||yo)(t,e,s)].join("")}</div>`}function mo(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__item-info-container">${[(r.titleBlock||Rs)(t,e,s),(r.authorsAndDateBlock||gu)(t,e,s)].join("")}</div>`}function _u(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__item-info-container">${[(r.titleBlock||Rs)(t,e,s)].join("")}</div>`}function Rs({className:t},{title:e,_title_with_markups:s}){const n=Eo(s)||nt(e);return n?`<div class="${t}__item-title">${n}</div>`:""}function pu({className:t},{brand:e,brand_logo:s}){if(!e&&!s)return"";const n=s?`<img class="${t}__item-brand-logo" src="${s}"${e?` alt="${e}"`:""}>`:`<div class="${t}__item-brand">${e}</div>`;return`<div class="${t}__item-brand-container">${n}</div>`}function $r({className:t},{snippet:e,description:s}){return e?`<div class="${t}__item-snippet">${Eo(e)}</div>`:s?`<div class="${t}__item-desc">${nt(s)}</div>`:""}function go({className:t,templates:e},{created_at:s,updated_at:n,published_at:r}){const i=r||s||n;return i?`<div class="${t}__item-date">${Eu(i,e.date)}</div>`:""}function mu({className:t},{authors:e}){return e&&Array.isArray(e)&&e.length?`<div class="${t}__item-authors">${e.join(", ")}</div>`:""}function gu(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__item-authors-and-date-container">${[(r.authorsBlock||mu)(t,e,s),(r.dateBlock||go)(t,e,s)].join("")}</div>`}function bo(t,e){const{className:s,templates:n}=t,{sale_price:r,original_price:i,currency:o="USD"}=e,c=r||i;if(!c)return"";const a=i!==void 0&&r!==void 0&&r<i,u=e.discount_rate_percent||(a?Math.floor((1-r/i)*100):void 0);let l="";if(a&&(l+=`<span class="${s}__item-original-price miso-price" data-currency="${o}">${i}</span><br>`),l+=`<span class="${s}__item-price miso-price" data-currency="${o}">${c}</span>`,u){const f=(n.discountRateText||bu)(t,{...e,discount_rate_percent:u});l+=` <span class="${s}__item-discount-rate">${f}</span>`}return`<div class="${s}__item-price-container">${l}</div>`}function bu(t,{discount_rate_percent:e}){return`(${e}% off)`}function Is(t,e,s={}){const{className:n,templates:r}=t,{cover_image:i,image_src:o,image_alt:c}=e;if(!i&&!o)return"";const a=o?"image":"cover-image",u=a==="image"?`<img class="${n}__item-${a}" src="${o}"${c?` alt="${c}"`:""}>`:`<img class="${n}__item-${a}" src="${i}">`,l=a==="cover-image"&&s.brand?(r.brandBlock||pu)(t,e,s):"";return`<div class="${n}__item-${a}-container">${u}${l}</div>`}function wo({className:t},e,{index:s}){return`<div class="${t}__item-index-container"><span class="${t}__item-index miso-citation-index" data-index="${s+1}"></span></div>`}function yo(t,e,s){const{className:n,templates:r}=t,i=$t.asFunction(r.cta)(t,e,s);return i?`<div class="${n}__item-cta-container">${i}</div>`:""}function bw(t,e,s){const{templates:n}=t,{url:r}=e;if(!r)return"";const[i,o]=Kt(t,{url:r},{classSuffix:"item-cta",role:"cta"}),c=$t.asFunction(n.ctaText)(t,e,s);return c?`${i}${c}${o}`:""}function Kt({className:t,options:e={}},{product_id:s,url:n},{classSuffix:r="item-body",role:i="item",...o}={}){const c=o.link!==!1&&n?"a":"div",a=o.link!==!1&&n?`href="${n}" ${ww(e.link)}`:"",u=s?`${eb}="${s}"`:"",l=i?`data-role="${i}"`:"";return[`<${c} class="${t}__${r}" ${l} ${u} ${a}>`,`</${c}>`]}function ww(t={}){const{target:e="_blank",rel:s="noopener",open:n=!0}=t;let r="";return n&&(e&&(r+=` target="${e}"`),s&&(r+=` rel="${s}"`)),r}const wu=Object.freeze({locale:"en-US",year:"numeric",month:"short",day:"numeric"}),yu="en-US";function Eu(t,e=wu){switch(typeof e){case"function":return e(t);case"string":return new Date(t).toLocaleDateString(e);case"object":return new Date(t).toLocaleDateString(e.locale||wu.locale,e);default:throw new Error(`Invalid date format: ${e}`)}}function yw(t,e=yu){switch(typeof e){case"function":return e(t);case"string":return new Intl.NumberFormat(e).format(t);case"object":return new Intl.NumberFormat(e.locale||yu.locale,e).format(t);default:throw new Error(`Invalid number format: ${e}`)}}function Eo(t){return t&&t.replace(/<\/mark>\s+<mark>/g,"</mark>&nbsp;<mark>")}function Ew(t=""){return typeof t=="function"?t:()=>t}const $t=Object.freeze({tagPair:Kt,formatDate:Eu,formatNumber:yw,formatHtmlWithMarkup:Eo,escapeHtml:nt,asFunction:Ew});class rt extends _o{constructor({className:e,templates:s,...n}={}){super(n),ce(this,{className:e,templates:{...fu("root"),...s,helpers:$t}})}_preprocess({state:e}){const s=this.templates.root(this,e);return{...e,html:s}}_render(e,{state:s}){e.innerHTML=s.html}}const Sw="miso-banner";class Pr extends HTMLElement{static get tagName(){return Sw}async connectedCallback(){Pr.MisoClient.ui.layouts.create("banner").render(this)}}class Su{constructor(){this._entries=new WeakMap}isTracked(e){return this._entries.has(e)}async track(e,s={}){if(!s||this._entries.get(e))return!1;const r=new AbortController,{signal:i}=r;this._entries.set(e,{ac:r});let o=!1;try{await Gi(e,{...s,signal:i}),o=!0}catch(c){if(c.name!=="AbortError")throw c}finally{this._entries.delete(e)}return o}untrack(e){const s=this._entries.get(e);s&&(s.ac.abort(),this._entries.delete(e))}}const vw="container";class vu extends _o{static get type(){return vw}constructor({logo:e="auto",...s}={}){super({logo:e,...s}),this._impression=!1,this._viewables=new Su}_syncElement(e){this._element!==e&&this._viewables.untrack(this._element),super._syncElement(e)}_render(e,s){this._syncBanner(e),this._syncStatus(e,s),this._trackInteractions(e,s)}_afterRender(e,s){this._trackInteractions(e,s)}_syncBanner(e){const s=Pr.tagName,n=this._shallRenderBanner(e),r=e.querySelector(s);n&&!r?e.insertAdjacentHTML("beforeend",`<${s} visible-when="ready"></${s}>`):!n&&r&&r.remove()}_shallRenderBanner(e){const{logo:s}=this.options,{logo:n}=e,r=n!==void 0&&n!=="auto"?n:s;return r==="auto"?e.components.some(({role:i})=>Tw(i)):!!r}_syncStatus(e,{state:s}){if(!e)return;const{status:n,ongoing:r,meta:{miso_id:i,empty:o=!1,unanswerable:c=!1}={}}=s,a=[n,o?M.EMPTY:M.NONEMPTY];n===M.READY&&a.push(r?M.ONGOING:M.DONE),c&&a.push(M.UNANSWERABLE),e.setAttribute("status",a.join(" ")),i?e.setAttribute("miso-id",i):e.removeAttribute("miso-id")}_trackInteractions(e,s){const{status:n}=s;n===M.READY&&(this._trackImpression(),this._trackViewable(e))}_trackImpression(){const{impression:e}=this._view.tracker.options||{};e&&(this._impression||(this._impression=!0,this._view.tracker.impression()))}async _trackViewable(e){const{viewable:s}=this._view.tracker.options||{};s&&await this._viewables.track(e,s)&&this._view.tracker.viewable()}}function Tw(t){return t===g.PRODUCTS||t===g.ANSWER}const Aw="error",Ow="miso-error";function Cw(t,e){const{className:s,templates:n}=t,{status:r,value:i}=e;return r!=="erroneous"?"":`<div class="${s}"><div class="${s}__message">${n.message(t,i)}</div></div>`}function xw(t,e){return`Error: ${e.message||e}`}const Tu=Object.freeze({root:Cw,message:xw});class Au extends rt{static get type(){return Aw}static get defaultTemplates(){return Tu}constructor({className:e=Ow,templates:s,...n}={}){super({className:e,templates:{...Tu,...s},...n})}}const Rw='<svg viewBox="0 0 500 200"><path d="M131.1,39.4 C144.3,39.4 155,43.8 163.2,52.7 C171.3,61.3 175.2,72.9 175.2,87.6 L175.2,159.1 L140.4,159.1 L140.4,90.6 C140.4,78.7 134.6,71.5 123.7,71.5 C112.3,71.5 105.5,79.7 105.5,93.4 L105.5,159.1 L70.7,159.1 L70.7,90.6 C70.7,78.7 64.9,71.5 54,71.5 C42.6,71.5 35.8,79.7 35.8,93.4 L35.8,159.1 L1,159.1 L1,42.7 L35.8,42.7 L35.8,53.4 C42.1,44.1 52.6,39.4 67,39.4 C80.5,39.4 90.7,44.5 97.4,54.8 C104.6,44.5 115.8,39.4 131.1,39.4 Z M202,42.4 L238.4,42.4 L238.4,159.1 L202,159.1 Z M202,0 L238.4,0 L202,36.4 Z M302.6,76.6 C302.6,81.2 311.7,83.8 323,86.8 C339.2,90.3 360.5,98.7 360.3,124 C360.3,136.6 355.6,146.1 346.2,152.6 C336.8,158.9 325.3,162.1 311.5,162.1 C286.9,162.1 270,152.8 261.1,134.5 L291.6,117.3 C294.6,126.3 301.4,131 311.5,131 C319.9,131 324.2,128.7 324.2,123.8 C324.2,119.1 315,116.3 303.8,113.5 C287.6,109.1 266.5,101.2 266.5,77.5 C266.5,65.4 270.9,56.1 279.6,49.4 C288.5,42.6 299.5,39.4 312.4,39.4 C331.9,39.4 348.6,48.2 358.2,64.3 L328.2,80.3 C324.4,73.6 319.2,70.1 312.4,70.1 C305.9,70.1 302.6,72.2 302.6,76.6 Z M480.4,144.5 C468.4,156.3 453.7,162.1 436.3,162.1 C419,162.1 404.2,156.3 392.2,144.5 C380.3,132.6 374.2,118 374.2,100.8 C374.2,83.6 380.3,69.1 392.2,57.3 C404.2,45.4 419,39.4 436.3,39.4 C453.7,39.4 468.4,45.4 480.4,57.3 C492.4,69.1 498.5,83.6 498.5,100.8 C498.5,118 492.4,132.6 480.4,144.5 Z M417.1,120.5 C422.2,125.6 428.6,128.2 436.3,128.2 C444.1,128.2 450.4,125.6 455.5,120.5 C460.7,115.4 463.3,108.9 463.3,100.8 C463.3,92.6 460.7,86.1 455.5,81 C450.4,75.9 444.1,73.3 436.3,73.3 C428.6,73.3 422.2,75.9 417.1,81 C411.9,86.1 409.3,92.6 409.3,100.8 C409.3,108.9 411.9,115.4 417.1,120.5 Z" /></svg>',Iw='<svg viewBox="0 0 16 16"><path d="M8.342 3.652 4.979 5.708a1 1 0 0 0-.479.852v5.561a1 1 0 0 0 .87.992l6.029.79a1 1 0 0 0 1.042-.583l2.534-5.65a1 1 0 0 0-.74-1.394l-3.543-.623.9-3.1A2.097 2.097 0 0 0 10.297 0L8.719 3.237a1 1 0 0 1-.377.415ZM1 6.5a1.5 1.5 0 0 1 3 0v6a1.5 1.5 0 0 1-3 0Z"/></svg>',kw="banner",$w="miso-banner";function Pw(t){const{className:e,templates:s}=t;return`<div class="${e}"><div class="${e}__logo">${s.logo(t)}</div></div>`}const Ou=Object.freeze({root:Pw,logo:()=>Rw});class Lw extends rt{static get type(){return kw}static get defaultTemplates(){return Ou}constructor({className:e=$w,templates:s,...n}={}){super({className:e,templates:{...Ou,...s},...n})}}function Nw(t,e,s){const n=new Map,r=new Map,i=[];for(let o=0;o<t.length;o++){const c=t[o],a=s[o],u=e[o],l=Object.freeze({index:o,key:c,value:u,element:a});n.set(c,l),r.set(a,l),i.push(l)}return{k2b:n,e2b:r,entries:i}}function Cu(t,e){const s=[];for(const n of e.entries){const r=t.e2b.get(n.element);(!r||r.key!==n.key)&&s.push(n)}return s}class xu{constructor(){this._k2b=new Map,this._e2b=new Map,this._entries=[]}get entries(){return[...this._entries]}get(e){return this._e2b.get(e)||void 0}find(e){return this._k2b.get(e)||void 0}update(e,s,n){const r=Nw(e,s,n),i={k2b:this._k2b,e2b:this._e2b,entries:this._entries},o=Cu(i,r),c=Cu(r,i);return this._k2b=r.k2b,this._e2b=r.e2b,this._entries=r.entries,{bounds:o,unbounds:c}}clear(){const e=this._entries;return this._k2b=new Map,this._e2b=new Map,this._entries=[],{bounds:[],unbounds:e}}}function So(t){hn(t,Uw.prototype)}class Uw{_initTrackable(){this._bindings=new xu,this._viewables=new Su}_syncBindings(e,s){const n=this._getItems(s)||[],r=n.map(a=>this._getItemKey(a)),i=this._getItemElements(e),{bounds:o,unbounds:c}=this._bindings.update(r,n,i);this._onBindingsUpdate(o,c)}_clearBindings(){const{bounds:e,unbounds:s}=this._bindings.clear();this._onBindingsUpdate(e,s)}_getItemKey(e){return e.product_id||e.text||e.id||e}_getItems(e){throw new Error("Not implemented.")}_getItemElements(e){throw new Error("Not implemented.")}_onBindingsUpdate(e,s){this._trackImpressions(e),this._untrackViewables(s),this._trackViewables(e)}_trackImpressions(e){if(e.length===0)return;const{impression:s}=this._view.tracker.options||{};s&&this._view.tracker.impression(e.map(({value:n})=>n))}_untrackViewables(e){for(const{element:s}of e)this._viewables.untrack(s)}_trackViewables(e){if(e.length===0)return;const{viewable:s}=this._view.tracker.options||{};if(s)for(const{value:n,element:r}of e)(async()=>await this._viewables.track(r,s)&&this._view.tracker.viewable([n]))()}_trackClick(e,s){const{click:n}=this._view.tracker.options||{};iw(n,e)&&(fo(e),this._view.tracker.click([s.value]))}_destroyTrackable(){const{unbounds:e}=this._bindings.clear();this._untrackViewables(e)}}function Dw(t){hn(t,Fw.prototype)}class Fw{_initTriggerable(){this._trigger=void 0}_syncTrigger(e,s){if(!this.options.infiniteScroll)return;const n=this._view.workflowOptions.pagination;!n.active||n.mode!=="infiniteScroll"||(s.status===M.READY?this._trackTrigger(e):this._untrackTrigger())}async _trackTrigger(e){if(this._trigger)return;const s=e.querySelector('[data-role="trigger"]');if(!s)return;const n=new AbortController;this._trigger=Object.freeze({element:s,ac:n});let r=!1;try{await Gi(s,{area:1,duration:0,signal:n.signal}),r=!0}catch(i){if(i.name!=="AbortError")throw i}finally{this._trigger=void 0}r&&this._onTrigger()}_onTrigger(){this._view.hub.trigger(ao())}_untrackTrigger(){this._trigger&&(this._trigger.ac&&this._trigger.ac.abort(),this._trigger=void 0)}_destroyTriggerable(){this._untrackTrigger()}}function Mw(t,e){const{className:s,role:n,templates:r,options:i}=t,{status:o}=e,c=n?` data-role="${n}"`:"",a=i.itemType?` data-item-type="${i.itemType}"`:"";return`<div class="${s} ${o}"${c}${a}>${o===M.READY?r[o](t,e):""}${r.trigger(t,e)}${r.loading(t,e)}</div>`}function jw(t,e){const{templates:s}=t,n=t._getItems(e)||[];return n.length>0||e.ongoing?s.body(t,e,n):s.empty(t,e)}function qw(t,e,s){return t.templates.list(t,e,s)}function Bw(t,e,s){const{className:n,templates:r,options:i}=t,o=r.ordered?"ol":"ul",c=i.itemType?` data-item-type="${i.itemType}"`:"";return`<${o} class="${n}__list" data-role="list"${c}>${r.items(t,e,s)}</${o}>`}function Hw(t,e,s,{offset:n=0}={}){const{templates:r}=t;let i=n;return s.map(o=>r.item(t,e,o,i++)).join("")}function zw(t,e,s,n){const{className:r,templates:i,options:o}=t,{itemType:c}=o,a=i[c](t,e,s,{index:n});return`<li class="${r}__item">${a}</li>`}function Vw(t,e){const{className:s}=t;return`<div class="${s}__trigger" data-role="trigger"></div>`}function Ww(){return'<div class="miso-loading" aria-label="Loading" data-role="loading"></div>'}const Ru=Object.freeze({product:dw,article:_w,compactArticle:du,image:pw,question:hw,root:Mw,[M.READY]:jw,empty:()=>"",body:qw,list:Bw,ordered:!1,items:Hw,item:zw,productInfoBlock:po,articleInfoBlock:hu,compactArticleInfoBlock:mo,imageInfoBlock:_u,brandBlock:pu,titleBlock:Rs,descriptionBlock:$r,dateBlock:go,authorsBlock:mu,authorsAndDateBlock:gu,priceBlock:bo,discountRateText:bu,ctaBlock:yo,cta:bw,imageBlock:Is,indexBlock:wo,trigger:Vw,loading:Ww});class Xe extends rt{static get defaultTemplates(){return Ru}constructor({templates:e,itemType:s="product",...n}){super({templates:{...Ru,...e},itemType:s,...n}),this._initTrackable(),this._initTriggerable()}initialize(e){this._unsubscribes.push(e.proxyElement.on("click",this._onClick.bind(this)))}_preprocess({state:e,rendered:s}){const n=this._shallRenderIncrementally(e,s),r=this._html(e,s,n);return{...e,incremental:n,html:r}}_shallRenderIncrementally(e,s){return this.options.incremental&&s&&s.value&&s.value.length>0&&e.value&&e.value.length>=s.value.length&&e.session&&s.session&&e.session.id===s.session.id}_html(e,s,n){if(n){const r=s.value.length,i=(this._getItems(e)||[]).slice(r);return i.length>0?this.templates.items(this,e,i,{offset:r}):""}else return this.templates.root(this,e)}_render(e,{state:s},{notifyUpdate:n}){const{incremental:r,html:i}=s;r?i?this._getListElement(e).insertAdjacentHTML("beforeend",i):n(!1):e.innerHTML=i}_afterRender(e,s){this._syncBindings(e,s),this._syncTrigger(e,s)}_unrender(){this._clearBindings(),this._untrackTrigger()}_getItems(e){return e.value&&(e.value.products||e.value)}_getListElement(e){return e.querySelector('[data-role="list"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="item"]')):[]}_onClick(e){const s=e.target.closest('[data-role="item"]');if(!s)return;const n=this._bindings.get(s);n&&(this._trackClick(e,n),this._emitClickEvent(e,n))}_emitClickEvent(e,s){const{session:n}=this._view._state,{value:r,element:i}=s;this._view._events.emit("click",{session:n,value:r,element:i,domEvent:e})}destroy(){this._destroyTrackable(),this._destroyTriggerable(),this._view=void 0,super.destroy()}}So(Xe.prototype),Dw(Xe.prototype);const Qw="list",Iu="miso-list";class ks extends Xe{static get type(){return Qw}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Iu}constructor({className:e=Iu,...s}={}){super({className:e,...s})}}const Gw="horizontal",ku="miso-horizontal";class $u extends Xe{static get type(){return Gw}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return ku}constructor({className:e=ku,...s}={}){super({className:e,...s})}}const Kw="cards",Pu="miso-cards";class Yw extends Xe{static get type(){return Kw}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Pu}constructor({className:e=Pu,...s}={}){super({className:e,...s})}}function Lu(t,e,s){s===void 0?t.removeAttribute(e):t.setAttribute(e,s)}function $s(t,e,s){s?t.classList.add(e):t.classList.remove(e)}function Jw(t){if(typeof t=="number")return t;const[e,s]=Zw(t);switch(s){case"":case"px":return e;case"rem":return Xw(e);default:throw new Error(`Unsupported unit: ${s}`)}}function Zw(t){const e=t.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*)$/);if(!e)throw new Error(`Invalid length: ${t}`);const s=parseFloat(e[1]),n=e[2]||"";return[s,n]}function Xw(t=1){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function vo(t){return t===void 0||t instanceof Nu?t:new Nu(t)}class Nu{constructor(e){switch(this._width=NaN,this._height=NaN,typeof e){case"number":this._width=e,this._height=1;break;case"object":Array.isArray(e)&&(this._width=parseFloat(e[0]),this._height=parseFloat(e[1]));break;case"string":const s=e.indexOf("/");s<0?(this._width=parseFloat(e),this._height=1):(this._width=parseFloat(e.slice(0,s).trim()),this._height=parseFloat(e.slice(s+1).trim()));break}if(this._width===NaN||this._height===NaN)throw new Error(`Invalid aspect ratio value: ${e}`)}get width(){return this._width}get height(){return this._height}get floatValue(){return this._width/this._height}scaleBy(e){return e=vo(e),vo([e._width*this._width,e._height*this._height])}toString(){return this._height===1?`${this._width}`:`${this._width} / ${this._height}`}}function ey(t){hn(t,ty.prototype)}class ty{_initSwipeable(){this._swipeableContext={itemCount:void 0,itemIndex:void 0,displayedCount:void 0,displayedIndex:void 0,displayEventIndex:void 0}}get itemIndex(){return this._swipeableContext.itemIndex}set itemIndex(e){const s=this._swipeableContext;s.itemCount!==void 0&&(e<0?e=s.itemCount-1:e>=s.itemCount&&(e=0),s.itemIndex=e,Er(()=>this._syncDisplayedSwipeableItemIndex()))}next(){this._swipeableContext.itemCount!==void 0&&this.itemIndex++}previous(){this._swipeableContext.itemCount!==void 0&&this.itemIndex--}_renderSwipeable(e,s,n){this._syncSwipeableItemCount(s),this._syncDisplayedSwipeableItemCount(),this._syncDisplayedSwipeableItemIndex()}_afterRenderSwipeable(){this._emitSwipeableDisplayEvent()}_syncSwipeableItemCount({state:e}={}){const s=this._swipeableContext,n=this._getItems(e),r=s.itemCount,i=s.itemCount=n?n.length:void 0;i!==r&&(i===void 0?s.itemIndex=void 0:r===void 0&&(s.itemIndex=0))}_syncDisplayedSwipeableItemCount(){const e=this._swipeableContext,{itemCount:s}=e;if(s===e.displayedCount)return;let{element:n}=this._view;n=n.firstElementChild,n&&(Lu(n,"data-item-count",s),e.displayedCount=s)}_syncDisplayedSwipeableItemIndex(){const e=this._swipeableContext,{itemIndex:s}=e;s!==e.displayedIndex&&(e.displayedIndex=s,this._syncSwipeableListIndex(s),this._syncSwipeableIndicatorIndex(s))}_syncSwipeableListIndex(e){const{element:s}=this._view,n=s&&this._getListElement(s);n&&(n.style.left=`${-e*100}%`)}_syncSwipeableIndicatorIndex(e){const{element:s}=this._view,n=s&&this._getSwipeableIndicatorElement(s);if(!n)return;let r=0;for(const i of n.children)$s(i,"active",r===e),r++}_getSwipeableIndicatorElement(e){return e.querySelector('[data-role="index-indicator"]')}_emitSwipeableDisplayEvent(){const e=this._swipeableContext,s=e.displayedIndex;e.displayEventIndex!==s&&(e.displayEventIndex=s,this._view._events.emit("display",{index:s}))}_onClickSwipeable(e){const{target:s}=e;s.closest('[data-role="previous"]')&&(e.preventDefault(),this.previous()),s.closest('[data-role="next"]')&&(e.preventDefault(),this.next())}}const sy="1.12.6";function ny(t){const s=t*Math.tan(3*Math.PI/8),n=s*Math.sin(Math.PI/4);return`M${t} 0L${100-s} 0A${t} ${t} 0 0 1 ${100-n} ${n}L${n} ${100-n}A${t} ${t} 0 0 1 0 ${100-s}L0 ${t}Z`}const Pt="miso-ui-icon",Uu=`${Pt}-svg-${sy.replaceAll(".","_")}`,et={SEND:"send",SEARCH:"search",TRIANGLE:"triangle",TRIANGLE_EQ:"triangle-eq",CHEVRON:"chevron",CHEVRON_NEGATIVE:"chevron-negative",BULB:"bulb"},ry=`<symbol id="${Pt}-${et.SEND}" viewBox="0 0 32 32"><path fill="currentColor" d="M11.499,19.173l5.801,-5.849c0.389,-0.392 1.022,-0.394 1.414,-0.006c0.392,0.389 0.395,1.022 0.006,1.414l-5.798,5.847l5.306,8.002c0.207,0.313 0.572,0.483 0.945,0.441c0.373,-0.042 0.691,-0.289 0.824,-0.64l9.024,-23.904c0.138,-0.366 0.05,-0.78 -0.226,-1.058c-0.276,-0.278 -0.689,-0.369 -1.057,-0.233l-24.004,8.892c-0.353,0.13 -0.602,0.448 -0.646,0.821c-0.044,0.373 0.125,0.74 0.438,0.948l7.973,5.325Z"/></symbol>`,iy=`<symbol id="${Pt}-${et.SEARCH}" viewBox="0 0 24 24"><path fill="currentColor" d="M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"/></symbol>`,oy=`<symbol id="${Pt}-${et.TRIANGLE}" viewBox="-5 -5 105 105"><path d="${ny(5)}"/></symbol>`,cy=`<symbol id="${Pt}-${et.TRIANGLE_EQ}" viewBox="-100 -100 200 200"><path d="M12.99 -77.5A15 15,0,0,0,-12.99 -77.5L-73.61 27.5A15 15,0,0,0,-60.62 50L60.62 50A15 15,0,0,0,73.61 27.5L12.99 -77.5Z"/></symbol>`,ay=`<symbol id="${Pt}-${et.CHEVRON}" viewBox="-100 -100 200 200"><path d="M10.61 -43.94A15 15,0,0,0,-10.61 -43.94L-60.61 6.06A15 15,0,0,0,-39.39 27.27L0 -12.12L39.39 27.27A15 15,0,0,0,60.61 6.06L10.61 -43.94Z"/></symbol>`,ly=`<symbol id="${Pt}-${et.CHEVRON_NEGATIVE}" viewBox="-100 -100 200 200"><path d="M100 100V-200H-200V200H200ZM-10.61 -43.94A15 15,0,0,1,10.61 -43.94L60.61 6.06A15 15,0,0,1,39.39 27.27L0 -12.12L-39.39 27.27A15 15,0,0,1,-60.61 6.06L-10.61 -43.94Z"/></symbol>`,uy=`<symbol id="${Pt}-${et.BULB}" viewBox="0 0 16 16"><path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a2 2 0 0 0-.453-.618A5.98 5.98 0 0 1 2 6m6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1"/></symbol>`,fy=`<svg id="${Uu}" style="display:none;">${[ry,iy,oy,cy,ay,ly,uy].join("")}</svg>`;let Du=!1;function dy(){Du||document.head.querySelector(`#${Uu}`)||(Du=!0,document.head.insertAdjacentHTML("beforeend",fy))}dy();function bn(t){return`<svg class="miso-ui-icon miso-ui-icon-${t}"><use href="#${Pt}-${t}"></use></svg>`}const hy=new Set(Object.values(et));function _y(t){return hy.has(t)?bn(t):""}const py=bn(et.TRIANGLE),Fu=bn(et.CHEVRON),my=bn(et.CHEVRON_NEGATIVE),gy=bn(et.BULB),by="carousel",Mu="miso-carousel",ju=Object.freeze({body:yy,controls:Ey,controlContainer:Sy,control:vy,controlIcon:Ty,indexIndicator:Ay,indexIndicatorItem:()=>"",trigger:()=>""}),wy=Object.freeze({...Xe.defaultTemplates,...ju});function yy(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__viewport"><div class="${n}__viewport-inner">${r.list(t,e,s)}</div></div>${r.controls(t,e,s)}`}function Ey(t,e,s){const{templates:n}=t;return`${n.controlContainer(t,e,"previous")}${n.controlContainer(t,e,"next")}${n.indexIndicator(t,e,s)}`}function Sy(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__control-container-${s}">${r.control(t,e,s)}</div>`}function vy(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__control-${s}" data-role="${s}">${r.controlIcon(t,e,s)}</div>`}function Ty(t){return t.options.itemType==="image"?my:Fu}function Ay(t,e,s){const{className:n,templates:r}=t;return`<ul class="${n}__index-indicator" data-role="index-indicator">${s.map(i=>`<li class="${n}__index-indicator-item">${r.indexIndicatorItem(t,e,i)}</li>`).join("")}</ul>`}class qu extends Xe{static get type(){return by}static get defaultTemplates(){return wy}static get defaultClassName(){return Mu}constructor({className:e=Mu,templates:s,...n}={}){super({className:e,templates:{...ju,...s},...n}),this._initSwipeable()}_render(e,s,n){super._render(e,s,n),this._renderSwipeable(e,s,n)}_afterRender(e,s){super._afterRender(e,s),this._afterRenderSwipeable(e,s)}_onClick(e){this._onClickSwipeable(e),super._onClick(e)}}ey(qu.prototype);function Oy(t,e){const s=e*2;let n=Math.max(s-t,0),r=t;const i=Math.min(Math.floor(n/3),r);r-=i,n-=i*3;const o=Math.min(n,r);return r-=o,n-=o,[i,o,r]}function Cy(t,e,s,n){const{className:r,templates:i,options:o}=t,{itemType:c}=o,a=i[c](t,e,s,{index:n}),u=s._size?` ${r}__item-${s._size}`:"";return`<li class="${r}__item${u}">${a}</li>`}const xy="16rem",Bu=Object.freeze({...Xe.defaultTemplates,item:Cy}),Ry="gallery",Hu="miso-gallery";class zu extends Xe{static get type(){return Ry}static get defaultTemplates(){return Bu}static get defaultClassName(){return Hu}constructor({className:e=Hu,templates:s,...n}={}){super({className:e,templates:{...Bu,...s},...n}),this._galleryContext={itemAspectRatio:void 0,itemCount:void 0,columnCount:void 0}}syncSize(){const{element:e}=this._view,s=e&&this._getListElement(e);s&&(this._syncListAspectRatio(s),this._syncItemSizes(s))}_preprocess({state:e,rendered:s}){const n=this._shallRenderIncrementally(e,s),r=n?void 0:this._bodyHtml(e),i=this._itemsHtml(e,s);return{...e,...G({incremental:n,bodyHtml:r,itemsHtml:i})}}_bodyHtml(e){return this.templates.root(this,{...e,value:[]})}_itemsHtml(e,s){const n=s&&s.value&&s.value.length||0,r=(this._getItems(e)||[]).slice(n);return r.length>0?this.templates.items(this,e,r,{offset:n}):""}_render(e,s,n){this._syncItemCount(s),this._syncCssVariables();const r=this._renderListElement(e,s,n);r&&(this._syncListAspectRatio(r),this._renderItems(r,s,n))}_renderListElement(e,{state:s}){const{incremental:n,bodyHtml:r}=s;return n||(e.innerHTML=r),this._getListElement(e)}_renderItems(e,s){s.state.incremental?this._appendItems(e,s):this._updateItems(e,s)}_updateItems(e,{state:s}){const{itemSizes:n}=this._galleryContext,r=this._writeItemSizes(this._getItems(s)||[],n);e.innerHTML=this.templates.items(this,s,r)}_appendItems(e,{state:s}){const{itemSizes:n}=this._galleryContext;this._syncItemSizes(e);const r=e.children.length,i=this._writeItemSizes((this._getItems(s)||[]).slice(r),n,r);e.insertAdjacentHTML("beforeend",this.templates.items(this,s,i,{offset:r}))}_writeItemSizes(e,[s=0,n=0]=[],r=0){let i=0;r>0&&(i=Math.min(r,s),r-=i,s-=i),r>0&&(i=Math.min(r,n),r-=i,n-=i);const o=[];for(const c of e){let a="small";s>0?(a="large",s--):n>0&&(a="medium",n--),o.push({...c,_size:a})}return o}_syncCssVariables(){const e=this._galleryContext;let{itemAspectRatio:s=1}=this.options;s=e.itemAspectRatio=vo(s);const{element:n}=this._view;n&&(n.style.setProperty("--miso-gallery-item-1x1-aspect-ratio",`${s}`),n.style.setProperty("--miso-gallery-item-1x2-aspect-ratio",`${s.scaleBy([1,2])}`))}_syncListAspectRatio(e){const s=this._galleryContext,{itemCount:n,itemAspectRatio:r}=s,{height:i=xy}=this.options,o=Jw(i),c=e.clientWidth;if(c===0){s.columnCount=void 0,s.itemSizes=void 0;return}const a=s.columnCount=Math.round(c*r.width*2/(o*r.height));s.itemSizes=Oy(n,a),e.style.aspectRatio=`${a} / 2`,e.style.height=n>0?"auto":"0"}_syncItemCount({state:e}={}){const s=this._getItems(e);this._galleryContext.itemCount=s?s.length:void 0}_syncItemSizes(e){const{itemSizes:s=[]}=this._galleryContext;let[n=0,r=0]=s;const{className:i}=this;for(const o of e.children){let c=!1,a=!1;n>0?(c=!0,n--):r>0&&(a=!0,r--),$s(o,`${i}__item-large`,c),$s(o,`${i}__item-medium`,a),$s(o,`${i}__item-small`,!c&&!a)}}}const Iy="search-box",Vu="miso-search-box",ky="miso-autocomplete";function $y(t){const{className:e,templates:s,role:n,options:r,autocomplete:i}=t,{placeholder:o}=r,c=n?`data-role="${n}"`:"";return`
<div class="${e}" ${c}>
  <div class="${e}__input-group">
    <input class="${e}__input" type="text" data-role="input" ${o?`placeholder="${o}"`:""}>
    <button class="${e}__button" type="submit" data-role="submit">${s.buttonContent(t)}</button>
  </div>
  <div class="${i.className}" data-role="autocomplete"></div>
</div>`.trim()}function Py(t){const{templates:e,options:s}=t;if(s.buttonText)return s.buttonText;const{buttonText:n,buttonIcon:r}=e,i=typeof n=="function"?n(t):`${n}`,o=typeof r=="function"?r(t):_y(r)||`${r}`;return i+o}function Ly(t,e){const{templates:s,workflow:n,autocomplete:r}=t;t={templates:s,workflow:n,...r};const i=[],o=[];for(const c of e)(c.product?i:o).push(c);return s.queries(t,o)+(o.length>0&&i.length>0?"<hr>":"")+s.products(t,i)}function Ny(t,e){const{templates:s}=t;return s.completionList(t,"query",e)}function Uy(t,e){const{templates:s}=t;return s.completionList(t,"product",e)}function Dy(t,{text:e,text_with_inverted_markups:s}={}){return s||nt(e)}function Fy(t,{product:e}){const{templates:s}=t,[n,r]=s.helpers.tagPair(t,e,{role:!1});return[n,s.imageBlock(t,e),s.productInfoBlock(t,e),r].join("")}function My(t,e,s){const{className:n,templates:r}=t;return`<ul class="${n}__${e}-list" data-role="${e}-list">${s.map(i=>r.completionItem(t,e,i)).join("")}</ul>`}function jy(t,e,s){const{className:n,templates:r}=t;return`
<li class="${n}__${e}-item" data-role="${e}-item" data-index="${s._index}" tabindex="0">
  ${r[e](t,s)}
</li>`.trim()}const Wu=Object.freeze({root:$y,buttonContent:Py,buttonText:"",buttonIcon:"search",completions:Ly,completionList:My,completionItem:jy,queries:Ny,products:Uy,query:Dy,product:Fy,imageBlock:Is,productInfoBlock:po}),qy=Object.freeze({className:ky,debounce:300});class Ps extends rt{static get type(){return Iy}static get defaultTemplates(){return Wu}static get defaultClassName(){return Vu}constructor({className:e=Vu,templates:s,autocomplete:n,...r}={}){super({className:e,templates:{...Wu,...s},...r}),ce(this,{autocomplete:{...qy,...n}}),this._contexts=new WeakMap,this._prevInput=void 0,this._debounce=ll(this.autocomplete.debounce)}initialize(e){const{proxyElement:s,hub:n}=e;this._unsubscribes=[...this._unsubscribes,s.on("input",r=>this._syncInput(r)),s.on("keydown",r=>this._handleKeyDown(r)),s.on("click",r=>this._handleClick(r)),s.on("focusin",r=>this._handleFocusIn(r)),s.on("focusout",r=>this._handleFocusOut(r)),n.on(io(),()=>e.refresh({force:!0}))]}focus(){this._element?this._context().focus():this._focusRequested=!0}open(){this._element.classList.add("open")}close(){this._element.classList.remove("open")}set value(e){this._element?this._context().value=e:this._valueRequested=e}_preprocess({state:e}){return e=super._preprocess({state:e}),{...e,completions:this._view.hub.states[io()]}}_render(e,s,n){e.childElementCount===0&&super._render(e,s,n),this._updateCompletions(e,s,n)}_afterRender(e,s){this._fullfillFocusRequest(e),this._fullfillValueRequest(e)}_updateCompletions(e,{state:s,rendered:n},{writeToState:r}){if(!s.completions)return;const{status:i=M.INITIAL,session:o,value:c}=s.completions,{index:a}=o;if(n&&n.completions.index===a&&n.completions.status===i)return;const u=this._context(e),{autocompleteElement:l}=u;if(!l)return;const f=u.trackItems(c);$s(e,"nonempty",f.length>0),l.setAttribute("data-status",i),l.innerHTML=this.templates.completions(this,f),r({completions:{index:a,status:i}})}_fullfillFocusRequest(e){!e||!this._focusRequested||(this._focusRequested=!1,this._context(e).focus())}_fullfillValueRequest(e){!e||!this._valueRequested||(this._context(e).value=this._valueRequested,this._valueRequested=void 0)}_context(e){if(e=e||this._view.element,!e)return Ls.empty();let s=this._contexts.get(e);return s||this._contexts.set(e,s=new Ls(e)),s}_syncInput(){const{inputElement:e}=this._context();if(!e)return;const s=e.value.trim();if(this._prevInput===s)return;this._prevInput=s;const n=this;this._debounce(()=>n._view.hub.update(tu(),{value:s}))}_handleFocusIn({target:e}){this._element&&e.matches('[data-role="input"]')&&(this._syncInput(),this.open())}_handleFocusOut({relatedTarget:e}){this._element&&(!e||!Qi(e,s=>s===this._element||void 0))&&this.close()}_handleKeyDown({key:e,target:s,isComposing:n}){!n&&e==="Enter"&&s.matches('[data-role="input"]')&&(this._submit(s.value),s.blur())}_handleClick(e){const{target:s}=e,{inputElement:n}=this._context();for(let r=s;r&&r!==this._element;r=r.parentElement){if(r.matches('[data-role="submit"]')||r.matches('[data-role="button"]')||r.matches('[type="submit"]')){n&&(n.blur(),this._submit(n.value));return}if(r.matches('[data-role="query-item"]')){const i=r.getAttribute("data-index"),o=this._context().data.get(parseInt(i)),c=o&&o.text;c&&(n&&(n.value=c),this._view._events.emit("select",Object.freeze({value:o,index:i,domEvent:e})),e.defaultPrevented||this._submit(c)),this.close();return}if(r.matches('[data-role="product-item"]')){this._view._events.emit("select",Object.freeze({value:item,index,domEvent:e}));return}}}async _submit(e){!e||!e.trim()||(this.close(),this._view.hub.update(Gt(),{q:e}),this._trackSubmit(e))}_trackSubmit(e){const{[$e.SUBMIT]:s}=this._view.tracker.options||{};s&&this._view.tracker.submit({value:e})}}class Ls{static empty(){return Ls._empty||(Ls._empty=new Ls)}constructor(e){this._element=e,this._cache={},this._data=new Map}get inputElement(){return this._get("input")}get autocompleteElement(){return this._get("autocomplete")}get data(){return this._data}trackItems(e){let s=0;const n=this._data=new Map,r=[];for(const i in e)for(const o of e[i])o.product&&!o.product.url||(o._index=s,o._field=i,n.set(s,o),r.push(o),s++);return r}focus(){if(!this._element)return;const{inputElement:e}=this;e&&e.focus()}set value(e){if(!this._element)return;const{inputElement:s}=this;s&&(s.value=e)}_get(e){return this._element?this._cache[e]||(this._cache[e]=this._element.querySelector(`[data-role="${e}"]`)):void 0}}const By="option-list",Qu="miso-option-list";function Hy(t,e){const{className:s,role:n,templates:r}=t,i=n?`data-role="${n}"`:"";return`
<div class="${s}" ${i}>
  ${r.options(t,e)}
</div>
`}function zy(t,e){const{className:s,templates:n}=t,r=e.value||[];return`
<ol class="${s}__options" data-role="options">
  ${r.map((i,o)=>n.option(t,i,{index:o})).join("")}
</ol>
`}function Vy(t,e){const{className:s}=t,n=nt(e.text||e);return`<li class="${s}__option" data-role="option" tabindex="0">${n}</li>`}const Gu=Object.freeze({root:Hy,options:zy,option:Vy});class Lr extends rt{static get type(){return By}static get defaultTemplates(){return Gu}static get defaultClassName(){return Qu}constructor({className:e=Qu,templates:s,...n}={}){super({className:e,templates:{...Gu,...s},...n}),this._initTrackable()}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",n=>this._handleClick(n))]}_render(e,s,n){super._render(e,s,n);const{state:r}=s;this._syncOptionValues(e,r)}_afterRender(e,s){this._syncBindings(e,s)}_unrender(){this._clearBindings()}_syncOptionValues(e,s){const n=e&&this._getOptionsElement(e);if(!n)return;const r=this._getItems(s)||[];$s(n,"empty",r.length===0)}_getItems(e){return e.value}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){const s=e.target.closest('[data-role="option"]');if(!s)return;const n=this._bindings.get(s),r=n&&n.value;r&&(this._trackClick(e,n),this._select(r.text))}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}So(Lr.prototype);function Wy(t){const{className:e,role:s,templates:n}=t,r=s?`data-role="${s}"`:"";return`
<div class="${e}" ${r}>
  ${n.options(t)}
</div>
`}function Qy(t,e){const{className:s,templates:n}=t;return`
<div role="button" class="${s}__option" data-value="${e.value}">
  ${n.content(t,e)}
</div>
`}const Ku=Object.freeze({...fu("options"),root:Wy,option:Qy});class Gy extends rt{static get defaultTemplates(){return Ku}constructor({className:e,templates:s,field:n,defaultValue:r,...i}={}){super({className:e,templates:{...Ku,...s},...i}),this._field=n,this._defaultValue=r}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,e.hub.on(this._field,()=>this._refresh()),s.on("click",n=>this._handleClick(n))],this._defaultValue?this._select(this._defaultValue,{silent:!0}):this._clear({silent:!0})}_preprocess(e,s){return e.rendered&&s.skip(),super._preprocess(e,s)}_handleClick({target:e}){const s=Qi(e,o=>o.hasAttribute("data-value")?o:void 0);if(!s)return;let{unselected:n,value:r}=this._view.hub.states[this._field];n=n||r===void 0;const i=s.getAttribute("data-value");n||r===void 0||r!==i?this._select(i):this._clear()}_refresh(){this._state=this._view.hub.states[this._field],Er(()=>this._syncValueAttribute())}_syncValueAttribute(){if(!this._state||!this._view)return;const{element:e}=this._view,s=e&&e.children[0];if(!s)return;let{unselected:n,value:r}=this._state;n?s.removeAttribute("data-selected"):s.setAttribute("data-selected",r),this._state=void 0}_select(e,s){this._submit({value:e},s)}_clear(e){this._submit({unselected:!0},e)}async _submit(e,s){this._view.hub.update(this._field,e,s)}}const Ky="feedback",Yu="miso-feedback",Yy=["helpful","unhelpful"];function Jy(t){const{templates:e}=t;return Yy.map(s=>e.option(t,{value:s})).join("")}function Zy(t,{value:e}){const{className:s,templates:n,options:r={}}=t;return`
${r.icon!==!1?`<i class="${s}__icon">${n.icon(t,e)}</i>`:""}
${r.text!==!1?`<span class="${s}__text">${n.text(t,e)}</span>`:""}
`}function Xy(t,e){switch(e){case"helpful":case"unhelpful":return Iw;default:return""}}function e1(t,e){switch(e){case"helpful":return"Helpful";case"unhelpful":return"Not helpful";default:return""}}const Ju=Object.freeze({options:Jy,content:Zy,icon:Xy,text:e1});class Zu extends Gy{static get type(){return Ky}static get defaultTemplates(){return Ju}static get defaultClassName(){return Yu}constructor({className:e=Yu,templates:s,...n}={}){if(super({className:e,templates:{...Ju,...s},field:eu(),...n}),n.text===!1&&n.icon===!1)throw new Error("At least one of options.text or options.icon must be enabled")}}const t1="text",Xu="miso-text";function s1(t,{value:e}){const{className:s,role:n,options:{raw:r=!1,tag:i}}=t,o=n?`data-role="${n}"`:"",c=e!==void 0?nt(n1(t)(e)):"";return r?c:`<${i} class="${s}" ${o}>${c}</${i}>`}function n1(t){let{format:e}=t.options;const{formatDate:s,formatNumber:n}=t.templates.helpers;if(!e)return o=>`${o}`;switch(typeof e){case"function":return e;case"string":e=[e];break}let[r,i]=e;switch(r){case"date":return o=>s(o,i);case"number":return o=>n(o,i);default:return o=>`${o}`}}const ef=Object.freeze({root:s1});class wn extends rt{static get type(){return t1}static get defaultTemplates(){return ef}static get defaultClassName(){return Xu}constructor({className:e=Xu,templates:s,tag:n="p",...r}={}){super({className:e,templates:{...ef,...s},tag:n,...r})}}class r1 extends _o{constructor(e){super(e)}_takePending(){return this._pending}_applyRender(e,s={}){const n=vr(!1);super._applyRender(e,{...s,loop:n.t}),n.value&&this._requestRaf()}}class i1{clear(e){return e.innerText="",{cursor:0,done:!1}}update(e,{value:s,cursor:n},{value:r,cursor:i,done:o}){const c=r.length;i=Math.min(i,c);const a=!!o&&i===c,u=s.substring(0,n),l=!r.startsWith(u);return a||l?e.innerText=r:e.insertAdjacentText("beforeend",r.substring(n,i)),a&&e.classList.add("done"),{cursor:i,done:a}}}function o1(t,e,{status:s}){if(!e)return;e.children.length===0&&(e.innerHTML=c1(t));const n=e.children[0];return n.setAttribute("data-status",s||M.INITIAL),n}function c1(t){let{className:e,role:s,options:{tag:n,format:r,builtInStyles:i=!0}}=t;n==="auto"&&(n=r==="markdown"?"div":"p");const o=s?`data-role="${s}"`:"",c=[e,tf(e)];return i&&r==="markdown"&&c.push("miso-markdown"),`<${n} class="${c.join(" ")}" ${o} data-format="${r}"></${n}>`}function tf(t){return`${t}__cursor`}function a1(t,e){return t&&e&&t.session&&e.session&&t.session.uuid===e.session.uuid}function l1(t){if(t===!0)return u1();if(t){if(typeof t=="function")return t;throw new Error("onDebug must be a function or a boolean")}}function u1(t=performance.now()){return function({summary:e,timestamp:s,elapsed:n,ref:r,operation:i,conflict:o}){MisoClient.debug("<progressive-markdown>",`[${f1(s-t)}](${sf(n[0])}, ${sf(n[1])})`,e,`${i}`,r,o)}}function f1(t){return`${Math.floor(t)/1e3}s`}function sf(t){return`${Math.floor(t*100)/100}ms`}const d1="typewriter",nf="miso-typewriter";class yn extends r1{static get type(){return d1}static get defaultClassName(){return nf}constructor({className:e=nf,tag:s="auto",format:n="markdown",tooltip:r=!1,speed:i,acceleration:o,nextCursorFn:c,...a}={}){super({tag:s,format:n,tooltip:r,...a}),ce(this,{className:e}),this._prevState=void 0,this._getNextCursor=typeof c=="function"?c:Vm({speed:i,acceleration:o}),this._readiness=new xt,n==="markdown"&&yn.MisoClient.plugins.install("std:ui-markdown")}initialize(){this._setup()}async _setup(){try{switch(this.options.format){case"plaintext":await this._setupForPlaintext();break;default:await this._setupForMarkdown()}this._readiness.resolve()}catch(e){this._readiness.reject(e)}}async _setupForMarkdown(){const e=await this._view._views._extensions.require("markdown");if(!this._view)return;const s=tf(this.className),{onDebug:n,onCitationLink:r,variant:i}=this.options;this._renderer=e.createRenderer({cursorClass:s,getSource:o=>this._getSource(o),onCitationLink:r,onDebug:l1(n),variant:i}),this._unsubscribes.push(this._view.proxyElement.on("click",o=>this._onClick(o)))}_getSource(e){const{data:s={}}=this._view._data,{sources:n=[]}=s;return n[e]}async _setupForPlaintext(){this._renderer=new i1}async _ready(){return this._readiness.promise}async render(...e){await this._ready(),await super.render(...e)}_preprocess({state:e}){const s=this._prevState,{value:{value:n="",stage:r,finished:i}={},session:o,status:c}=e,a=a1(s,e),u=a&&r===s.stage,l=s?u?s.streak:s.streak+1:0,f=a&&s&&s.doneAt||(c===M.READY&&i?performance.now():void 0),_=f!==void 0;return this._prevState=Object.freeze(G({session:o,status:c,value:n,stage:r,streak:l,doneAt:f,done:_}))}_render(e,{state:s,rendered:n},{notifyUpdate:r,writeToState:i,loop:o}){const c=o1(this,e,s);let a;const u=!n||s.streak!==n.streak;if(u)a=this._renderer.clear(c,n);else{const _=this._getNextCursor(n.cursor,s.doneAt,n.timestamp,s.timestamp);a=this._renderer.update(c,n,{...s,cursor:_})}i(a);const l=s.status===M.READY&&!a.done,f=l&&(!n||n.status===M.READY)&&!u;r({ongoing:l},{silent:f}),l&&o()}_onClick(e){const{target:s}=e,n=s.closest('[data-role="citation-link"]');if(n){const o=parseInt(n.dataset.index);Number.isNaN(o)||this._view._events.emit("citation-click",{event:e,index:o});return}const r=s.closest('[data-role="follow-up-link"]');if(r){let{q:o}=r.dataset;o=o?o.trim():void 0,o&&this._view._events.emit("follow-up-click",{event:e,q:o});return}const i=s.closest("a");if(i){if(!e.defaultPrevented){const{href:o,innerText:c,className:a}=i;o&&this._view._events.emit("link-click",G({event:e,url:o,text:c?c.trim():"",className:a||"",attributes:h1(i)}))}return}}}function h1(t){const{attributes:e}=t,s={};for(const{name:n,value:r}of e)n.startsWith("data-")&&(s[n]=r);try{return JSON.stringify(s)}catch{return"{}"}}const _1="affiliation",rf="miso-affiliation";function p1(t,e){const{className:s,role:n,templates:r,options:i}=t,{status:o}=e,c=n?` data-role="${n}"`:"",a=e.value||{},u=a.channel?` data-channel="${a.channel}"`:"",l=t._getItems(e),f=l?l.length:void 0,_=f!==void 0?` data-item-count="${f}"`:"",w=i.itemType?` data-item-type="${i.itemType}"`:"";return`<div class="${s} ${o}"${c}${u}${w}${_}>${o===M.READY?r[o](t,e):""}</div>`}function m1(t,e){const{templates:s}=t,n=t._getItems(e);return n&&n.length>0?s.controlContainer(t,e,"previous")+s.body(t,e)+s.controlContainer(t,e,"next"):s.empty(t,e)}function g1(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__control-${s}-container">${r.control(t,e,s)}</div>`}function b1(t,e,s){const{className:n,templates:r}=t;return`<div class="${n}__control-${s}" data-role="${s}">${r.controlIcon(t,e,s)}</div>`}function w1(t,e,s){return py}function y1(t,e){const{className:s,templates:n}=t,r=t._getItems(e);return`<div class="${s}__body">${n.list(t,e,r)}</div>`}function E1(t,e,s,n){const{className:r,templates:i,options:o}=t,{itemType:c}=o,a=i.itemHeader(t,e,s,{index:n}),u=i[c](t,e,s,{index:n});return`<li class="${r}__item"><div class="${r}__item-inner">${a}${u}</div></li>`}function S1(t,e,s,n){const{className:r,templates:i}=t;let{itemHeaderLeftText:o,itemHeaderRightText:c}=i;return o=$t.asFunction(o)(t,e,s,n),c=$t.asFunction(c)(t,e,s,n),`<div class="${r}__item-header">
  <div class="${r}__item-header-left">${o}</div>
  <div class="${r}__item-header-right">${c}</div>
</div>`}function v1(t,e,s,n){const{className:r,templates:i}=t,o=$t.asFunction(i.logoText)(t,e,s,n)||"",c=$t.asFunction(i.logoImg)(t,e,s,n);return c?`<span class="${r}__item-header-logo-text">${o}</span>${c}`:""}function T1(t,e,s,n){const{className:r,templates:i}=t,o=$t.asFunction(i.logoUrl)(t,e,s,n);if(!o)return"";const c=$t.asFunction(i.logoAltText)(t,e,s,n),a=c?` alt="${c}"`:"";return`<img class="${r}__item-header-logo" src="${o}"${a}>`}const of=Object.freeze({root:p1,[M.READY]:m1,controlContainer:g1,control:b1,controlIcon:w1,body:y1,item:E1,itemHeader:S1,affiliation:mw,ctaText:"View deal",itemHeaderLeftText:"Today's best deals",itemHeaderRightText:v1,logoImg:T1,logoText:"Selected by"}),A1=Object.freeze({...Xe.defaultTemplates,...of});class cf extends Xe{static get type(){return _1}static get defaultTemplates(){return A1}static get defaultClassName(){return rf}constructor({className:e=rf,templates:s,autoplay:n,...r}={}){super({className:e,itemType:"affiliation",templates:{...of,...s},...r}),this._itemCount=void 0,this._itemIndex=0,this._displayedCount=void 0,this._displayedIndex=void 0,this._viewable=void 0}initialize(e){super.initialize(e);const{viewable:s}=this._view.tracker.options||{};this._viewable=new Zm(this._onViewable.bind(this),s)}get itemIndex(){return this._itemIndex}set itemIndex(e){this._itemCount!==void 0&&(e<0?e=this._itemCount-1:e>=this._itemCount&&(e=0),this._itemIndex=e,Er(()=>this._syncItemIndex()))}next(){this._itemCount!==void 0&&this.itemIndex++}previous(){this._itemCount!==void 0&&this.itemIndex--}_render(e,s,n){super._render(e,s,n),this._syncItemCount(s),this._syncItemIndex()}_syncElement(e){const s=this._element;super._syncElement(e),this._syncViewableElement(s,e)}_syncViewableElement(e,s){e!==s&&(e&&this._viewable.unobserve(e),s&&this._viewable.observe(s))}_syncItemCount({state:e}={}){const s=this._getItems(e),n=this._itemCount=s?s.length:void 0;if(n===this._displayedCount)return;let{element:r}=this._view;r=r.firstElementChild,r&&(Lu(r,"data-item-count",n),this._displayedCount=n)}_syncItemIndex(){const e=this._itemIndex;if(e===this._displayedIndex)return;const{element:s}=this._view,n=s&&this._getListElement(s);n&&(this._displayedIndex=e,n.style.left=`${-e*100}%`,this._viewable.display(e),this._view._events.emit("display",{index:e}))}_onViewable(e){const s=this._getRenderedItemData(e);s&&this._view.tracker.viewable([s])}_getRenderedItemData(e){const{value:s}=this._rendered.get(this._element)||{};if(!s)return;const{products:n=[]}=s;return n[e]}_trackViewables(){}_onClick(e){const s=e.target;if(s.closest('[data-role="previous"]')){this.previous();return}if(s.closest('[data-role="next"]')){this.next();return}super._onClick(e)}}const O1="facets",af="miso-facets",Nr="miso-facet",lf="custom_attributes.";function C1(t,e){const{className:s,role:n,templates:r}=t,i=n?`data-role="${n}"`:"";return`<div class="${s}" ${i}>${r.facets(t,e)}</div>`}function x1(t,e){const{templates:s}=t,{facet_fields:n={}}=e.value||{};return Object.keys(n).map(r=>s.facet(t,{field:r,entries:n[r]},e))}function R1(t,e,s){const{facetClassName:n=Nr,templates:r}=t,{field:i}=e;return`<div class="${n}" data-role="facet" data-field="${nt(i)}">${r.header(t,e,s)}${r.options(t,e,s)}</div>`}function I1(t,e,s){const{facetClassName:n=Nr,templates:r}=t;return`<div class="${n}__header">${r.title(t,e,s)}</div>`}function k1(t,{field:e}){return e.startsWith(lf)&&(e=e.substring(lf.length)),nt(e)}function $1(t,{field:e,entries:s},n){const{facetClassName:r=Nr,templates:i}=t;return`<ul class="${r}__options" data-role="options">${s.map(([o,c])=>i.option(t,{field:e,value:o,count:c},n)).join("")}</ul>`}function P1(t,e,s){const{facetClassName:n=Nr,templates:r}=t;return`
<li class="${n}__option" data-role="option" tabindex="0">
  <span class="${n}__value">${r.value(t,e,s)}</span>
  <span class="${n}__count">${r.count(t,e,s)}</span>
</li>`}function L1(t,{value:e},s){return nt(e)}function N1(t,{count:e},s){return t.templates.helpers.formatNumber(e)}const uf=Object.freeze({root:C1,facets:x1,facet:R1,header:I1,title:k1,options:$1,option:P1,value:L1,count:N1});function U1(t,e){return`${t}:::${e}`}function ff(t){const e={};for(const s in t)e[s]=new Set(t[s]);return e}class df extends rt{static get type(){return O1}static get defaultTemplates(){return uf}static get defaultClassName(){return af}constructor({className:e=af,templates:s,...n}={}){super({className:e,templates:{...uf,...s},...n}),this._bindings=new xu}initialize(e){const{proxyElement:s,filters:n}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",r=>this._handleClick(r)),n.on("update",r=>this._updateSelections(r)),n.on("reset",()=>this._syncSelections())]}_render(e,s,n){super._render(e,s,n)}_afterRender(e,s){this._syncBindings(e,s),this._syncSelections()}_unrender(){this._clearBindings()}_syncSelections(){const e=ff(this._view.hub.states[xs()].facets);for(const{value:{field:s,value:n},element:r}of this._bindings.entries)this._setSelected(r,e[s]&&e[s].has(n))}_updateSelections({updates:e}){const s=ff(e.facets);for(const{value:{field:n,value:r},element:i}of this._bindings.entries)s[n]&&this._setSelected(i,s[n].has(r))}_setSelected(e,s){e&&(s?e.classList.add("selected"):e.classList.remove("selected"))}_syncBindings(e,s){if(!e||!s.value)return;const n=this._getItems(s),r=[],i=[],o=[];for(const c of this._getFacetElements(e)){const a=c.getAttribute("data-field"),u=n[a];if(!u)continue;const l=this._getItemElements(c);for(let f=0;f<l.length;f++){const _=l[f],w=u[f];if(!w)break;r.push(U1(a,w)),i.push({field:a,value:w}),o.push(_)}}this._bindings.update(r,i,o)}_clearBindings(){this._bindings.clear()}_getItems({value:e}={}){const{facet_fields:s={}}=e||{},n={};for(const r in s)n[nt(r)]=s[r].map(([i])=>i);return n}_getFacetElements(e){return Array.from(e.querySelectorAll('[data-role="facet"]'))}_getFacetElement(e,s){return e.querySelector(`[data-role="facet"][data-field="${s}"]`)}_getItemElements(e){return Array.from(e.querySelectorAll('[data-role="option"]'))}_handleClick(e){if(e.button!==0)return;const s=e.target.closest('[data-role="option"]');if(!s)return;const n=this._bindings.get(s),r=n&&n.value;if(!r)return;const{field:i,value:o}=r;this._view.filters.facets.toggle(i,o),this._view.filters.apply()}destroy(){this._bindings.clear(),super.destroy()}}const D1="select",hf="miso-select";function F1(t,e){const{className:s,role:n,templates:r}=t,i=n?`data-role="${n}"`:"",o=t._getItems(e),c=o.find(a=>a.selected)||o[0];return`
<div class="${s}" ${i}>
  ${r.button(t,c)}
  ${r.options(t,e)}
</div>`}function M1(t,e){const{className:s,templates:n}=t;return`<button class="${s}__button" data-role="button" tabindex="0">${n.text(t,e)}</button>`}function j1(t,e){const{className:s,templates:n}=t,r=t._getItems(e);return`<ul class="${s}__options">${r.map((i,o)=>n.option(t,i,{index:o})).join("")}</ul>`}function q1(t,e){const{className:s,templates:n}=t,r=e.selected?"selected":"";return`<li class="${s}__option ${r}" data-role="option" tabindex="0">${n.text(t,e)}</li>`}function B1(t,e){return nt(e&&e.text&&bm(e.text)||e||"")}const _f=Object.freeze({root:F1,button:M1,options:j1,option:q1,text:B1});class To extends rt{static get type(){return D1}static get defaultTemplates(){return _f}static get defaultClassName(){return hf}constructor({className:e=hf,templates:s,...n}={}){super({className:e,templates:{..._f,...s},...n}),this._initTrackable()}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",n=>this._handleClick(n))]}_afterRender(e,s){this._syncBindings(e,s)}_unrender(){this._clearBindings()}_getItems(e){return e.value||[]}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){if(this._element)for(let s=e.target;s&&s!==this._element;s=s.parentElement){const{role:n}=s.dataset;switch(n){case"button":this._toggle();break;case"option":const r=this._bindings.get(s);this._select(r&&r.value);break}}}_toggle(){if(!this._element)return;const e=this._element.children[0];e&&e.classList.toggle("open")}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}So(To.prototype);const H1="more-button",pf="miso-more-button";function z1(t,e){const{className:s,role:n,templates:r}=t,i=n?` data-role="${n}"`:"",o=e.status!==M.READY?" disabled":"";return`
<div class="${s}"${i}${o}>
  ${r.text(t)}
</div>
`}const mf=Object.freeze({root:z1,text:V1});function V1(t){return"More"}class gf extends rt{static get type(){return H1}static get defaultTemplates(){return mf}static get defaultClassName(){return pf}constructor({className:e=pf,templates:s,...n}={}){super({className:e,templates:{...mf,...s},...n})}initialize(e){this._unsubscribes=[...this._unsubscribes,e.proxyElement.on("click",s=>this._handleClick(s))]}_handleClick(e){if(e.button!==0)return;const s=e.target.closest('[data-role="more"]');!s||s.disabled||this._view.hub.trigger(ao())}}const W1=Object.freeze(Object.defineProperty({__proto__:null,AffiliationLayout:cf,BannerLayout:Lw,CardsLayout:Yw,CarouselLayout:qu,CollectionLayout:Xe,ContainerLayout:vu,ErrorLayout:Au,FacetsLayout:df,FeedbackLayout:Zu,GalleryLayout:zu,HorizontalLayout:$u,ListLayout:ks,MoreButtonLayout:gf,OptionListLayout:Lr,SearchBoxLayout:Ps,SelectLayout:To,TemplateBasedLayout:rt,TextLayout:wn,TypewriterLayout:yn},Symbol.toStringTag,{value:"Module"}));function Q1(t,{hub:e,workflowOptions:s={}}={}){const{sort:{options:n=[]}={}}=s.filters||{};if(!n.length)return[];const{sort:r}=e.states[xs()]||{},i=r&&r.field||G1(n).field;return i?n.map(o=>({...o,selected:o.field===i})):n}function G1(t){for(const e of t)if(e.default)return e;return t[0]}function K1(t){if(!t||!t.value)return;const{answer:e="",answer_stage:s,finished:n}=t.value;return Object.freeze({value:e,stage:s,finished:!!n})}function Y1(t){if(!t||!t.value)return;const{reasoning:e="",reasoning_finished:s}=t.value;return Object.freeze({value:e,stage:"reasoning",finished:!!s})}function J1(t,{workflow:e}={}){const s=e.previous,n=s&&s.states[Te()].value,r=n&&(n.suggested_followup_questions||n.followup_questions||[]);return r&&r.map(i=>({text:i}))}function Z1(t){if(!(!t||!t.value))return(t.value.followup_questions||[]).map(e=>({text:e}))}function bf({qs:t,...e}={}){return Ar(e,{metadata:{question_source:t||cs.ORGANIC}})}function X1(t,e){return e===Qt.QUERY?t:{...t,answer:!1}}function wf(t){return t&&t.value&&t.value.revision}function eE(t,e){if(!t||!t.value||t.request||!e||!e.request)return t;const{request:s}=e;return{...t,request:s}}function tE(t){const e=sE(t),s=e===M.READY?t.ongoing:void 0;return G({status:e,ongoing:s,...t})}function sE(t){if(!t)return M.INITIAL;const{request:e,error:s,value:n}=t;return s?M.ERRONEOUS:n?M.READY:e?M.LOADING:M.INITIAL}function nE(t){const{value:e}=t;if(!e)return t;const{miso_id:s}=e;return s?{...t,meta:{...t.meta,miso_id:s}}:t}function yf(t){const{session:e,value:s}=t;if(!e||!s)return;const{miso_id:n}=s;n&&(e.meta.miso_id=n)}function rE(t){const{session:e,value:s}=t;if(!e||!s)return t;const{meta:{miso_id:n}={}}=e;return n?{...t,meta:{...t.meta,miso_id:n}}:t}function Ef(t){const{request:e,value:s}=t;if(!e)return t;const{payload:n}=e||{},{q:r}=n||{};return r?{...t,value:{...s,keywords:r}}:t}function iE(t){const{value:e}=t;if(!e)return t;const{answer_stage:s}=e;return s?{...t,ongoing:!e.finished,meta:{...t.meta,answer_stage:s}}:t}function oE(t,e){if(!e)return t;const{status:s,value:n}=t;switch(s){case M.INITIAL:case M.LOADING:break;default:return t}return n&&n.facet_counts?t:{...t,value:{...n,facet_counts:e}}}function cE(t){const{value:e}=t;if(!e)return t;const{miso_id:s}=e;return s?{...t,value:{...e,root_miso_id:s}}:t}function aE(t,e,{role:s=g.PRODUCTS}={}){if(!e.value)return t;const{[s]:n=[],facet_counts:r,total:i,root_miso_id:o}=t.value,{[s]:c=[]}=e.value;return{...e,value:{...e.value,facet_counts:r,total:i,root_miso_id:o,[s]:[...n,...c]}}}function lE(t,{role:e=g.PRODUCTS}={}){const{status:s,request:n,value:r}=t;if(s!==M.READY||!n||!r)return t;const{[e]:i}=r;if(!i)return t;const{rows:o}=n.payload,{length:c}=i;return c<o?{...t,meta:{...t.meta,exhausted:!0}}:t}function uE(t,e){const{question_id:s}=e&&e.value||{};return s?{...t,value:{...t.value,question_id:s}}:t}function fE(t){const{role:e,type:s,items:n}=t,r={type:s==="viewable"?"viewable_impression":s,context:{custom_context:G({property:e})}};switch(ob(s)&&(dE(e,n)?r.product_ids=(n||[]).map(i=>typeof i=="string"?i:i.product_id).filter(i=>i):(r.product_ids=[],r.context.custom_context.items=(n||[]).map(i=>i.text||i.id||i))),s){case $e.SUBMIT:r.context.custom_context.value=t.value;break;case $e.FEEDBACK:r.context.custom_context.value=r.value=t.value,r.context.custom_context.result_type=r.result_type=t.result_type;break}return G(r)}function dE(t,e=[]){return rb(t)||e.length>0&&typeof e[0]=="object"&&e[0].product_id}function hE(t,e){const{data:s}=e;if(!s)return t;const n=s.request&&s.request.payload&&s.request.payload.metadata;return n?Je(t,{context:{custom_context:n}}):t}function _E(t,e){const{data:s}=e;if(!s)return t;const n=s.request&&s.request.payload;if(!n)return t;const{question:r,q:i,fq:o}=n;return Je(t,{context:{custom_context:{question:r,q:i,fq:o}}})}function pE(t,e){if(e.role!==g.AFFILIATION)return t;const{items:s}=e,n=s[0]&&s[0].channel||void 0,r=s.map(i=>i.position);return Je(t,{context:{custom_context:{channel:n,positions:r}}})}function Sf(t,e){return t=mE(t,e),t=gE(t,e),t=bE(t,e),t}function mE(t={},{data:e}={}){if(!e)return t;const{request:s={},value:n={}}=e,{question_source:r}=s.payload&&s.payload.metadata||{},{question_id:i}=n;return Je(t,{context:{custom_context:{question_source:r,question_id:i}}})}function gE(t,e){if(e.role!==g.ANSWER)return t;const{items:s=[]}=e;return Je(t,{context:{custom_context:{urls:s.map(n=>n.url),texts:s.map(n=>n.text),class_names:s.map(n=>n.className),attributes:s.map(n=>n.attributes)}}})}function bE(t,{event_target:e}={}){return e?Je(t,{context:{custom_context:{event_target:e}}}):t}function wE(t){const{value:e}=t;return!e||!e.finished||e.finish_reason!=="success"||e.sources&&e.sources.length>0?t:{...t,meta:{...t.meta,unanswerable:!0}}}const vf=Object.freeze({}),Tf=Object.freeze({[g.CONTAINER]:vu.type,[g.ERROR]:Au.type}),Af=Object.freeze({}),yE=Object.freeze({api:vf,layouts:Tf,trackers:Af}),EE=Object.freeze({mappings:{[g.ERROR]:t=>t.error}});class le extends De{constructor(e){super(e.name||"workflow",e.plugin);let{context:s,plugin:n,client:r,defaults:i,options:o,extraOptions:c}=e;this._context=s,this._plugin=n=n||s._plugin,this._client=r=r||s._client,e=Object.freeze({...e,plugin:n,client:r}),this._name=e.name,this._roles=e.roles,this._extensions=n._getExtensions(r),this._defaults=i,this._options=o||new Wl(s&&s._options,i),this._extraOptions=c||{},this._hub=new Mb({onUpdate:a=>this._onHubUpdate(a),onEmit:a=>this._onHubEmit(a)}),this._sessionContext=new WeakMap,r._events.emit("workflow",this),this._initProperties(e),this._initActors(e),this._initSubscriptions(e),this._initSession(e)}_initProperties(){}_initActors({roles:e}){const s=this._hub,n=this._client,r=this._options,i=this._extensions,o=this._plugin.layouts;this._sessions=new jb(s),this._data=new qb(s,{source:uu(n),options:r,...this._extraOptions.api}),this._views=new ow(s,{extensions:i,layouts:o,roles:e,options:r,workflow:this}),this._interactions=new uw(s,{client:n,options:r})}_initSubscriptions({roles:e}){this._unsubscribes=[this._hub.on(Rr(),s=>this._onSession(s)),this._hub.on(Zl(),s=>this.updateData(s)),this._hub.on(co(),s=>this._onTracker(s))],e.main&&this._unsubscribes.push(this._hub.on(kt(e.main),s=>this._onMainViewUpdate(s)))}_initSession(){this.restart()}_getSessionContext(e){let s=this._sessionContext.get(e);return s||this._sessionContext.set(e,s={}),s}_onHubUpdate(e){this._runCallbacks(this._client.meta.parent._hubUpdateCallbacks,e)}_onHubEmit(e){this._runCallbacks(this._client.meta.parent._hubEmitCallbacks,e),this._emitAsWorkflowEvent(e)}_emitAsWorkflowEvent({action:e,name:s,state:n,silent:r}){r||this._emit(s,{_action:e,...n})}get uuid(){return this.session&&this.session.uuid}get session(){return this._hub.states[Rr()]}get states(){return this._hub.states}get status(){const e=this._hub.states[Te()];return e&&e.status}get views(){return this._views.interface}restart(){return this._emitInterruptEventIfNecessary(),this._sessions.restart(),this}_emitInterruptEventIfNecessary(){const{main:e}=this._roles;if(!e)return;const s=this._hub.states[kt(e)]||{};s.session&&s.status===M.LOADING&&(this._emitLifecycleEvent("interrupt",s),this._emitLifecycleEvent("finally",s))}_onSession(e){this.updateData({session:e})}_onMainViewUpdate(e){const{status:s}=e,n=s===M.READY,r=s===M.ERRONEOUS,i=r?"error":s;this._emitLifecycleEvent(i,e),n&&this._emitLifecycleEvent("done",e),(n||r)&&this._emitLifecycleEvent("finally",e)}_shallEmitLifecycleEvent(e,{session:s}){const n=this._getSessionContext(s),r=n.lifecycleEvents||(n.lifecycleEvents=new Set),i=r.has(e);return r.add(e),!i}_emitLifecycleEvent(e,s){this._shallEmitLifecycleEvent(e,s)&&this._emit(e,s)}_request(e={}){const{session:s}=this,n=Bl(this._options.resolved.api,e);this.updateData({session:s,request:n}),this._hub.update(oo(),{...n,session:s})}updateData(e){if(!e)throw new Error("Data is required.");const{session:s}=e;if(!s)throw new Error("Session is required to update data.");if(!this.session)throw new Error("No session is created yet. Call workflow.restart() to start a new session.");if(s.uuid!==this.session.uuid)return;const n=wf(e);if(!yr(n)){const r=wf(this._hub.states[Te()]);if(!yr(r)&&n<=r)return}return this._updateData(e),this}_updateData(e){const s=this._hub.states[Te()];e=this._defaultProcessData(e,s);for(const n of this._options.resolved.dataProcessor)e=n(e,s);this._updateDataInHub(e,s)}_defaultProcessData(e,s){return e=eE(e,s),e=tE(e),e=nE(e),e}_updateDataInHub(e){this._hub.update(Te(),e)}notifyViewUpdate(e,s){return s={status:M.READY,session:this.session,...s},this._hub.update(kt(e),s),this}get trackers(){return this._views.trackers}_onTracker(e){const s=this,n=this._hub.states[Te()],r=this._buildInteraction({...e,data:n,workflow:s});this._sendInteraction(r)}_buildInteraction(e){let s=fE(e);s=this._defaultProcessInteraction(s,e);const{preprocess:n=[]}=this._options.resolved.interactions;for(const r of n)s=r(s,e);return s}_defaultProcessInteraction(e,s){return e=this._writeApiInfoToInteraction(e,s),e=this._writeMisoIdToInteraction(e,s),e=_E(e,s),e=hE(e,s),e=pE(e,s),e}_writeApiInfoToInteraction(e){const{group:s,name:n}=this._options.resolved.api;return Je(e,{context:{custom_context:{api_group:s,api_name:n}}})}_writeMisoIdToInteraction(e,s){const n=this._hub.states[kt(s.role)]||{},r=n.meta&&n.meta.miso_id||void 0;return r?Je(e,{miso_id:r}):e}_sendInteraction(e){const{handle:s}=this._options.resolved.interactions;typeof s=="function"?s(e):this._hub.trigger(Xl(),e)}destroy(e){this._emit("destroy"),this._destroy(e)}get destroyed(){return!!this._destroyed}_destroy({dom:e}={}){for(const s of this._unsubscribes||[])s();this._unsubscribes=[],this._views._destroy({dom:e}),this._data._destroy(),this._destroyed=!0}_runCallbacks(e,s){for(const n of e)try{n({workflow:this,...s})}catch(r){this._error(r)}}_emit(e,s){this._events.emit(e,{_event:e,...s}),this._context&&this._context._events.emit(e,{workflow:this,_event:e,...s})}}gn(le.prototype),Object.assign(le,{DEFAULT_API_OPTIONS:vf,DEFAULT_LAYOUTS:Tf,DEFAULT_TRACKERS:Af,DEFAULT_OPTIONS:yE,ROLES_OPTIONS:EE});function SE(t){if(!t||!t.value)return t;const{value:e}=t;return{...t,value:vE(e)}}function vE(t){if(t.affiliation_products){const{affiliation_products:e,...s}=t;t={...s,affiliation:AE(e)}}else if(t.sovrn_aff){const{sovrn_aff:e,...s}=t;t={...s,affiliation:OE(e)}}return TE(t)}function TE(t){const{affiliation:e}=t;if(!e)return t;let{channel:s,products:n}=e;if(!n)return t;n=n.map(i=>({...i}));let r=0;for(const i of n)s&&(i.channel=s),i.position=r++;return{...t,affiliation:{...e,products:n}}}function AE(t){return{channel:"miso",products:t}}function OE({products:t,...e}){return{channel:"sovrn",...e,products:t.map(CE)}}function CE({id:t,deeplink:e,headline:s,description:n,currency:r,retailPrice:i,salePrice:o,discountRate:c,image:a,thumbnail:u,merchant:l,...f}){const _=l&&l.name,w=l&&l.logo;return G({id:`sovrn-${t}`,title:s,description:n,cover_image:a,url:e,currency:r,original_price:i,sale_price:o,discount_rate_percent:c,brand:_,brand_logo:w,custom_attributes:Of({sovrn_id:t,thumbnail:u,merchant:l,...f})})}function Of(t,e=""){return Object.keys(t).reduce((s,n)=>{const r=t[n];if(r===void 0)return s;const i=e?`${e}_${n}`:n;return typeof r=="object"?{...s,...Of(r,i)}:{...s,[i]:r}},{})}function Cf(t){hn(t,Ao.prototype)}class Ao{useLink(e,s={}){if(typeof e!="function"&&e!==!1)throw new Error("useLink(fn) expects fn to be a function or false");return this._linkFn=e?[e,s]:!1,this}_submitToPage(e={}){if(!this._linkFn)return;const s=this._getSubmitUrl(e),[n,r={}]=this._linkFn;if(r.open===!1)window.location.href=s;else{const i=r.target||"_blank",o=r.windowFeatures||"";window.open(s,i,o)}}_getSubmitUrl({q:e,...s}={}){if(!this._linkFn)throw new Error("useLink(fn) must be called before _getSubmitUrl()");return this._linkFn[0](e,s)}}const xf=Object.freeze({...le.DEFAULT_API_OPTIONS,group:ge.ASK,payload:{...le.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at"],cite_link:1,cite_start:"[",cite_end:"]"}}),Rf=Object.freeze({actor:!1,api:{group:ge.ASK,name:Ye.AUTOCOMPLETE}}),Oo=Object.freeze({...le.DEFAULT_LAYOUTS,[g.QUERY]:[Ps.type,{placeholder:"Ask a question"}],[g.QUESTION]:[wn.type,{tag:"h2"}],[g.ANSWER]:yn.type,[g.FEEDBACK]:Zu.type,[g.IMAGES]:[zu.type,{incremental:!0,itemType:"image"}],[g.SOURCES]:[ks.type,{incremental:!0,itemType:"article",templates:{ordered:!0}}],[g.AFFILIATION]:[cf.type,{incremental:!0,itemType:"affiliation",link:{rel:"noopener nofollow"}}]}),If=Object.freeze({...le.DEFAULT_TRACKERS,[g.ANSWER]:{active:!0,itemless:!0,deduplicated:!1,click:Ze.click},[g.IMAGES]:Ze,[g.SOURCES]:Ze,[g.AFFILIATION]:Ze,[g.PRODUCTS]:Ze}),xE=Object.freeze({...le.DEFAULT_OPTIONS,api:xf,autocomplete:Rf,layouts:Oo,trackers:If}),RE=mn(le.ROLES_OPTIONS,{main:g.ANSWER,members:Object.keys(Oo),mappings:{[g.ANSWER]:K1,[g.REASONING]:Y1}});class be extends le{_initProperties(e){super._initProperties(e),this._questionId=void 0,this._autoQuery=!1}_initActors(e){super._initActors(e),this._feedback=new lw(this._hub)}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(Gt(),s=>this._query(s)),this._views.get(g.ANSWER).on("citation-click",s=>this._onCitationClick(s)),this._views.get(g.ANSWER).on("link-click",s=>this._onAnswerLinkClick(s))]}restart(){this._questionId&&(this._questionId=void 0),super.restart()}_shallEmitLifecycleEvent(e,s){return e==="answer-stage"||super._shallEmitLifecycleEvent(e,s)}_emitInterruptEventIfNecessary(){const e=this._hub.states[kt(this._roles.main)]||{};e.session&&e.status!==M.INITIAL&&(e.status!==M.READY||e.ongoing)&&(this._emitLifecycleEvent("interrupt",e),this._emitLifecycleEvent("finally",e))}_onMainViewUpdate(e){const{status:s,session:n}=e,r=s===M.READY&&!e.ongoing,i=s===M.ERRONEOUS,o=r?"done":i?"error":s,c=this._getSessionContext(n),a=c.answerStage,u=e.meta&&e.meta.answer_stage;u&&u!==a&&(this._emitLifecycleEvent("answer-stage",Object.freeze({...e,answer_stage:u})),c.answerStage=u),this._emitLifecycleEvent(o,e),(r||i)&&this._emitLifecycleEvent("finally",e)}get questionId(){return this._questionId}autoQuery(e={}){Yl.call(this,e)}query(e){if(!e.q&&!e.questionId)throw new Error("q is required in query() call");this._hub.update(Gt(),e)}_query(e={}){if(this._linkFn){this._submitToPage(e);return}this.restart(),this._writeQuestionSourceToSession(e);const s=this._buildPayload(e);this._request({payload:s})}_writeQuestionSourceToSession(e){this.session.meta.question_source=e.qs||cs.ORGANIC}_buildPayload(){throw new Error("Not implemented")}_writeWikiLinkTemplateToPayload(e){return!this._autoQuery||!this._autoQuery.param||this._autoQuery.param===Kl?e:{...e,wiki_link_template:`?${this._autoQuery.param}=%s`}}_updateData(e){if(this._writeQuestionIdFromData(e),e.value&&!e.value.answer_stage){this._handleHeadResponse(e);return}super._updateData(e),Jl.call(this,e)}_handleHeadResponse(e){}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=SE(e),e=iE(e),e}_writeQuestionIdFromData({value:e}){e&&this._writeQuestionId(e.question_id)}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=Sf(e,s),e}_getQuestionSourceFromViewState(e){const{request:s}=this._hub.states[kt(e.role)]||{},{payload:n}=s||{};return n&&n.metadata&&n.metadata.question_source||void 0}_onCitationClick({index:e,event:s}){if(s.button!==0||uo(s))return;const{value:n}=this._hub.states[Te()]||{},{sources:r}=n||{},i=r&&r[e-1];!i||!i.product_id||(fo(s),this._views.trackers.sources.click([i.product_id],{event_target:"citation-link"}))}_onAnswerLinkClick({event:e,...s}){e.button===0&&(uo(e)||(fo(e),this._views.trackers.answer.click([],{items:[s]})))}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e)}_clearQuestionId(){this._questionId=void 0}_destroy(e){this._feedback._destroy(),super._destroy(e)}}Cf(be.prototype),Object.assign(be,{DEFAULT_API_OPTIONS:xf,DEFAULT_AUTOCOMPLETE_OPTIONS:Rf,DEFAULT_LAYOUTS:Oo,DEFAULT_TRACKERS:If,DEFAULT_OPTIONS:xE,ROLES_OPTIONS:RE});const kf=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:"miso-ask-combo",CONAINER_TAG:"miso-ask"},Symbol.toStringTag,{value:"Module"})),$f=Object.freeze(Object.defineProperty({__proto__:null,followUpQuestions:"Related questions you can explore",question:"You asked...",relatedResources:"Go beyond, and learn more about this topic",sources:"This reply is based on the following articles",thoughts:"Thoughts"},Symbol.toStringTag,{value:"Module"}));let Pf=class{constructor({helpers:e}){this._helpers=e}errorSection(e){const{section:s,container:n}=this._helpers;return s(e,{name:"error"},[n(e,{name:"error",visibleWhen:"erroneous"},"<miso-error></miso-error>")])}answerGroup(e){return[this.answer(e),this.affiliation(e),this.sources(e)]}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}question(e){const{phrase:s}=this._helpers;return[s(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"]}sources(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"sources",visibleWhen:"nonempty"},[n(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}affiliation(e){const{container:s}=this._helpers,{affiliation:n=!0}=e||{};return n?s(e,{name:"affiliation",visibleWhen:"nonempty"},["<miso-affiliation></miso-affiliation>"]):""}};class Lf{constructor(e){this._context=e,ce(this,{lowerCamelToKebab:sl,kebabToLowerCamel:el,kebabOrSnakeToLowerCamel:tl})}normalizeOptions({classPrefix:e,circledCitationIndex:s=!0,phrases:n,...r}={}){return e=e||this._context.CLASS_PREFIX,n=this.normalizePhraseOptions(n),{classPrefix:e,circledCitationIndex:s,phrases:n,...r}}normalizePhraseOptions(e={}){if(!e)return{};const s={};for(const n in e)s[this.normalizePhraseOptionKey(n)]=e[n];return s}normalizePhraseOptionKey(e){return e=tl(e),e==="relatedQuestions"||e==="querySuggestions"?"followUpQuestions":e}phrase(e,{name:s,extraNames:n=[],tag:r="div",inline:i=!1}){const{classPrefix:o}=e,c=i?`${o}__phrase-inline`:`${o}__phrase`;return`<${r} class="${c} ${[s,...n].map(a=>`${o}__${a}-phrase`).join(" ")}">${this.phraseText(e,el(s))}</${r}>`}phraseText(e,s){const{phrases:n={}}=e,r=n[s]||this._context.DEFAULT_PHRASES[s];switch(typeof r){case"function":return r(e);case"string":return r;default:return""}}section({classPrefix:e},{name:s},n){return this.element("section",{classes:[`${e}__section`,`${e}__${s}`]},n)}container({classPrefix:e,circledCitationIndex:s,parentQuestionId:n,workflow:r},{name:i,extraNames:o=[],visibleWhen:c,trait:a,logo:u=!1},l){const f=[i,...o].map(_=>`${e}__${_}-container`);return s&&f.push("miso-circled-citation-index"),this.element(this._context.CONAINER_TAG,{classes:f,visibleWhen:c,trait:a,logo:u,parentQuestionId:n,workflow:r},l)}element(e,s={},n=""){return`<${e}${this.attrs(s)}>${Array.isArray(n)?n.join(""):n}</${e}>`}attrs({classes:e=[],...s}={}){let n="";e.length&&(n+=` class="${e.join(" ")}"`);for(const r in s){const i=s[r];i!==void 0&&(n+=` ${sl(r)}="${i}"`)}return n}}let IE=class extends Pf{constructor(){super({helpers:En})}answerGroup(e){const{container:s}=this._helpers;return[this.question(e),this.reasoning(e),this.answer(e),this.affiliation(e),this.sources(e),this.followUpQuestions(e),s(e,{name:"bottom-spacing",visibleWhen:"ongoing"})]}question(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"question",visibleWhen:"ready"},[e.parentQuestionId?"<hr>":"",n(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"])}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready"},["<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}reasoning(e={}){const{phrases:s,reasoning:n={}}=e,{container:r,element:i,phraseText:o}=this._helpers,c=[];return n.expand&&c.push("expanded"),r(e,{name:"reasoning",visibleWhen:"nonempty"},[i("miso-stub",{classes:c,trait:"collapsible","data-role":"reasoning-box"},[i("div",{classes:["miso-collapsible__header"],"data-role":"toggle-expand"},[`<div class="miso-collapsible__icon">${n.icon||gy}</div>`,`<div class="miso-collapsible__title" data-role="title">${o(s,"thoughts")}</div>`,`<div class="miso-collapsible__toggle">${Fu}</div>`]),i("div",{classes:["miso-collapsible__body"]},["<miso-reasoning></miso-reasoning>"])])])}sources(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"sources",visibleWhen:"nonempty"},["<hr>",n(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}followUpQuestions(e){const{container:s,phrase:n}=this._helpers,r="follow-up-questions",i=["query-suggestions"];return s(e,{name:r,extraNames:i,visibleWhen:"nonempty"},[n(e,{name:r,extraNames:i,tag:"h3"}),"<miso-follow-up-questions></miso-follow-up-questions>"])}followUps(e){const{features:s={}}=e;return s.followUpQuestions===!1?"":'<miso-follow-ups id="miso-ask-combo__follow-ups" class="miso-ask-combo__follow-ups"></miso-follow-ups>'}relatedResourcesSection(e){const{container:s,phrase:n,section:r}=this._helpers,{features:i={},logo:o=!0}=e,c=i.relatedResources===!1?"":s({...e,workflow:"active"},{name:"related-resources",visibleWhen:"nonempty",logo:o},[n(e,{name:"related-resources",tag:"h2"}),"<miso-related-resources></miso-related-resources>"]);return r(e,{name:"related-resources"},c)}};const En=Tr(new Lf({...kf,DEFAULT_PHRASES:$f})),Co=Tr(new IE({helpers:En}));function kE(t={}){const{normalizeOptions:e,section:s,container:n}=En,{followUps:r,relatedResourcesSection:i,answerGroup:o}=Co;return t=e(t),[s(t,{name:"question"},[n(t,{name:"query"},"<miso-query></miso-query>")]),s(t,{name:"answer"},o(t)),r(t),i(t)].join("")}function Ur(t={}){const{normalizeOptions:e,section:s,container:n}=En,{answerGroup:r}=Co;return t=e(t),s(t,{name:"follow-up"},[n(t,{name:"query",visibleWhen:"initial loading"},"<miso-query></miso-query>"),...r(t)])}const $E=Object.freeze(Object.defineProperty({__proto__:null,followUp:Ur,helpers:En,root:kE,sections:Co},Symbol.toStringTag,{value:"Module"})),PE=Object.freeze({...be.DEFAULT_API_OPTIONS,name:Ye.QUESTIONS,payload:{...be.DEFAULT_API_OPTIONS.payload,related_resource_fl:["cover_image","url","created_at","updated_at","published_at"]}}),Nf=Object.freeze({...be.DEFAULT_LAYOUTS,[g.QUERY]:[Ps.type,{templates:{buttonIcon:"send"}}],[g.REASONING]:yn.type,[g.RELATED_RESOURCES]:[ks.type,{incremental:!0,itemType:"article"}],[g.QUERY_SUGGESTIONS]:Lr.type,[g.FOLLOW_UP_QUESTIONS]:Lr.type}),LE=Object.freeze({...be.DEFAULT_TRACKERS,[g.RELATED_RESOURCES]:Ze,[g.QUERY_SUGGESTIONS]:{...Ze,click:{...Ze.click,validate:t=>t.button===0}}}),NE=Object.freeze({followUp:Ur}),UE=Object.freeze({...be.DEFAULT_OPTIONS,api:PE,layouts:Nf,trackers:LE,templates:NE}),DE=mn(be.ROLES_OPTIONS,{members:Object.keys(Nf),mappings:{[g.QUERY_SUGGESTIONS]:J1,[g.FOLLOW_UP_QUESTIONS]:Z1}});class Uf extends be{constructor(e,s){super({name:"ask",context:e,roles:DE,defaults:UE,parentQuestionId:s})}_initProperties(e){super._initProperties(e);const{parentQuestionId:s}=e;ce(this,{parentQuestionId:s})}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(kt(g.REASONING),s=>this._onReasoningViewUpdate(s)),this._views.get(g.ANSWER).on("follow-up-click",s=>this._onFollowUpClick(s)),this._views.get(g.FOLLOW_UP_QUESTIONS).on("select",s=>this._onFollowUpQuestionSelect(s)),this._views.get(g.QUERY_SUGGESTIONS).on("select",s=>this._onQuerySuggestionSelect(s))]}_initSession(e){e.parentQuestionId&&this._context._byPqid.set(e.parentQuestionId,this),this._context._events.emit("create",this),super._initSession(e)}restart(){const{next:e}=this;e&&e.destroy(),this._questionId&&this._context._byQid.delete(this._questionId),super.restart()}get rootQuestionId(){return this._context.root.questionId}get previous(){const{parentQuestionId:e}=this;return e?this._context.getByQuestionId(e):void 0}get next(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e):void 0}getOrCreateNext(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e,{autoCreate:!0}):void 0}_buildPayload({q:e,qs:s,questionId:n,...r}={}){if(n)return G({...r,question_id:n});const{parentQuestionId:i}=this;let o=G({...r,question:e,parent_question_id:i});return o=bf({...o,qs:s}),o=this._writeWikiLinkTemplateToPayload(o),o}_updateData(e){super._updateData(e),this._triggerSuggestionsRefreshIfNecessary()}_triggerSuggestionsRefreshIfNecessary(){const{next:e}=this;if(!e)return;const s=e._views.get(g.QUERY_SUGGESTIONS);s&&s.refresh()}_onReasoningViewUpdate({status:e,ongoing:s}){if(e!==M.READY||s)return;const n=this._getReasoningBoxElement();n&&n.classList.add("done")}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeAdditionalAskPropertiesToInteraction(e,s),e}_writeAdditionalAskPropertiesToInteraction(e,s){const n=this.rootQuestionId;let{property:r}=e.context&&e.context.custom_context||{},i,o,c;return(s.role===g.FOLLOW_UP_QUESTIONS||s.role===g.QUERY_SUGGESTIONS)&&(r="suggested_followup_questions"),s.role===g.QUERY_SUGGESTIONS?(o=this.previous&&this.previous.parentQuestionId,i=this.parentQuestionId,c=this.previous&&this.previous.session.meta.question_source):o=this.parentQuestionId,Je(e,{context:{custom_context:G({property:r,root_question_id:n,parent_question_id:o,question_id:i,question_source:c})}})}_onFollowUpClick({q:e,event:s}={}){s.button===0&&this._submitFollowUpQuestion({q:e,qs:cs.INLINE_QUESTION_LINK})}_onFollowUpQuestionSelect({value:e}){this._submitFollowUpQuestion({q:e,qs:cs.SUGGESTED_QUESTIONS})}_submitFollowUpQuestion({q:e="",qs:s}={}){if(e=e.trim(),!e)return;this.getOrCreateNext().query({q:e,qs:s})}_onQuerySuggestionSelect({value:e}){e&&this.query({q:e,qs:cs.SUGGESTED_QUESTIONS})}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e,this._context._byQid.set(e,this))}_clearQuestionId(){this._questionId&&(this._context._byQid.delete(this._questionId),this._questionId=void 0)}_getReasoningBoxElement(){const e=this._views.get(g.REASONING),s=e&&e.element;return s&&s.closest('[data-role="reasoning-box"]')}_destroy(e){const{next:s,parentQuestionId:n,questionId:r}=this;s&&s.destroy(e),n&&this._context._byPqid.delete(n),r&&this._context._byQid.delete(r),super._destroy(e)}}const Df={event:"done"};function FE(t=Df){switch(t===!0&&(t=Df),typeof t=="string"&&(t={event:t}),typeof t){case"object":return e=>e&&t.event===e._event;case"function":return t;default:return()=>!1}}class Ff extends ro{constructor(e,s){super("asks",e,s),this._byQid=new Map,this._byPqid=new Map,this._root=new Uf(this),this._events.on("*",n=>this._createNextIfNecessary(n)),this._events.on("loading",n=>this._setActive(n.workflow)),this._events.on("destroy",()=>this._requestEmitAfterDestroy()),this._events.on("after-destroy",()=>this._syncActiveOnAfterDestroy()),this._autoNextFn=void 0,this._active=this._root}get root(){return this._root}get workflows(){return[this._root,...this._byPqid.values()]}get active(){return this._active}getByQuestionId(e){if(typeof e!="string")throw new Error(`Required ID to be a string: ${e}`);return this._byQid.get(e)}getByParentQuestionId(e,{autoCreate:s=!1}={}){if(e===void 0)return this._root;if(typeof e!="string")throw new Error(`Required ID to be a string: ${e}`);let n=this._byPqid.get(e);return!n&&s&&(n=new Uf(this,e)),n}reset({root:e=!0,events:s,...n}={}){s===void 0&&(s=!!e),s&&this._events.clear();for(const r of this._byPqid.values())r.destroy(n);e&&this._root.restart()}autoNext(e){this._autoNextFn=FE(e)}_createNextIfNecessary(e){if(!this._autoNextFn||!this._autoNextFn(e))return;const{workflow:s}=e;s&&s.getOrCreateNext()}_requestEmitAfterDestroy(){this._emitAfterDestroyRequested||(this._emitAfterDestroyRequested=!0,setTimeout(()=>{this._emitAfterDestroyRequested=!1,this._events.emit("after-destroy",{})},0))}_syncActiveOnAfterDestroy(){if(!this._active.destroyed)return;let e=this._root;for(;e.next&&e.next.status!==M.INITIAL;e=e.next);this._setActive(e)}_setActive(e){e!==this._active&&(this._active=e,this._events.emit("active",{workflow:e}))}}gn(Ff.prototype,[_e.TEMPLATES]);const ME=10,jE=10,Mf=Object.freeze({...le.DEFAULT_API_OPTIONS,group:ge.SEARCH,payload:{...le.DEFAULT_API_OPTIONS.payload,fl:["cover_image","url","created_at","updated_at","published_at","title"],rows:ME}}),xo=Object.freeze({...le.DEFAULT_LAYOUTS,[g.QUERY]:[Ps.type],[g.PRODUCTS]:[ks.type,{incremental:!0,infiniteScroll:!0}],[g.KEYWORDS]:[wn.type,{raw:!0}],[g.TOTAL]:[wn.type,{raw:!0,format:"number"}],[g.FACETS]:[df.type],[g.SORT]:[To.type],[g.MORE]:[gf.type]}),jf=Object.freeze({...le.DEFAULT_TRACKERS,[g.PRODUCTS]:Ze}),qf=Object.freeze({active:!1,mode:"infiniteScroll",pageLimit:10}),qE=Object.freeze({...le.DEFAULT_OPTIONS,api:Mf,layouts:xo,trackers:jf,pagination:qf}),BE=mn(le.ROLES_OPTIONS,{main:g.PRODUCTS,members:Object.keys(xo),mappings:{[g.FACETS]:"facet_counts",[g.SORT]:Q1}});class Pe extends le{_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(Gt(),s=>this._query(s)),this._hub.on(xs(),()=>this._refine()),this._hub.on(ao(),()=>this._more()),this._views.get(g.SORT).on("select",s=>this._handleSortSelect(s))]}restart(){super.restart(),this._page=0}get exhausted(){const e=this._hub.states[Te()];return!!(e&&e.meta&&e.meta.exhausted)}get page(){return this._page}autoQuery(e={}){Yl.call(this,e)}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update(Gt(),e)}_query(e){const s=Qt.QUERY;this._views.filters.reset({silent:!0}),this.restart({type:s});const n=this._buildPayload(e,s);this._request({payload:n,type:s})}_refine(){const e=Qt.REFINE,{facet_counts:s}=this._hub.states[Te()].value||{};this._currentFacetCounts=s,this.restart({type:e});const n=this._getQuery(),r=this._buildPayload(n,e);this._request({payload:r,type:e})}_more(){if(this.status!==M.READY)throw new Error("Can not call more() while loading.");if(this.exhausted||this._page>=jE-1)return;this._page++;const e=Qt.MORE,s=this._getQuery(),n=this._buildPayload(s,e);this._request({payload:n,type:e})}_getQuery(){return this._hub.states[Gt()]}_getPageSize(){return this._options.resolved.api.payload.rows}_buildPayload(e,s){return e=this._writeFiltersToPayload(e),e=this._writePageInfoToPayload(e),s===Qt.MORE&&(e=this._processPayloadForMoreRequest(e)),e}_writeFiltersToPayload(e){const s=this._hub.states[xs()],{facets:n,sort:r}=s||{};return G({...e,facet_filters:this._buildFacetFilters(n),order_by:this._buildOrderBy(r)})}_buildFacetFilters(e){if(!e)return;const s={};for(const n in e){const r=e[n];!r||!r.length||(s[n]={terms:r})}return Object.keys(s).length?s:void 0}_buildOrderBy(e){if(e)return os(e)}_writePageInfoToPayload(e){return{...e,metadata:{...e.metadata,page:this._page}}}_processPayloadForMoreRequest(e={}){const s=this._hub.states[Te()],{[this._roles.main]:n=[]}=s&&s.value||{},r=n.map(o=>o.product_id).filter(o=>o),i=[...e.exclude||[],...r];return i.length===0?e:{...e,exclude:i}}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=Ef(e),e=oE(e,this._currentFacetCounts),e=lE(e,{role:this._roles.main}),e}_updateData(e){super._updateData(e),Jl.call(this,e)}_updateDataInHub(e,s){e=this._appendResultsFromMoreRequest(e),super._updateDataInHub(e,s)}_appendResultsFromMoreRequest(e){const{request:s}=e;if(!s)return e;const{metadata:n}=s.payload;if(!n||!n.page)return cE(e);const r=this._hub.states[Te()];return aE(r,e,{role:this._roles.main})}_handleSortSelect({value:e}={}){e&&(this._views.filters.update({sort:e}),this._views.filters.apply())}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeRootMisoIdToInteraction(e),e}_writeRootMisoIdToInteraction(e){const s=this._hub.states[Te()],{root_miso_id:n}=s&&s.value||{};return n?Je(e,{context:{custom_context:{root_miso_id:n}}}):e}}gn(Pe.prototype,[_e.PAGINATION,_e.FILTERS]),Object.assign(Pe,{DEFAULT_API_OPTIONS:Mf,DEFAULT_LAYOUTS:xo,DEFAULT_TRACKERS:jf,DEFAULT_PAGINATION:qf,DEFAULT_OPTIONS:qE,ROLES_OPTIONS:BE});const HE=be.ROLES_OPTIONS;class zE extends be{constructor(e){super({name:"hybrid-search/answer",plugin:e._plugin,client:e._client,options:e._options,defaults:e._defaults,roles:HE,superworkflow:e})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow}_initSession(){}_doLoading(e){const{session:s}=this;this.updateData({...e,session:s})}_queryWithQuestionId(e){const{session:s}=this,{request:n,value:r}=e;this.updateData({...e,session:s});const{question_id:i}=r;if(!i)return;const o={...n.payload,question_id:i};o.metadata.page!==void 0&&delete o.metadata.page,this._hub.update(oo(),{...n,payload:o,session:s})}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=Ef(e),e=rE(e),e=wE(e),e}_handleHeadResponse(e){super._handleHeadResponse(e),yf(e)}_onTracker(e){this._superworkflow._onTracker(e)}}const VE=Pe.ROLES_OPTIONS.members;function WE(t){return VE.includes(t)?"results":"answer"}class QE{constructor(e){this._subviews=e,this._containers=new Set}get filters(){return this._subviews.results.filters}get(e){return this._getSubviews(e).get(e)}addContainer(e){if(this._containers.has(e))return;this._containers.add(e);const{components:s}=e;for(const n of s)this.addComponent(n)}removeContainer(e){for(const s of this._getAllSubviews())s.removeContainer(e);this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e,this._addContainerToSubviews(e._container,e)}removeComponent(e){this._getViewByElement(e).element=void 0,this._removeContainerFromSubviewsIfNecessary(e._container)}updateComponentRole(e,s,n){}refreshElement(e){const s=e.isContainer?this._containers.get(e):this._getViewByElement(e);s&&s.refresh({force:!0})}_getAllSubviews(){return Object.values(this._subviews)}_getSubviews(e){return this._subviews[WE(e)]}_getViewByElement(e){let{role:s}=e;if(!s)throw new Error("Component must have a role");return this.get(s)}_addContainerToSubviews(e,s){if(!e)return;const{role:n}=s,r=this._getSubviews(n);if(!r._containers.has(e)){for(const i of this._getAllSubviews())if(i!==r&&i._containers.has(e)){for(const o of e.components)if(i.containsElement(o))throw new Error(`<${e.tagName.toLowerCase()}> cannot contain both <${o.tagName.toLowerCase()}> and <${s.tagName.toLowerCase()}>, for they don't share the same data lifecycle.`);throw new Error(`Failed to add container <${e.tagName.toLowerCase()}> with child component <${s.tagName.toLowerCase()}>.`)}r.addContainer(e)}}_removeContainerFromSubviewsIfNecessary(e){if(!(!e||e.components.length>0))for(const s of this._getAllSubviews())s.removeContainer(e)}}const GE=Object.freeze({members:[]});function KE({layouts:t,trackers:e,...s}={}){return{active:!1,...s,layouts:{},trackers:{}}}function YE(t,e){return Dr(t)===Dr(e)}function Dr(t){return t&&t.value&&t.value.trim()||void 0}class JE extends le{constructor(e,{defaults:s,...n}={}){super({name:"autocomplete",plugin:e._plugin,client:e._client,defaults:KE(s),roles:GE,superworkflow:e,...n})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow,this._active=e.defaults.active}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,e.superworkflow._hub.on(tu(),s=>this._query(s))]}get enabled(){return this._active}enable(){this._active=!0}disable(){this._active=!1}_query(e){if(!this._active||YE(e,this._args))return;this._args=e,this.restart();const{session:s}=this;if(s.meta.input=e,!Dr(e)){this._updateCompletions({session:s,status:M.INITIAL});return}const n=this._buildPayload(e);this._request({payload:n})}_buildPayload(e){return{q:Dr(e)}}_updateDataInHub(e){e.value&&(e={...e,value:e.value.completions}),this._updateCompletions(e)}_updateCompletions(e){this._superworkflow.updateCompletions(e)}}function Bf(t){hn(t,ZE.prototype)}class ZE{_initAutocomplete(e){this._autocomplete=new JE(this,{defaults:e.defaults.autocomplete})}get autocomplete(){return this._autocomplete}updateCompletions(e){return this._hub.update(io(),e),this}_destroyAutocomplete(){this._autocomplete&&this._autocomplete._destroy(),this._autocomplete=void 0}}const XE=Object.freeze({group:ge.ASK,name:Ye.SEARCH,payload:{...be.DEFAULT_API_OPTIONS.payload,...Pe.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at","title","authors"]}}),Hf=Object.freeze({...be.DEFAULT_LAYOUTS,...Pe.DEFAULT_LAYOUTS,[g.QUERY]:[Ps.type,{placeholder:""}],[g.QUESTION]:[wn.type,{raw:!0}],[g.SOURCES]:[$u.type,{incremental:!0,itemType:"article",templates:{ordered:!0,article:du,articleInfoBlock:mo}}]}),e0=Object.freeze({...be.DEFAULT_TRACKERS,...Pe.DEFAULT_TRACKERS}),t0=Object.freeze({...Pe.DEFAULT_PAGINATION,active:!0}),s0=Object.freeze({api:{group:ge.ASK,name:Ye.SEARCH_AUTOCOMPLETE,payload:{completion_fields:["suggested_queries"]}}}),n0=Object.freeze({sort:{options:[{field:"relevance",text:"Relevance",default:!0},{field:"published_at",text:"Date"}]}}),r0=Object.freeze({...be.DEFAULT_OPTIONS,...Pe.DEFAULT_OPTIONS,api:XE,layouts:Hf,trackers:e0,autocomplete:s0,pagination:t0,filters:n0}),i0=Object.freeze({main:g.PRODUCTS,members:Object.keys(Hf),mappings:Object.freeze({...be.ROLES_OPTIONS.mappings,...Pe.ROLES_OPTIONS.mappings})}),o0=Object.freeze({api:Object.freeze({polling:!1})});class Ro extends Pe{constructor(e,s){super({name:"hybrid-search",plugin:e,client:s,roles:i0,defaults:r0,extraOptions:o0})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e),this._answer=new zE(this)}_initActors(e){super._initActors(e),this._views=new QE({results:this._views,answer:this._answer._views})}restart({type:e}={}){super.restart(),(!e||e===Qt.QUERY)&&this._answer.restart()}get answer(){return this._answer}get questionId(){return this._answer.questionId}_buildPayload(e,s){return e=super._buildPayload(e,s),e=X1(e,s),e=bf(e),e=this._writeQuestionIdToPayload(e,s),e.answer!==!1&&(e=be.prototype._writeWikiLinkTemplateToPayload.call(this,e)),e}_buildOrderBy(e){if(e)return e.field}_writeQuestionIdToPayload(e,s){if(s===Qt.QUERY)return e;const n=this._answer.questionId;return n?Ar(e,{metadata:{question_id:n}}):e}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),yf(e),e}_updateDataInHub(e,s){this._dispatchDataToAnswerWorkflow(e),e=uE(e,s),super._updateDataInHub(e,s)}_dispatchDataToAnswerWorkflow(e){const{request:s}=e;if(!s)return;const{type:n,payload:r}=s;if(!(n!==Qt.QUERY||!r||r.answer===!1))switch(e.status){case M.LOADING:this._answer._doLoading(e);break;case M.READY:this._answer._queryWithQuestionId(e);break}}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=Sf(e,s),e}_destroy(){this._answer.destroy(),super._destroy()}}gn(Ro.prototype,[_e.PAGINATION,_e.FILTERS]),Bf(Ro.prototype);const c0=Object.freeze({group:ge.SEARCH,name:Ye.SEARCH,payload:{fl:["*"]}}),a0=Object.freeze({api:{group:ge.SEARCH,name:Ye.AUTOCOMPLETE,payload:{completion_fields:["suggested_queries","title"],fl:["title","url","cover_image"]}}}),l0=Object.freeze({...Pe.DEFAULT_LAYOUTS}),u0=Object.freeze({...Pe.DEFAULT_TRACKERS}),f0=Object.freeze({...Pe.DEFAULT_OPTIONS,api:c0,autocomplete:a0,layouts:l0,trackers:u0}),d0=Pe.ROLES_OPTIONS;class zf extends Pe{constructor(e,s){super({name:"search",plugin:e,client:s,roles:d0,defaults:f0})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e)}notifyViewUpdate(e=g.PRODUCTS,...s){return super.notifyViewUpdate(e,...s),this}_destroy(e){this._destroyAutocomplete(),super._destroy(e)}}Bf(zf.prototype);class Vf extends ro{constructor(e,s,n){super(e,s,n),this._members=new Map}workflows(){return[...this._members.values()]}create(e=no){if(this._members.has(e))throw new Error(`Unit already exists: ${e}`);return this._create(e)}has(e=no){return this._members.has(e)}get(e=no){if(typeof e!="string")throw new Error(`Required unit ID to be a string: ${e}`);return this._members.get(e)||this._create(e)}_create(e){throw new Error("Not implemented")}}class Fe extends le{_initProperties(e){super._initProperties(e);const{id:s}=e;ce(this,{id:s})}_initSession(e){this._context._members.set(e.id,this),super._initSession(e)}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeUnitIdToInteraction(e,s),e}_writeUnitIdToInteraction(e){const s=this.id,n=this.uuid;return Je(e,{context:{custom_context:{unit_id:s,unit_instance_uuid:n}}})}_destroy(e){this._context._members.delete(this.id),super._destroy(e)}}Object.assign(Fe,{DEFAULT_API_OPTIONS:le.DEFAULT_API_OPTIONS,DEFAULT_LAYOUTS:le.DEFAULT_LAYOUTS,DEFAULT_TRACKERS:le.DEFAULT_TRACKERS,DEFAULT_OPTIONS:le.DEFAULT_OPTIONS,ROLES_OPTIONS:le.ROLES_OPTIONS});const h0=Object.freeze({...Fe.DEFAULT_API_OPTIONS,group:ge.RECOMMENDATION,name:Ye.USER_TO_PRODUCTS,payload:{...Fe.DEFAULT_API_OPTIONS.payload,fl:["*"]}}),Wf=Object.freeze({...Fe.DEFAULT_LAYOUTS,[g.PRODUCTS]:ks.type}),_0=Object.freeze({...Fe.DEFAULT_TRACKERS,[g.PRODUCTS]:Ze}),p0=Object.freeze({...Fe.DEFAULT_OPTIONS,api:h0,layouts:Wf,trackers:_0}),m0=mn(Fe.ROLES_OPTIONS,{main:g.PRODUCTS,members:Object.keys(Wf)});class g0 extends Fe{constructor(e,s){super({name:"recommendation",context:e,roles:m0,defaults:p0,id:s})}start(){return this._request(),this}notifyViewUpdate(e=g.PRODUCTS,...s){return super.notifyViewUpdate(e,...s),this}}class b0 extends Vf{constructor(e,s){super("recommendations",e,s)}_create(e){return new g0(this,e)}}const w0=Object.freeze({...Fe.DEFAULT_API_OPTIONS,group:ge.ASK,name:Ye.RELATED_QUESTIONS}),Qf=Object.freeze({...Fe.DEFAULT_LAYOUTS,[g.RELATED_QUESTIONS]:[ks.type,{itemType:"question",link:{rel:"noopener nofollow"}}],[g.QUERY]:[Ps.type,{placeholder:"Ask a question"}]}),y0=Object.freeze({...Fe.DEFAULT_TRACKERS,[g.RELATED_QUESTIONS]:Ze,[g.CONTAINER]:{...Ze,itemless:!0},[g.QUERY]:{[$e.SUBMIT]:{active:!0}}}),E0=Object.freeze({...Fe.DEFAULT_OPTIONS,api:w0,layouts:Qf,trackers:y0}),S0=mn(Fe.ROLES_OPTIONS,{main:g.RELATED_QUESTIONS,members:Object.keys(Qf)});class Gf extends Fe{constructor(e,s){super({name:"explore",context:e,roles:S0,defaults:E0,id:s})}_initProperties(e){super._initProperties(e),this._productId=void 0,this._linkFn=void 0}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._views.get(g.RELATED_QUESTIONS).on("click",s=>this._handleRelatedQuestionClick(s)),this._hub.on(Gt(),s=>this._query(s))]}set productId(e){console.warning("DEPRECATED: use useApi() instead"),this.useApi({product_id:e})}useApi(...e){const s=(typeof e[0]=="object"?e[0]:e[1])||{},{product_id:n}=s;return n&&(this._productId=n),super.useApi(...e)}useLink(e,s){return Ao.prototype.useLink.call(this,e,s),s&&this.useLayouts({[g.RELATED_QUESTIONS]:{link:s}}),this}start({relatedQuestions:e=!0}={}){if(this._linkFn===void 0)throw new Error("Must define link mapping function with useLink(fn) before calling start()");if(e)this._request();else{const{session:s}=this;this.updateData({session:s,request:{},value:{related_questions:[]}})}return this}notifyViewUpdate(e=g.RELATED_QUESTIONS,...s){return super.notifyViewUpdate(e,...s),this}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=this._addUrlToRelatedQuestions(e),e}_addUrlToRelatedQuestions(e){const{value:s}=e;if(!s||!s.related_questions)return e;const n=this._linkFn&&this._linkFn[0],r=s.related_questions.map(n?(i=>({text:i,url:this._getSubmitUrl({q:i,generated:!0})})):(i=>({text:i})));return{...e,value:{...s,related_questions:r}}}_handleRelatedQuestionClick({value:e,...s}){this._events.emit("select",Object.freeze({...s,question:e}))}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update(Gt(),e)}_query(e){this._submitToPage({...e,generated:!1})}_getSubmitUrl(e){let s=Ao.prototype._getSubmitUrl.call(this,e);return!e.generated||!this._productId?s:`${s}&qs=${encodeURIComponent(this._productId)}`}}Cf(Gf.prototype);class v0 extends Vf{constructor(e,s){super("explores",e,s)}_create(e){return new Gf(this,e)}}let T0=class extends De{constructor({name:e,plugin:s,MisoClient:n,...r}){super(e||"combo",s),this._name=e,this._plugin=s,this._MisoClient=n,this._options=r}get MisoClient(){return this._MisoClient}get element(){return this._element}async waitForElement(){return this._element||(this._elementRes||(this._elementRes=new xt)).promise}set element(e){this._element=e,this._elementRes&&this._elementRes.resolve(e)}start(e){this._started||(this._started=!0,e&&this.config(e),this._start())}_start(){throw new Error("Unimplemented")}};function A0(t,e,s){if(!t)throw new Error("client is required");O0(t,s),C0(e)}function O0(t,{template:e=Ur,...s}={}){if(typeof e!="function")throw new Error("template must be a function or undefined");const n=Object.keys(s).length>0;e===Ur&&!n||t.ui.asks.useTemplates({followUp:n?r=>e({...s,...r}):e})}function C0(t){if(!t||t.tagName.toLowerCase()==="miso-follow-ups")return;const e=document.createElement("miso-follow-ups");for(const{name:s,value:n}of t.attributes)e.setAttribute(s,n);t.parentNode.replaceChild(e,t)}function x0(t,e){if(!t)throw new Error("client is required");if(e)for(const s of e.querySelectorAll("miso-ask"))s.setAttribute("workflow","active")}const Kf=Object.freeze(kf),R0=Object.freeze($f),Yf=Object.freeze($E),I0=Object.freeze(Object.defineProperty({__proto__:null,constants:Kf,phrases:R0,templates:Yf,wireFollowUps:A0,wireRelatedResources:x0},Symbol.toStringTag,{value:"Module"})),{currentScript:Io}=document,k0=Object.freeze({templates:Yf,autostart:!0}),$0=["templates","phrases","features"];class P0{constructor(){this._defaults=k0,this._scriptSrc=U0(),this._pageUrl=D0()}resolve(e){return N0(Jf(this._defaults,this._scriptSrc,e,this._pageUrl))}}function Jf(...t){let e={};for(const s of t)s&&(e=L0(e,s));return e}function L0(t,e){if(!e)return t;Object.assign(t,e);for(const s of $0)s in e&&(t[s]={...t[s],...e[s]});return t}function N0({api_key:t,api_host:e,templates:s,phrases:n,...r}={}){return G({apiKey:t,apiHost:e,templates:ko(s),phrases:n,...r})}function U0(){if(!Io||!Io.src)return{};const t=document.createElement("a");t.href=Io.src;const e={};for(const[s,n]of new URLSearchParams(t.search))s!=="q"&&(e[s]=Zf(n));return e}function D0(){const t={};for(const[e,s]of new URLSearchParams(window.location.search))e.startsWith("miso_")&&e.length>5&&e!=="miso_api_key"?t[e.substring(5)]=Zf(s):e==="q"&&(t.q=s);return t}function Zf(t){return t===""?!0:t==="false"?!1:t}function ko(t){if(t==null)return t;switch(typeof t){case"function":return t;case"string":case"number":return()=>t;case"object":return Array.isArray(t)?t.map(ko):F0(t,ko);default:throw new Error(`Unsupported template type: ${t}`)}}function F0(t,e){const s={};for(const[n,r]of Object.entries(t))s[n]=e(r);return s}class M0{constructor(e,{classPrefix:s=Kf.CLASS_PREFIX}={}){if(!e)throw new Error("Root element is required");ce(this,{root:e,followUpsSection:e.querySelector(`.${s}__follow-ups`),relatedResourcesSection:e.querySelector(`.${s}__related-resources`),relatedResourcesContainer:e.querySelector(`.${s}__related-resources miso-ask`)})}}class j0 extends T0{constructor(e,s){super({name:"ask-combo",plugin:e,MisoClient:s}),this._options=new P0,this._localOptions={}}config(e={}){e=Jf(this._localOptions,e);const s=this._options.resolve(e);return this._localOptions=e,this._resolvedOptions=s,this}get resolvedOptions(){return this._resolvedOptions||(this._resolvedOptions=this._options.resolve(this._localOptions))}get client(){return this._client}get elements(){return this._elements}autoStart(){this.resolvedOptions.autostart&&this.start()}async _start(){await Sm(),await this.waitForElement(),await this._setupMisoClient(),this._renderRootContent(),this._createClientInstance(),this._setupWorkflows()}async _setupMisoClient(){const{MisoClient:e,resolvedOptions:s}=this,{version:n}=e;ce(e,{name:"miso-ask-combo"}),(n==="dev"||n.indexOf("beta")>0||s.debug)&&e.plugins.use("std:debug"),s.dry_run&&e.plugins.use("std:dry-run"),s.lorem&&await e.plugins.install("std:lorem")}_renderRootContent(){const{element:e,resolvedOptions:s}=this,{templates:n={}}=s;e.innerHTML=n.root(s),this._elements=new M0(e,s)}async _createClientInstance(){this._client=new MisoClient(this.resolvedOptions)}async _setupWorkflows(){const{MisoClient:e,client:s,elements:n,resolvedOptions:r}=this,{wireFollowUps:i,wireRelatedResources:o}=e.ui.defaults.ask,{templates:c={},features:a={},api:u}=r,l=s.ui.asks,f=s.ui.ask;u&&l.useApi(u),a.followUpQuestions!==!1&&i(s,n.followUpsSection,{...r,template:c.followUp}),a.relatedResources!==!1&&a.followUpQuestions!==!1&&o(s,n.relatedResourcesSection),f.autoQuery()}}class q0 extends dl{constructor(e){super("layouts",e,{libName:"layout",keyName:s=>s.type}),this._plugin=e}get(e){return this._libraries[e]}create(e,s){if(e!==!1)switch(typeof e){case"function":return{render:e};case"string":const n=this.get(e);if(!n)throw new Error(`Layout of name '${e}' not found.`);return new n(s);default:throw new Error(`Expect a string, a render function, or boolean value false: ${e}`)}}}const B0="miso-stub",$o="trait",H0=Object.freeze([$o]);class ls extends HTMLElement{static get tagName(){return B0}static get observedAttributes(){return H0}constructor(){super(),this._traits=[]}connectedCallback(){this._syncTraits()}disconnectedCallback(){for(const e of this._traits)this._destroyTrait(e);this._traits=[]}attributeChangedCallback(e){switch(e){case $o:this._syncTraits();break}}_syncTraits(){const e=(this.getAttribute($o)||"").split(/\s+/).filter(Boolean),s=[];for(const n of this._traits)e.includes(n.constructor.traitName)?s.push(n):this._destroyTrait(n);if(e.length>0){const n=z0(ls.MisoClient);for(const r of e){if(this._traits.find(c=>c.constructor.traitName===r))continue;const i=n[r];if(!i){console.warn(`Unknown trait: ${r}`);continue}const o=new i(this);s.push(o)}}this._traits=s}_destroyTrait(e){try{e._destroy&&e._destroy()}catch(s){console.error(s)}}}function z0(t){const e=t.ui&&t.ui.traits||{};return Object.values(e).reduce((s,n)=>(s[n.traitName]=n,s),{})}let Xf,Po,Fr;async function ed(t){const e=await V0(t);return Po=Po||e.any(),Fr=Fr||await Po,Fr.ui||await G0(0),Fr}async function V0(t){return t.MisoClient||window.MisoClient||Xf||(Xf=W0())}async function W0(){return new Promise(t=>{(window.misocmd||(window.misocmd=[])).push(()=>t(window.MisoClient))})}function Q0(t){for(let e=t;e;e=e.parentNode)if(e.isContainer)return e;throw new Error(`${t.tagName} needs to be placed under a workflow container element.`)}function G0(t){return new Promise(e=>setTimeout(e,t))}const Sn="logo",td="auto",K0=Object.freeze([...ls.observedAttributes,Sn]);function Lo(t){if(!t)return td;switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Invalid logo attribute value: ${t}.`)}}function Y0(t){switch(t){case td:return;case!0:return"true";case!1:return"false";default:throw new Error(`Invalid logo property value: ${t}.`)}}class it extends ls{static get observedAttributes(){return K0}constructor(){super(),this._workflow=void 0,this._components=new Set}get isContainer(){return!0}get workflow(){return this._workflow}set workflow(e){this._setWorkflow(e)}get logo(){return Lo(this.getAttribute(Sn))}set logo(e){if(this.logo===e)return;const s=Y0(e);s?this.setAttribute(Sn,s):this.removeAttribute(Sn)}async connectedCallback(){super.connectedCallback();const e=this._client=await ed(it);document.body.contains(this)&&(this._setWorkflow(this._getWorkflow(e)),this._onConnected(e))}disconnectedCallback(){this._setWorkflow(void 0),super.disconnectedCallback()}_onConnected(e){}_getWorkflow(e){throw new Error("Unimplemented")}_setWorkflow(e){this._workflow!==e&&(this._workflow&&this._workflow._views.removeContainer(this),e&&e._views.addContainer(this),this._workflow=e)}attributeChangedCallback(e,s,n){switch(e){case Sn:this._handleLogoUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleLogoUpdate(e,s){const n=Lo(e),r=Lo(s);n===r||!this._workflow||this._workflow._views.refreshElement(this)}get components(){return[...this._components]}_addComponent(e){this._components.has(e)||(this._components.add(e),this._workflow&&this._workflow._views.addComponent(e))}_removeComponent(e){this._components.has(e)&&(this._workflow&&this._workflow._views.removeComponent(e),this._components.delete(e))}_updateComponentRole(e,s,n){this._workflow&&this._workflow._views.updateComponentRole(e,s,n)}}const J0="miso-ask",No="workflow",vn="parent-question-id",Z0=Object.freeze([...it.observedAttributes,No,vn]);class X0 extends it{static get tagName(){return J0}static get observedAttributes(){return Z0}_getWorkflow(e){return this.boundToActiveWorkflow?e.ui.asks.active:this._getWorkflowByParentQuestionId(e,this.parentQuestionId)}_getWorkflowByParentQuestionId(e,s){return e.ui.asks.getByParentQuestionId(s,{autoCreate:!0})}get parentQuestionId(){return this.getAttribute(vn)||void 0}set parentQuestionId(e){e=e!==void 0?`${e}`:void 0,e!==this.parentQuestionId&&(e?this.setAttribute(vn,e):this.removeAttribute(vn))}get boundToActiveWorkflow(){return this.getAttribute(No)==="active"}_setWorkflow(e){this._workflow!==e&&(super._setWorkflow(e),e&&(this.parentQuestionId=e.parentQuestionId))}async connectedCallback(){if(await super.connectedCallback(),document.body.contains(this)){const e=this._client.ui.asks;this._unsubscribes=[...this._unsubscribes||[],e.on("active",s=>{this.boundToActiveWorkflow&&(this.workflow=s.workflow)})]}}disconnectedCallback(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],super.disconnectedCallback()}attributeChangedCallback(e,s,n){switch(e){case vn:this._handleParentQuestionIdUpdate(s,n);break;case No:this._handleQuestionUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleQuestionUpdate(e,s){e=e||void 0,s=s||void 0,!(e===s||!this._client)&&s===ATTR_VALUE_ACTIVE&&this._setWorkflow(this._getWorkflow(this._client))}_handleParentQuestionIdUpdate(e,s){e=e||void 0,s=s||void 0,!(e===s||!this._client)&&this._setWorkflow(this._getWorkflowByParentQuestionId(this._client,s))}}const Tn="unit-id",eS=Object.freeze([...it.observedAttributes,Tn]);class Mr extends it{static get observedAttributes(){return eS}_getWorkflow(e){return this._getWorkflowByUnitId(e,this.unitId)}_getWorkflowByUnitId(e,s){throw new Error("Not implemented")}get unitId(){return this.getAttribute(Tn)||void 0}set unitId(e){e=e&&`${e}`,e?this.setAttribute(Tn,e):this.removeAttribute(Tn)}attributeChangedCallback(e,s,n){switch(e){case Tn:this._handleUnitIdUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleUnitIdUpdate(e,s){e===s||!this._client||this._setWorkflow(this._getWorkflowByUnitId(this._client,s))}}const tS="miso-explore";class sS extends Mr{static get tagName(){return tS}static get observedAttributes(){return Mr.observedAttributes}_getWorkflowByUnitId(e,s){return e.ui.explores.get(s)}}const nS="miso-hybrid-search";class rS extends it{static get tagName(){return nS}static get observedAttributes(){return it.observedAttributes}_getWorkflow(e){return e.ui.hybridSearch}}const iS="miso-search";class oS extends it{static get tagName(){return iS}static get observedAttributes(){return it.observedAttributes}_getWorkflow(e){return e.ui.search}}const cS="miso-recommendation";class aS extends Mr{static get tagName(){return cS}static get observedAttributes(){return Mr.observedAttributes}_getWorkflowByUnitId(e,s){return e.ui.recommendations.get(s)}}const lS=Object.freeze(Object.defineProperty({__proto__:null,MisoAskElement:X0,MisoExploreElement:sS,MisoHybridSearchElement:rS,MisoRecommendationElement:aS,MisoSearchElement:oS},Symbol.toStringTag,{value:"Module"})),uS="miso-component",An="role",fS=Object.freeze([An]);class de extends HTMLElement{static get tagName(){return uS}static get observedAttributes(){return fS}constructor({role:e}={}){super(),e&&Object.defineProperty(this,"_role",{value:e,writable:!1})}get role(){return this._role}connectedCallback(){const e=Q0(this);this._container&&this._container!==e&&this._container._removeComponent(this),this._syncRole(),e._addComponent(this),this._container=e,this._containerResolution&&this._containerResolution.resolve(e)}_syncRole(){const e=this.getAttribute(An);if(e)this._role?console.warn(`Element <${this.tagName}>' already has a predefined role '${this._role}', so attribute '${An}="${e}"' is ignored.`):this._role=e;else{if(!this._role)throw new Error(`An attribute '${An}' is required for element <${this.tagName}>`);return}}disconnectedCallback(){this._container&&(this._container._removeComponent(this),this._container=void 0,this._containerResolution=void 0)}attributeChangedCallback(e,s,n){s!==n&&e===An&&this._container&&this._container._updateComponentRole(this,s,n)}}class dS extends de{constructor(){super({role:g.QUERY})}static get tagName(){return"miso-query"}}class hS extends de{constructor(){super({role:g.FOLLOW_UP_QUESTIONS})}static get tagName(){return"miso-follow-up-questions"}}class _S extends de{constructor(){super({role:g.QUERY_SUGGESTIONS})}static get tagName(){return"miso-query-suggestions"}}class pS extends de{constructor(){super({role:g.FEEDBACK})}static get tagName(){return"miso-feedback"}}class mS extends de{constructor(){super({role:g.PRODUCTS})}connectedCallback(){console.warn("Element <miso-results> is deprecated. Please use <miso-products> instead."),super.connectedCallback()}static get tagName(){return"miso-results"}}class gS extends de{constructor(){super({role:g.PRODUCTS})}static get tagName(){return"miso-products"}}class bS extends de{constructor(){super({role:g.QUESTION})}static get tagName(){return"miso-question"}}class wS extends de{constructor(){super({role:g.ANSWER})}static get tagName(){return"miso-answer"}}class yS extends de{constructor(){super({role:g.REASONING})}static get tagName(){return"miso-reasoning"}}class ES extends de{constructor(){super({role:g.SOURCES})}static get tagName(){return"miso-sources"}}class SS extends de{constructor(){super({role:g.IMAGES})}static get tagName(){return"miso-images"}}class vS extends de{constructor(){super({role:g.RELATED_RESOURCES})}static get tagName(){return"miso-related-resources"}}class TS extends de{constructor(){super({role:g.RELATED_QUESTIONS})}static get tagName(){return"miso-related-questions"}}class AS extends de{constructor(){super({role:g.AFFILIATION})}static get tagName(){return"miso-affiliation"}}class OS extends de{constructor(){super({role:g.KEYWORDS})}static get tagName(){return"miso-keywords"}}class CS extends de{constructor(){super({role:g.TOTAL})}static get tagName(){return"miso-total"}}class xS extends de{constructor(){super({role:g.FACETS})}static get tagName(){return"miso-facets"}}class RS extends de{constructor(){super({role:g.MORE})}static get tagName(){return"miso-more"}}class IS extends de{constructor(){super({role:g.SORT})}static get tagName(){return"miso-sort"}}class kS extends de{constructor(){super({role:g.ERROR})}static get tagName(){return"miso-error"}}const $S=Object.freeze(Object.defineProperty({__proto__:null,MisoAffiliationElement:AS,MisoAnswerElement:wS,MisoComponentElement:de,MisoErrorElement:kS,MisoFacetsElement:xS,MisoFeedbackElement:pS,MisoFollowUpQuestionsElement:hS,MisoImagesElement:SS,MisoKeywordsElement:OS,MisoMoreElement:RS,MisoProductsElement:gS,MisoQueryElement:dS,MisoQuerySuggestionsElement:_S,MisoQuestionElement:bS,MisoReasoningElement:yS,MisoRelatedQuestionsElement:TS,MisoRelatedResourcesElement:vS,MisoResultsElement:mS,MisoSortElement:IS,MisoSourcesElement:ES,MisoTotalElement:CS},Symbol.toStringTag,{value:"Module"}));class On extends ls{static get observedAttributes(){return ls.observedAttributes}constructor(){super(),this._context=void 0}get context(){return this._context}set context(e){this._setContext(e)}async connectedCallback(){super.connectedCallback();const e=this._client=await ed(On);document.body.contains(this)&&this._setContext(this._getContext(e))}disconnectedCallback(){this._setContext(void 0),super.disconnectedCallback()}_getContext(e){throw new Error("Unimplemented")}_setContext(e){if(this._context===e)return;const s=this._context;this._context=e,this._onContext(e,s)}_onContext(){}}const PS="miso-follow-ups";class LS extends On{static get tagName(){return PS}static get observedAttributes(){return On.observedAttributes}constructor(){super(),this._elementToWorkflow=new WeakMap,this._unsubscribes=[]}_getContext(e){return e.ui.asks}_onContext(e,s){e!==s&&(this._unwire(),this._wire(e))}_unwire(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}_wire(e){e&&(e._autoNextFn||e.autoNext(),this._unsubscribes.push(e.on("create",s=>{const{parentQuestionId:n}=s,r=s._options.resolved.templates.followUp;if(!n||!r)return;const i=this.children.length;this.insertAdjacentHTML("beforeend",r({parentQuestionId:n}));const o=this.children.length;for(const c of Array.prototype.slice.call(this.children,i,o))this._elementToWorkflow.set(c,s)})),this._unsubscribes.push(e.on("loading",({workflow:s})=>{for(const n of this.children)if(this._elementToWorkflow.get(n)===s){n.scrollIntoView({behavior:"smooth",block:"start"});break}})),this._unsubscribes.push(e.on("destroy",({workflow:s})=>{for(const n of this.children)this._elementToWorkflow.get(n)===s&&(this._elementToWorkflow.delete(n),n.remove())})))}}const NS=Object.freeze(Object.defineProperty({__proto__:null,MisoFollowUpsElement:LS},Symbol.toStringTag,{value:"Module"}));class jr extends HTMLElement{constructor(){super()}async connectedCallback(){document.body.contains(this)&&this._setCombo(this._getCombo(jr.MisoClient))}disconnectedCallback(){}_getCombo(e){throw new Error("Unimplemented")}_setCombo(e){this._combo!==e&&(this._combo=e,e.element=this,e.autoStart())}}const US="miso-ask-combo";class DS extends jr{static get tagName(){return US}constructor(){super()}_getCombo(e){return e.ui.combo.ask}}const FS=Object.freeze(Object.defineProperty({__proto__:null,MisoBannerElement:Pr,MisoStubElement:ls,combos:Object.freeze(Object.defineProperty({__proto__:null,MisoAskComboElement:DS},Symbol.toStringTag,{value:"Module"})),containers:lS,contexts:NS,roles:$S},Symbol.toStringTag,{value:"Module"})),sd="miso-hybrid-search-combo",nd=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:sd,CONAINER_TAG:"miso-hybrid-search"},Symbol.toStringTag,{value:"Module"})),MS="You asked ${value}",jS="Sources",qS="You searched for ${value}",BS="${value} Results",rd="Show more",id="Show less",od=Object.freeze(Object.defineProperty({__proto__:null,keywords:qS,question:MS,showLess:id,showMore:rd,sources:jS,total:BS},Symbol.toStringTag,{value:"Module"}));class HS extends Pf{constructor(){super({helpers:qr})}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready !unanswerable"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}answerBox(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__answer-box`]},[s("div",{classes:[`${n}__answer-box-inner`]},this.answerGroup(e)),this.answerBoxToggle(e)])}question(e){const{phrase:s}=this._helpers;return s(e,{name:"question",tag:"div"}).replaceAll("${value}","<miso-question></miso-question>")}answerBoxToggle(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__answer-box-toggle-container`]},[s("div",{classes:[`${n}__answer-box-toggle`],"data-role":"answer-box-toggle"})])}searchResultsGroup(e){const{container:s}=this._helpers;return s(e,{name:"search-results",visibleWhen:"loading ready"},[this.searchResultsInfoGroup(e),this.searchResultsFilters(e),"<miso-products></miso-products>",this.more(e)])}searchResultsInfoGroup(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-info`]},[this.keywords(e),this.total(e)])}searchResultsFilters(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-filters`]},["<miso-facets></miso-facets>","<miso-sort></miso-sort>"])}keywords(e){const{phrase:s}=this._helpers;return s(e,{name:"keywords",tag:"div",inline:!0}).replaceAll("${value}","<miso-keywords></miso-keywords>")}total(e){const{phrase:s}=this._helpers;return s(e,{name:"total",tag:"div",inline:!0}).replaceAll("${value}","<miso-total></miso-total>")}more(e){if(!e.moreButton)return"";const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-more-container`]},["<miso-more></miso-more>"])}}const qr=Tr(new Lf({...nd,DEFAULT_PHRASES:od})),cd=Tr(new HS({helpers:qr}));function zS(t={}){const{normalizeOptions:e,section:s,container:n}=qr;t=e(t);const{answerBox:r,answerGroup:i,searchResultsGroup:o}=cd,{answerBox:c=!1}=t;return[s(t,{name:"question"},[n(t,{name:"query"},"<miso-query></miso-query>")]),s(t,{name:"answer"},c?[r(t)]:i(t)),s(t,{name:"search-results"},o(t))].join("")}const VS=Object.freeze(Object.defineProperty({__proto__:null,helpers:qr,root:zS,sections:cd},Symbol.toStringTag,{value:"Module"})),Cn="answer-box-open",Br="answer-box-shown",ad='[data-role="answer-box-toggle"]';class Uo{constructor(e,s,{classPrefix:n=sd,phrases:r={},hideWhenUnanswerable:i=!0}={}){this._client=e,this._workflow=e.ui.hybridSearch,this._element=s,this._classPrefix=n,this._phrases=r,this._hideWhenUnanswerable=i,this._init()}_init(){const e=this._element,s=this._workflow;s.answerBox=this,s._unsubscribes.push(()=>{s.answerBox===this&&(this.destroy(),s.answerBox=void 0)});const n=r=>this._handleClick(r);e.addEventListener("click",n),this._syncWofkflowStatus(),this._syncButtonText(),this._unsubscribes=[()=>e.removeEventListener("click",n),s._answer._hub.on(Te(),()=>this._syncWofkflowStatus())]}_handleClick({target:e,button:s}){s===0&&e.closest(ad)&&this.toggleOpen()}_syncWofkflowStatus(){const{status:e}=this._workflow._answer,{meta:{unanswerable:s=!1}={}}=this._workflow._answer._hub.states[Te()];switch(e){case M.ERRONEOUS:case M.READY:s&&this._hideWhenUnanswerable?this.hide():this.show();break;default:this.hide()}}_updateBoxStatus(e,s){this._element.classList[e](`${this._classPrefix}__${s}`)}_syncButtonText(){const e=this.isOpen?this._phrases.showLess||id:this._phrases.showMore||rd;for(const s of this._element.querySelectorAll(ad))s.textContent=e}_syncScroll(){this.isOpen||this._element.scrollIntoView({behavior:"smooth"})}destroy(){for(const s of this._unsubscribes)s();const e=this._workflow;e&&e.answerBox===this&&delete e.answerBox}}const WS={isOpen:Cn,shown:Br},QS={toggleOpen:["toggle",Cn],open:["add",Cn],close:["remove",Cn],toggleHidden:["toggle",Br],show:["add",Br],hide:["remove",Br]};for(const[t,e]of Object.entries(WS))Object.defineProperty(Uo.prototype,t,{get(){return this._element.classList.contains(`${this._classPrefix}__${e}`)}});for(const[t,[e,s]]of Object.entries(QS))Uo.prototype[t]=function(){this._updateBoxStatus(e,s),s===Cn&&(this._syncButtonText(),this._syncScroll())};function GS(t,e,s={}){if(!t)throw new Error("client is required");e&&new Uo(t,e,s)}const KS=Object.freeze(nd),YS=Object.freeze(od),JS=Object.freeze(VS),ZS=Object.freeze(Object.defineProperty({__proto__:null,constants:KS,phrases:YS,templates:JS,wireAnswerBox:GS},Symbol.toStringTag,{value:"Module"})),XS=Object.freeze(I0),ev=Object.freeze(ZS),tv=Object.freeze(Object.defineProperty({__proto__:null,ask:XS,hybridSearch:ev},Symbol.toStringTag,{value:"Module"}));function sv(t,e){for(const s of e)Object.defineProperty(t,s,{get(){return this._element&&this._element.classList.contains(s)}})}function nv(t,e){for(const{action:s,classAction:n,className:r}of e)t[s]=function(){this._element&&this._element.classList[n](r),this[`_${s}`]&&this[`_${s}`]()}}function rv(t,e){t._handleClick=function(s){const{target:n,button:r}=s;if(r===0){for(let{role:i,selector:o,action:c}of e)if(o=o||`[data-role="${i}"]`,!!o&&n.closest(o)){this[c](),s.stopPropagation();return}}}}function iv(t){const e=t._element;if(!e)return()=>{};const s=n=>t._handleClick(n);return e.addEventListener("click",s),()=>e.removeEventListener("click",s)}const ld="miso-collapsible",Do="expanded",ov=[{action:"expand",classAction:"add",className:Do},{action:"collapse",classAction:"remove",className:Do}],cv=[{role:"expand",action:"expand"},{role:"collapse",action:"collapse"},{role:"toggle-expand",action:"toggle"}];class Hr{static get traitName(){return"collapsible"}constructor(e){this._element=e,e.collapsible=this,e.classList.add(ld),this._unsubscribes=[iv(this)]}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],delete this._element.collapsible,this._element.classList.remove(ld),this._element=void 0}toggle(){this.expanded?this.collapse():this.expand()}}sv(Hr.prototype,[Do]),nv(Hr.prototype,ov),rv(Hr.prototype,cv);const av=Object.freeze(Object.defineProperty({__proto__:null,CollapsibleTrait:Hr},Symbol.toStringTag,{value:"Module"})),lv="ui";let ud,fd;async function uv(){return fd||(fd=ol(fv()))}function fv(){return ud||(ud=cl(lv))}const dv="std:ui";class hv extends De{static get id(){return dv}constructor(){super("ui"),this.layouts=new q0(this),this._recommendations=new WeakMap,this._explores=new WeakMap,this._asks=new WeakMap,this._extensions=new WeakMap,this._ready=new xt}async install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this));const n={defaults:tv,traits:av};Vt(n,this,["layouts","combo","ready"]),ce(this,{MisoClient:e}),ce(e,{ui:n}),this.combo=new mv(this,e);const r=Object.values(W1).filter(_=>_.type);for(const _ of r)_.MisoClient=e;for(const _ of r)this.layouts.register(_);const{containers:i,roles:o,combos:c,contexts:a,...u}=FS,l=[...Object.values(c),...Object.values(a),...Object.values(i),...Object.values(o),...Object.values(u)],f=[it,On,jr];for(const _ of[...f,...l])_.MisoClient=e;await uv();for(const _ of l)Em(_);this._ready.resolve()}async requireExtension(e){switch(e){case"markdown":return await this.MisoClient.plugins.install("std:ui-markdown");default:throw new Error(`Unknown extension: ${e}`)}}get ready(){return Promise.all([this._ready.promise,MisoClient.any()]).then(()=>{})}_injectClient(e){ce(e,{ui:new pv(this,e)})}_getExtensions(e){if(this._extensions.has(e))return this._extensions.get(e);const s=new _v(this,e);return this._extensions.set(e,s),s}_getRecommendations(e){let s=this._recommendations.get(e);return s||this._recommendations.set(e,s=new b0(this,e)),s}_getExplores(e){let s=this._explores.get(e);return s||this._explores.set(e,s=new v0(this,e)),s}_getAsks(e){let s=this._asks.get(e);return s||this._asks.set(e,s=new Ff(this,e)),s}}class _v{constructor(e,s){this._plugin=e,this._client=s,this._contexts={}}async require(e){if(this._contexts[e])return this._contexts[e];const s=await this._plugin.requireExtension(e);return this._contexts[e]=s.getContext(this._client)}}class pv{constructor(e,s){this._plugin=e,this._client=s,ce(this,{sources:{api:uu(s)}})}get recommendations(){return this._recommendations||(this._recommendations=this._plugin._getRecommendations(this._client))}get recommendation(){return this.recommendations.get()}get search(){return this._search||(this._search=new zf(this._plugin,this._client))}get asks(){return this._asks||(this._asks=this._plugin._getAsks(this._client))}get ask(){return this.asks.root}get hybridSearch(){return this._hybridSearch||(this._hybridSearch=new Ro(this._plugin,this._client))}get explores(){return this._explores||(this._explores=this._plugin._getExplores(this._client))}get explore(){return this.explores.get()}get ready(){return this._plugin._ready.promise}}class mv{constructor(e,s){this._plugin=e,this._MisoClient=s}get ask(){return this._ask||(this._ask=new j0(this._plugin,this._MisoClient))}}It.plugins.use(hv);function gv(t){const e=[];function s(r){e.push(r)}il("misodev",{transform:r=>()=>r({addCmdTransform:s})});const n=r=>{for(const i of e)r=i(r);return r};setTimeout(()=>{il("misocmd",{transform:n}),t&&t()})}It.attach(),gv(pg);const dd="y8KqBRKsGEJ0BAh4PayOS0qBi5wAhU8vzxxkzLi6",bv="MisoCustomScript",hd="miso-answers",wv="/answers",Fo=[{key:"initial",label:"Choose a topic",hideInDropdown:!0,description:"Also, here are some trending questions:",questions:[{question:"What policies can allow new immigrants to survive and thrive in America?",tag:"Recently asked"},{question:"How can reparations support upward health and wellbeing for African Americans?",tag:"In the news"},{question:"What programs have been found to improve child health and wellbeing the most?",tag:"Most asked"},{question:"What are Preemption Laws?",tag:"In the news"}]},{key:"communities-and-environment",label:"Communities & Environment ",questions:[{question:"What policies can address the needs of communities directly affected by climate change?"},{question:"How do kids benefit from green and natural school grounds?"},{question:"How can the tax system be remade to strengthen the health of families?"},{question:"What policies can allow new immigrants to survive and thrive in America?"}]}],mt=new It(dd);mt.ui.asks.useApi({_pipeline_config:{version:"v3"}}),mt.ui.asks.useApi(!1),mt.ui.asks.useLayouts({answer:{onCitationLink:({setAttribute:t},{source:e={}})=>{e.url&&t("href",e.url)}}});const us={reset:()=>{mt.ui.ask.restart()},addRequestListener:t=>{mt.ui.asks.on("request",t)},getUserInfo:()=>{const{anonymous_id:t}=mt.context;return{user_id:t}},query:t=>{mt.ui.ask.query({q:t})},updateData:t=>{mt.ui.ask.updateData({session:mt.ui.ask.session,value:t})},sendFeedbackInteraction:(t,e)=>{mt.api.interactions.upload({type:"feedback",value:e,result_type:"answer",context:{custom_context:{value:e,result_type:"answer",api_group:"ask",api_name:"questions",root_question_id:t,question_id:t}}})}};function _d(t,e){return function(){return t.apply(e,arguments)}}const{toString:yv}=Object.prototype,{getPrototypeOf:Mo}=Object,{iterator:zr,toStringTag:pd}=Symbol,Vr=(t=>e=>{const s=yv.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ot=t=>(t=t.toLowerCase(),e=>Vr(e)===t),Wr=t=>e=>typeof e===t,{isArray:Ns}=Array,Us=Wr("undefined");function xn(t){return t!==null&&!Us(t)&&t.constructor!==null&&!Us(t.constructor)&&Me(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const md=ot("ArrayBuffer");function Ev(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&md(t.buffer),e}const Sv=Wr("string"),Me=Wr("function"),gd=Wr("number"),Rn=t=>t!==null&&typeof t=="object",vv=t=>t===!0||t===!1,Qr=t=>{if(Vr(t)!=="object")return!1;const e=Mo(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(pd in t)&&!(zr in t)},Tv=t=>{if(!Rn(t)||xn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Av=ot("Date"),Ov=ot("File"),Cv=ot("Blob"),xv=ot("FileList"),Rv=t=>Rn(t)&&Me(t.pipe),Iv=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Me(t.append)&&((e=Vr(t))==="formdata"||e==="object"&&Me(t.toString)&&t.toString()==="[object FormData]"))},kv=ot("URLSearchParams"),[$v,Pv,Lv,Nv]=["ReadableStream","Request","Response","Headers"].map(ot),Uv=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function In(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),Ns(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{if(xn(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(n=0;n<o;n++)c=i[n],e.call(null,t[c],c,t)}}function bd(t,e){if(xn(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,r;for(;n-- >0;)if(r=s[n],e===r.toLowerCase())return r;return null}const fs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wd=t=>!Us(t)&&t!==fs;function jo(){const{caseless:t,skipUndefined:e}=wd(this)&&this||{},s={},n=(r,i)=>{const o=t&&bd(s,i)||i;Qr(s[o])&&Qr(r)?s[o]=jo(s[o],r):Qr(r)?s[o]=jo({},r):Ns(r)?s[o]=r.slice():(!e||!Us(r))&&(s[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&In(arguments[r],n);return s}const Dv=(t,e,s,{allOwnKeys:n}={})=>(In(e,(r,i)=>{s&&Me(r)?t[i]=_d(r,s):t[i]=r},{allOwnKeys:n}),t),Fv=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mv=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},jv=(t,e,s,n)=>{let r,i,o;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!n||n(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=s!==!1&&Mo(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},qv=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},Bv=t=>{if(!t)return null;if(Ns(t))return t;let e=t.length;if(!gd(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Hv=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Mo(Uint8Array)),zv=(t,e)=>{const n=(t&&t[zr]).call(t);let r;for(;(r=n.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},Vv=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Wv=ot("HTMLFormElement"),Qv=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),yd=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Gv=ot("RegExp"),Ed=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};In(s,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(n[i]=o||r)}),Object.defineProperties(t,n)},Kv=t=>{Ed(t,(e,s)=>{if(Me(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Me(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Yv=(t,e)=>{const s={},n=r=>{r.forEach(i=>{s[i]=!0})};return Ns(t)?n(t):n(String(t).split(e)),s},Jv=()=>{},Zv=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Xv(t){return!!(t&&Me(t.append)&&t[pd]==="FormData"&&t[zr])}const eT=t=>{const e=new Array(10),s=(n,r)=>{if(Rn(n)){if(e.indexOf(n)>=0)return;if(xn(n))return n;if(!("toJSON"in n)){e[r]=n;const i=Ns(n)?[]:{};return In(n,(o,c)=>{const a=s(o,r+1);!Us(a)&&(i[c]=a)}),e[r]=void 0,i}}return n};return s(t,0)},tT=ot("AsyncFunction"),sT=t=>t&&(Rn(t)||Me(t))&&Me(t.then)&&Me(t.catch),Sd=((t,e)=>t?setImmediate:e?((s,n)=>(fs.addEventListener("message",({source:r,data:i})=>{r===fs&&i===s&&n.length&&n.shift()()},!1),r=>{n.push(r),fs.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Me(fs.postMessage)),nT=typeof queueMicrotask<"u"?queueMicrotask.bind(fs):typeof process<"u"&&process.nextTick||Sd,p={isArray:Ns,isArrayBuffer:md,isBuffer:xn,isFormData:Iv,isArrayBufferView:Ev,isString:Sv,isNumber:gd,isBoolean:vv,isObject:Rn,isPlainObject:Qr,isEmptyObject:Tv,isReadableStream:$v,isRequest:Pv,isResponse:Lv,isHeaders:Nv,isUndefined:Us,isDate:Av,isFile:Ov,isBlob:Cv,isRegExp:Gv,isFunction:Me,isStream:Rv,isURLSearchParams:kv,isTypedArray:Hv,isFileList:xv,forEach:In,merge:jo,extend:Dv,trim:Uv,stripBOM:Fv,inherits:Mv,toFlatObject:jv,kindOf:Vr,kindOfTest:ot,endsWith:qv,toArray:Bv,forEachEntry:zv,matchAll:Vv,isHTMLForm:Wv,hasOwnProperty:yd,hasOwnProp:yd,reduceDescriptors:Ed,freezeMethods:Kv,toObjectSet:Yv,toCamelCase:Qv,noop:Jv,toFiniteNumber:Zv,findKey:bd,global:fs,isContextDefined:wd,isSpecCompliantForm:Xv,toJSONObject:eT,isAsyncFn:tT,isThenable:sT,setImmediate:Sd,asap:nT,isIterable:t=>t!=null&&Me(t[zr])};function q(t,e,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}p.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const vd=q.prototype,Td={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Td[t]={value:t}}),Object.defineProperties(q,Td),Object.defineProperty(vd,"isAxiosError",{value:!0}),q.from=(t,e,s,n,r,i)=>{const o=Object.create(vd);p.toFlatObject(t,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",a=e==null&&t?t.code:e;return q.call(o,c,a,s,n,r),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const rT=null;function qo(t){return p.isPlainObject(t)||p.isArray(t)}function Ad(t){return p.endsWith(t,"[]")?t.slice(0,-2):t}function Od(t,e,s){return t?t.concat(e).map(function(r,i){return r=Ad(r),!s&&i?"["+r+"]":r}).join(s?".":""):e}function iT(t){return p.isArray(t)&&!t.some(qo)}const oT=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function Gr(t,e,s){if(!p.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=p.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!p.isUndefined(y[v])});const n=s.metaTokens,r=s.visitor||l,i=s.dots,o=s.indexes,a=(s.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(r))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(p.isDate(m))return m.toISOString();if(p.isBoolean(m))return m.toString();if(!a&&p.isBlob(m))throw new q("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(m)||p.isTypedArray(m)?a&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,v,y){let C=m;if(m&&!y&&typeof m=="object"){if(p.endsWith(v,"{}"))v=n?v:v.slice(0,-2),m=JSON.stringify(m);else if(p.isArray(m)&&iT(m)||(p.isFileList(m)||p.endsWith(v,"[]"))&&(C=p.toArray(m)))return v=Ad(v),C.forEach(function(L,$){!(p.isUndefined(L)||L===null)&&e.append(o===!0?Od([v],$,i):o===null?v:v+"[]",u(L))}),!1}return qo(m)?!0:(e.append(Od(y,v,i),u(m)),!1)}const f=[],_=Object.assign(oT,{defaultVisitor:l,convertValue:u,isVisitable:qo});function w(m,v){if(!p.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(m),p.forEach(m,function(C,I){(!(p.isUndefined(C)||C===null)&&r.call(e,C,p.isString(I)?I.trim():I,v,_))===!0&&w(C,v?v.concat(I):[I])}),f.pop()}}if(!p.isObject(t))throw new TypeError("data must be an object");return w(t),e}function Cd(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Bo(t,e){this._pairs=[],t&&Gr(t,this,e)}const xd=Bo.prototype;xd.append=function(e,s){this._pairs.push([e,s])},xd.toString=function(e){const s=e?function(n){return e.call(this,n,Cd)}:Cd;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function cT(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rd(t,e,s){if(!e)return t;const n=s&&s.encode||cT;p.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(r?i=r(e,s):i=p.isURLSearchParams(e)?e.toString():new Bo(e,s).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Id{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(n){n!==null&&e(n)})}}const kd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aT={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Bo,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Ho=typeof window<"u"&&typeof document<"u",zo=typeof navigator=="object"&&navigator||void 0,lT=Ho&&(!zo||["ReactNative","NativeScript","NS"].indexOf(zo.product)<0),uT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fT=Ho&&window.location.href||"http://localhost",Ae={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ho,hasStandardBrowserEnv:lT,hasStandardBrowserWebWorkerEnv:uT,navigator:zo,origin:fT},Symbol.toStringTag,{value:"Module"})),...aT};function dT(t,e){return Gr(t,new Ae.classes.URLSearchParams,{visitor:function(s,n,r,i){return Ae.isNode&&p.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function hT(t){return p.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _T(t){const e={},s=Object.keys(t);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],e[i]=t[i];return e}function $d(t){function e(s,n,r,i){let o=s[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),a=i>=s.length;return o=!o&&p.isArray(r)?r.length:o,a?(p.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!c):((!r[o]||!p.isObject(r[o]))&&(r[o]=[]),e(s,n,r[o],i)&&p.isArray(r[o])&&(r[o]=_T(r[o])),!c)}if(p.isFormData(t)&&p.isFunction(t.entries)){const s={};return p.forEachEntry(t,(n,r)=>{e(hT(n),r,s,0)}),s}return null}function pT(t,e,s){if(p.isString(t))try{return(e||JSON.parse)(t),p.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const kn={transitional:kd,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,i=p.isObject(e);if(i&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return r?JSON.stringify($d(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e)||p.isReadableStream(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return dT(e,this.formSerializer).toString();if((c=p.isFileList(e))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Gr(c?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||r?(s.setContentType("application/json",!1),pT(e)):e}],transformResponse:[function(e){const s=this.transitional||kn.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(p.isResponse(e)||p.isReadableStream(e))return e;if(e&&p.isString(e)&&(n&&!this.responseType||r)){const o=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?q.from(c,q.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ae.classes.FormData,Blob:Ae.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],t=>{kn.headers[t]={}});const mT=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gT=t=>{const e={};let s,n,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),s=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!s||e[s]&&mT[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},Pd=Symbol("internals");function $n(t){return t&&String(t).trim().toLowerCase()}function Kr(t){return t===!1||t==null?t:p.isArray(t)?t.map(Kr):String(t)}function bT(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const wT=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Vo(t,e,s,n,r){if(p.isFunction(n))return n.call(this,e,s);if(r&&(e=s),!!p.isString(e)){if(p.isString(n))return e.indexOf(n)!==-1;if(p.isRegExp(n))return n.test(e)}}function yT(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function ET(t,e){const s=p.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(r,i,o){return this[n].call(this,e,r,i,o)},configurable:!0})})}let je=class{constructor(e){e&&this.set(e)}set(e,s,n){const r=this;function i(c,a,u){const l=$n(a);if(!l)throw new Error("header name must be a non-empty string");const f=p.findKey(r,l);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||a]=Kr(c))}const o=(c,a)=>p.forEach(c,(u,l)=>i(u,l,a));if(p.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(p.isString(e)&&(e=e.trim())&&!wT(e))o(gT(e),s);else if(p.isObject(e)&&p.isIterable(e)){let c={},a,u;for(const l of e){if(!p.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(a=c[u])?p.isArray(a)?[...a,l[1]]:[a,l[1]]:l[1]}o(c,s)}else e!=null&&i(s,e,n);return this}get(e,s){if(e=$n(e),e){const n=p.findKey(this,e);if(n){const r=this[n];if(!s)return r;if(s===!0)return bT(r);if(p.isFunction(s))return s.call(this,r,n);if(p.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=$n(e),e){const n=p.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Vo(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let r=!1;function i(o){if(o=$n(o),o){const c=p.findKey(n,o);c&&(!s||Vo(n,n[c],c,s))&&(delete n[c],r=!0)}}return p.isArray(e)?e.forEach(i):i(e),r}clear(e){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const i=s[n];(!e||Vo(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const s=this,n={};return p.forEach(this,(r,i)=>{const o=p.findKey(n,i);if(o){s[o]=Kr(r),delete s[i];return}const c=e?yT(i):String(i).trim();c!==i&&delete s[i],s[c]=Kr(r),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return p.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=e&&p.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[Pd]=this[Pd]={accessors:{}}).accessors,r=this.prototype;function i(o){const c=$n(o);n[c]||(ET(r,o),n[c]=!0)}return p.isArray(e)?e.forEach(i):i(e),this}};je.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),p.reduceDescriptors(je.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}}),p.freezeMethods(je);function Wo(t,e){const s=this||kn,n=e||s,r=je.from(n.headers);let i=n.data;return p.forEach(t,function(c){i=c.call(s,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function Ld(t){return!!(t&&t.__CANCEL__)}function Ds(t,e,s){q.call(this,t??"canceled",q.ERR_CANCELED,e,s),this.name="CanceledError"}p.inherits(Ds,q,{__CANCEL__:!0});function Nd(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new q("Request failed with status code "+s.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function ST(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vT(t,e){t=t||10;const s=new Array(t),n=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(a){const u=Date.now(),l=n[i];o||(o=u),s[r]=a,n[r]=u;let f=i,_=0;for(;f!==r;)_+=s[f++],f=f%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),u-o<e)return;const w=l&&u-l;return w?Math.round(_*1e3/w):void 0}}function TT(t,e){let s=0,n=1e3/e,r,i;const o=(u,l=Date.now())=>{s=l,r=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const l=Date.now(),f=l-s;f>=n?o(u,l):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},n-f)))},()=>r&&o(r)]}const Yr=(t,e,s=3)=>{let n=0;const r=vT(50,250);return TT(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,a=o-n,u=r(a),l=o<=c;n=o;const f={loaded:o,total:c,progress:c?o/c:void 0,bytes:a,rate:u||void 0,estimated:u&&c&&l?(c-o)/u:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(f)},s)},Ud=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},Dd=t=>(...e)=>p.asap(()=>t(...e)),AT=Ae.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ae.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ae.origin),Ae.navigator&&/(msie|trident)/i.test(Ae.navigator.userAgent)):()=>!0,OT=Ae.hasStandardBrowserEnv?{write(t,e,s,n,r,i,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];p.isNumber(s)&&c.push(`expires=${new Date(s).toUTCString()}`),p.isString(n)&&c.push(`path=${n}`),p.isString(r)&&c.push(`domain=${r}`),i===!0&&c.push("secure"),p.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function CT(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xT(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Fd(t,e,s){let n=!CT(e);return t&&(n||s==!1)?xT(t,e):e}const Md=t=>t instanceof je?{...t}:t;function ds(t,e){e=e||{};const s={};function n(u,l,f,_){return p.isPlainObject(u)&&p.isPlainObject(l)?p.merge.call({caseless:_},u,l):p.isPlainObject(l)?p.merge({},l):p.isArray(l)?l.slice():l}function r(u,l,f,_){if(p.isUndefined(l)){if(!p.isUndefined(u))return n(void 0,u,f,_)}else return n(u,l,f,_)}function i(u,l){if(!p.isUndefined(l))return n(void 0,l)}function o(u,l){if(p.isUndefined(l)){if(!p.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function c(u,l,f){if(f in e)return n(u,l);if(f in t)return n(void 0,u)}const a={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,l,f)=>r(Md(u),Md(l),f,!0)};return p.forEach(Object.keys({...t,...e}),function(l){const f=a[l]||r,_=f(t[l],e[l],l);p.isUndefined(_)&&f!==c||(s[l]=_)}),s}const jd=t=>{const e=ds({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=je.from(o),e.url=Rd(Fd(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),p.isFormData(s)){if(Ae.hasStandardBrowserEnv||Ae.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(p.isFunction(s.getHeaders)){const a=s.getHeaders(),u=["content-type","content-length"];Object.entries(a).forEach(([l,f])=>{u.includes(l.toLowerCase())&&o.set(l,f)})}}if(Ae.hasStandardBrowserEnv&&(n&&p.isFunction(n)&&(n=n(e)),n||n!==!1&&AT(e.url))){const a=r&&i&&OT.read(i);a&&o.set(r,a)}return e},RT=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(s,n){const r=jd(t);let i=r.data;const o=je.from(r.headers).normalize();let{responseType:c,onUploadProgress:a,onDownloadProgress:u}=r,l,f,_,w,m;function v(){w&&w(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function C(){if(!y)return;const L=je.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),B={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:L,config:t,request:y};Nd(function(te){s(te),v()},function(te){n(te),v()},B),y=null}"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(C)},y.onabort=function(){y&&(n(new q("Request aborted",q.ECONNABORTED,t,y)),y=null)},y.onerror=function($){const B=$&&$.message?$.message:"Network Error",we=new q(B,q.ERR_NETWORK,t,y);we.event=$||null,n(we),y=null},y.ontimeout=function(){let $=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const B=r.transitional||kd;r.timeoutErrorMessage&&($=r.timeoutErrorMessage),n(new q($,B.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,t,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&p.forEach(o.toJSON(),function($,B){y.setRequestHeader(B,$)}),p.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),c&&c!=="json"&&(y.responseType=r.responseType),u&&([_,m]=Yr(u,!0),y.addEventListener("progress",_)),a&&y.upload&&([f,w]=Yr(a),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",w)),(r.cancelToken||r.signal)&&(l=L=>{y&&(n(!L||L.type?new Ds(null,t,y):L),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const I=ST(r.url);if(I&&Ae.protocols.indexOf(I)===-1){n(new q("Unsupported protocol "+I+":",q.ERR_BAD_REQUEST,t));return}y.send(i||null)})},IT=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,r;const i=function(u){if(!r){r=!0,c();const l=u instanceof Error?u:this.reason;n.abort(l instanceof q?l:new Ds(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new q(`timeout ${e} of ms exceeded`,q.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=()=>p.asap(c),a}},kT=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,r;for(;n<s;)r=n+e,yield t.slice(n,r),n=r},$T=async function*(t,e){for await(const s of PT(t))yield*kT(s,e)},PT=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},qd=(t,e,s,n)=>{const r=$T(t,e);let i=0,o,c=a=>{o||(o=!0,n&&n(a))};return new ReadableStream({async pull(a){try{const{done:u,value:l}=await r.next();if(u){c(),a.close();return}let f=l.byteLength;if(s){let _=i+=f;s(_)}a.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(a){return c(a),r.return()}},{highWaterMark:2})},Bd=64*1024,{isFunction:Jr}=p,LT=(({Request:t,Response:e})=>({Request:t,Response:e}))(p.global),{ReadableStream:Hd,TextEncoder:zd}=p.global,Vd=(t,...e)=>{try{return!!t(...e)}catch{return!1}},NT=t=>{t=p.merge.call({skipUndefined:!0},LT,t);const{fetch:e,Request:s,Response:n}=t,r=e?Jr(e):typeof fetch=="function",i=Jr(s),o=Jr(n);if(!r)return!1;const c=r&&Jr(Hd),a=r&&(typeof zd=="function"?(m=>v=>m.encode(v))(new zd):async m=>new Uint8Array(await new s(m).arrayBuffer())),u=i&&c&&Vd(()=>{let m=!1;const v=new s(Ae.origin,{body:new Hd,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),l=o&&c&&Vd(()=>p.isReadableStream(new n("").body)),f={stream:l&&(m=>m.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!f[m]&&(f[m]=(v,y)=>{let C=v&&v[m];if(C)return C.call(v);throw new q(`Response type '${m}' is not supported`,q.ERR_NOT_SUPPORT,y)})});const _=async m=>{if(m==null)return 0;if(p.isBlob(m))return m.size;if(p.isSpecCompliantForm(m))return(await new s(Ae.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(p.isArrayBufferView(m)||p.isArrayBuffer(m))return m.byteLength;if(p.isURLSearchParams(m)&&(m=m+""),p.isString(m))return(await a(m)).byteLength},w=async(m,v)=>{const y=p.toFiniteNumber(m.getContentLength());return y??_(v)};return async m=>{let{url:v,method:y,data:C,signal:I,cancelToken:L,timeout:$,onDownloadProgress:B,onUploadProgress:we,responseType:te,headers:z,withCredentials:V="same-origin",fetchOptions:ue}=jd(m),Le=e||fetch;te=te?(te+"").toLowerCase():"text";let Ne=IT([I,L&&L.toAbortSignal()],$),qe=null;const We=Ne&&Ne.unsubscribe&&(()=>{Ne.unsubscribe()});let ps;try{if(we&&u&&y!=="get"&&y!=="head"&&(ps=await w(z,C))!==0){let Oe=new s(v,{method:"POST",body:C,duplex:"half"}),ye;if(p.isFormData(C)&&(ye=Oe.headers.get("content-type"))&&z.setContentType(ye),Oe.body){const[Ms,js]=Ud(ps,Yr(Dd(we)));C=qd(Oe.body,Bd,Ms,js)}}p.isString(V)||(V=V?"include":"omit");const Z=i&&"credentials"in s.prototype,H={...ue,signal:Ne,method:y.toUpperCase(),headers:z.normalize().toJSON(),body:C,duplex:"half",credentials:Z?V:void 0};qe=i&&new s(v,H);let W=await(i?Le(qe,ue):Le(v,H));const bt=l&&(te==="stream"||te==="response");if(l&&(B||bt&&We)){const Oe={};["status","statusText","headers"].forEach(si=>{Oe[si]=W[si]});const ye=p.toFiniteNumber(W.headers.get("content-length")),[Ms,js]=B&&Ud(ye,Yr(Dd(B),!0))||[];W=new n(qd(W.body,Bd,Ms,()=>{js&&js(),We&&We()}),Oe)}te=te||"text";let Fs=await f[p.findKey(f,te)||"text"](W,m);return!bt&&We&&We(),await new Promise((Oe,ye)=>{Nd(Oe,ye,{data:Fs,headers:je.from(W.headers),status:W.status,statusText:W.statusText,config:m,request:qe})})}catch(Z){throw We&&We(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new q("Network Error",q.ERR_NETWORK,m,qe),{cause:Z.cause||Z}):q.from(Z,Z&&Z.code,m,qe)}}},UT=new Map,Wd=t=>{let e=t&&t.env||{};const{fetch:s,Request:n,Response:r}=e,i=[n,r,s];let o=i.length,c=o,a,u,l=UT;for(;c--;)a=i[c],u=l.get(a),u===void 0&&l.set(a,u=c?new Map:NT(e)),l=u;return u};Wd();const Qo={http:rT,xhr:RT,fetch:{get:Wd}};p.forEach(Qo,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Qd=t=>`- ${t}`,DT=t=>p.isFunction(t)||t===null||t===!1;function FT(t,e){t=p.isArray(t)?t:[t];const{length:s}=t;let n,r;const i={};for(let o=0;o<s;o++){n=t[o];let c;if(r=n,!DT(n)&&(r=Qo[(c=String(n)).toLowerCase()],r===void 0))throw new q(`Unknown adapter '${c}'`);if(r&&(p.isFunction(r)||(r=r.get(e))))break;i[c||"#"+o]=r}if(!r){const o=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=s?o.length>1?`since :
`+o.map(Qd).join(`
`):" "+Qd(o[0]):"as no adapter specified";throw new q("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r}const Gd={getAdapter:FT,adapters:Qo};function Go(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ds(null,t)}function Kd(t){return Go(t),t.headers=je.from(t.headers),t.data=Wo.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Gd.getAdapter(t.adapter||kn.adapter,t)(t).then(function(n){return Go(t),n.data=Wo.call(t,t.transformResponse,n),n.headers=je.from(n.headers),n},function(n){return Ld(n)||(Go(t),n&&n.response&&(n.response.data=Wo.call(t,t.transformResponse,n.response),n.response.headers=je.from(n.response.headers))),Promise.reject(n)})}const Yd="1.13.1",Zr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Jd={};Zr.transitional=function(e,s,n){function r(i,o){return"[Axios v"+Yd+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(e===!1)throw new q(r(o," has been removed"+(s?" in "+s:"")),q.ERR_DEPRECATED);return s&&!Jd[o]&&(Jd[o]=!0,console.warn(r(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,c):!0}},Zr.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function MT(t,e,s){if(typeof t!="object")throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const i=n[r],o=e[i];if(o){const c=t[i],a=c===void 0||o(c,i,t);if(a!==!0)throw new q("option "+i+" must be "+a,q.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new q("Unknown option "+i,q.ERR_BAD_OPTION)}}const Xr={assertOptions:MT,validators:Zr},gt=Xr.validators;let hs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Id,response:new Id}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=ds(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:i}=s;n!==void 0&&Xr.assertOptions(n,{silentJSONParsing:gt.transitional(gt.boolean),forcedJSONParsing:gt.transitional(gt.boolean),clarifyTimeoutError:gt.transitional(gt.boolean)},!1),r!=null&&(p.isFunction(r)?s.paramsSerializer={serialize:r}:Xr.assertOptions(r,{encode:gt.function,serialize:gt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Xr.assertOptions(s,{baseUrl:gt.spelling("baseURL"),withXsrfToken:gt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&p.merge(i.common,i[s.method]);i&&p.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),s.headers=je.concat(o,i);const c=[];let a=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(s)===!1||(a=a&&v.synchronous,c.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let l,f=0,_;if(!a){const m=[Kd.bind(this),void 0];for(m.unshift(...c),m.push(...u),_=m.length,l=Promise.resolve(s);f<_;)l=l.then(m[f++],m[f++]);return l}_=c.length;let w=s;for(;f<_;){const m=c[f++],v=c[f++];try{w=m(w)}catch(y){v.call(this,y);break}}try{l=Kd.call(this,w)}catch(m){return Promise.reject(m)}for(f=0,_=u.length;f<_;)l=l.then(u[f++],u[f++]);return l}getUri(e){e=ds(this.defaults,e);const s=Fd(e.baseURL,e.url,e.allowAbsoluteUrls);return Rd(s,e.params,e.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(e){hs.prototype[e]=function(s,n){return this.request(ds(n||{},{method:e,url:s,data:(n||{}).data}))}}),p.forEach(["post","put","patch"],function(e){function s(n){return function(i,o,c){return this.request(ds(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}hs.prototype[e]=s(),hs.prototype[e+"Form"]=s(!0)});let jT=class lh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(r);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,c){n.reason||(n.reason=new Ds(i,o,c),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new lh(function(r){e=r}),cancel:e}}};function qT(t){return function(s){return t.apply(null,s)}}function BT(t){return p.isObject(t)&&t.isAxiosError===!0}const Ko={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ko).forEach(([t,e])=>{Ko[e]=t});function Zd(t){const e=new hs(t),s=_d(hs.prototype.request,e);return p.extend(s,hs.prototype,e,{allOwnKeys:!0}),p.extend(s,e,null,{allOwnKeys:!0}),s.create=function(r){return Zd(ds(t,r))},s}const he=Zd(kn);he.Axios=hs,he.CanceledError=Ds,he.CancelToken=jT,he.isCancel=Ld,he.VERSION=Yd,he.toFormData=Gr,he.AxiosError=q,he.Cancel=he.CanceledError,he.all=function(e){return Promise.all(e)},he.spread=qT,he.isAxiosError=BT,he.mergeConfig=ds,he.AxiosHeaders=je,he.formToJSON=t=>$d(p.isHTMLForm(t)?new FormData(t):t),he.getAdapter=Gd.getAdapter,he.HttpStatusCode=Ko,he.default=he;const{Axios:aO,AxiosError:lO,CanceledError:uO,isCancel:fO,CancelToken:dO,VERSION:hO,all:_O,Cancel:pO,isAxiosError:mO,spread:gO,toFormData:bO,AxiosHeaders:wO,HttpStatusCode:yO,formToJSON:EO,getAdapter:SO,mergeConfig:vO}=he,Xd=he.create({baseURL:"https://api-edge.askmiso.com/v1",headers:{"Content-Type":"application/json"},params:{api_key:dd}}),ei={createQuestion:async t=>(await Xd.post("/ask/questions",{...t,...us.getUserInfo()})).data,getAnswer:async t=>(await Xd.get(`/ask/questions/${t}/answer`)).data,getUserHistory:async()=>({data:{message:"success",data:[]}}).data,clearUserHistory:async()=>{}};let eh=!1,ti=null;const th=Qa("history",()=>{const t=xe([]),e=async()=>{if(!eh)return ti||(ti=s().then(()=>{eh=!0}),ti)},s=async()=>{try{const i=await ei.getUserHistory();t.value=i.data}catch(i){console.error("[Miso] Failed to fetch user history:",i)}},n=(i,o)=>{t.value.push({question_id:i,question:o})},r=()=>{t.value=[];try{ei.clearUserHistory()}catch(i){console.error("[Miso] Failed to clear user history:",i)}};return e(),{history:t,addHistory:n,clearUserHistory:r}});let sh=!1;const Pn=Qa("answer",()=>{const t=th(),e=xe(!1),s=xe(null),n=xe(null),r=xe(null),i=xe(null);let o=null;const c=()=>{sh||(us.addRequestListener(({payload:I})=>{const{parent_question_id:L,question:$}=I;if(L){u($);return}f(I)}),sh=!0)},a=()=>{us.reset(),s.value=null,n.value=null,r.value=null,i.value=null,o&&(clearInterval(o),o=null)},u=(I,L=!1)=>{c(),a(),e.value=!0,r.value={query:I,shouldScroll:!L},us.query(I)},l=I=>{a(),e.value=!0,r.value={query:"",shouldScroll:!0},s.value=I,_()},f=async I=>{try{const L=await ei.createQuestion(I),{question_id:$}=L.data;s.value=$,t.addHistory($,I.question),_()}catch(L){console.error("[Miso] Failed to create question:",L)}},_=()=>{o||(w(),o=setInterval(()=>{w()},1e3))},w=async()=>{if(s.value)try{const I=await ei.getAnswer(s.value),{data:L}=I,{finished:$}=L;n.value=L,us.updateData(L),$&&m()}catch(I){m(),console.error("[Miso] Failed to get answer:",I)}},m=()=>{o&&(clearInterval(o),o=null)},v=I=>{if(i.value===I){us.sendFeedbackInteraction(s.value,"unselected"),i.value=null;return}us.sendFeedbackInteraction(s.value,I),i.value=I},y=()=>{v("helpful")},C=()=>{v("unhelpful")};return{questionId:s,data:n,isShowingAnswer:e,pendingQueryAction:r,selectedFeedback:i,question:pt(()=>n.value?.question||""),isFinished:pt(()=>n.value?.finished||!1),sources:pt(()=>n.value?.sources||[]),relatedQuestions:pt(()=>n.value?.followup_questions||[]),ask:u,retrieveAnswer:l,selectHelpful:y,selectUnhelpful:C}}),HT={class:"mr-query-section__container"},zT={class:"mr-query-section__icon--desktop"},VT={class:"mr-query-section__main"},WT={class:"mr-query-section__title"},QT={class:"mr-query-section__icon--mobile"},GT={class:"mr-query-section__input-group"},KT=["onKeydown"],YT=As({__name:"QuerySection",setup(t){const e=Ks("querySectionRef"),{textarea:s,input:n}=om(),r=Pn(),i=()=>{const o=n.value.trim();o&&r.ask(o,!0)};return dt(()=>r.pendingQueryAction,async o=>{o&&(n.value=o.query,o.shouldScroll&&(await Xt(),e.value&&e.value.scrollIntoView({behavior:"smooth",block:"start"})),r.pendingQueryAction=null)},{immediate:!1}),(o,c)=>(Y(),ee("div",{ref_key:"querySectionRef",ref:e,class:"mr-query-section"},[R("div",HT,[R("div",zT,[ve(Za)]),R("div",VT,[R("div",WT,[R("div",QT,[ve(Za)]),c[1]||(c[1]=R("h3",{class:"mr-query-section__title-text"},"What would you like to know?",-1))]),c[2]||(c[2]=R("div",{class:"mr-query-section__description"}," Type in any question to uncover verified, evidence-based findings. ",-1)),R("div",GT,[qt(R("textarea",{ref_key:"textarea",ref:s,"onUpdate:modelValue":c[0]||(c[0]=a=>ae(n)?n.value=a:null),class:"mr-query-section__input",placeholder:"Explore healthcare, community, policy, etc",onKeydown:Fp(Up(i,["prevent"]),["enter"])},null,40,KT),[[Pp,J(n)]]),R("button",{class:"mr-query-section__button",onClick:i},"Search")]),c[3]||(c[3]=hr('<div class="mr-query-section__footer" data-v-5fa34660><button class="mr-query-section__footer-button" data-v-5fa34660><span data-v-5fa34660>Usage tips</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none" data-v-5fa34660><path d="M9.75 4.66699C9.75 3.93765 9.46006 3.23838 8.94434 2.72266C8.42861 2.20693 7.72935 1.91699 7 1.91699C6.27065 1.91699 5.57139 2.20693 5.05566 2.72266C4.53994 3.23838 4.25 3.93765 4.25 4.66699C4.25 5.10351 4.32059 5.59402 4.90527 6.17871C5.35566 6.62913 5.82609 7.22378 5.98535 8.01953C6.06656 8.42558 5.80342 8.82094 5.39746 8.90234C4.99142 8.98355 4.59605 8.72041 4.51465 8.31445C4.44053 7.94388 4.21079 7.60535 3.84473 7.23926C2.91275 6.30728 2.75 5.39714 2.75 4.66699C2.75 3.53982 3.19809 2.45914 3.99512 1.66211C4.79215 0.86508 5.87283 0.416992 7 0.416992C8.12717 0.416992 9.20785 0.86508 10.0049 1.66211C10.8019 2.45914 11.25 3.53982 11.25 4.66699C11.25 5.59866 10.896 6.55636 10.1553 7.23926L10.0098 7.38965C9.69546 7.72793 9.55131 7.98465 9.48535 8.31445C9.40395 8.72041 9.00858 8.98355 8.60254 8.90234C8.19658 8.82094 7.93344 8.42558 8.01465 8.01953C8.17262 7.23013 8.57864 6.69483 9.09473 6.17871L9.12305 6.15137C9.52919 5.78584 9.75 5.23992 9.75 4.66699Z" fill="white" data-v-5fa34660></path><path d="M8.75 9.75C9.16421 9.75 9.5 10.0858 9.5 10.5C9.5 10.9142 9.16421 11.25 8.75 11.25H5.25C4.83579 11.25 4.5 10.9142 4.5 10.5C4.5 10.0858 4.83579 9.75 5.25 9.75H8.75Z" fill="white" data-v-5fa34660></path><path d="M8.16699 12.083C8.58121 12.083 8.91699 12.4188 8.91699 12.833C8.91699 13.2472 8.58121 13.583 8.16699 13.583H5.83398C5.41977 13.583 5.08398 13.2472 5.08398 12.833C5.08398 12.4188 5.41977 12.083 5.83398 12.083H8.16699Z" fill="white" data-v-5fa34660></path></svg></button><button class="mr-query-section__footer-button" data-v-5fa34660><span data-v-5fa34660>More info</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none" data-v-5fa34660><path d="M7 10.5C7.19833 10.5 7.36458 10.4329 7.49875 10.2987C7.63292 10.1646 7.7 9.99833 7.7 9.8C7.7 9.60167 7.63292 9.43542 7.49875 9.30125C7.36458 9.16708 7.19833 9.1 7 9.1C6.80167 9.1 6.63542 9.16708 6.50125 9.30125C6.36708 9.43542 6.3 9.60167 6.3 9.8C6.3 9.99833 6.36708 10.1646 6.50125 10.2987C6.63542 10.4329 6.80167 10.5 7 10.5ZM7 7.7C7.19833 7.7 7.36458 7.63292 7.49875 7.49875C7.63292 7.36458 7.7 7.19833 7.7 7V4.2C7.7 4.00167 7.63292 3.83542 7.49875 3.70125C7.36458 3.56708 7.19833 3.5 7 3.5C6.80167 3.5 6.63542 3.56708 6.50125 3.70125C6.36708 3.83542 6.3 4.00167 6.3 4.2V7C6.3 7.19833 6.36708 7.36458 6.50125 7.49875C6.63542 7.63292 6.80167 7.7 7 7.7ZM7 14C6.03167 14 5.12167 13.8162 4.27 13.4488C3.41833 13.0813 2.6775 12.5825 2.0475 11.9525C1.4175 11.3225 0.91875 10.5817 0.55125 9.73C0.18375 8.87833 0 7.96833 0 7C0 6.03167 0.18375 5.12167 0.55125 4.27C0.91875 3.41833 1.4175 2.6775 2.0475 2.0475C2.6775 1.4175 3.41833 0.91875 4.27 0.55125C5.12167 0.18375 6.03167 0 7 0C7.96833 0 8.87833 0.18375 9.73 0.55125C10.5817 0.91875 11.3225 1.4175 11.9525 2.0475C12.5825 2.6775 13.0813 3.41833 13.4488 4.27C13.8162 5.12167 14 6.03167 14 7C14 7.96833 13.8162 8.87833 13.4488 9.73C13.0813 10.5817 12.5825 11.3225 11.9525 11.9525C11.3225 12.5825 10.5817 13.0813 9.73 13.4488C8.87833 13.8162 7.96833 14 7 14ZM7 12.6C8.56333 12.6 9.8875 12.0575 10.9725 10.9725C12.0575 9.8875 12.6 8.56333 12.6 7C12.6 5.43667 12.0575 4.1125 10.9725 3.0275C9.8875 1.9425 8.56333 1.4 7 1.4C5.43667 1.4 4.1125 1.9425 3.0275 3.0275C1.9425 4.1125 1.4 5.43667 1.4 7C1.4 8.56333 1.9425 9.8875 3.0275 10.9725C4.1125 12.0575 5.43667 12.6 7 12.6Z" fill="white" data-v-5fa34660></path></svg></button></div>',1))])])],512))}},[["__scopeId","data-v-5fa34660"]]),JT={class:"mr-explore-block"},ZT={class:"mr-explore-block__dropdown-header-label"},XT={class:"mr-explore-block__dropdown-list"},eA=["onClick"],tA={class:"mr-explore-block__description"},sA={class:"mr-explore-block__question-list"},nA=["onClick"],rA={class:"mr-explore-block__question-item-text"},iA={class:"mr-explore-block__question-item-tag"},oA=As({__name:"ExploreBlock",setup(t){const e=Fo.filter(a=>!a.hideInDropdown),s=Pn(),n=Ks("dropdownRef");tm(n,()=>{r.value=!1});const r=xe(!1),i=xe(Fo[0].key),o=pt(()=>Fo.find(a=>a.key===i.value)),c=a=>{i.value=a,r.value=!1};return(a,u)=>(Y(),ee("div",JT,[u[2]||(u[2]=R("div",{class:"mr-explore-block__title"},"Not sure what to ask? Explore a topic.",-1)),R("div",{ref_key:"dropdownRef",ref:n,class:"mr-explore-block__dropdown"},[R("div",{onClick:u[0]||(u[0]=l=>r.value=!r.value),class:Yt(["mr-explore-block__dropdown-header",{"mr-explore-block__dropdown-header--open":r.value}])},[R("div",ZT,Ue(o.value.label),1),u[1]||(u[1]=R("div",{class:"mr-explore-block__dropdown-header-icon"},[R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"8",viewBox:"0 0 16 8",fill:"none"},[R("path",{d:"M0.668945 0.743164L7.11109 6.5411C7.4914 6.88337 8.06872 6.88337 8.44902 6.5411L14.8912 0.743164",stroke:"#042E43","stroke-width":"2","stroke-miterlimit":"16"})])],-1))],2),qt(R("div",XT,[(Y(!0),ee(me,null,Zs(J(e),l=>(Y(),ee("div",{key:l.key,class:Yt(["mr-explore-block__dropdown-item",{"mr-explore-block__dropdown-item--selected":i.value===l.key}]),onClick:f=>c(l.key)},Ue(l.label),11,eA))),128))],512),[[ns,r.value]])],512),R("div",tA,Ue(o.value.description||o.value.label),1),R("div",sA,[(Y(!0),ee(me,null,Zs(o.value.questions,l=>(Y(),ee("div",{key:l.question,class:"mr-explore-block__question-item",onClick:f=>J(s).ask(l.question)},[R("div",rA,Ue(l.question),1),R("div",iA,Ue(l.tag||o.value.label),1)],8,nA))),128))])]))}},[["__scopeId","data-v-b23aa5b4"]]),cA={class:"mr-answer-panel"},aA={class:"mr-answer-panel__header-collapse-icon"},lA={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},uA={key:1,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},fA={class:"mr-answer-panel__list"},nh=As({__name:"AnswerPanel",emits:["scroll-to-answer","scroll-to-sources","scroll-to-related-questions"],setup(t,{emit:e}){const s=Pn(),n=e,r=xe(!1);return(i,o)=>(Y(),ee("div",cA,[R("div",{class:"mr-answer-panel__header",onClick:o[0]||(o[0]=c=>r.value=!r.value)},[o[6]||(o[6]=hr('<div class="mr-answer-panel__header-title" data-v-97bc808c><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none" data-v-97bc808c><g clip-path="url(#clip0_15307_3624)" data-v-97bc808c><path d="M9.47401 4.52637L8.42168 7.68278C8.3644 7.85462 8.2679 8.01077 8.13982 8.13885C8.01174 8.26693 7.8556 8.36343 7.68376 8.4207L4.52734 9.47303L5.57968 6.31662C5.63695 6.14478 5.73345 5.98863 5.86153 5.86055C5.98961 5.73247 6.14575 5.63597 6.31759 5.5787L9.47401 4.52637Z" stroke="white" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-97bc808c></path><path d="M7.00081 12.8337C10.2225 12.8337 12.8341 10.222 12.8341 7.00033C12.8341 3.77866 10.2225 1.16699 7.00081 1.16699C3.77915 1.16699 1.16748 3.77866 1.16748 7.00033C1.16748 10.222 3.77915 12.8337 7.00081 12.8337Z" stroke="white" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-97bc808c></path></g><defs data-v-97bc808c><clipPath id="clip0_15307_3624" data-v-97bc808c><rect width="14" height="14" fill="white" data-v-97bc808c></rect></clipPath></defs></svg><span data-v-97bc808c>EXPLORE ANSWER</span></div>',1)),R("div",aA,[r.value?(Y(),ee("svg",lA,[...o[4]||(o[4]=[R("path",{d:"M14 6H8V0H6V6H0V8H6V14H8V8H14V6Z",fill:"#FDFDF9"},null,-1)])])):(Y(),ee("svg",uA,[...o[5]||(o[5]=[R("path",{d:"M14 6H0V8H14V6Z",fill:"#FDFDF9"},null,-1)])]))])]),qt(R("div",fA,[R("div",{class:"mr-answer-panel__list-item mr-answer-panel__list-item--highlight",onClick:o[1]||(o[1]=c=>n("scroll-to-answer"))}," Answer "),J(s).sources.length>0?(Y(),ee("div",{key:0,class:"mr-answer-panel__list-item",onClick:o[2]||(o[2]=c=>n("scroll-to-sources"))}," Articles & References ")):st("",!0),J(s).relatedQuestions.length>0?(Y(),ee("div",{key:1,class:"mr-answer-panel__list-item",onClick:o[3]||(o[3]=c=>n("scroll-to-related-questions"))}," Related Questions ")):st("",!0)],512),[[ns,!r.value]])]))}},[["__scopeId","data-v-97bc808c"]]),dA={class:"mr-history-panel"},hA={class:"mr-history-panel__header-collapse-icon"},_A={key:0,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},pA={key:1,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},mA={class:"mr-history-panel__list"},gA={key:0,class:"mr-history-panel__list-item mr-history-panel__list-item--empty-state"},bA=["onClick"],wA={class:"mr-history-panel__footer"},rh=As({__name:"HistoryPanel",setup(t){const e=th(),s=Pn(),n=xe(!1);return(r,i)=>(Y(),ee("div",dA,[R("div",{class:"mr-history-panel__header",onClick:i[0]||(i[0]=o=>n.value=!n.value)},[i[4]||(i[4]=hr('<div class="mr-history-panel__header-title" data-v-affc0155><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none" data-v-affc0155><g clip-path="url(#clip0_15307_3650)" data-v-affc0155><path d="M6.99984 3.5V7H4.6665" stroke="white" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-affc0155></path><path d="M6.99984 12.8337C10.2215 12.8337 12.8332 10.222 12.8332 7.00033C12.8332 3.77866 10.2215 1.16699 6.99984 1.16699C3.77818 1.16699 1.1665 3.77866 1.1665 7.00033C1.1665 10.222 3.77818 12.8337 6.99984 12.8337Z" stroke="white" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-affc0155></path></g><defs data-v-affc0155><clipPath id="clip0_15307_3650" data-v-affc0155><rect width="14" height="14" fill="white" data-v-affc0155></rect></clipPath></defs></svg><span data-v-affc0155>history</span></div>',1)),R("div",hA,[n.value?(Y(),ee("svg",_A,[...i[2]||(i[2]=[R("path",{d:"M14 6H8V0H6V6H0V8H6V14H8V8H14V6Z",fill:"#FDFDF9"},null,-1)])])):(Y(),ee("svg",pA,[...i[3]||(i[3]=[R("path",{d:"M14 6H0V8H14V6Z",fill:"#FDFDF9"},null,-1)])]))])]),qt(R("div",mA,[J(e).history.length===0?(Y(),ee("div",gA," No history recorded yet. ")):st("",!0),(Y(!0),ee(me,null,Zs(J(e).history,o=>(Y(),ee("div",{key:o.question_id,class:"mr-history-panel__list-item",onClick:c=>J(s).retrieveAnswer(o.question_id)},Ue(o.question),9,bA))),128))],512),[[ns,!n.value]]),qt(R("div",wA,[R("button",{class:"mr-history-panel__clear-history-button",onClick:i[1]||(i[1]=o=>J(e).clearUserHistory())},[...i[5]||(i[5]=[hr('<span data-v-affc0155>Clear history</span><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-affc0155><g clip-path="url(#clip0_15307_1794)" data-v-affc0155><path d="M10.9995 4.83301V11.833C10.9995 12.0982 10.8791 12.3526 10.6648 12.5401C10.4504 12.7277 10.1598 12.833 9.85665 12.833H4.14237C3.83926 12.833 3.54857 12.7277 3.33425 12.5401C3.11992 12.3526 2.99951 12.0982 2.99951 11.833V4.83301" stroke="#042E43" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-affc0155></path><path d="M1.75 4H12.25" stroke="#042E43" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-affc0155></path><path d="M4.66602 3.50033V2.33366C4.66602 2.02424 4.78893 1.72749 5.00772 1.5087C5.22652 1.28991 5.52326 1.16699 5.83268 1.16699H8.16602C8.47543 1.16699 8.77218 1.28991 8.99097 1.5087C9.20977 1.72749 9.33268 2.02424 9.33268 2.33366V3.50033" stroke="#042E43" stroke-width="1.66" stroke-linecap="round" stroke-linejoin="round" data-v-affc0155></path></g><defs data-v-affc0155><clipPath id="clip0_15307_1794" data-v-affc0155><rect width="14" height="14" fill="white" data-v-affc0155></rect></clipPath></defs></svg>',2)])])],512),[[ns,J(e).history.length>0]])]))}},[["__scopeId","data-v-affc0155"]]),yA={class:"mr-answer-section"},EA={class:"mr-answer-section__sticky-navigation-container"},SA={class:"mr-answer-section__panels-group"},vA={class:"mr-answer-section__main"},TA={class:"mr-answer-section__answer-panel-container--mobile"},AA={class:"mr-answer-section__answer"},OA={class:"mr-answer-section__actions-container"},CA={class:"mr-answer-section__sources-count"},xA={class:"mr-answer-section__sources-list"},RA=["href"],IA={class:"mr-answer-section__source-item"},kA={class:"mr-answer-section__source-item-title"},$A={class:"mr-answer-section__source-item-metadata-container"},PA={class:"mr-answer-section__source-item-date"},LA={class:"mr-answer-section__source-item-index"},NA={class:"mr-answer-section__related-questions-count"},UA={class:"mr-answer-section__related-questions-list"},DA=["onClick"],FA={key:1,class:"mr-answer-section__show-more-container"},MA={class:"mr-answer-section__history-panel-container--mobile"},jA=As({__name:"AnswerSection",setup(t){const e=Pn(),s=Ks("answerContainerRef"),n=Ks("sourcesContainerRef"),r=Ks("relatedQuestionsContainerRef"),i=xe(!1),o=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",c=async()=>{await Xt(),s.value&&s.value.scrollIntoView({behavior:"smooth",block:"start"})},a=async()=>{i.value=!0,await Xt(),n.value&&n.value.scrollIntoView({behavior:"smooth",block:"start"})},u=async()=>{i.value=!0,await Xt(),r.value&&r.value.scrollIntoView({behavior:"smooth",block:"start"})};return(l,f)=>(Y(),ee("div",yA,[R("div",EA,[R("div",SA,[J(e).isShowingAnswer?(Y(),fr(nh,{key:0,onScrollToAnswer:c,onScrollToSources:a,onScrollToRelatedQuestions:u})):st("",!0),ve(rh)])]),R("div",vA,[R("div",TA,[J(e).isShowingAnswer?(Y(),fr(nh,{key:0,onScrollToAnswer:c,onScrollToSources:a,onScrollToRelatedQuestions:u})):st("",!0)]),J(e).isShowingAnswer?st("",!0):(Y(),fr(oA,{key:0})),qt(R("div",{ref_key:"answerContainerRef",ref:s,class:"mr-answer-section__answer-container"},[qt(R("h4",{class:"mr-answer-section__question"},Ue(J(e).question),513),[[ns,J(e).question]]),qt(R("div",AA,[...f[3]||(f[3]=[R("miso-ask",{class:"miso-ask-combo__answer-container","visible-when":"ready",logo:!1},[R("miso-answer")],-1)])],512),[[ns,J(e).question]]),J(e).isFinished?(Y(),ee(me,{key:0},[R("div",OA,[R("button",{class:Yt(["mr-answer-section__feedback-button",{"mr-answer-section__feedback-button--is-selected":J(e).selectedFeedback==="helpful"}]),onClick:f[0]||(f[0]=_=>J(e).selectHelpful())},[...f[4]||(f[4]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[R("path",{d:"M21 7.99961C21.5333 7.99961 22 8.19961 22.4 8.59961C22.8 8.99961 23 9.46628 23 9.99961V11.9996C23 12.1163 22.9833 12.2413 22.95 12.3746C22.9167 12.5079 22.8833 12.6329 22.85 12.7496L19.85 19.7996C19.7 20.1329 19.45 20.4163 19.1 20.6496C18.75 20.8829 18.3833 20.9996 18 20.9996H7V7.99961L13 2.04961C13.25 1.79961 13.5458 1.65378 13.8875 1.61211C14.2292 1.57044 14.5583 1.63294 14.875 1.79961C15.1917 1.96628 15.425 2.19961 15.575 2.49961C15.725 2.79961 15.7583 3.10794 15.675 3.42461L14.55 7.99961H21ZM9 8.84961V18.9996H18L21 11.9996V9.99961H12L13.35 4.49961L9 8.84961ZM4 20.9996C3.45 20.9996 2.97917 20.8038 2.5875 20.4121C2.19583 20.0204 2 19.5496 2 18.9996V9.99961C2 9.44961 2.19583 8.97878 2.5875 8.58711C2.97917 8.19544 3.45 7.99961 4 7.99961H7V9.99961H4V18.9996H7V20.9996H4Z",fill:"currentColor"})],-1)])],2),R("button",{class:Yt(["mr-answer-section__feedback-button",{"mr-answer-section__feedback-button--is-selected":J(e).selectedFeedback==="unhelpful"}]),onClick:f[1]||(f[1]=_=>J(e).selectUnhelpful())},[...f[5]||(f[5]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[R("path",{d:"M3 16C2.46667 16 2 15.8 1.6 15.4C1.2 15 1 14.5333 1 14V12C1 11.8833 1.01667 11.7583 1.05 11.625C1.08333 11.4917 1.11667 11.3667 1.15 11.25L4.15 4.2C4.3 3.86667 4.55 3.58333 4.9 3.35C5.25 3.11667 5.61667 3 6 3H17V16L11 21.95C10.75 22.2 10.4542 22.3458 10.1125 22.3875C9.77083 22.4292 9.44167 22.3667 9.125 22.2C8.80833 22.0333 8.575 21.8 8.425 21.5C8.275 21.2 8.24167 20.8917 8.325 20.575L9.45 16H3ZM15 15.15V5H6L3 12V14H12L10.65 19.5L15 15.15ZM20 3C20.55 3 21.0208 3.19583 21.4125 3.5875C21.8042 3.97917 22 4.45 22 5V14C22 14.55 21.8042 15.0208 21.4125 15.4125C21.0208 15.8042 20.55 16 20 16H17V14H20V5H17V3H20Z",fill:"currentColor"})],-1)])],2)]),i.value?(Y(),ee(me,{key:0},[J(e).sources.length>0?(Y(),ee("div",{key:0,ref_key:"sourcesContainerRef",ref:n,class:"mr-answer-section__sources-container"},[f[6]||(f[6]=R("h5",{class:"mr-answer-section__sources-title"},"Articles & References",-1)),R("div",CA,Ue(J(e).sources.length)+" items ",1),R("div",xA,[(Y(!0),ee(me,null,Zs(J(e).sources,(_,w)=>(Y(),ee("a",{key:w+_.product_id,href:_.url,target:"_blank"},[R("div",IA,[R("div",kA,Ue(_.title),1),R("div",$A,[R("div",PA,Ue(o(_.date)),1),R("div",LA,Ue(w+1),1)])])],8,RA))),128))])],512)):st("",!0),J(e).relatedQuestions.length>0?(Y(),ee("div",{key:1,ref_key:"relatedQuestionsContainerRef",ref:r,class:"mr-answer-section__related-questions-container"},[f[7]||(f[7]=R("h5",{class:"mr-answer-section__related-questions-title"},"Related Questions",-1)),R("div",NA,Ue(J(e).relatedQuestions.length)+" items ",1),R("div",UA,[(Y(!0),ee(me,null,Zs(J(e).relatedQuestions,_=>(Y(),ee("button",{key:_,onClick:w=>J(e).ask(_),class:"mr-answer-section__related-question-item"},Ue(_),9,DA))),128))])],512)):st("",!0)],64)):st("",!0),i.value?st("",!0):(Y(),ee("div",FA,[R("button",{onClick:f[2]||(f[2]=_=>i.value=!0),class:"mr-answer-section__show-more-button"},[...f[8]||(f[8]=[R("span",null,"Show more",-1),R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},[R("path",{d:"M14 6H8V0H6V6H0V8H6V14H8V8H14V6Z",fill:"#AF45C9"})],-1)])])]))],64)):st("",!0)],512),[[ns,J(e).isShowingAnswer]]),R("div",MA,[ve(rh)])])]))}},[["__scopeId","data-v-b375de93"]]),qA={__name:"App",setup(t){return(e,s)=>(Y(),ee(me,null,[ve(YT),ve(jA)],64))}};let _s=null;const Yo=()=>{_s&&(_s.unmount(),_s=null);const t=document.getElementById(hd);return t?(_s=qp(qA),_s.use(zp()),_s.mount(t),_s):(console.error(`[Miso] Can't find answer element with id: ${hd}`),null)};window.location.pathname===wv&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Yo()):Yo()),typeof window<"u"&&(window[bv]={init:Yo})})();
