!function(){"use strict";var n=Object.freeze({...function(){const n=document.currentScript;if(!n||!n.src)return{};const t=document.createElement("a");t.href=n.src;const e={};for(const[n,o]of new URLSearchParams(t.search))"q"!==n&&(e[n]=""===o||o);return e}(),...function(){const n={};for(const[t,e]of new URLSearchParams(window.location.search))t.startsWith("miso_")&&t.length>5&&"miso_api_key"!==t?n[t.substring(5)]=""===e||e:"q"===t&&(n.q=e);return n}()}),t="0.9.12";const e="%cMiso",o="color: #fff; background-color: #9033bb; padding: 2px 2px 1px 4px;";function s(...s){(n.debug||t.indexOf("beta")>=0||"dev"===t)&&function(...n){console.log(e,o,...n)}(...s)}const r=new Map;async function c(n){return async function(n,t,e){if(n.has(t))return n.get(t);const o=await e(t);return n.set(t,o),o}(r,n,(async n=>await async function(n,t){return async function(n,t,{fields:e}={}){let o=`https://b2c-contenthub.com/wp-json/wp/v2/${n}/${t}`;e&&(o+="?_fields="+e.join(","));return async function(n){return(await window.fetch(n)).json()}(o)}("posts",n,t)}(n,{fields:["meta"]})))}const{currentScript:a}=document;async function i({}){await Promise.all([u()])}let l=!1;async function u(){if(l)return;if(l=!0,!a)throw Error("currentScript not found");const n=a.src,t=n.indexOf("?"),e=(0>t?n:n.substring(0,t)).replace(/(\.min)?\.js$/,".css");await async function(n){if(document.querySelector(`link[href="${n}"]`))return;return new Promise(((t,e)=>{const o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onload=t,o.onerror=e,o.href=n,document.head.appendChild(o)}))}(e)}const d='<svg fill="currentColor" viewBox="0 0 16 16">\n<path d="M12.52.55l-5,5h0L.55,12.51l3,3,12-12Zm-4,6,4-4,1,1-4,4.05ZM2.77,3.18A3.85,3.85,0,0,1,5.32,5.73h0A3.85,3.85,0,0,1,7.87,3.18h0A3.82,3.82,0,0,1,5.32.64h0A3.82,3.82,0,0,1,2.77,3.18ZM8.5,2.55h0A2,2,0,0,1,9.78,1.27h0A1.92,1.92,0,0,1,8.5,0h0A1.88,1.88,0,0,1,7.23,1.27h0A1.92,1.92,0,0,1,8.5,2.55Zm-6.36,0h0A1.92,1.92,0,0,1,3.41,1.27h0A1.88,1.88,0,0,1,2.14,0h0A1.92,1.92,0,0,1,.86,1.27h0A2,2,0,0,1,2.14,2.55ZM14.73,6.22h0a1.94,1.94,0,0,1-1.28,1.27h0a1.94,1.94,0,0,1,1.28,1.27h0A1.9,1.9,0,0,1,16,7.49h0A1.9,1.9,0,0,1,14.73,6.22Z"/>\n</svg>',p='<svg fill="currentColor" viewBox="0 0 973.1 973.1">\n<path d="M502.29,788.199h-47c-33.1,0-60,26.9-60,60v64.9c0,33.1,26.9,60,60,60h47c33.101,0,60-26.9,60-60v-64.9 C562.29,815,535.391,788.199,502.29,788.199z M170.89,285.8l86.7,10.8c27.5,3.4,53.6-12.4,63.5-38.3c12.5-32.7,29.9-58.5,52.2-77.3c31.601-26.6,70.9-40,117.9-40 c48.7,0,87.5,12.8,116.3,38.3c28.8,25.6,43.1,56.2,43.1,92.1c0,25.8-8.1,49.4-24.3,70.8c-10.5,13.6-42.8,42.2-96.7,85.9 c-54,43.7-89.899,83.099-107.899,118.099c-18.4,35.801-24.8,75.5-26.4,115.301c-1.399,34.1,25.8,62.5,60,62.5h49 c31.2,0,57-23.9,59.8-54.9c2-22.299,5.7-39.199,11.301-50.699c9.399-19.701,33.699-45.701,72.699-78.1 C723.59,477.8,772.79,428.4,795.891,392c23-36.3,34.6-74.8,34.6-115.5c0-73.5-31.3-138-94-193.4c-62.6-55.4-147-83.1-253-83.1 c-100.8,0-182.1,27.3-244.1,82c-52.8,46.6-84.9,101.8-96.2,165.5C139.69,266.1,152.39,283.5,170.89,285.8z"/>\n</svg>',f='<svg fill="currentColor" viewBox="0 0 24 24">\n<path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.696-3.534c.63 0 1.332-.288 2.196-1.458l.911-1.22a.334.334 0 0 0-.074-.472.38.38 0 0 0-.505.06l-1.475 1.679a.241.241 0 0 1-.279.061.211.211 0 0 1-.12-.244l1.858-7.446a.499.499 0 0 0-.575-.613l-3.35.613a.35.35 0 0 0-.276.258l-.086.334a.25.25 0 0 0 .243.312h1.73l-1.476 5.922c-.054.234-.144.63-.144.918 0 .666.396 1.296 1.422 1.296zm1.83-10.536c.702 0 1.242-.414 1.386-1.044.036-.144.054-.306.054-.414 0-.504-.396-.972-1.134-.972-.702 0-1.242.414-1.386 1.044a1.868 1.868 0 0 0-.054.414c0 .504.396.972 1.134.972z"/>\n</svg>',h="smart-answers-discovery";function y(n){return w("home",function({site:n}){const{name:t,ref_story:e}=n;return`\n<div class="${h}__container">\n  <div class="${h}__header">\n    <div class="${h}__title">\n      Smart Answers from ${t}\n    </div>\n    ${m(e)}\n  </div>\n  <div class="${h}__body">\n    <div class="${h}__search-box">\n      <input type="text" class="${h}__search-box-input" placeholder="Ask us a question">\n      <button class="${h}__search-box-button" data-role="button">\n        <i>${d}</i>\n        <span>A.I. Search</span>\n      </button>\n    </div>\n  </div>\n  <div class="${h}__footer">\n    ${m(e)}\n  </div>\n</div>\n`}(n))}function _(n,t={}){return w("article",function(n,{questions:t=[]}){const e=0===t.length,o=e?"Ask a question...":"Ask your own question...";return`\n<div class="${h}__header">\n  <i>${p}</i>\n  <h4 class="${h}__title">${e?"Explore with a question":"Explore frequently asked questions"}</h4>\n</div>\n<div class="${h}__body">\n  <div class="${h}__questions-container">\n    <ul class="${h}__questions-list">${t.map((n=>function(n,{question:t}){return`\n<li class="${h}__question-item">\n  <a href="/smart-answers?q=${encodeURIComponent(t)}" class="${h}__question-link" data-role="faq-item" target="_blank" rel="nofollow">${t}</a>\n</li>\n`}(0,{question:n}))).join("")}</ul>\n  </div>\n  <div class="${h}__search-box">\n    <input type="text" class="${h}__search-box-input" placeholder="${o}">\n    <button class="${h}__search-box-button" data-role="button">\n      <i>${d}</i>\n      <span>A.I. Search</span>\n    </button>\n  </div>\n</div>\n`}(0,t))}function w(n,t){const e=document.createElement("div");return e.classList.add(h),e.classList.add(n),e.innerHTML=t,e}function m(n){return`\n<div class="${h}__info">\n  <span>What is this?</span>\n  <a class="${h}__info-link" href="/?post_type=post&p=${n}" target="_blank">${f}</a>\n</div>\n`}const v=(()=>{const n="";for(const[t,e]of new URLSearchParams(window.location.search))t.startsWith("miso_")&&(n+=`&${encodeUrlComponent(t)}=${encodeUrlComponent(e)}`);return n})();function g(n,t){const e=t.querySelector('input[type="text"]');if(!e)throw Error('input[type="text"] not found');e.addEventListener("keydown",(({key:t,isComposing:o})=>{o||"Enter"!==t||$(n,e.value)})),t.addEventListener("click",(({target:o})=>{for(let s=o;s&&s!==t;s=s.parentElement){if(v&&s.matches('a[href][data-role="faq-item"]'))return;if(s.matches('[data-role="button"]'))return void $(n,e.value)}}))}function $(n,t){if(!t)return;window.open(`/smart-answers?q=${encodeURIComponent(t)}${v}`,"_blank")}async function b({config:n,page:t}){s("[Discovery] Fetching suggested questions from Miso API...");const e=`${"staging"===n.api_host?"https://ask-api.askmiso-staging.com/v1":"https://api.askmiso.com/v1"}/ask/related_questions?api_key=${n.api_key}`;try{const n=await window.fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:t.storyId})}),{data:o}=await n.json(),{related_questions:r}=o;return 0===r.length&&s("[Discovery] No suggested questions found."),r}catch(n){return s("[Discovery] Failed to fetch suggested questions: "+n),console.error(n),[]}}async function k(n){const{story:t}=n,{contentType:e}=t;switch((o=e)&&o.toLowerCase().replaceAll(" ","-")){case"news":case"feature":case"how-to":await async function(n){await q(n,{paragraphs:10})}(n);break;case"reviews":case"best-picks":await async function(n){await q(n,{paragraphs:6})}(n);break;default:s("[Discovery] No discovery block for story type: "+e)}var o}async function q(n,{paragraphs:t}={}){const e=(o=t,document.querySelector(`#link_wrapped_content > .legacy_content > p:nth-of-type(${o})`)||document.querySelector(`#link_wrapped_content > p:nth-of-type(${o})`)||document.querySelector("#link_wrapped_content > .legacy_content > p:last-of-type")||document.querySelector("#link_wrapped_content > p:last-of-type"));var o;if(!e)return void s("[Discovery] No block shown: cannot find the reference position for discovery block.");const[r]=await Promise.all([b(n),i(n)]),c=_(0,{questions:r});g(n,c),e.insertAdjacentElement("afterend",c)}(async(n,e)=>{if("/smart-answers"===window.location.pathname)return;if(window.miso_smart_answers_script_version)return void console.warn("Miso Smart Answers script already executed: "+window.miso_smart_answers_script_version);window.miso_smart_answers_script_version=t;const o=function(n){const t=window.location.pathname;if("/"===t)return{type:"home",site:n};const e=t.substring(1).split("/");if("article"===e[0]){const t=""+e[1];return{type:"story",site:n,postId:t,storyId:`story_${n.key}_${t}`}}return{type:"other",site:n}}(n);switch(o.type){case"home":await async function(n){const t=document.querySelector(".layout--right-rail");if(!t)return void console.error("[Smart Answers] No block shown: cannot find the reference position for discovery block.");await i(n);const e=y(n);g(n,e),t.insertAdjacentElement("beforebegin",e)}({site:n,config:e,page:o});break;case"story":const t=await async function(n){const t={};let e;try{e=await c(n),s("Fetched post info",[e])}catch(e){return console.error("Cannot fetch post: "+n),console.error(e),t}try{if(t.contentType=e.meta.content_type,!t.contentType)throw Error("Blank meta.content_type: "+n)}catch(t){console.error("Cannot extract story type: "+n),console.error(t)}try{const{suppress_monetization:n='""'}=e.meta||{},o=JSON.parse(n);t.adSuppression=!0===o.content_ads}catch(t){console.error("Cannot extract suppress_monetization info: "+n),console.error(t)}return t}(o.postId);await k({site:n,config:e,page:o,story:t});break;default:s("[Discovery] No discovery block for page type: "+o.type)}})({key:"techadvisor",hostname:"www.techadvisor.com",name:"Tech Advisor",lang:"en",ref_story:"2013602"},n)}();
