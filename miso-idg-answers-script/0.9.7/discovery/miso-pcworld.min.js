!function(){"use strict";var t=Object.freeze({...function(){const t=document.currentScript;if(!t||!t.src)return{};const n=document.createElement("a");n.href=t.src;const e={};for(const[t,o]of new URLSearchParams(n.search))"q"!==t&&(e[t]=""===o||o);return e}(),...function(){const t={};for(const[n,e]of new URLSearchParams(window.location.search))n.startsWith("miso_")&&n.length>5&&"miso_api_key"!==n?t[n.substring(5)]=""===e||e:"q"===n&&(t.q=e);return t}()}),n="0.9.7";const e="%cMiso",o="color: #fff; background-color: #9033bb; padding: 2px 2px 1px 4px;";function s(...s){(t.debug||n.indexOf("beta")>=0||"dev"===n)&&function(...t){console.log(e,o,...t)}(...s)}const r=new Map;async function c(t){return async function(t,n,e){if(t.has(n))return t.get(n);const o=await e(n);return t.set(n,o),o}(r,t,(async t=>await async function(t,n){return async function(t,n,{fields:e}={}){let o=`https://b2c-contenthub.com/wp-json/wp/v2/${t}/${n}`;e&&(o+="?_fields="+e.join(","));return async function(t){return(await window.fetch(t)).json()}(o)}("posts",t,n)}(t,{fields:["meta"]})))}const{currentScript:a}=document;async function i({}){await Promise.all([l()])}let u=!1;async function l(){if(u)return;if(u=!0,!a)throw Error("currentScript not found");const t=a.src,n=t.indexOf("?"),e=(0>n?t:t.substring(0,n)).replace(/(\.min)?\.js$/,".css");await async function(t){if(document.querySelector(`link[href="${t}"]`))return;return new Promise(((n,e)=>{const o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onload=n,o.onerror=e,o.href=t,document.head.appendChild(o)}))}(e)}const d='<svg fill="currentColor" viewBox="0 0 16 16">\n<path d="M12.52.55l-5,5h0L.55,12.51l3,3,12-12Zm-4,6,4-4,1,1-4,4.05ZM2.77,3.18A3.85,3.85,0,0,1,5.32,5.73h0A3.85,3.85,0,0,1,7.87,3.18h0A3.82,3.82,0,0,1,5.32.64h0A3.82,3.82,0,0,1,2.77,3.18ZM8.5,2.55h0A2,2,0,0,1,9.78,1.27h0A1.92,1.92,0,0,1,8.5,0h0A1.88,1.88,0,0,1,7.23,1.27h0A1.92,1.92,0,0,1,8.5,2.55Zm-6.36,0h0A1.92,1.92,0,0,1,3.41,1.27h0A1.88,1.88,0,0,1,2.14,0h0A1.92,1.92,0,0,1,.86,1.27h0A2,2,0,0,1,2.14,2.55ZM14.73,6.22h0a1.94,1.94,0,0,1-1.28,1.27h0a1.94,1.94,0,0,1,1.28,1.27h0A1.9,1.9,0,0,1,16,7.49h0A1.9,1.9,0,0,1,14.73,6.22Z"/>\n</svg>',p='<svg fill="currentColor" viewBox="0 0 973.1 973.1">\n<path d="M502.29,788.199h-47c-33.1,0-60,26.9-60,60v64.9c0,33.1,26.9,60,60,60h47c33.101,0,60-26.9,60-60v-64.9 C562.29,815,535.391,788.199,502.29,788.199z M170.89,285.8l86.7,10.8c27.5,3.4,53.6-12.4,63.5-38.3c12.5-32.7,29.9-58.5,52.2-77.3c31.601-26.6,70.9-40,117.9-40 c48.7,0,87.5,12.8,116.3,38.3c28.8,25.6,43.1,56.2,43.1,92.1c0,25.8-8.1,49.4-24.3,70.8c-10.5,13.6-42.8,42.2-96.7,85.9 c-54,43.7-89.899,83.099-107.899,118.099c-18.4,35.801-24.8,75.5-26.4,115.301c-1.399,34.1,25.8,62.5,60,62.5h49 c31.2,0,57-23.9,59.8-54.9c2-22.299,5.7-39.199,11.301-50.699c9.399-19.701,33.699-45.701,72.699-78.1 C723.59,477.8,772.79,428.4,795.891,392c23-36.3,34.6-74.8,34.6-115.5c0-73.5-31.3-138-94-193.4c-62.6-55.4-147-83.1-253-83.1 c-100.8,0-182.1,27.3-244.1,82c-52.8,46.6-84.9,101.8-96.2,165.5C139.69,266.1,152.39,283.5,170.89,285.8z"/>\n</svg>',f="smart-answers-discovery";function h(t,n={}){const e=document.createElement("div");return e.classList.add(f),e.classList.add("article"),e.innerHTML=function(t,{questions:n=[]}){const e=0===n.length,o=e?"Ask a question...":"Ask your own question...";return`\n<div class="${f}__header">\n  <i>${p}</i>\n  <h4 class="${f}__title">${e?"Explore with a question":"Explore frequently asked questions"}</h4>\n</div>\n<div class="${f}__body">\n  <div class="${f}__questions-container">\n    <ul class="${f}__questions-list">${n.map((t=>function(t,{question:n}){return`\n<li class="${f}__question-item">\n  <a href="/smart-answers?q=${encodeURIComponent(n)}" class="${f}__question-link" target="_blank">${n}</a>\n</li>\n`}(0,{question:t}))).join("")}</ul>\n  </div>\n  <div class="${f}__search-box">\n    <input type="text" class="${f}__search-box-input" placeholder="${o}">\n    <button class="${f}__search-box-button" data-role="button">\n      <i>${d}</i>\n      <span>A.I. Search</span>\n    </button>\n  </div>\n</div>\n`}(0,n),e}const y=(()=>{const t="";for(const[n,e]of new URLSearchParams(window.location.search))n.startsWith("miso_")&&(t+=`&${encodeUrlComponent(n)}=${encodeUrlComponent(e)}`);return t})();function w(t,n){if(!n)return;window.open(`/smart-answers?q=${encodeURIComponent(n)}${y}`,"_blank")}async function m({config:t,page:n}){s("[Discovery] Fetching suggested questions from Miso API...");const e=`${"staging"===t.api_host?"https://ask-api.askmiso-staging.com/v1":"https://api.askmiso.com/v1"}/ask/related_questions?api_key=${t.api_key}`;try{const t=await window.fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:n.storyId})}),{data:o}=await t.json(),{related_questions:r}=o;return 0===r.length&&s("[Discovery] No suggested questions found."),r}catch(t){return s("[Discovery] Failed to fetch suggested questions: "+t),console.error(t),[]}}async function _(t){const{story:n}=t,{contentType:e}=n;switch((o=e)&&o.toLowerCase().replaceAll(" ","-")){case"news":case"feature":case"how-to":await async function(t){await v(t,{paragraphs:10})}(t);break;case"reviews":case"best-picks":await async function(t){await v(t,{paragraphs:6})}(t);break;default:s("[Discovery] No discovery block for story type: "+e)}var o}async function v(t,{paragraphs:n}={}){const e=document.querySelector(`#link_wrapped_content > p:nth-of-type(${n})`)||document.querySelector("#link_wrapped_content > p:last-of-type");if(!e)return void s("[Discovery] No block shown: cannot find the reference position for discovery block.");const[o]=await Promise.all([m(t),i(t)]),r=h(0,{questions:o});!function(t,n){const e=n.querySelector('input[type="text"]');if(!e)throw Error('input[type="text"] not found');e.addEventListener("keydown",(({key:t,isComposing:n})=>{n||"Enter"!==t||w(0,e.value)})),n.addEventListener("click",(({target:t})=>{for(let o=t;o&&o!==n;o=o.parentElement){if(y&&o.matches("a[href]"))return;if(o.matches('[data-role="button"]'))return void w(0,e.value)}}))}(0,r),e.insertAdjacentElement("afterend",r)}(async(t,e)=>{if("/smart-answers"===window.location.pathname)return;if(window.miso_smart_answers_script_version)return void console.warn("Miso Smart Answers script already executed: "+window.miso_smart_answers_script_version);window.miso_smart_answers_script_version=n;const o=function(t){const n=window.location.pathname;if("/"===n)return{type:"home",site:t};const e=n.substring(1).split("/");if("article"===e[0]){const n=""+e[1];return{type:"story",site:t,postId:n,storyId:`story_${t.key}_${n}`}}return{type:"other",site:t}}(t);switch(o.type){case"home":await async function(t){}();break;case"story":const n=await async function(t){const n={};let e;try{e=await c(t),s("Fetched post info",[e])}catch(e){return console.error("Cannot fetch post: "+t),console.error(e),n}try{if(n.contentType=e.meta.content_type,!n.contentType)throw Error("Blank meta.content_type: "+t)}catch(n){console.error("Cannot extract story type: "+t),console.error(n)}try{const{suppress_monetization:t='""'}=e.meta||{},o=JSON.parse(t);n.adSuppression=!0===o.content_ads}catch(n){console.error("Cannot extract suppress_monetization info: "+t),console.error(n)}return n}(o.postId);await _({site:t,config:e,page:o,story:n});break;default:s("[Discovery] No discovery block for page type: "+o.type)}})({key:"pcworld",hostname:"www.pcworld.com",name:"PCWorld",lang:"en"},t)}();
