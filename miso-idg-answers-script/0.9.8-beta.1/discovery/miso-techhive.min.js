!function(){"use strict";var t=Object.freeze({...function(){const t=document.currentScript;if(!t||!t.src)return{};const e=document.createElement("a");e.href=t.src;const n={};for(const[t,o]of new URLSearchParams(e.search))"q"!==t&&(n[t]=""===o||o);return n}(),...function(){const t={};for(const[e,n]of new URLSearchParams(window.location.search))e.startsWith("miso_")&&e.length>5&&"miso_api_key"!==e?t[e.substring(5)]=""===n||n:"q"===e&&(t.q=n);return t}()}),e="0.9.8-beta.1";const n="%cMiso",o="color: #fff; background-color: #9033bb; padding: 2px 2px 1px 4px;";function s(...s){(t.debug||e.indexOf("beta")>=0||"dev"===e)&&function(...t){console.log(n,o,...t)}(...s)}const r=new Map;async function c(t){return async function(t,e,n){if(t.has(e))return t.get(e);const o=await n(e);return t.set(e,o),o}(r,t,(async t=>await async function(t,e){return async function(t,e,{fields:n}={}){let o=`https://b2c-contenthub.com/wp-json/wp/v2/${t}/${e}`;n&&(o+="?_fields="+n.join(","));return async function(t){return(await window.fetch(t)).json()}(o)}("posts",t,e)}(t,{fields:["meta"]})))}const{currentScript:a}=document;async function i({}){await Promise.all([l()])}let u=!1;async function l(){if(u)return;if(u=!0,!a)throw Error("currentScript not found");const t=a.src,e=t.indexOf("?"),n=(0>e?t:t.substring(0,e)).replace(/(\.min)?\.js$/,".css");await async function(t){if(document.querySelector(`link[href="${t}"]`))return;return new Promise(((e,n)=>{const o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onload=e,o.onerror=n,o.href=t,document.head.appendChild(o)}))}(n)}const p='<svg fill="currentColor" viewBox="0 0 16 16">\n<path d="M12.52.55l-5,5h0L.55,12.51l3,3,12-12Zm-4,6,4-4,1,1-4,4.05ZM2.77,3.18A3.85,3.85,0,0,1,5.32,5.73h0A3.85,3.85,0,0,1,7.87,3.18h0A3.82,3.82,0,0,1,5.32.64h0A3.82,3.82,0,0,1,2.77,3.18ZM8.5,2.55h0A2,2,0,0,1,9.78,1.27h0A1.92,1.92,0,0,1,8.5,0h0A1.88,1.88,0,0,1,7.23,1.27h0A1.92,1.92,0,0,1,8.5,2.55Zm-6.36,0h0A1.92,1.92,0,0,1,3.41,1.27h0A1.88,1.88,0,0,1,2.14,0h0A1.92,1.92,0,0,1,.86,1.27h0A2,2,0,0,1,2.14,2.55ZM14.73,6.22h0a1.94,1.94,0,0,1-1.28,1.27h0a1.94,1.94,0,0,1,1.28,1.27h0A1.9,1.9,0,0,1,16,7.49h0A1.9,1.9,0,0,1,14.73,6.22Z"/>\n</svg>',d='<svg fill="currentColor" viewBox="0 0 973.1 973.1">\n<path d="M502.29,788.199h-47c-33.1,0-60,26.9-60,60v64.9c0,33.1,26.9,60,60,60h47c33.101,0,60-26.9,60-60v-64.9 C562.29,815,535.391,788.199,502.29,788.199z M170.89,285.8l86.7,10.8c27.5,3.4,53.6-12.4,63.5-38.3c12.5-32.7,29.9-58.5,52.2-77.3c31.601-26.6,70.9-40,117.9-40 c48.7,0,87.5,12.8,116.3,38.3c28.8,25.6,43.1,56.2,43.1,92.1c0,25.8-8.1,49.4-24.3,70.8c-10.5,13.6-42.8,42.2-96.7,85.9 c-54,43.7-89.899,83.099-107.899,118.099c-18.4,35.801-24.8,75.5-26.4,115.301c-1.399,34.1,25.8,62.5,60,62.5h49 c31.2,0,57-23.9,59.8-54.9c2-22.299,5.7-39.199,11.301-50.699c9.399-19.701,33.699-45.701,72.699-78.1 C723.59,477.8,772.79,428.4,795.891,392c23-36.3,34.6-74.8,34.6-115.5c0-73.5-31.3-138-94-193.4c-62.6-55.4-147-83.1-253-83.1 c-100.8,0-182.1,27.3-244.1,82c-52.8,46.6-84.9,101.8-96.2,165.5C139.69,266.1,152.39,283.5,170.89,285.8z"/>\n</svg>',h="smart-answers-discovery";function f(t,e={}){const n=document.createElement("div");return n.classList.add(h),n.classList.add("article"),n.innerHTML=function(t,{questions:e=[]}){const n=0===e.length,o=n?"Ask a question...":"Ask your own question...";return`\n<div class="${h}__header">\n  <i>${d}</i>\n  <h4 class="${h}__title">${n?"Explore with a question":"Explore frequently asked questions"}</h4>\n</div>\n<div class="${h}__body">\n  <div class="${h}__questions-container">\n    <ul class="${h}__questions-list">${e.map((t=>function(t,{question:e}){return`\n<li class="${h}__question-item">\n  <a href="/smart-answers?q=${encodeURIComponent(e)}" class="${h}__question-link" target="_blank">${e}</a>\n</li>\n`}(0,{question:t}))).join("")}</ul>\n  </div>\n  <div class="${h}__search-box">\n    <input type="text" class="${h}__search-box-input" placeholder="${o}">\n    <button class="${h}__search-box-button" data-role="button">\n      <i>${p}</i>\n      <span>A.I. Search</span>\n    </button>\n  </div>\n</div>\n`}(0,e),n}const y=(()=>{const t="";for(const[e,n]of new URLSearchParams(window.location.search))e.startsWith("miso_")&&(t+=`&${encodeUrlComponent(e)}=${encodeUrlComponent(n)}`);return t})();function w(t,e){if(!e)return;window.open(`/smart-answers?q=${encodeURIComponent(e)}${y}`,"_blank")}async function m({config:t,page:e}){s("[Discovery] Fetching suggested questions from Miso API...");const n=`${"staging"===t.api_host?"https://ask-api.askmiso-staging.com/v1":"https://api.askmiso.com/v1"}/ask/related_questions?api_key=${t.api_key}`;try{const t=await window.fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e.storyId})}),{data:o}=await t.json(),{related_questions:r}=o;return 0===r.length&&s("[Discovery] No suggested questions found."),r}catch(t){return s("[Discovery] Failed to fetch suggested questions: "+t),console.error(t),[]}}async function _(t){const{story:e}=t,{contentType:n}=e;switch((o=n)&&o.toLowerCase().replaceAll(" ","-")){case"news":case"feature":case"how-to":await async function(t){await v(t,{paragraphs:10})}(t);break;case"reviews":case"best-picks":await async function(t){await v(t,{paragraphs:6})}(t);break;default:s("[Discovery] No discovery block for story type: "+n)}var o}async function v(t,{paragraphs:e}={}){const n=document.querySelector(`#link_wrapped_content > p:nth-of-type(${e})`)||document.querySelector("#link_wrapped_content > p:last-of-type");if(!n)return void s("[Discovery] No block shown: cannot find the reference position for discovery block.");const[o]=await Promise.all([m(t),i(t)]),r=f(0,{questions:o});!function(t,e){const n=e.querySelector('input[type="text"]');if(!n)throw Error('input[type="text"] not found');n.addEventListener("keydown",(({key:t,isComposing:e})=>{e||"Enter"!==t||w(0,n.value)})),e.addEventListener("click",(({target:t})=>{for(let o=t;o&&o!==e;o=o.parentElement){if(y&&o.matches("a[href]"))return;if(o.matches('[data-role="button"]'))return void w(0,n.value)}}))}(0,r),n.insertAdjacentElement("afterend",r)}(async(t,n)=>{if("/smart-answers"===window.location.pathname)return;if(window.miso_smart_answers_script_version)return void console.warn("Miso Smart Answers script already executed: "+window.miso_smart_answers_script_version);window.miso_smart_answers_script_version=e;const o=function(t){const e=window.location.pathname;if("/"===e)return{type:"home",site:t};const n=e.substring(1).split("/");if("article"===n[0]){const e=""+n[1];return{type:"story",site:t,postId:e,storyId:`story_${t.key}_${e}`}}return{type:"other",site:t}}(t);switch(o.type){case"home":await async function(t){}();break;case"story":const e=await async function(t){const e={};let n;try{n=await c(t),s("Fetched post info",[n])}catch(n){return console.error("Cannot fetch post: "+t),console.error(n),e}try{if(e.contentType=n.meta.content_type,!e.contentType)throw Error("Blank meta.content_type: "+t)}catch(e){console.error("Cannot extract story type: "+t),console.error(e)}try{const{suppress_monetization:t='""'}=n.meta||{},o=JSON.parse(t);e.adSuppression=!0===o.content_ads}catch(e){console.error("Cannot extract suppress_monetization info: "+t),console.error(e)}return e}(o.postId);await _({site:t,config:n,page:o,story:e});break;default:s("[Discovery] No discovery block for page type: "+o.type)}})({key:"techhive",hostname:"www.techhive.com",name:"TechHive",lang:"en"},t)}();
