!function(){"use strict";var t="1.10.2-beta.5";function e(...t){const e=t.length;if(0===e)return(new AbortController).signal;if(1===e)return t[0];const n=new AbortController;for(const e of t)if(e&&e.addEventListener){if(e.aborted)return AbortSignal.abort(e.reason);e.addEventListener("abort",(()=>n.abort(e.reason)))}return n.signal}const n=Object.freeze({ASK:"ask",SEARCH:"search",RECOMMENDATION:"recommendation",INTERACTIONS:"interactions"}),r=Object.freeze({QUESTIONS:"questions",RELATED_QUESTIONS:"related_questions",SEARCH:"search",AUTOCOMPLETE:"autocomplete",MGET:"mget",USER_TO_PRODUCTS:"user_to_products",USER_TO_CATEGORIES:"user_to_categories",USER_TO_ATTRIBUTES:"user_to_attributes",USER_TO_TRENDING:"user_to_trending",USER_TO_HISTORY:"user_to_history",PRODUCT_TO_PRODUCTS:"product_to_products",UPLOAD:"upload"});var o=Object.freeze({__proto__:null,GROUP:n,NAME:r});function i(t,e){if(!t)return;const n=t.indexOf(e);n>-1&&t.splice(n,1)}function s(t){return null!=t?""+t:t}function a(t){if("object"!=typeof t)return t;const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0!==t[n]&&(e[n]=t[n]);return e}function c(t){return null==t}function u(t,e,n){Object.defineProperties(t,(n="string"==typeof n?[n]:n).reduce(((t,n)=>(t[n]={get:()=>{const t=e[n];return"function"==typeof t?t.bind(e):t}},t)),{}))}function l(t,e){for(const n in e)e.hasOwnProperty(n)&&Object.defineProperty(t,n,{value:e[n]})}class d{constructor(t,{duration:e=0,onDuration:n,offDuration:r,state:o}={}){if("function"!=typeof t)throw Error("Callback must be a function: "+t);m(n),m(r),m(e),this._callback=t,Object.defineProperty(this,"durations",{value:Object.freeze({on:void 0!==n?n:e,off:void 0!==r?r:e})}),this._value=this._state=!!o,this._active=!0}get active(){return this._active}get state(){return this._state}get value(){return this._value}set value(t){if(this._value===(t=!!t))return;!function(t){if(!t._timeout)return;clearTimeout(t._timeout),t._timeout=void 0}(this);const e=this.durations[t?"on":"off"];e?this._timeout=setTimeout((()=>p(this,t)),e):p(this,t),this._value=t}disconnect(){this._active=!1}}function p(t,e){t._state!==e&&(t._state=e,t._active&&t._callback(e))}function m(t,e){if(void 0!==e&&(isNaN(e)||0>e))throw Error(`${t} must be a non-negative number: ${e}`)}function _(){return(crypto&&crypto.randomUUID?crypto.randomUUID():void 0)||function(){if(!URL||!URL.createObjectURL||URL.revokeObjectURL||!Blob)return;const t=URL.createObjectURL(new Blob),e=""+t;return URL.revokeObjectURL(t),e.substring(e.lastIndexOf("/")+1)}()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}function h(t,e){const n=window.localStorage.getItem(t),r=function(t){const e="; "+document.cookie,n=`; ${encodeURIComponent(t)}=`,r=e.indexOf(n);if(0>r)return;const o=r+n.length,i=e.indexOf(";",o);return decodeURIComponent(0>i?e.substring(o):e.substring(o,i))}(t),o=n||r||""+e();return o&&!n&&window.localStorage.setItem(t,o),o&&!r&&function(t,e){document.cookie=`${encodeURIComponent(t)}=${encodeURIComponent(e)}; max-age=31536000; path=/`}(t,o),o}class f{constructor(){const t=this;t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),Object.freeze(this)}}class y{constructor(){this._index=-1,this._done=!1,this._aborted=!1,this._abortReason=void 0,this._error=void 0}get aborted(){return this._aborted}get abortReason(){return this._abortReason}get done(){return this._done}update(t,e=!1){this._done||(this._value=t,this._done=e,this._index++,this._resolution&&(this._resolution.resolve(),this._resolution=void 0))}error(t){this._error=t,this._resolution&&(this._resolution.reject(t),this._resolution=void 0)}abort(t){this._aborted=!0,this._abortReason=t,this._resolution&&(t instanceof Error?this._resolution.reject(t):this._resolution.resolve(),this._resolution=void 0)}async*[Symbol.asyncIterator](){let t=0;for(;;){if(this._error)throw this._error;if(this._aborted)break;if(t>this._index&&(this._resolution||(this._resolution=new f),await this._resolution.promise),this._aborted)break;const e=this._done,n=this._index+1;if(yield this._value,this._aborted||e)break;t=n}}}function g(t,e=(t=>console.error(t))){const n=window[t]||(window[t]=[]);if(n._processed)return;n._processed=!0;const r=t=>function(t,e){try{e()}catch(e){t(e)}}(e,t);Object.defineProperty(n,"push",{value:r});for(const t of n)r(t)}let w;try{w=document.currentScript}catch(t){}async function b(t){try{let e=function(t){return document.head.querySelector(`link[href="${t}"]`)}(t);return e||(e=document.createElement("link"),e.rel="stylesheet",e.href=t,document.head.appendChild(e)),async function(t){await async function(t){if(t.sheet)return;return new Promise(((e,n)=>{let r;t.onerror=()=>{r&&clearInterval(r),n()},r=setInterval((()=>{t.sheet&&(r&&clearInterval(r),e())}),100)}))}(t),await async function(t){if(v(t))return;return new Promise((e=>{let n;n=setInterval((()=>{v(t)&&(n&&clearInterval(n),e())}),100)}))}(t)}(e)}catch(t){console.error(t)}}function v(t){for(const e of document.styleSheets)if(e.ownerNode===t)return!0;return!1}function k(t,{depth:e=5,...n}={}){return x(t,e)}function x(t,e,n){return e>0?"object"==typeof t&&t?void 0!==t.length?Array.prototype.map.call(t,(t=>x(t,e-1))):t instanceof Node?function(t){if(t instanceof Element)return`<${t.tagName.toLowerCase()}${t.id?` id="${t.id}"`:""}${t.className?` class="${t.className}"`:""}>`;return`[TextNode](${t.length})`}(t):function(t,e,n){const r={};if(0>=e)return r;for(const n in t){const o=t[n];"function"!=typeof o&&(n.startsWith("_")&&"object"==typeof o&&"Object"!==o.constructor.name||(r[n]=x(o,e-1)))}return r}(t,e):t:"(...)"}const E=Symbol.for("miso:resources");class R{constructor(){this._resources=new Map;const t=window[E]||[];for(const e of t)try{const[t,n]=e;this.push([t,n])}catch(t){}}push([t,e]){S(this._resources,t).resolve(e)}async get(t){return S(this._resources,t).promise}}function S(t,e){if(t.has(e))return t.get(e);const n=new f;return t.set(e,n),n}function I(){return window[E]||(window[E]=new R)}class P{constructor(t,e){this._dispatchRequested=!1,this._requests=[],this._run=t,this._error=e||(t=>console.error(t)),this._bulkId=0,this._dispatch=this._dispatch.bind(this)}get info(){return{bulkId:this._bulkId,index:this._requests.length}}async run(t){const e=new f;return this._requests.push({action:t,resolution:e}),this._requestDispatch(),e.promise}_requestDispatch(){this._dispatchRequested||(this._dispatchRequested=!0,setTimeout(this._dispatch))}_dispatch(){if(!this._dispatchRequested)return;this._dispatchRequested=!1;const t=this._requests,e=this._bulkId++;this._requests=[];try{this._run(t,{bulkId:e})}catch(t){this._error(t)}}}class O{constructor({target:t,error:e,replays:n=[]}={}){if(this._error=e||(t=>console.error(t)),!Array.isArray(n))throw Error("Replays option must be an array of strings: "+n);this._replays=new Set(n),this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={},t&&this._injectSubscribeInterface(t)}emit(t,e){const n={data:e,meta:{name:t,ts:Date.now()}},r=this._namedCallbacks[t];if(r)for(const t of r)t(n);for(const t of this._unnamedCallbacks)t(n);this._shallStoreForReplay(t)&&(this._pastEvents[t]||(this._pastEvents[t]=[])).push(n)}on(t,e){return this._checkName(t),this._checkCallback(e),this._on(t,this._wrapCallback(e))}once(t){this._checkName(t);const e=this;return new Promise(((n,r)=>{const o=e._on(t,(t=>{setTimeout((()=>o()));try{n(t)}catch(t){r(t)}}))}))}clear(){this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={}}_checkName(t){if("string"!=typeof t)throw Error("Event name should be a string: "+t)}_checkCallback(t){if("function"!=typeof t)throw Error("Event callback should be a function: "+t)}_shallStoreForReplay(t){return this._replays.has(t)}_wrapCallback(t){const e=this;return({data:n,meta:r})=>{try{t(n,r)}catch(t){e._error(t)}}}_on(t,e){if("*"===t?this._unnamedCallbacks.push(e):(this._namedCallbacks[t]||(this._namedCallbacks[t]=[])).push(e),"*"===t)for(const t in this._pastEvents)this._pastEvents[t].forEach(e);else this._pastEvents[t]&&this._pastEvents[t].forEach(e);return()=>this._off(t,e)}_off(t,e){if("*"===t)i(this._unnamedCallbacks,e);else{const n=this._namedCallbacks[t];n&&i(n,e)}}_injectSubscribeInterface(t){u(t,this,["on","once"])}}function A(t,e){return Object.freeze([...e&&e.meta&&e.meta.path||[],...t?[t]:[]])}class T{constructor(t,e){const n=function(t,e){if(void 0!==t&&"string"!=typeof t&&void 0===e&&(e=t,t=void 0),void 0!==t&&("string"!=typeof t||!t))throw Error(`Invalid Component name: "${t}"`);return Object.freeze({name:t,parent:e,path:A(t,e),uuid:_()})}(t,e);l(this,{meta:n});const r=this._error=this._error.bind(this);(this._events=new O({error:r,replays:["child"]}))._injectSubscribeInterface(this),this._warn=this._warn.bind(this),(e=n.parent)&&e._events&&e._events.emit("child",this)}_warn(...t){const e=this.meta.parent;(e&&e._warn||console.warn)(...t)}_error(...t){const e=this.meta.parent;(e&&e._error||console.error)(...t)}}!function(t,e){const n=Symbol.for(e);Object.defineProperty(t,n,{value:!0}),Object.defineProperty(t,"isTypeOf",{value:e=>e&&e instanceof t||"function"==typeof e.constructor&&!0===e.constructor[n]})}(T,"miso:component");class C extends T{constructor(t,e,{libName:n,keyName:r}={}){switch(super(t,e),this._events._replays.add("register"),this._libraries={},this._libResolutions={},this._libName=n,typeof r){case"string":this._keyFn=t=>t[r];break;case"function":this._keyFn=r;break;default:throw Error("Expect keyName to be a string or a function: "+r)}}isRegistered(t){return this._checkKey(t),!!this._libraries[t]}get registered(){return Object.values(this._libraries)}async whenRegistered(t){if(this.isRegistered(t))return this._libraries[t];const{promise:e}=this._libResolutions[t]||(this._libResolutions[t]=new f);return e}register(...t){for(const e of t)this._register(e)}_checkKey(t){if("string"!=typeof t||!t)throw Error("Expect key to be a non-empty string: "+t)}_checkLib(t){if("function"!=typeof t)throw Error("Expect lib to be a class or function: "+t)}_register(t){this._checkLib(t);const e=this._keyFn(t);this._checkKey(e);const n=this._libraries||(this._libraries={});n[e]=t,this._libResolutions[e]&&this._libResolutions[e].resolve(t),this._events.emit("register",t)}}class ${constructor(t){this._ac=new AbortController,this._timeout=t,this.touch()}clear(){void 0!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}touch(){this.clear(),this._timeoutId=setTimeout((()=>this.abort()),this._timeout)}get signal(){return this._ac.signal}abort(t){this.clear(),this._ac.abort(t||Error(`Stall timeout: data stay unchanged for ${this._timeout/1e3} seconds.`))}}const N=Object.freeze({DATA_ENDPOINT:"https://api-edge.askmiso.com/v1",EVENT_ENDPOINT:"https://api.askmiso.com/v1"});class j{constructor(t,e){this._client=t,this._root=e,this._bulk=new P(this._runBulkFetch.bind(this),t._error.bind(t))}async fetch(t,e,{method:n="POST",headers:r,timeout:o,sendApiKeyByHeader:i}={}){const{apiKey:s,request:c={}}=this._client.options;o=o||c.timeout,(i=i||c.sendApiKeyByHeader)&&(r={...r,"X-API-KEY":s});const u="GET"!==n&&null!=e?JSON.stringify(e):void 0,l=o?AbortSignal.timeout(o):void 0,d=await(this._root._customFetch||window.fetch)(t,a({method:n,headers:r,body:u,cache:"no-cache",mode:"cors",signal:l})),p=await d.json();if(d.status>=400||p.errors){var m=Error(p.message);throw m.data=p,m.status=d.status,m}return p}get bulkInfo(){return this._bulk.info}async fetchForBulk(t,e,n,{method:r}={}){if(r&&"POST"!==r)throw Error("Non-POST API is not supported in bulk mode: "+url);return this._bulk.run({apiGroup:t,apiName:e,payload:n})}async _runBulkFetch(t){const e=this.url(["bulk"]),n={requests:t.map((({action:{apiGroup:t,apiName:e,payload:n}})=>({api_name:`${t}/${e}`,body:n})))},{data:r}=await this.fetch(e,n);for(let e=0,n=t.length;n>e;e++){const{resolution:n}=t[e],{error:o,status_code:i,body:s}=r[e];i>=400||o?n.reject({status_code:i,body:s}):n.resolve(s)}}sendBeacon(t,e,{method:n}={}){if(n&&"POST"!==n)throw Error("Non-POST API is not supported in useBeacon mode: "+t);if(!(this._root._customSendBeacon?this._root._customSendBeacon(t,JSON.stringify(e)):window.navigator.sendBeacon(t,JSON.stringify(e))))throw Error("Send beacon unsuccessful: "+t)}url(t,e={}){const{apiKey:n,request:r={}}=this._client.options,o=e.sendApiKeyByHeader||r.sendApiKeyByHeader,i=t.filter((t=>t)).join("/"),s=`${this.getApiEndpoint(i)}/${i}`;return o?s:`${s}?api_key=${window.encodeURIComponent(n)}`}getApiEndpoint(t){const{dataEndpoint:e=N.DATA_ENDPOINT,eventEndpoint:n=N.EVENT_ENDPOINT}=this._client.options;return"interactions"===t?n:e}applyUrlPasses(t,{apiGroup:e,apiName:n,url:r}){const o=this._client;for(const i of this._root._urlPasses)try{r=i({client:o,apiGroup:e,apiName:n,url:r})||r}catch(e){t.error(e)}return r}applyPayloadPasses(t,{apiGroup:e,apiName:n,payload:r}){const o=this._client;for(const i of this._root._payloadPasses)try{r=i({client:o,apiGroup:e,apiName:n,payload:r})||r}catch(e){t.error(e)}return r}}class U extends T{constructor(t,e){super(e,t),this._apiPath=e,this.helpers=t.helpers,this.clientOptions=t._client.options,this.context=t._client.context}async _run(t,e,n={}){const{bulk:r}=n,o=r?{bulk:this.helpers.bulkInfo}:void 0,i=this._apiPath,s=this._url({apiGroup:i,apiName:t,payload:e,options:n}),a={apiGroup:i,apiName:t,payload:e=this._preprocess({apiGroup:i,apiName:t,payload:e,options:n}),url:s,options:n};this._events.emit("request",{...a,...o});const c=await this._send(a),u={...a,response:c};return this._events.emit("response",{...u,...o}),this._postprocess(u)}_preprocess({apiGroup:t,apiName:e,payload:n}){return this.helpers.applyPayloadPasses(this,{apiGroup:t,apiName:e,payload:n})}_url({apiGroup:t,apiName:e,options:n}){const r=this.helpers.url([t,e],n);return this.helpers.applyUrlPasses(this,{apiGroup:t,apiName:e,url:r,options:n})}async _send({apiGroup:t,apiName:e,url:n,payload:r,options:{bulk:o,...i}={}}){return o?this.helpers.fetchForBulk(t,e,r):this.helpers.fetch(n,r,i)}_postprocess({response:t}){return t.data}}const{GROUP:L,NAME:M}=o;class D extends U{constructor(t){super(t,L.INTERACTIONS)}async upload(t,e){try{return await this._run(M.UPLOAD,t,e)}catch(t){if(400!==t.status||!t.message||-1>=t.message.toLowerCase().indexOf("playground"))throw t;this._warn("Ignore interactions uploaded to playground app.")}}_url({apiGroup:t,apiName:e,options:n}){const r=this.helpers.url([this._apiPath],n);return this.helpers.applyUrlPasses(this,{apiGroup:t,apiName:e,url:r,options:n})}_preprocess({apiGroup:t,apiName:e,payload:n}){return e===M.UPLOAD&&(n=this._normalizeUploadPayload(n)),super._preprocess({apiGroup:t,apiName:e,payload:n})}_normalizeUploadPayload(t){if("object"!=typeof t)throw Error("Interactions payload has to be either an object or an array of objects: "+t);return Array.isArray(t)||(t=[t]),{data:t}}async _send({options:{useBeacon:t=!0,...e}={},...n}){if(t){const{url:t,payload:r}=n;return this.helpers.sendBeacon(t,r,e),{}}return super._send({...n,options:e})}}const{GROUP:q,NAME:z}=o;class G extends U{constructor(t){super(t,q.ASK)}async questions(t,e={}){if("string"==typeof t&&"{"!==t.charAt(0))return new B(this,{question_id:t},e);const n=await this._run(z.QUESTIONS,t,e);return new B(this,n,e)}async _questions(t,e){return this._run(z.QUESTIONS,t,e)}async _get(t,e){return this._run(`${z.QUESTIONS}/${t}/answer`,void 0,{...e,method:"GET"})}async relatedQuestions(t,e={}){return this._run(z.RELATED_QUESTIONS,t,e)}}class B{constructor(t,{question_id:e},n={}){this._api=t,this._questionId=e,this._ac=new AbortController,this._options=n}get questionId(){return this._questionId}async get(t){return this._api._get(this._questionId,{...this._options,...t})}abort(t){this._ac.abort(t)}[Symbol.asyncIterator](){let{pollingInterval:t,signal:n,stallTimeout:r=12e4,...o}=this._options;const i=new $(r);let s;n=e(this._ac.signal,i.signal,n);return function(t,{interval:e=1e3,errorLimit:n=10,onError:r,onResponse:o,signal:i}={}){if(i&&i.aborted)return[];let s,a,u=0,l=!1;function d(){s&&clearInterval(s),l=!0}const p=new y;return s=setInterval((async()=>{let e,s,m;try{if([e,s,m]=await t(i?{signal:i}:{}),l||!c(a)&&a>=m)return;c(m)||(a=m),o&&o(e,s,m),u=0}catch(t){return r&&r(t),u++,void(u>n&&(d(),p.error(t)))}p.update(e,s),s&&d()}),e),i&&i.addEventListener&&i.addEventListener("abort",(()=>{d(),p.abort(i.reason)})),p}((async({}={})=>{const t=await this.get();return[t,t.finished,t.revision]}),{interval:t,signal:n,onResponse:(t,e)=>{var n,r;e?i.clear():(r=t,(n=s)&&n.answer_stage===r.answer_stage&&n.answer.length===r.answer.length||i.touch()),s=t},...o})[Symbol.asyncIterator]()}}const{GROUP:F,NAME:H}=o;class K extends U{constructor(t){super(t,F.SEARCH)}async search(t,e){return this._run(H.SEARCH,t,e)}async autocomplete(t,e){return this._run(H.AUTOCOMPLETE,t,e)}async multipleGet(t,e){return this._run(H.MGET,t,e)}}const{GROUP:W,NAME:V}=o;class J extends U{constructor(t){super(t,W.RECOMMENDATION)}async userToProducts(t,e){return this._run(V.USER_TO_PRODUCTS,t,e)}async userToCategories(t,e){return this._run(V.USER_TO_CATEGORIES,t,e)}async userToAttributes(t,e){return this._run(V.USER_TO_ATTRIBUTES,t,e)}async userToTrending(t,e){return this._run(V.USER_TO_TRENDING,t,e)}async userToHistory(t,e){return this._run(V.USER_TO_HISTORY,t,e)}async productToProducts(t,e){return this._run(V.PRODUCT_TO_PRODUCTS,t,e)}}class Q extends T{constructor(t,e){super("api",t),this._client=t,this.helpers=new j(t,e),this.interactions=new D(this),this.ask=new G(this),this.search=new K(this),this.recommendation=new J(this)}}var X=Object.freeze({__proto__:null,Api:Q,ApiBase:U,ApiHelpers:j,Interactions:D,Ask:G,Search:K,Recommendation:J});class Y extends T{constructor(t){super("context",t),this._client=t}}var Z={api:X,context:{Context:Y}};class tt{constructor(t){l(this,{install:t})}}class et extends C{constructor(t){super("plugins",t,{libName:"plugin class",keyName:"id"}),this._root=t,this._currentScript=document.currentScript,this._events._replays.add("install").add("subtree"),this._installed={},this._installedResolutions={},this._useRequests={},this._subtrees=[],this.context=new nt(this,Z),this.plugins=new rt(this)}isInstalled(t){return this._checkKey(t),!!this._installed[t]}get installed(){return Object.values(this._installed)}get(t){return this._installed[t]}getPluginClass(t){return this._libraries[t]}use(t,e){if("function"==typeof t&&t.id&&"string"==typeof t.id)return this.register(t),void this.use(t.id,e);let n;if("string"==typeof t&&this.isInstalled(t))return n=this.get(t),void this._tryConfig(n,e);"string"!=typeof t||this.isRegistered(t)?(n=this._instantiate(t,e),this._install(n)):(this._useRequests[t]||(this._useRequests[t]=[])).push(e)}async install(t,e){return this.use(t,e),"string"!=typeof t||this.isRegistered(t)||await this._tryRegisterRemotely(t),this.whenInstalled(t)}async whenInstalled(t){if("function"==typeof t&&t.id&&"string"==typeof t.id&&(t=t.id),this.isInstalled(t))return this.get(t);const{promise:e}=this._installedResolutions[t]||(this._installedResolutions[t]=new f);return e}addSubtree(t){this._subtrees.push(t),this._events.emit("subtree",t)}addPayloadPass(t){if("function"!=typeof t)throw Error("Expect parameter to be a function: "+t);this._root._payloadPasses.push(t)}addUrlPass(t){if("function"!=typeof t)throw Error("Expect parameter to be a function: "+t);this._root._urlPasses.push(t)}setCustomFetch(t){if("function"!=typeof t)throw Error("Expect parameter to be a function: "+t);this._root._customFetch=t}setCustomSendBeacon(t){if("function"!=typeof t)throw Error("Expect parameter to be a function: "+t);this._root._customSendBeacon=t}_tryConfig(t,e){void 0!==e&&("function"==typeof t.config?(t.config(e),this._events.emit("config",[t,e])):this._warn(`Attempt to pass options to plugin "${t.id}", which offers no config() method.`))}_instantiate(t,e){switch(typeof t){case"string":this._checkKey(t);const n=this._libraries[t];if(!n)throw Error("Plugin class not found: "+t);const r=new n;return l(r,{id:t}),this._tryConfig(r,e),r;case"function":return new tt(t)}throw Error("Unexpected parameters: "+t)}_install(t){if("function"!=typeof t.install)throw Error("Expect plugin.install to be a function: "+t);try{t.installed=!1,t.install(this.MisoClient,this.context),t.installed=!0}catch(t){throw t}t.id&&(this._installed[t.id]=t,this._installedResolutions[t.id]&&(this._installedResolutions[t.id].resolve(t),delete this._installedResolutions[t.id])),this._events.emit("install",t)}_register(t){super._register(t),this._fulfillUseRequests(t.id)}_fulfillUseRequests(t){const e=this._useRequests[t];if(e){for(const n of e)try{this.use(t,n)}catch(t){this._error(t)}delete this._useRequests[t]}}async _tryRegisterRemotely(t){if(t.startsWith("std:"))try{return void await this._registerStdRemotely(t)}catch(t){console.error(t)}throw Error("Cannot register plugin remotely: "+t)}async _registerStdRemotely(t){const{version:e}=this._root,n="dev"===e?`plugin:${t}@dev:${this.MisoClient.uuid}`:`plugin:${t}@${e}`;if(!document.querySelector(`script[data-request="${n}"]`)){const r=document.createElement("script");r.async=!0,r.src=function(t,e,n){const r=t.slice(4);if("dev"===e){const t=n.src,e=t.indexOf("?"),o=0>e?t.length:e,i=t.lastIndexOf("/",o)+1,s=t.indexOf(".",i),a=0>s?"":t.slice(s,o);return`${t.slice(0,i)}plugins/${r}${a}`}return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${e}/dist/umd/plugins/${r}.min.js`}(t,e,this._currentScript),r.setAttribute("data-request",n),document.head.appendChild(r)}const r=await(new I).get(n);!this.isRegistered(t)&&this.register(r)}}class nt{constructor(t,e){u(this,t,["getPluginClass","addSubtree","addPayloadPass","addUrlPass","setCustomFetch","setCustomSendBeacon","whenInstalled","whenRegistered"]),l(this,{classes:e})}}class rt{constructor(t){u(this,t,["installed","registered","isInstalled","isRegistered","whenInstalled","whenRegistered","get","register","use","install"])}}const ot=new class extends T{constructor(){super(),this._events._replays.add("create"),this._pluginRoot=new et(this),this._clients=[],this._payloadPasses=[],this._urlPasses=[],this._customFetch=void 0,this._customSendBeacon=void 0,this.version=t,this._cmdRes=new f}get instances(){return[...this._clients]}async any(){return this._clients[0]||this._any||(this._any=(await this._events.once("create")).data)}get cmdDone(){return this._cmdRes.promise}};var it=Object.freeze({__proto__:null,viewable:async function(t,{area:e=.5,duration:n=1e3,signal:r}={}){var o;return t="string"==typeof(o=t)?document.querySelector(o):o,new Promise(((o,i)=>{const s=new d((t=>{t&&(s.disconnect(),a.disconnect(),o())}),{onDuration:n}),a=new IntersectionObserver((t=>{s.value=t[0].isIntersecting}),{threshold:e});a.observe(t),r&&r.addEventListener&&r.addEventListener("abort",(()=>{s.disconnect(),a.disconnect(),i(new DOMException("Aborted","AbortError"))}))}))},debounce:function(t){let e;return n=>{e&&clearTimeout(e),e=setTimeout((()=>{e=void 0,n()}),t)}}});const{currentScript:st}=document;class at extends T{static attach(){(window.MisoClients||(window.MisoClients=[])).push(at),window.MisoClient?window.MisoClient!==at&&console.warn(`window.MisoClient already exists: (${window.MisoClient.version}).`):window.MisoClient=at}static debug(){}constructor(t){var e;super("client",ot),this._config(t),this.context=new Y(this),this.api=new Q(this,ot),ot._clients.push(e=this),ot._events.emit("create",e)}get version(){return at.version}_config(t){this.options=Object.freeze(this._normalizeOptions(t))}_normalizeOptions(t={}){if("string"==typeof t&&(t={apiKey:t}),t.readConfigFromScriptUrl&&(t={...this._readConfigFromScriptUrl(),...t}),!t.apiKey)throw Error("Require API key to initialize miso client.");return t.dataEndpoint=t.dataEndpoint||t.apiHost,t.eventEndpoint=t.eventEndpoint||t.apiHost,delete t.apiHost,a(t)}_readConfigFromScriptUrl(){return a({apiKey:new URL(new Request(st.src||st.href).url).searchParams.get("api_key")||void 0})}}at.helpers=it,l(at,{uuid:_()});var ct=function(t){const e=ot._pluginRoot;return ot.MisoClient=e.MisoClient=t,u(t,ot,["version","instances","any","meta","on","once","cmdDone"]),u(t,e,["plugins"]),t}(at);const{GROUP:ut,NAME:lt}=o;class dt{constructor(t){this._plugin=t}get anonymous_id(){return this._anonymousId||this._autoAnonymousId||(this._autoAnonymousId=h("miso_anonymous_id",_))}set anonymous_id(t){t=s(t),this._anonymousId=t,this._plugin._events.emit("set",`anonymous_id = '${t}'`)}get user_id(){return this._userId}set user_id(t){t=s(t),this._userId=t,this._plugin._events.emit("set",`user_id = '${t}'`)}get user_hash(){return this._userHash}set user_hash(t){if("string"!=typeof t&&void 0!==t)throw Error("User hash must be a string");this._userHash=t,this._plugin._events.emit("set",`user_hash = '${t}'`)}get user_type(){return this._userType}set user_type(t){this._userType=t,this._plugin._events.emit("set",`user_type = '${t}'`)}}function pt(){const t=new URLSearchParams(window.location.search);let e=a({source:t.get("utm_source")||void 0,medium:t.get("utm_medium")||void 0,name:t.get("utm_campaign")||void 0,term:t.get("utm_term")||void 0,content:t.get("utm_content")||void 0});return 0===Object.keys(e).length?void 0:e}class mt{constructor(t){this._plugin=t,this._config={search:!0},this.interface=Object.freeze({config:this.config.bind(this)})}config(t={}){if("object"!=typeof t)throw Error("Config options must be an object or undefined: "+t);for(const e of t){if(!this._config.hasOwnProperty(e))continue;const n=this._config[e],r=t[e];r!==n&&(this._config[e]=n,this._plugin._events.emit("config",`${e}: ${n} -> ${r}`))}return Object.freeze({...this._config})}}function _t(e){const{context:n={}}=e,r={...n.custom_context,sdk_version:t};return r.uuid||(r.uuid=_()),{...e,context:{...n,custom_context:r}}}const ht="std:native-fetch";let ft,yt;const gt=(()=>{if((""+window.fetch).indexOf("[native code]")>-1)return ft="original",window.fetch;try{const t=document.createElement("iframe");return t.style.display="none",document.head.appendChild(t),ft="borrowed",t.contentWindow.fetch}catch(t){yt=t}})();const wt="miso-logdump",bt="miso-logdump",vt="miso-logdump__download-btn",kt="Miso Log";class xt{constructor(t={}){this._options=t,this._logs=[]}config(t={}){this._options={...this._options,...t}}async showDownloadButton(){await async function(){return It||(It=b((t="logdump",`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@1.10.2-beta.5/dist/css/${t}.css`)));var t}();let t=document.getElementById(wt);if(!t){const e=document.createElement("div");e.textContent=this._options.logDownloadButtonText||kt,e.classList.add(vt),e.addEventListener("click",(()=>this.download())),t=document.createElement("div"),t.id=wt,t.classList.add(bt),t.appendChild(e),document.body.appendChild(t)}t.style.display="block"}_syncUi(){const t=document.getElementById(wt),e=t&&t.querySelector("."+vt);e&&(e.textContent=this._options.logDownloadButtonText||kt)}hideDownloadButton(){const t=document.getElementById(wt);t&&(t.style.display="none")}download(){const t=new Blob([Rt(this._logs)],{type:"application/json"}),e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download=this._filename(),n.click()}_filename(){let{logFilename:t}=this._options;if("function"==typeof t){t=t({timestamp:Et()})}return t&&"string"==typeof t?t:`miso-log.${Et()}.jsonl`}clear(){this._logs=[]}}function Et(){return(new Date).toISOString().replaceAll(/[\:\.]/g,"-")}function Rt(t){return t.map((t=>JSON.stringify(k(function(t){if("<progressive-markdown>"===t[0]){const e=t.length;return[...t.slice(0,e-1),St(t[e-1])]}return t}(t),{depth:10})))).join("\n")}function St(t){return t?k(t,{depth:2}):t}let It;const Pt="std:debug";function Ot(t){const e=typeof t;return"function"===e||"object"===e&&!Array.isArray(t)?[t]:t}var At;function Tt(t){return"true"===t||""===t||"false"!==t&&(""+parseInt(t,10)===t?parseInt(t,10):t)}ct.plugins.register(class{constructor(t={}){this._options=t,this._logs=new xt(t)}static get id(){return Pt}install(t){this._injectComponents(t),t.debug=(...t)=>this._logr(...t),t.logs=this._logs}config(t={}){this._options={...this._options,...t},this._logs.config(t),t.preserveLog&&this._log(Pt,"ua",window.navigator.userAgent)}_injectComponents(t,e=[]){t.on("child",(t=>this._injectComponents(t,e))),t.on("subtree",(n=>this._injectComponents(n,e.concat(t.meta.path)))),t.on("*",((n,r)=>this._handleEvent(t,r,n,e)))}_handleEvent(t,{name:e},n,r=[]){if("child"===e||"subtree"===e)return;const o=r.concat(t.meta.path);if(o.length||"create"!==e){switch(o[0]){case"client":if("api"===o[1])return void this._handleApiEvent(e,{...n,groupName:o[2]});break;case"plugins":return void(1===o.length?this._handlePluginsEvent(e,n):this._handlePluginSpecificEvent(o[1],o.slice(2),e,n))}this._logw(o.join("."),e,n)}else this._handleCreateClient(e,n)}_handleCreateClient(t,e){this._logw("client",t,e)}_handleApiEvent(t,{groupName:e,apiName:n,url:r,bulk:o,...i}){const s=new URL(r).pathname,a=["api",t];if(o&&a.push(`(bulk ${o.bulkId})`),a.push("POST "+s),"interactions"===e){const t=i.payload.data[0],{type:e,custom_action_name:n,context:{custom_context:{property:r}={}}={}}=t,o="custom"===e&&n?`${e}:${n}`:e;a.push(r?`${o} (${r})`:""+o)}a.push([{...i,url:r}]),this._log(...a)}_handlePluginsEvent(t,e){let n=[];Array.isArray(e)&&(n=e.slice(1),e=e[0]),this._log("plugins",t,""+(e.id||"(anonymous)"),[e,...n])}_handlePluginSpecificEvent(t,e,n,r){this._logw([t,e.join(".")],n,r)}_getPath(t){const e=[];for(let n=t;n;n=n.meta.parent)n.meta.name&&e.push(n.meta.name);return e.reverse()}_logw(t,e,n){void 0===n?this._log(t,e):Array.isArray(n)?this._log(t,e,...n.map(Ot)):this._log(t,e,Ot(n))}_log(t,e,...n){this._logr(function(t){return`<${"string"==typeof t?t:t.filter((t=>t)).join("/")}>`}(t),function(t){return`[${t}]`}(e),...n)}_logr(...t){const e=this._options.console||{};this._options.preserveLog&&this._logs._logs.push(t),console.log(function({text:t="Miso"}={}){return"%c"+t}(e),function({color:t="#fff",background:e="#334cbb"}={}){return`color: ${t}; background-color: ${e}; padding: 2px 2px 1px 4px;`}(e),...t)}},class{constructor(t={}){this._options=t,this.id="std:dry-run",this.name="dry-run"}static get id(){return"std:dry-run"}install(t,{addUrlPass:e}){e(this._modifyUrl.bind(this))}_modifyUrl({apiGroup:t,apiName:e,url:n}){return"interactions"===t&&"upload"===e?function(t,e,n){if("string"!=typeof e)throw Error("Expect URL parameter to be a string: "+e);return void 0===n&&(n="1"),t+(0>t.indexOf("?")?"?":"&")+encodeURIComponent(e)+"="+encodeURIComponent(""+n)}(n,"dry_run","1"):n}},class{static get id(){return ht}install(t,e){gt?(e.setCustomFetch(gt),t.debug(`<plugin:${ht}>`,"[info]",`Using ${ft} native fetch`)):t.debug(`<plugin:${ht}>`,"[error]","Failed to obtain native fetch: "+yt.message)}}),ct.plugins.use(class extends T{static get id(){return"std:user"}constructor(){super("user"),this._contexts=new WeakMap}install(t,e){e.addSubtree(this),t.on("create",this._injectClient.bind(this)),e.addPayloadPass(this._modifyPayload.bind(this))}_injectClient(t){const e=new dt(this);var n,r;this._contexts.set(t,e),n=e,Object.defineProperties(t.context,(r="string"==typeof(r=["anonymous_id","user_id","user_hash"])?[r]:r).reduce(((t,e)=>(t[e]={get:()=>n[e],set:t=>{n[e]=t}},t)),{}))}_modifyPayload({client:t,apiGroup:e,apiName:n,payload:r}){return e===ut.INTERACTIONS&&n===lt.UPLOAD?this._modifyPayloadForInteractions(t,r):e===ut.ASK&&n===lt.QUESTIONS?this._modifyPayloadForAsk(t,r):this._modifyPayloadForOthers(t,r)}_modifyPayloadForOthers(t,e){const{user_id:n,user_hash:r,anonymous_id:o}=t.context;return{...n?{user_id:n,user_hash:r}:{anonymous_id:o},...e}}_modifyPayloadForAsk(t,e){const{user_id:n,user_hash:r,user_type:o,anonymous_id:i}=t.context,s=n?{user_id:n,user_hash:r}:{anonymous_id:i};return n&&o&&(s.user_type=o),{...s,...e}}_modifyPayloadForInteractions(t,{data:e}){const{anonymous_id:n,user_id:r}=t.context,o=a({anonymous_id:n,user_id:r});return{data:e=e.map((t=>({...o,...t})))}}}),ct.plugins.use(class{static get id(){return"std:page-info"}constructor(){}install(t,{addPayloadPass:e}){e(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:t,apiName:e,payload:n}){return"interactions"===t&&"upload"===e?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:t}){return{data:t=t.map((t=>({...t,context:{...a({page:a({url:window.location.href,referrer:document.referrer,title:document.title}),campaign:pt()}),...t.context}})))}}}),ct.plugins.use(class extends T{static get id(){return"std:auto-events"}constructor(){super("auto-events"),this._contexts=new WeakMap}install(t,e){e.addSubtree(this),t.on("create",this._injectClient.bind(this)),e.addPayloadPass(this._captureApiRequest.bind(this))}_injectClient(t){const e=new mt(this);this._contexts.set(t,e),t.autoEvents=e.interface}_captureApiRequest({client:t,apiGroup:e,apiName:o,payload:i}){if(e===n.SEARCH)if(o===r.SEARCH)this._captureSearchApiRequest(t,i)}_captureSearchApiRequest(t,{q:e}){if(!e||"*"===e)return;const n=this._contexts.get(t);n&&n._config.search&&t.api.interactions.upload({type:"search",search:{keywords:e},context:{custom_context:{channel:"miso_api"}}})}}),ct.plugins.use(class{static get id(){return"std:interactions"}constructor(){}install(t,{addPayloadPass:e}){e(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:t,apiName:e,payload:n}){return"interactions"===t&&"upload"===e?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:t}){return{data:t.map(_t)}}}),ct.attach(),At=function(){ot._cmdRes.resolve()},g("misodev"),setTimeout((()=>{g("misocmd"),At&&At()}));var Ct=Object.freeze({...function(){const t=document.currentScript;if(!t||!t.src)return{};const e=document.createElement("a");e.href=t.src;const n={};for(const[t,r]of new URLSearchParams(e.search))n[t]=Tt(r);return n}(),...function(){const t={};for(const[e,n]of new URLSearchParams(window.location.search))e.startsWith("miso_ipp_")&&e.length>9&&"miso_ipp_api_key"!==e&&(t[e.substring(9)]=Tt(n));return t}()}),$t="1.0.54",Nt=[{key:"pcworld",hostname:"www.pcworld.com",name:"PCWorld",amazon_us_tag:"pcworld-ipp-20",lang:"en",deal_block_site_logo:"pcworld-white.svg",styles:{background:"#f3dfe1",headline:"#111",title:"#111",icon:["#50040d","#c0031d"]}},{key:"macworld",hostname:"www.macworld.com",name:"Macworld",amazon_us_tag:"macworld-ipp-20",lang:"en",deal_block_site_logo:"macworld-white.svg",styles:{background:"#d0e7f3",headline:"#111",title:"#111",icon:["#307ba1","#61c4f6"]}},{key:"techadvisor",hostname:"www.techadvisor.com",name:"Tech Advisor",amazon_us_tag:"techadvisor-ipp-20",lang:"en",deal_block_site_logo:"techadvisor-white.svg",styles:{background:"#ffecee",headline:"#111",title:"#111",icon:["#50040d","#c0031d"]}},{key:"techhive",hostname:"www.techhive.com",name:"TechHive",amazon_us_tag:"techhive-ipp-20",lang:"en",deal_block_site_logo:"techhive-white.svg",styles:{background:"#fce9c9",headline:"#2e3133",title:"#2e3133",icon:["#c96d14","f3b50c"]}},{key:"pcwelt",hostname:"www.pcwelt.de",name:"PC-WELT",lang:"de",styles:{background:"#f3dfe1",headline:"#111",title:"#111",icon:["#50040d","#c0031d"]}},{key:"macwelt",hostname:"www.macwelt.de",name:"Macwelt",lang:"de",styles:{background:"#d0e7f3",headline:"#111",title:"#111",icon:["#307ba1","#61c4f6"]}}];function jt(...t){window.MisoClient&&window.MisoClient.plugins.isInstalled("std:debug")&&function(...t){console.log("%cMiso","color: #fff; background-color: #334cbb; padding: 2px 2px 1px 4px;",...t)}(...t)}async function Ut(t,{interval:e=300,timeout:n}={}){const r=t();return null!=r?r:new Promise(((r,o)=>{let i,s;function a(){i&&clearInterval(i),s&&clearTimeout(s)}i=setInterval((()=>{const e=t();null!=e&&(a(),r(e))}),e),n&&n>0&&(s=setTimeout((()=>{a(),o(Error("Timeout: "+n))}),n))}))}const Lt=864e5;function Mt(){return window.innerWidth>=680}let Dt,qt,zt=!1;async function Gt(t){return new Promise((e=>setTimeout((()=>{const t=_();Ht("Fallback",t),e(t)}),t)))}async function Bt(){const t=await Ut((()=>window.gaGlobal&&window.gaGlobal.vid));return t&&Ht("GA4",t),t}async function Ft(){const t=(await(Dt||(Dt=async function(){return Ut((()=>window.ga&&window.ga.getAll&&window.ga.getAll()[0]))}()))).get("clientId");return t&&Ht("UA",t),t}function Ht(t,e){jt(`[${t}] Client ID: ${e}${zt?" (unused)":""}`),zt=!0}async function Kt(t){const e={};let n;try{n=await async function(t){if(!t)throw Error("Blank post ID.");const e=`https://b2c-contenthub.com/wp-json/wp/v2/posts/${t}?_embed=1`;return(await window.fetch(e)).json()}(t),jt("Fetched post info",[n])}catch(n){return console.error("Cannot fetch post: "+t),console.error(n),e}try{const t=n._embedded["wp:term"];for(const n of t)n.length>0&&"story_types"===n[0].taxonomy&&(e.storyTypes=n.map((t=>t.name)))}catch(e){console.error("Cannot extract story types: "+t),console.error(e)}try{const{suppress_monetization:t='""'}=n.meta||{},r=JSON.parse(t);e.adSuppression=!0===r.content_ads}catch(e){console.error("Cannot extract suppress_monetization info: "+t),console.error(e)}return e}const Wt=new Set(["News","Feature","How-To","Opinion","News Analysis","Best Picks","Reviews","Tip"]),Vt=3,Jt=4,Qt=["deal","story"];async function Xt(t,e,n){return async function(t,{ids:e=[],...n}={}){if(0===e.length)return[];const r=`/wp-json/idg/v2/${t}?${new URLSearchParams({...n,include:e.join(","),per_page:100})}`,o=await window.fetch(r);return await o.json()}(e,{ids:n,article_id:t.postId,_embed:1})}function Yt(t){return t.product_id.replace("product_","")}var Zt={todays_best_deals:"Today's Best Deals",trending_for_you:"Trending for you",read_more_on:"Read more on",from:"From",was:"Was",now:"Now",view_deal:"View deal",selected_by:"Selected by"},te={todays_best_deals:"Die besten Angebote des Tages",trending_for_you:"Top Themen fÃ¼r Sie",read_more_on:"Lesen Sie mehr auf",from:"Von",was:"Vorher",now:"Jetzt",view_deal:"Angebot ansehen",selected_by:"Ausgesucht von"};function ee(t){return"de"===t?te:Zt}const{currentScript:ne}=document,re=ne.src.replace(/\/[^/]+$/,"");async function oe(t,e){if(0===e.length)return{};const n=await Xt(t.pageInfo,"deals-view",e);if(n.html)return{_carousel:ce(n,{...t,ids:e})};for(const e in n)n[e]=ue(n[e],{...t,id:e});return n}const ie='data-vars-link-position="',se=ie,ae=' data-attr="';function ce(t,e){let{html:n}=t;const r=e.ids;return n=function(t,{ids:e,miso_id:n}={}){try{const r=t.split(ae);if(r.length!==e.length+1)throw Error("Mismatch count between deal IDs and data attributes.");for(let t=1;r.length>t;t++){r[t]=le(r[t],{id:e[t-1],miso_id:n})}return r.join(ae)}catch(t){console.error("Failed to add miso attribution attribute on anchor element."),console.error(t)}return t}(n,e),n=de(n,e),n=pe(n,e),{...t,html:n,ids:r}}function ue(t,e){let{html:n}=t;return n=le(n,e),n=de(n,e),n=pe(n,e),{...t,html:n,ids:[e.id]}}function le(t,{id:e,miso_id:n}={}){try{const r=e?`data-product="${e}" `:"";if(0>t.indexOf(se))throw Error(`Cannot find '${se}' in product view HTML.`);let o='data-miso-attribution="miso-ipp" data-miso-product-type="deal" ';return n&&(o+=`data-miso-miso-id="${n}" `),t.replaceAll(ie,r+o+ie)}catch(t){console.error("Failed to add miso attribution attribute on anchor element."),console.error(t)}return t}function de(t,{pageInfo:e}){const{amazon_us_tag:n}=e.site;if(!n)return t;try{const e=t.indexOf('"https://go.redirectingat.com/'),i=0>e?-1:t.indexOf('"',e+1);if(i>=0){const s=(r=t.substring(e+1,i),(o=document.createElement("textarea")).innerHTML=r,o.value),{searchParams:a}=new URL(s),c=new URL(a.get("url"));if(c.hostname.endsWith("amazon.com")){c.searchParams.set("tag",n),a.set("url",""+c);return jt("[Recommendation] Replaced Amazon link tag in deal view.",{original:s,replaced:"https://go.redirectingat.com/?"+a}),t.substring(0,e+1)+"https://go.redirectingat.com/?"+a+t.substring(i)}}}catch(t){console.error("Failed to replace Amazon link tag."),console.error(t)}var r,o;return t}function pe(t,{pageInfo:e,config:n}){if(!1===n.deal_block_site_logo||0===n.deal_block_site_logo)return t;const{deal_block_site_logo:r,lang:o}=e.site;if(!r)return t;!function(){if(document.getElementById("miso-ipp-site-logo-styles"))return;const t=document.createElement("style");t.id="miso-ipp-site-logo-styles",t.textContent=me,document.head.appendChild(t)}();const i=ee(o);try{const e=/(class="deal_block-title-wrapper"[^>]*>)/g;if(!e.test(t))throw Error("Cannot find 'class=\"deal_block-title-wrapper\"'.");const n=function(t){if(t)return t.indexOf("//")>=0||t.startsWith("/")?t:`${re}/${t}`}(r),o=`<div class="deal_block-site-logo-wrapper"><div class="deal_block-site-logo-text">${i.selected_by}</div><img class="deal_block-site-logo-img" src="${n}"></div>`;return jt("[Recommendation] Add site logo HTML in deal view."),t.replace(e,"$1"+o)}catch(t){console.error("Failed to add site logo."),console.error(t)}return t}const me="\n.deal_block .deal_block-title-wrapper {\n  position: relative;\n}\n.deal_block .deal_block-site-logo-wrapper {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  gap: 0.35em;\n  padding-right: 0.75em;\n  font-size: 0.9rem;\n}\n.deal_block .deal_block-site-logo-text {\n  flex-shrink: 0;\n}\n.deal_block .deal_block-site-logo-img {\n  flex-shrink: 0;\n  position: relative;\n  height: 27.5%;\n  top: -0.05em;\n}";async function _e(t,e,n){n&&0!==e.length&&(n.classList.contains("deal_carousal_top")?async function(t,e,n){jt("[Recommendation] Capturing impression event (carousel)...");let r,o=!1;const i=new Set;let s,a;function c(){o&&r&&(i.has(r)||(i.add(r),he(t,e.filter((t=>t.product_id===r)))),e.length>i.size||(s&&s.disconnect(),a&&a.disconnect()))}function u(t){if(!t.classList.contains("active-slide"))return;const e=function(t,e){const n=t.querySelector(`[${e}]`);return n&&n.getAttribute(e)}(t,"data-product");e&&(r="product_"+e,c())}a=new IntersectionObserver((t=>{o=t[0].isIntersecting,c()}),{threshold:fe}),a.observe(n),s=new MutationObserver((t=>{for(const{target:e}of t)u(e)}));for(const t of n.children)t.classList.contains("deal_block")&&(s.observe(t,{attributes:!0}),u(t))}(t,e,n):async function(t,e,n){jt("[Recommendation] Capturing impression event (simple)..."),await async function(t){ye.has(t)||ye.set(t,new Promise((e=>{const n=new IntersectionObserver((t=>{if(t[0].isIntersecting){try{n.disconnect()}catch(t){console.error(t)}e()}}),{threshold:fe});n.observe(t)})));return ye.get(t)}(n),he(t,e)}(t,e,n))}function he(t,e){ge(t,e,{type:"impression"}),jt("[Recommendation] Impression event sent.")}const fe=.5,ye=new WeakMap;function ge(t,e,n){t.client.api.interactions.upload({...we(t,e),...n})}function we(t,e){const{miso_id:n}=t;return a({product_ids:e.map((t=>t.product_id)),miso_id:n,context:{custom_context:be(t,e)}})}function be({pageInfo:t},e){const{type:n,site:r,storyId:o}=t,{geo:i,page_source:s}=Ct;return a({source:"miso-client-script",script_version:$t,attribution:"miso-ipp",site:r.key,user_geo:i,product_types:e.map((t=>t.type)),story_id:"story"===n?o:void 0,page_source:s})}async function ve(t,e){if(0===e.length)return{};const n=await Xt(t.pageInfo,"products-view",e);for(const e in n)n[e]=ke(n[e],{...t,id:e});return n}function ke(t,e){return!!function({html:t},{id:e,client:n,pageInfo:r}){if("false"===config.prod_check||"0"===config.prod_check)return jt("[Recommendation] Product view validation waived due to prod_check=0 flag"),!0;if(0>t.indexOf(xe))return jt(`[Recommendation] Exclude product ${e} due to lack of outbound link.`),function(t,e){ge(t,e,{type:"custom",custom_action_name:"invalid_product_view"})}({client:n,pageInfo:r},[{product_id:"product_"+e,type:"product"}]),!1;return!0}(t,e)&&(t=function(t,e){try{const{html:e}=t,n=e.indexOf(Se);if(0>n)throw Error(`Cannot find '${Se}' in product view HTML.`);t.html=e.substring(0,n)+Ie+e.substring(n)}catch(t){console.error("Failed to add miso attribution attribute on anchor element."),console.error(t)}return t}(t=function(t,{pageInfo:e}){const{html:n}=t,r=ee(e.site.lang);return t.html=n.replace(Re,`${Ee}${r.todays_best_deals}</h4>`),t}(t,e)))}const xe='data-vars-outbound-link="',Ee='<h4 class="product-widget__block-title" id="">',Re=Ee+"</h4>",Se='data-vars-outbound-link="',Ie='data-miso-attribution="miso-ipp" data-miso-product-type="product" ';function Pe(t){return`<svg xmlns="http://www.w3.org/2000/svg"><defs>${function(t,e){return`<linearGradient id="${Ae(t)}"><stop offset="0%" stop-color="${e[0]}" /><stop offset="100%" stop-color="${e[1]}" /></linearGradient>`}("trending",t)}</defs></svg>`}const Oe=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 400"><path fill="url(#${Ae("trending")})" d="m21.396 329.097 210.253-165.83c13.108-10.339 31.941-8.957 43.4 3.184l107.207 113.594 203.12-196.862-147.095-1.456c-17.8-.177-32.086-14.749-31.91-32.549.177-17.8 14.749-32.086 32.549-31.91l217.02 2.149c17.547.174 31.73 14.353 31.91 31.9l2.148 210.574c.182 17.8-14.1 32.377-31.9 32.558-17.8.182-32.376-14.1-32.558-31.9l-1.298-127.265-220.577 213.78a32.23 32.23 0 0 1-45.871-1.022L248.412 232.144 61.316 379.71c-13.977 11.024-34.243 8.63-45.267-5.347-11.023-13.976-8.63-34.243 5.347-45.266z"/></svg>`;function Ae(t){return`miso-${t}-gradient`}const Te=Nt.reduce(((t,e)=>(t[e.key]=e,t)),{});async function Ce(t,e,n){e=function(t){const e=Mt()?Vt:Jt;return t.map((t=>{const{product_id:e,url:n}=t,r=e.split("_")[1],o=Te[r];return{...t,url:$e(n),site:o}})).slice(0,e)}(e);const r=document.createElement("style");r.innerHTML=function(t){const{pageInfo:e}=t,{site:n}=e,{styles:r}=n;return`\n.miso-ipp-articles,\n.miso-ipp-articles__header,\n.miso-ipp-articles__body,\n.miso-ipp-articles__image-box,\n.miso-ipp-articles__list,\n.miso-ipp-articles__item {\n  display: flex;\n  gap: 1rem;\n}\n.miso-ipp-articles {\n  margin: 20px 0;\n  padding: 1rem;\n  padding-top: 1.65rem;\n  flex-direction: column;\n  gap: 1rem;\n  background-color: ${r.background};\n}\n.miso-ipp-articles__header {\n  gap: 0.75rem;\n  align-items: center;\n}\n.miso-ipp-articles__headline {\n  margin: 0 !important;\n  padding: 0;\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: ${r.headline};\n}\n.miso-ipp-articles__image-box {\n  width: 250px;\n  flex-shrink: 0;\n  padding-top: 0.25rem;\n  flex-direction: column;\n  gap: 0.3rem;\n}\n.miso-ipp-articles__image-box > img {\n  width: 100%;\n}\n.miso-ipp-articles__source-info {\n  font-size: 1rem;\n  font-style: italic;\n  color: #667;\n}\n.miso-ipp-articles__list {\n  list-style: none;\n  margin: 0;\n  flex-direction: column;\n  gap: 1.1rem;\n}\n.miso-ipp-articles__item {\n  gap: 0.75rem;\n  font-size: 1rem;\n}\n.miso-ipp-articles__item-link {\n  line-height: 1.2em;\n  font-size: 1rem;\n  font-weight: 600;\n  color: ${r.title} !important;\n}\n.miso-ipp-articles__svg-defs {\n  position: absolute;\n  height: 0;\n  overflow: hidden;\n}\n.miso-ipp-articles__svg-defs > svg {\n  height: 0;\n}\n.miso-ipp-articles__header-icon,\n.miso-ipp-articles__item-icon {\n  display: block;\n  flex-shrink: 0;\n}\n.miso-ipp-articles__header-icon {\n  height: 1.75rem;\n}\n.miso-ipp-articles__item-icon {\n  height: 1rem;\n  aspect-ratio: 7 / 4;\n  margin-top: 0.075em;\n}\n.miso-ipp-articles__header-icon > svg,\n.miso-ipp-articles__item-icon > svg {\n  width: 100%;\n  height: 100%;\n}\n@media (min-width: 680px) {\n  .miso-ipp-articles__item-icon {\n    display: none;\n  }\n}\n@media (max-width: 679px) {\n  .miso-ipp-articles__image-box,\n  .miso-ipp-articles__header-icon {\n    display: none;\n  }\n}\n`}(t),document.head.appendChild(r);const o="miso-ipp-articles",i=function(t,e,{id:n}){if(!e||0===e.length)return"";const{pageInfo:r}=t,{site:o}=r,{styles:i}=o,s=ee(o.lang);return`\n<div id="${n}" class="miso-ipp-articles">\n  <div class="miso-ipp-articles__svg-defs">\n    ${Pe(i.icon)}\n  </div>\n  <div class="miso-ipp-articles__header">\n    <i class="miso-ipp-articles__header-icon">${Oe}</i>\n    <h3 class="miso-ipp-articles__headline">${s.trending_for_you}</h3>\n  </div>\n  <div class="miso-ipp-articles__body">\n    ${function(t,e){const n=ee(t.pageInfo.site.lang),[{cover_image:r,site:o}]=e;return`<div class="miso-ipp-articles__image-box"><img src="${r}"><div class="miso-ipp-articles__source-info">${n.read_more_on} ${o.name}</div></div>`}(t,e)}\n    ${function(t,e){return`<ul class="miso-ipp-articles__list">${e.map((e=>function(t,e){const{product_id:n}=e,{miso_id:r}=t,o=[`data-product="${n}"`,'data-miso-attribution="miso-ipp"','data-miso-product-type="story"'];r&&o.push(`data-miso-miso-id="${r}"`);return`\n<li class="miso-ipp-articles__item">\n  <i class="miso-ipp-articles__item-icon">${Oe}</i>\n  <a class="miso-ipp-articles__item-link" href="${e.url}" target="_blank" rel="nofollow" ${o.join(" ")}>${e.title}</a>\n</li>`.trim()}(t,e))).join("")}</ul>`}(t,e)}\n  </div>\n</div>`.trim()}(t,e,{id:o});if(!i)return;jt("[Recommendation] Inserting view HTML on page..."),n.insertAdjacentHTML("afterend",i),jt("[Recommendation] Rendered successfully.");const s=document.getElementById(o),a=s.querySelector(".miso-ipp-articles__list"),c=s.querySelector(".miso-ipp-articles__image-box > img"),u=s.querySelector(".miso-ipp-articles__source-info"),l=ee(t.pageInfo.site.lang);a.addEventListener("mouseover",(({target:t})=>{const n=t.closest(".miso-ipp-articles__item");if(!n)return;const r=Array.prototype.indexOf.call(a.children,n),o=e[r];c.src=o.cover_image,u.innerHTML=`${l.read_more_on} ${o.site.name}`}))}function $e(t){return`${t}${0>t.indexOf("?")?"?":"&"}miso_ipp_page_source=miso-ipp`}async function Ne(t){const{pageInfo:e}=t;if("story"!==e.type)return void jt(`[Recommendation] No block shown: not a story page (${e.type})`);const{storyTypes:n=[],adSuppression:r=!1}=await Kt(e.postId)||{};if(r)return void jt("[Recommendation] No block shown: ad suppression is enabled.");if(!n.some((t=>Wt.has(t))))return void jt("[Recommendation] No block shown: not applied for story_type: "+n.join(", "));const o=document.querySelector("#miso-ipp");if(!o)return void jt("[Recommendation] No block shown: cannot find the reference position for recommendation block.");jt("[Recommendation] Fetching results from Miso API...");const{products:i,miso_id:s}=await async function(t,e={}){if(Ct.test_deals){return{products:(Ct.test_deals+"").split(",").map((t=>({product_id:"product_"+t,type:"deal"})))}}if(Ct.test_articles){const t=Ct.test_articles.split(",");return{products:await Ue(t)}}const{client:n,pageInfo:r}=t,o=function({rec_types:t=Qt}={}){Array.isArray(t)||(t=t.split(","));return 0===(t=t.map((t=>t.trim().toLowerCase())).map((t=>"article"===t?"story":t)).filter((t=>t))).length?Qt:t}(Ct),i=function(t,e){const{config:n,site:r}=t,{geo:o,rec_type:i}=n,s=new Set(e);if(i&&"product"!==i&&"deal"!==i)throw Error('Type parameter should be either "product", "deal", or absent: '+i);const a=function(t){if(t)switch(t=t.toLowerCase()){case"us":case"gb":return t;case"de":case"at":case"ch":return"eu";default:return}}(o),c=function(t){if(t)switch(t){case"us":return 9910;case"gb":return 17657;case"eu":return 22080;default:return}}(a),u=Date.now(),l=[];if(s.has("deal")&&a){let t='type:"deal"';const e=function(t){const e=new Date(t);return e.setMinutes(0,0,0),e}(u).toISOString();t+=` AND custom_attributes.start_date:["${function(t,e){let n=Math.floor((e||Date.now())/Lt)-t;return new Date(n*Lt)}(7,u).toISOString()}" TO "${e}"]`,t+=` AND custom_attributes.end_date:["${e}" TO *]`,t+=` AND custom_attributes.geo_tags:"${a}"`;const n="custom_attributes.idg_deal_territories:0";t+=" AND "+(c?`(${n} OR custom_attributes.idg_deal_territories:${c})`:n),l.push(t)}s.has("story")&&l.push(`type:"story" AND custom_attributes.site:"${r.key}"`);switch(l.length){case 0:return;case 1:return l[0];default:return`(${l.join(") OR (")})`}}(t,o);if(!i)return{products:[]};e={custom_context:{rec_types:o},product_id:r.storyId,fl:["type","title","url","cover_image"],fq:i,rows:Mt()?Vt:Jt,...e};try{const{products:t,miso_id:r}=await n.api.recommendation.productToProducts(e);return{products:t,miso_id:r}}catch(t){return console.error(t),{products:[]}}}(t);if(!i||0===i.length)return void jt("[Recommendation] No block shown: no result from Miso API.");t={...t,miso_id:s},jt("[Recommendation] Building views...");const[a,c]=await async function(t,e,n){const r=await async function(t,e,n){if("article"==(e.some((t=>"story"!==t.type))?"product/deal":"article"))return await Ce(t,e,n),e;{const{html:r,ids:o}=await async function(t,e){const n=new Set,r=new Set;for(const t of e)switch(t.type){case"product":n.add(Yt(t));break;case"deal":r.add(Yt(t));break;default:throw Error("Unrecognized product type: "+t.type)}const[o,i]=await Promise.all([ve(t,[...n]),oe(t,[...r])]),s={...o,...i};if(s._carousel)return s._carousel;return e.map((t=>s[Yt(t)])).filter((t=>t&&t.html))[0]}(t,e);if(!r)return[];jt("[Recommendation] Inserting view HTML on page..."),n.insertAdjacentHTML("afterend",r),jt("[Recommendation] Rendered successfully.");const i=new Set(o);return e.filter((t=>i.has(Yt(t))))}}(t,e,n),o=n.nextElementSibling;return n.parentNode.removeChild(n),[r,o]}(t,i,o);!function(t,e){ge(t,e,{type:"custom",custom_action_name:"display"})}(t,a),_e(t,a,c)}const je=["id","title","meta","jetpack_featured_media_url"];async function Ue(t){return(await async function(t,{fields:e}={}){if(!t||0===t.length)return[];const n=new URLSearchParams({include:t.join(","),per_page:100,_embed:1});e&&e.length>0&&n.set("_fields",e.join(","));const r="https://b2c-contenthub.com/wp-json/wp/v2/posts/?"+n;return(await window.fetch(r)).json()}(t,{fields:je})).map((({id:t,title:e,meta:n,jetpack_featured_media_url:r})=>{const{permalink:o}=n.__idg_published_ids[0],{hostname:i}=new URL(o);return{type:"story",product_id:`story_${i.replace(/^www\./,"").replace(/\.com$/,"").replace(/\.de$/,"").replace(/\.se$/,"")}_${t}`,title:e.rendered,url:o,cover_image:r}}))}const Le=[{product_id:"mfr_acer",type:"manufacturer",title:"Acer",hostnames:["acer"]},{product_id:"mfr_activision",type:"manufacturer",title:"Activision",hostnames:["activision"]},{product_id:"mfr_adobe",type:"manufacturer",title:"Adobe",hostnames:["adobe"]},{product_id:"mfr_alientware",type:"manufacturer",title:"Alienware",hostnames:["alientware"]},{product_id:"mfr_alteclansing",type:"manufacturer",title:"Altec Lansing",hostnames:["alteclansing"]},{product_id:"mfr_amazon",type:"manufacturer",title:"Amazon",hostnames:["amazon"]},{product_id:"mfr_amd",type:"manufacturer",title:"AMD",hostnames:["amd"]},{product_id:"mfr_anker",type:"manufacturer",title:"Anker",hostnames:["anker"]},{product_id:"mfr_aoc",type:"manufacturer",title:"AOC",hostnames:["aoc"]},{product_id:"mfr_apple",type:"manufacturer",title:"Apple",hostnames:["apple"]},{product_id:"mfr_arlo",type:"manufacturer",title:"Arlo",hostnames:["arlo"]},{product_id:"mfr_aspyr",type:"manufacturer",title:"Aspyr Media",hostnames:["aspyr"]},{product_id:"mfr_asus",type:"manufacturer",title:"Asus",hostnames:["asus"]},{product_id:"mfr_autodesk",type:"manufacturer",title:"Autodesk",hostnames:["autodesk"]},{product_id:"mfr_avast",type:"manufacturer",title:"Avast",hostnames:["avast"]},{product_id:"mfr_avg",type:"manufacturer",title:"AVG",hostnames:["avg"]},{product_id:"mfr_avira",type:"manufacturer",title:"Avira",hostnames:["avira"]},{product_id:"mfr_avmtech",type:"manufacturer",title:"AVM",hostnames:["avmtech"]},{product_id:"mfr_bang-olufsen",type:"manufacturer",title:"Bang & Olufsen",hostnames:["bang-olufsen"]},{product_id:"mfr_bestsbydre",type:"manufacturer",title:"Beats by Dr. Dre",hostnames:["bestsbydre"]},{product_id:"mfr_belkin",type:"manufacturer",title:"Belkin",hostnames:["belkin"]},{product_id:"mfr_benq",type:"manufacturer",title:"BenQ",hostnames:["benq"]},{product_id:"mfr_bethseda",type:"manufacturer",title:"Bethesda",hostnames:["bethseda"]},{product_id:"mfr_bitdefender",type:"manufacturer",title:"BitDefender",hostnames:["bitdefender"]},{product_id:"mfr_blizzard",type:"manufacturer",title:"Blizzard Entertainment",hostnames:["blizzard"]},{product_id:"mfr_bose",type:"manufacturer",title:"Bose",hostnames:["bose"]},{product_id:"mfr_bowerswilkins",type:"manufacturer",title:"Bowers & Wilkins",hostnames:["bowerswilkins"]},{product_id:"mfr_brother",type:"manufacturer",title:"Brother",hostnames:["brother"]},{product_id:"mfr_buffalo-technology",type:"manufacturer",title:"Buffalo Technology",hostnames:["buffalo-technology"]},{product_id:"mfr_canon",type:"manufacturer",title:"Canon",hostnames:["canon"]},{product_id:"mfr_case-mate",type:"manufacturer",title:"Case-Mate",hostnames:["case-mate"]},{product_id:"mfr_casetify",type:"manufacturer",title:"Casetify",hostnames:["casetify"]},{product_id:"mfr_casio",type:"manufacturer",title:"Casio",hostnames:["casio"]},{product_id:"mfr_corel",type:"manufacturer",title:"Corel",hostnames:["corel"]},{product_id:"mfr_corsair",type:"manufacturer",title:"Corsair",hostnames:["corsair"]},{product_id:"mfr_creative",type:"manufacturer",title:"Creative",hostnames:["creative"]},{product_id:"mfr_crucial",type:"manufacturer",title:"Crucial",hostnames:["crucial"]},{product_id:"mfr_cyberghostvpn",type:"manufacturer",title:"Cyberghost",hostnames:["cyberghostvpn"]},{product_id:"mfr_cyberlink",type:"manufacturer",title:"CyberLink",hostnames:["cyberlink"]},{product_id:"mfr_cygnett",type:"manufacturer",title:"Cygnett",hostnames:["cygnett"]},{product_id:"mfr_dell",type:"manufacturer",title:"Dell",hostnames:["dell"]},{product_id:"mfr_denon",type:"manufacturer",title:"Denon",hostnames:["denon"]},{product_id:"mfr_dji",type:"manufacturer",title:"DJI",hostnames:["dji"]},{product_id:"mfr_dlink",type:"manufacturer",title:"D-Link",hostnames:["dlink"]},{product_id:"mfr_dyson",type:"manufacturer",title:"Dyson",hostnames:["dyson"]},{product_id:"mfr_edifier",type:"manufacturer",title:"Edifier",hostnames:["edifier"]},{product_id:"mfr_ea",type:"manufacturer",title:"Electronic Arts",hostnames:["ea"]},{product_id:"mfr_elgato",type:"manufacturer",title:"Elgato",hostnames:["elgato"]},{product_id:"mfr_epson",type:"manufacturer",title:"Epson",hostnames:["epson"]},{product_id:"mfr_eset",type:"manufacturer",title:"Eset",hostnames:["eset"]},{product_id:"mfr_esgear",type:"manufacturer",title:"ESR",hostnames:["esgear"]},{product_id:"mfr_eufy",type:"manufacturer",title:"Eufy",hostnames:["eufy"]},{product_id:"mfr_xvuslink",type:"manufacturer",title:"ExpressVPN",hostnames:["xvuslink","xvkklink"]},{product_id:"mfr_evga",type:"manufacturer",title:"eVGA",hostnames:["evga"]},{product_id:"mfr_feralinteractive",type:"manufacturer",title:"Feral Interactive",hostnames:["feralinteractive"]},{product_id:"mfr_fitbit",type:"manufacturer",title:"Fitbit",hostnames:["fitbit"]},{product_id:"mfr_freecom",type:"manufacturer",title:"Freecom",hostnames:["freecom"]},{product_id:"mfr_fujifilm",type:"manufacturer",title:"Fujifilm",hostnames:["fujifilm"]},{product_id:"mfr_fujitisu",type:"manufacturer",title:"Fujitsu",hostnames:["fujitisu"]},{product_id:"mfr_gameloft",type:"manufacturer",title:"Gameloft",hostnames:["gameloft"]},{product_id:"mfr_garmin",type:"manufacturer",title:"Garmin",hostnames:["garmin"]},{product_id:"mfr_gateway",type:"manufacturer",title:"Gateway",hostnames:["gateway"]},{product_id:"mfr_gear4",type:"manufacturer",title:"Gear4",hostnames:["gear4"]},{product_id:"mfr_gigabyte",type:"manufacturer",title:"Gigabyte",hostnames:["gigabyte"]},{product_id:"mfr_google",type:"manufacturer",title:"Google",hostnames:["google"]},{product_id:"mfr_griffintechnology",type:"manufacturer",title:"Griffin",hostnames:["griffintechnology"]},{product_id:"mfr_gtech",type:"manufacturer",title:"G-Technology",hostnames:["gtech"]},{product_id:"mfr_hitachi",type:"manufacturer",title:"Hitachi",hostnames:["hitachi"]},{product_id:"mfr_honor",type:"manufacturer",title:"Honor",hostnames:["honor"]},{product_id:"mfr_hp",type:"manufacturer",title:"HP",hostnames:["hp"]},{product_id:"mfr_htc",type:"manufacturer",title:"HTC",hostnames:["htc"]},{product_id:"mfr_huawei",type:"manufacturer",title:"Huawei",hostnames:["huawei"]},{product_id:"mfr_hyperx",type:"manufacturer",title:"HyperX",hostnames:["hyperx"]},{product_id:"mfr_ibm",type:"manufacturer",title:"IBM",hostnames:["ibm"]},{product_id:"mfr_iluv",type:"manufacturer",title:"iLuv",hostnames:["iluv"]},{product_id:"mfr_incase",type:"manufacturer",title:"Incase",hostnames:["incase"]},{product_id:"mfr_incipio",type:"manufacturer",title:"Incipio",hostnames:["incipio"]},{product_id:"mfr_intego",type:"manufacturer",title:"Intego",hostnames:["intego"]},{product_id:"mfr_intel",type:"manufacturer",title:"Intel",hostnames:["intel"]},{product_id:"mfr_intuit",type:"manufacturer",title:"Intuit",hostnames:["intuit"]},{product_id:"mfr_iomega",type:"manufacturer",title:"Iomega",hostnames:["iomega"]},{product_id:"mfr_jabra",type:"manufacturer",title:"Jabra",hostnames:["jabra"]},{product_id:"mfr_jbl",type:"manufacturer",title:"JBL",hostnames:["jbl"]},{product_id:"mfr_johnlewis",type:"manufacturer",title:"John Lewis",hostnames:["johnlewis","john-lewis-and-partners"]},{product_id:"mfr_kaspersky",type:"manufacturer",title:"Kaspersky Lab",hostnames:["kaspersky"]},{product_id:"mfr_kensington",type:"manufacturer",title:"Kensington",hostnames:["kensington"]},{product_id:"mfr_kingston",type:"manufacturer",title:"Kingston",hostnames:["kingston"]},{product_id:"mfr_kodak",type:"manufacturer",title:"Kodak",hostnames:["kodak"]},{product_id:"mfr_konica-minolta",type:"manufacturer",title:"Konica Minolta",hostnames:["konica-minolta"]},{product_id:"mfr_lacie",type:"manufacturer",title:"LaCie",hostnames:["lacie"]},{product_id:"mfr_lego",type:"manufacturer",title:"LEGO",hostnames:["lego"]},{product_id:"mfr_lenovo",type:"manufacturer",title:"Lenovo",hostnames:["lenovo"]},{product_id:"mfr_lexmark",type:"manufacturer",title:"Lexmark",hostnames:["lexmark"]},{product_id:"mfr_lg",type:"manufacturer",title:"LG",hostnames:["lg"]},{product_id:"mfr_linksys",type:"manufacturer",title:"Linksys",hostnames:["linksys"]},{product_id:"mfr_logitech",type:"manufacturer",title:"Logitech",hostnames:["logitech"]},{product_id:"mfr_macally",type:"manufacturer",title:"Macally",hostnames:["macally"]},{product_id:"mfr_macpaw",type:"manufacturer",title:"Macpaw",hostnames:["macpaw"]},{product_id:"mfr_marware",type:"manufacturer",title:"Marware",hostnames:["marware"]},{product_id:"mfr_mcafee",type:"manufacturer",title:"McAfee",hostnames:["mcafee"]},{product_id:"mfr_medion",type:"manufacturer",title:"Medion",hostnames:["medion"]},{product_id:"mfr_microsoft",type:"manufacturer",title:"Microsoft",hostnames:["microsoft"]},{product_id:"mfr_monoprice",type:"manufacturer",title:"Monoprice",hostnames:["monoprice"]},{product_id:"mfr_mophie",type:"manufacturer",title:"Mophie",hostnames:["mophie"]},{product_id:"mfr_moshi",type:"manufacturer",title:"Moshi",hostnames:["moshi"]},{product_id:"mfr_motorola",type:"manufacturer",title:"Motorola",hostnames:["motorola"]},{product_id:"mfr_mous",type:"manufacturer",title:"Mous",hostnames:["mous"]},{product_id:"mfr_mozilla",type:"manufacturer",title:"Mozilla",hostnames:["mozilla"]},{product_id:"mfr_msi",type:"manufacturer",title:"MSI",hostnames:["msi"]},{product_id:"mfr_mujjo",type:"manufacturer",title:"Mujjo",hostnames:["mujjo"]},{product_id:"mfr_nec",type:"manufacturer",title:"NEC",hostnames:["nec"]},{product_id:"mfr_netgear",type:"manufacturer",title:"Netgear",hostnames:["netgear"]},{product_id:"mfr_nikon",type:"manufacturer",title:"Nikon",hostnames:["nikon"]},{product_id:"mfr_nintendo",type:"manufacturer",title:"Nintendo",hostnames:["nintendo"]},{product_id:"mfr_nokia",type:"manufacturer",title:"Nokia",hostnames:["nokia"]},{product_id:"mfr_nomad",type:"manufacturer",title:"Nomad",hostnames:["nomad"]},{product_id:"mfr_nordvpn",type:"manufacturer",title:"NordVPN",hostnames:["nordvpn"]},{product_id:"mfr_norton",type:"manufacturer",title:"Norton",hostnames:["norton"]},{product_id:"mfr_nvidia",type:"manufacturer",title:"Nvidia",hostnames:["nvidia"]},{product_id:"mfr_oculus",type:"manufacturer",title:"Oculus",hostnames:["oculus"]},{product_id:"mfr_olixar",type:"manufacturer",title:"Olixar",hostnames:["olixar"]},{product_id:"mfr_olympus",type:"manufacturer",title:"Olympus",hostnames:["olympus"]},{product_id:"mfr_oneplus",type:"manufacturer",title:"OnePlus",hostnames:["oneplus"]},{product_id:"mfr_oppo",type:"manufacturer",title:"Oppo",hostnames:["oppo"]},{product_id:"mfr_otterbox",type:"manufacturer",title:"OtterBox",hostnames:["otterbox"]},{product_id:"mfr_owc",type:"manufacturer",title:"OWC",hostnames:["owc"]},{product_id:"mfr_palm",type:"manufacturer",title:"Palm",hostnames:["palm"]},{product_id:"mfr_panasonic",type:"manufacturer",title:"Panasonic",hostnames:["panasonic"]},{product_id:"mfr_parallels",type:"manufacturer",title:"Parallels",hostnames:["parallels"]},{product_id:"mfr_philips",type:"manufacturer",title:"Philips",hostnames:["philips"]},{product_id:"mfr_pioneer",type:"manufacturer",title:"Pioneer",hostnames:["pioneer"]},{product_id:"mfr_plantronics",type:"manufacturer",title:"Plantronics",hostnames:["plantronics"]},{product_id:"mfr_plugable",type:"manufacturer",title:"Plugable",hostnames:["plugable"]},{product_id:"mfr_pny",type:"manufacturer",title:"PNY",hostnames:["pny"]},{product_id:"mfr_polaroid",type:"manufacturer",title:"Polaroid",hostnames:["polaroid"]},{product_id:"mfr_polywell",type:"manufacturer",title:"Polywell",hostnames:["polywell"]},{product_id:"mfr_proporta",type:"manufacturer",title:"Proporta",hostnames:["proporta"]},{product_id:"mfr_qnap",type:"manufacturer",title:"QNAP",hostnames:["qnap"]},{product_id:"mfr_razer",type:"manufacturer",title:"Razer",hostnames:["razer"]},{product_id:"mfr_ring",type:"manufacturer",title:"Ring",hostnames:["ring"]},{product_id:"mfr_roccat",type:"manufacturer",title:"Roccat",hostnames:["roccat"]},{product_id:"mfr_roku",type:"manufacturer",title:"Roku",hostnames:["roku"]},{product_id:"mfr_samsung",type:"manufacturer",title:"Samsung",hostnames:["samsung"]},{product_id:"mfr_sandisk",type:"manufacturer",title:"SanDisk",hostnames:["sandisk"]},{product_id:"mfr_sapphire",type:"manufacturer",title:"Sapphire",hostnames:["sapphire"]},{product_id:"mfr_satechi",type:"manufacturer",title:"Satechi",hostnames:["satechi"]},{product_id:"mfr_scosche",type:"manufacturer",title:"Scosche",hostnames:["scosche"]},{product_id:"mfr_seagate",type:"manufacturer",title:"Seagate",hostnames:["seagate"]},{product_id:"mfr_sega",type:"manufacturer",title:"Sega",hostnames:["sega"]},{product_id:"mfr_sennheiser",type:"manufacturer",title:"Sennheiser",hostnames:["sennheiser"]},{product_id:"mfr_serif",type:"manufacturer",title:"Serif",hostnames:["serif"]},{product_id:"mfr_sharp",type:"manufacturer",title:"Sharp",hostnames:["sharp"]},{product_id:"mfr_shure",type:"manufacturer",title:"Shure",hostnames:["shure"]},{product_id:"mfr_signify",type:"manufacturer",title:"Signify",hostnames:["signify"]},{product_id:"mfr_sonos",type:"manufacturer",title:"Sonos",hostnames:["sonos"]},{product_id:"mfr_sony",type:"manufacturer",title:"Sony",hostnames:["sony"]},{product_id:"mfr_speck",type:"manufacturer",title:"Speck",hostnames:["speck"]},{product_id:"mfr_speckproducts",type:"manufacturer",title:"Speck Products",hostnames:["speckproducts"]},{product_id:"mfr_spigen",type:"manufacturer",title:"Spigen",hostnames:["spigen"]},{product_id:"mfr_square-enix",type:"manufacturer",title:"Square Enix",hostnames:["square-enix"]},{product_id:"mfr_steam",type:"manufacturer",title:"Steam",hostnames:["steam"]},{product_id:"mfr_steelseries",type:"manufacturer",title:"SteelSeries",hostnames:["steelseries"]},{product_id:"mfr_stm",type:"manufacturer",title:"STM",hostnames:["stm"]},{product_id:"mfr_symantec",type:"manufacturer",title:"Symantec",hostnames:["symantec"]},{product_id:"mfr_synology",type:"manufacturer",title:"Synology",hostnames:["synology"]},{product_id:"mfr_targus",type:"manufacturer",title:"Targus",hostnames:["targus"]},{product_id:"mfr_tech21",type:"manufacturer",title:"Tech21",hostnames:["tech21"]},{product_id:"mfr_t-mobile",type:"manufacturer",title:"T-Mobile",hostnames:["t-mobile"]},{product_id:"mfr_toshiba",type:"manufacturer",title:"Toshiba",hostnames:["toshiba"]},{product_id:"mfr_tp-link",type:"manufacturer",title:"TP-Link",hostnames:["tp-link"]},{product_id:"mfr_transcend",type:"manufacturer",title:"Transcend",hostnames:["transcend"]},{product_id:"mfr_trendmicro",type:"manufacturer",title:"Trend Micro",hostnames:["trendmicro"]},{product_id:"mfr_twelvesouth",type:"manufacturer",title:"Twelve South",hostnames:["twelvesouth"]},{product_id:"mfr_ubisoft",type:"manufacturer",title:"UbiSoft",hostnames:["ubisoft"]},{product_id:"mfr_ugreen",type:"manufacturer",title:"UGreen",hostnames:["ugreen"]},{product_id:"mfr_verbatim",type:"manufacturer",title:"Verbatim",hostnames:["verbatim"]},{product_id:"mfr_viewsonic",type:"manufacturer",title:"ViewSonic",hostnames:["viewsonic"]},{product_id:"mfr_vivo",type:"manufacturer",title:"Vivo",hostnames:["vivo"]},{product_id:"mfr_vizio",type:"manufacturer",title:"Vizio",hostnames:["vizio"]},{product_id:"mfr_vmware",type:"manufacturer",title:"VMware",hostnames:["vmware"]},{product_id:"mfr_wacom",type:"manufacturer",title:"Wacom",hostnames:["wacom"]},{product_id:"mfr_waterfield-designs",type:"manufacturer",title:"WaterField Designs",hostnames:["waterfield-designs"]},{product_id:"mfr_westerndigital",type:"manufacturer",title:"Western Digital",hostnames:["westerndigital"]},{product_id:"mfr_withings",type:"manufacturer",title:"Withings",hostnames:["withings"]},{product_id:"mfr_wixstats",type:"manufacturer",title:"Wix",hostnames:["wixstats"]},{product_id:"mfr_xerox",type:"manufacturer",title:"Xerox",hostnames:["xerox"]},{product_id:"mfr_xiaomi",type:"manufacturer",title:"Xiaomi",hostnames:["xiaomi"]},{product_id:"mfr_xtrememac",type:"manufacturer",title:"XtremeMac",hostnames:["xtrememac"]},{product_id:"mfr_yamaha",type:"manufacturer",title:"Yamaha",hostnames:["yamaha"]},{product_id:"mfr_zagg",type:"manufacturer",title:"Zagg",hostnames:["zagg"]},{product_id:"mfr_zotac",type:"manufacturer",title:"ZOTAC",hostnames:["zotac"]},{product_id:"mfr_zyxel",type:"manufacturer",title:"ZyXEL",hostnames:["zyxel"]}].reduce(((t,e)=>{const{hostnames:n}=e;for(const r of n)t.set(r,e);return t}),new Map);const Me=new Set(Nt.map((t=>t.hostname)));Object.defineProperty(ct,"name",{value:"ipp"});const De=["product-name","link-position-id","link-position","outbound-link"],qe=["attribution","product-type"];function ze(t,{keywords:e,...n}){!function(t,e,n){const{client:r}=t;r.api.interactions.upload({type:"search",search:{keywords:e},context:{custom_context:{...Ge(t),...n}}})}(t,e,{...n,attribution:"google-cse"})}function Ge(t,e=[]){const{pageInfo:n,config:r,version:o}=t,{site:i}=n,{geo:s}=r;let a={source:"miso-client-script",script_version:o,site:i.key,user_geo:s};r.page_source&&(a.page_source=r.page_source);for(const n of e)a=n(a,t);return a}function Be(t,{pageInfo:e}){const{type:n,storyId:r}=e;return"story"===n&&r&&(t.story_id=r),t}function Fe(t,{element:e}){for(const n of De){const r=e.getAttribute("data-vars-"+n);r&&(t[n.replaceAll("-","_")]=r)}for(const n of qe){const r=e.getAttribute("data-miso-"+n);r&&(t[n.replaceAll("-","_")]=r)}return t}(async({site:t,config:e,version:n})=>{const r="false"!==e.ui&&"0"!==e.ui&&!1!==t.ui;if(window.miso_ipp_script_version)return void console.warn("Miso IPP script already executed: "+window.miso_ipp_script_version);window.miso_ipp_script_version=n;("dev"===n||n.indexOf("beta")>0)&&ct.plugins.use("std:debug"),jt("Miso IPP script version: "+n),e.test_deals?(ct.plugins.use("std:dry-run"),jt("[Recommendation] Test deals: "+e.test_deals)):e.test_articles?(ct.plugins.use("std:dry-run"),jt("[Recommendation] Test articles: "+e.test_articles)):e.dry_run&&ct.plugins.use("std:dry-run");const o={apiKey:e.api_key};e.api_host&&(o.apiHost=`https://${e.api_host}/v1`);const i=window.miso=new ct(o);i.context.anonymous_id=await async function(){return qt||(qt=Promise.any([Bt(),Ft(),Gt(5e3)]))}();const s=function(t){const{pathname:e}=window.location;if("/"===e)return{type:"home",site:t};const n=e.substring(1).split("/");switch(n[0]){case"article":const e=""+n[1];return{type:"story",site:t,postId:e,storyId:`story_${t.key}_${e}`};case"search":if(1===n.length){const{search:e}=window.location,n=new URLSearchParams(e).get("q"),r={type:"search",site:t};return n?{...r,q:n}:r}}return{type:"other",site:t}}(t),c={client:i,site:t,pageInfo:s,config:e,version:n};!function(t){const{client:e,pageInfo:n}=t,{type:r,storyId:o}=n;switch(r){case"home":e.api.interactions.upload({type:"home_page_view",context:{custom_context:Ge(t)}});break;case"story":e.api.interactions.upload({type:"product_detail_page_view",product_ids:[o],context:{custom_context:Ge(t)}});break;case"search":const{q:r}=n;r&&ze(t,{keywords:r})}}(c),function(t){document.addEventListener("click",(e=>{if(e.defaultPrevented)return;let n=e.target;if(n=n.closest("a"),!n)return;const r=n.getAttribute("data-product");if(r)return void function(t){const{client:e,element:n,id:r}=t,o=r.startsWith("story_"),i=o?r:"product_"+r,s=Ge(t,[Be,Fe]);if(s.product_type)s.product_types=[s.product_type],delete s.product_type;else{const t=function(t){for(;(t=t.parentElement)&&!t.classList.contains(We);){for(const e of He)if(t.classList.contains(e))return"product";for(const e of Ke)if(t.classList.contains(e))return"deal"}return}(n);t&&(s.product_types=[t])}const c=n.getAttribute("data-miso-miso-id")||void 0;e.api.interactions.upload(a({type:o?"click":"checkout",product_ids:[i],miso_id:c,context:{custom_context:s}}))}({...t,element:n,id:r});const o=function({element:t}){try{const{hostname:e}=new URL(t.href);for(const t of e.split(".")){const e=Le.get(t);if(e)return e}}catch(t){}}({element:n});o?function(t){const{client:e,element:n,manufacturer:r}=t,{product_id:o}=r,i=Ge(t,[Be,Fe]);delete i.product_type,i.product_types=["manufacturer"],i.url=n.href,e.api.interactions.upload({type:"checkout",product_ids:[o],context:{custom_context:i}})}({...t,element:n,manufacturer:o}):function(t){const{client:e,element:n}=t,{target:r,href:o}=n;if("_blank"!==r)return;try{const{hostname:t}=new URL(o);if(Me.has(t))return}catch(t){}const i=Ge(t,[Be]);i.url=o,e.api.interactions.upload({type:"custom",custom_action_name:"external-link-click",context:{custom_context:i}})}({...t,element:n})}))}(c),function(t){if("search"!==t.pageInfo.type)return;!function(t){const{head:e}=window.document,{appendChild:n}=e;e.appendChild=(...r)=>{const[o]=r;if("script"===o.tagName.toLowerCase())try{const e=o.getAttribute("src"),n=new URL(e);if("cse.google.com"===n.hostname&&n.pathname.startsWith("/cse/element")){const e=n.searchParams.get("q"),r=n.searchParams.get("sort");e&&t(r?{keywords:e,sort:r}:{keywords:e})}}catch(t){}return n.apply(e,r)}}((e=>ze(t,e)))}(c),r&&Ne(c)})({site:{key:"techhive",hostname:"www.techhive.com",name:"TechHive",amazon_us_tag:"techhive-ipp-20",lang:"en",deal_block_site_logo:"techhive-white.svg",styles:{background:"#fce9c9",headline:"#2e3133",title:"#2e3133",icon:["#c96d14","f3b50c"]}},config:Ct,version:$t});const He=["product-chart-item","product-widget"],Ke=["price-comparison"],We="link_wrapped_content"}();
