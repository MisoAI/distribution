(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@import"https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Lora:ital,wght@0,400..700;1,400..700&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap";.mi-header[data-v-dc8499ed]{display:flex;gap:.25rem;align-items:center;justify-content:center;padding:1rem;background-color:#feffff;border-bottom:1px solid rgba(0,0,0,.15)}.mi-header-title[data-v-dc8499ed]{font-family:var(--font-family-lora);font-size:23px;font-weight:700;line-height:120%;letter-spacing:0;background:linear-gradient(270deg,#303fc8 20.24%,#0f1864 86.03%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.mi-answer-dialog[data-v-3cde2612]{display:flex;flex-direction:column}.mi-answer-dialog__question-container[data-v-3cde2612]{display:flex;justify-content:end;position:relative;margin-bottom:20px}.mi-answer-dialog__question[data-v-3cde2612]{padding:8px 12px;border-radius:8px;border:1px solid #8bb9ff;background:#e2edff;color:#2b2b2b;font-family:var(--font-family-source-sans);font-size:18px;font-weight:400;line-height:150%;letter-spacing:.05px}.mi-answer-dialog__answer-container[data-v-3cde2612]{display:flex;justify-content:start;position:relative}.mi-answer-dialog__answer[data-v-3cde2612]{padding:8px 12px;border-radius:8px;border:1px solid #c5dcff;background:transparent;color:#2b2b2b;font-family:var(--font-family-source-sans);font-size:18px;font-weight:400;line-height:150%;letter-spacing:.05px}.mi-answer-dialog__answer [data-v-3cde2612] .miso-markdown p{line-height:150%!important}.mi-answer-dialog__answer [data-v-3cde2612] .miso-markdown p:last-child{margin-bottom:0!important}.mi-answer-dialog__answer [data-v-3cde2612] .miso-markdown a:not(.miso-citation-link){text-decoration:underline;color:#2b2b2b}.mi-answer-dialog__answer [data-v-3cde2612] .miso-markdown .miso-citation-link{color:#2b2b2b}.mi-answer-dialog__question-icon[data-v-3cde2612]{position:absolute;top:8px;right:-40px}.mi-answer-dialog__answer-icon[data-v-3cde2612]{position:absolute;top:8px;left:-40px}.mi-answer-dialog__view-sources-button[data-v-3cde2612]{margin-top:16px;display:flex;align-items:center;gap:8px;background:none;color:#000000f2;padding:8px 0;font-family:var(--font-family-lato);font-size:14px;font-weight:700;line-height:140%;letter-spacing:1px;text-transform:uppercase;cursor:pointer}.mi-answer-dialog__feedback-block[data-v-3cde2612]{margin-top:10px;display:flex;align-items:center;gap:12px;color:#000000f2;font-family:var(--font-family-lato);font-size:14px;font-weight:300;line-height:130%;letter-spacing:0}.mi-answer-dialog__feedback-buttons-container[data-v-3cde2612]{display:flex;align-items:center;gap:8px}.mi-answer-dialog__feedback-button[data-v-3cde2612]{border-radius:0;border:1px solid #0053c0;background:#fff;color:#000000f2;font-family:var(--font-family-lato);font-size:12px;font-weight:600;line-height:130%;letter-spacing:0;cursor:pointer;display:flex;padding:0 16px;justify-content:center;align-items:center;height:24px}.mi-answer-thread[data-v-9797949d]{display:flex;flex-direction:column;gap:20px}.mi-sponsored-results-block[data-v-b9df4590]{display:flex;flex-direction:column;gap:24px}.mi-sponsored-results-block__title[data-v-b9df4590]{color:#000000f2;font-family:var(--font-family-lora);font-size:23px;font-weight:500;line-height:120%;letter-spacing:0}.mi-sponsored-results-block__placeholder[data-v-b9df4590]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:800px;background:#ececec}.mi-related-questions-block[data-v-47100018]{display:flex;flex-direction:column;gap:12px}.mi-related-questions-block__title[data-v-47100018]{color:#000000f2;font-family:var(--font-family-lora);font-size:23px;font-weight:500;line-height:120%;letter-spacing:0}.mi-related-questions-block__list[data-v-47100018]{display:flex;flex-direction:column;gap:4px}.mi-related-questions-block__question[data-v-47100018]{display:flex;padding:12px;align-items:center;gap:4px;border-radius:8px;border:1px solid rgba(0,0,0,.15);background:#fff;width:fit-content;text-align:left;cursor:pointer}.mi-related-questions-block__question-text[data-v-47100018]{margin-right:20px;color:#000000f2;font-family:var(--semantic-text-label-100-font-family, Lato);font-size:11px;font-weight:500;line-height:140%;letter-spacing:.75px;text-transform:uppercase}.mi-ask-box-block__ask-box[data-v-b8d4a09d]{display:flex;align-items:center;margin-bottom:20px}.mi-ask-box-block__input-group[data-v-b8d4a09d]{flex:1;display:flex;gap:4px;align-items:center;border-radius:8px 0 0 8px;background:#fff;height:48px;padding:16px}.mi-ask-box-block__input[data-v-b8d4a09d]{flex:1;outline:none}.mi-ask-box-block__button[data-v-b8d4a09d]{border-radius:0 8px 8px 0;background:linear-gradient(252deg,#0f1865 -58.83%,#303fc8 136.93%);display:flex;width:74px;height:48px;padding:8px 14px;justify-content:center;align-items:center;font-family:var(--font-family-cabin);font-size:14px;font-weight:600;line-height:120%;letter-spacing:.75px;text-transform:uppercase;color:#fff;cursor:pointer}.mi-layout[data-v-100e4b86]{padding:1.5rem 15% 0;display:grid;grid-template-columns:3fr 2fr;grid-template-areas:"area-answer-thread area-sponsored-results-block" "area-related-questions-block area-sponsored-results-block" "area-recommended-articles-block area-sponsored-results-block" "area-ask-box-block area-sponsored-results-block";gap:36px 90px}.mi-layout__answer-thread[data-v-100e4b86]{grid-area:area-answer-thread}.mi-layout__sponsored-results-block[data-v-100e4b86]{grid-area:area-sponsored-results-block}.mi-layout__related-questions-block[data-v-100e4b86]{grid-area:area-related-questions-block}.mi-layout__recommended-articles-block[data-v-100e4b86]{grid-area:area-recommended-articles-block}.mi-layout__ask-box-block[data-v-100e4b86]{grid-area:area-ask-box-block;position:sticky;bottom:0;display:flex;flex-direction:column;justify-content:end}@media(max-width:768px){.mi-layout[data-v-100e4b86]{padding:.75rem;display:flex;flex-direction:column;gap:1.5rem}}.miso-answer-page{--font-family-lora: "Lora", serif;--font-family-source-sans: "Source Sans 3", sans-serif;--font-family-cabin: "Cabin", sans-serif;--font-family-lato: "Lato", sans-serif;min-height:100vh;background:linear-gradient(180deg,#e7f2ff00,#e7f2ff)}.miso-answer-page *,.miso-answer-page :after,.miso-answer-page :before,.miso-answer-page ::backdrop,.miso-answer-page ::file-selector-button{margin:0;padding:0}.miso-answer-page *,.miso-answer-page :after,.miso-answer-page :before,.miso-answer-page ::backdrop,.miso-answer-page ::file-selector-button{box-sizing:border-box;border:0 solid}.miso-answer-page h1,.miso-answer-page h2,.miso-answer-page h3,.miso-answer-page h4,.miso-answer-page h5,.miso-answer-page h6{font-size:inherit;font-weight:inherit}.miso-answer-page img,.miso-answer-page svg,.miso-answer-page video,.miso-answer-page canvas,.miso-answer-page audio,.miso-answer-page iframe,.miso-answer-page embed,.miso-answer-page object{display:block;vertical-align:middle}.miso-answer-page img,.miso-answer-page video{max-width:100%;height:auto}')),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(){"use strict";/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xi(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const K={},Xt=[],Je=()=>{},Co=()=>!1,bn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ri=t=>t.startsWith("onUpdate:"),ye=Object.assign,Li=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Ed=Object.prototype.hasOwnProperty,W=(t,e)=>Ed.call(t,e),U=Array.isArray,es=t=>wn(t)==="[object Map]",Io=t=>wn(t)==="[object Set]",D=t=>typeof t=="function",ie=t=>typeof t=="string",vt=t=>typeof t=="symbol",te=t=>t!==null&&typeof t=="object",xo=t=>(te(t)||D(t))&&D(t.then)&&D(t.catch),Ro=Object.prototype.toString,wn=t=>Ro.call(t),Sd=t=>wn(t).slice(8,-1),Lo=t=>wn(t)==="[object Object]",ki=t=>ie(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,As=xi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yn=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},Td=/-\w/g,Ct=yn(t=>t.replace(Td,e=>e.slice(1).toUpperCase())),Od=/\B([A-Z])/g,It=yn(t=>t.replace(Od,"-$1").toLowerCase()),ko=yn(t=>t.charAt(0).toUpperCase()+t.slice(1)),$i=yn(t=>t?`on${ko(t)}`:""),xt=(t,e)=>!Object.is(t,e),En=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},$o=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Pi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Po;const Sn=()=>Po||(Po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ni(t){if(U(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=ie(n)?Id(n):Ni(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(ie(t)||te(t))return t}const Ad=/;(?![^(]*\))/g,vd=/:([^]+)/,Cd=/\/\*[^]*?\*\//g;function Id(t){const e={};return t.replace(Cd,"").split(Ad).forEach(s=>{if(s){const n=s.split(vd);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ui(t){let e="";if(ie(t))e=t;else if(U(t))for(let s=0;s<t.length;s++){const n=Ui(t[s]);n&&(e+=n+" ")}else if(te(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const xd=xi("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function No(t){return!!t||t===""}const Uo=t=>!!(t&&t.__v_isRef===!0),Di=t=>ie(t)?t:t==null?"":U(t)||te(t)&&(t.toString===Ro||!D(t.toString))?Uo(t)?Di(t.value):JSON.stringify(t,Do,2):String(t),Do=(t,e)=>Uo(e)?Do(t,e.value):es(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],r)=>(s[Fi(n,r)+" =>"]=i,s),{})}:Io(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Fi(s))}:vt(e)?Fi(e):te(e)&&!U(e)&&!Lo(e)?String(e):e,Fi=(t,e="")=>{var s;return vt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ve;class Rd{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ve,!e&&ve&&(this.index=(ve.scopes||(ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=ve;try{return ve=this,e()}finally{ve=s}}}on(){++this._on===1&&(this.prevScope=ve,ve=this)}off(){this._on>0&&--this._on===0&&(ve=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Ld(){return ve}let Y;const Mi=new WeakSet;class Fo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ve&&ve.active&&ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mi.has(this)&&(Mi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vo(this),qo(this);const e=Y,s=Qe;Y=this,Qe=!0;try{return this.fn()}finally{Bo(this),Y=e,Qe=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zi(e);this.deps=this.depsTail=void 0,Vo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bi(this)&&this.run()}get dirty(){return Bi(this)}}let Mo=0,vs,Cs;function jo(t,e=!1){if(t.flags|=8,e){t.next=Cs,Cs=t;return}t.next=vs,vs=t}function ji(){Mo++}function qi(){if(--Mo>0)return;if(Cs){let e=Cs;for(Cs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;vs;){let e=vs;for(vs=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function qo(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Bo(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),zi(n),kd(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function Bi(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zo(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zo(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Is)||(t.globalVersion=Is,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Bi(t))))return;t.flags|=2;const e=t.dep,s=Y,n=Qe;Y=t,Qe=!0;try{qo(t);const i=t.fn(t._value);(e.version===0||xt(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Y=s,Qe=n,Bo(t),t.flags&=-3}}function zi(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)zi(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function kd(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Qe=!0;const Ho=[];function Xe(){Ho.push(Qe),Qe=!1}function et(){const t=Ho.pop();Qe=t===void 0?!0:t}function Vo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Y;Y=void 0;try{e()}finally{Y=s}}}let Is=0;class $d{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Y||!Qe||Y===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Y)s=this.activeLink=new $d(Y,this),Y.deps?(s.prevDep=Y.depsTail,Y.depsTail.nextDep=s,Y.depsTail=s):Y.deps=Y.depsTail=s,Qo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Y.depsTail,s.nextDep=void 0,Y.depsTail.nextDep=s,Y.depsTail=s,Y.deps===s&&(Y.deps=n)}return s}trigger(e){this.version++,Is++,this.notify(e)}notify(e){ji();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{qi()}}}function Qo(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Qo(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Vi=new WeakMap,Bt=Symbol(""),Qi=Symbol(""),xs=Symbol("");function _e(t,e,s){if(Qe&&Y){let n=Vi.get(t);n||Vi.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new Hi),i.map=n,i.key=s),i.track()}}function dt(t,e,s,n,i,r){const o=Vi.get(t);if(!o){Is++;return}const c=a=>{a&&a.trigger()};if(ji(),e==="clear")o.forEach(c);else{const a=U(t),u=a&&ki(s);if(a&&s==="length"){const l=Number(n);o.forEach((d,m)=>{(m==="length"||m===xs||!vt(m)&&m>=l)&&c(d)})}else switch((s!==void 0||o.has(void 0))&&c(o.get(s)),u&&c(o.get(xs)),e){case"add":a?u&&c(o.get("length")):(c(o.get(Bt)),es(t)&&c(o.get(Qi)));break;case"delete":a||(c(o.get(Bt)),es(t)&&c(o.get(Qi)));break;case"set":es(t)&&c(o.get(Bt));break}}qi()}function ts(t){const e=V(t);return e===t?e:(_e(e,"iterate",xs),De(t)?e:e.map(ae))}function Tn(t){return _e(t=V(t),"iterate",xs),t}const Pd={__proto__:null,[Symbol.iterator](){return Wi(this,Symbol.iterator,ae)},concat(...t){return ts(this).concat(...t.map(e=>U(e)?ts(e):e))},entries(){return Wi(this,"entries",t=>(t[1]=ae(t[1]),t))},every(t,e){return ht(this,"every",t,e,void 0,arguments)},filter(t,e){return ht(this,"filter",t,e,s=>s.map(ae),arguments)},find(t,e){return ht(this,"find",t,e,ae,arguments)},findIndex(t,e){return ht(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ht(this,"findLast",t,e,ae,arguments)},findLastIndex(t,e){return ht(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ht(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gi(this,"includes",t)},indexOf(...t){return Gi(this,"indexOf",t)},join(t){return ts(this).join(t)},lastIndexOf(...t){return Gi(this,"lastIndexOf",t)},map(t,e){return ht(this,"map",t,e,void 0,arguments)},pop(){return Rs(this,"pop")},push(...t){return Rs(this,"push",t)},reduce(t,...e){return Wo(this,"reduce",t,e)},reduceRight(t,...e){return Wo(this,"reduceRight",t,e)},shift(){return Rs(this,"shift")},some(t,e){return ht(this,"some",t,e,void 0,arguments)},splice(...t){return Rs(this,"splice",t)},toReversed(){return ts(this).toReversed()},toSorted(t){return ts(this).toSorted(t)},toSpliced(...t){return ts(this).toSpliced(...t)},unshift(...t){return Rs(this,"unshift",t)},values(){return Wi(this,"values",ae)}};function Wi(t,e,s){const n=Tn(t),i=n[e]();return n!==t&&!De(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=s(r.value)),r}),i}const Nd=Array.prototype;function ht(t,e,s,n,i,r){const o=Tn(t),c=o!==t&&!De(t),a=o[e];if(a!==Nd[e]){const d=a.apply(t,r);return c?ae(d):d}let u=s;o!==t&&(c?u=function(d,m){return s.call(this,ae(d),m,t)}:s.length>2&&(u=function(d,m){return s.call(this,d,m,t)}));const l=a.call(o,u,n);return c&&i?i(l):l}function Wo(t,e,s,n){const i=Tn(t);let r=s;return i!==t&&(De(t)?s.length>3&&(r=function(o,c,a){return s.call(this,o,c,a,t)}):r=function(o,c,a){return s.call(this,o,ae(c),a,t)}),i[e](r,...n)}function Gi(t,e,s){const n=V(t);_e(n,"iterate",xs);const i=n[e](...s);return(i===-1||i===!1)&&Zi(s[0])?(s[0]=V(s[0]),n[e](...s)):i}function Rs(t,e,s=[]){Xe(),ji();const n=V(t)[e].apply(t,s);return qi(),et(),n}const Ud=xi("__proto__,__v_isRef,__isVue"),Go=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(vt));function Dd(t){vt(t)||(t=String(t));const e=V(this);return _e(e,"has",t),e.hasOwnProperty(t)}class Ko{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?tc:ec:r?Xo:Jo).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=U(e);if(!i){let a;if(o&&(a=Pd[s]))return a;if(s==="hasOwnProperty")return Dd}const c=Reflect.get(e,s,le(e)?e:n);if((vt(s)?Go.has(s):Ud(s))||(i||_e(e,"get",s),r))return c;if(le(c)){const a=o&&ki(s)?c:c.value;return i&&te(a)?Yi(a):a}return te(c)?i?Yi(c):Cn(c):c}}class Yo extends Ko{constructor(e=!1){super(!1,e)}set(e,s,n,i){let r=e[s];if(!this._isShallow){const a=Rt(r);if(!De(n)&&!Rt(n)&&(r=V(r),n=V(n)),!U(e)&&le(r)&&!le(n))return a||(r.value=n),!0}const o=U(e)&&ki(s)?Number(s)<e.length:W(e,s),c=Reflect.set(e,s,n,le(e)?e:i);return e===V(i)&&(o?xt(n,r)&&dt(e,"set",s,n):dt(e,"add",s,n)),c}deleteProperty(e,s){const n=W(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&dt(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!vt(s)||!Go.has(s))&&_e(e,"has",s),n}ownKeys(e){return _e(e,"iterate",U(e)?"length":Bt),Reflect.ownKeys(e)}}class Zo extends Ko{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Fd=new Yo,Md=new Zo,jd=new Yo(!0),qd=new Zo(!0),Ki=t=>t,On=t=>Reflect.getPrototypeOf(t);function Bd(t,e,s){return function(...n){const i=this.__v_raw,r=V(i),o=es(r),c=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,u=i[t](...n),l=s?Ki:e?xn:ae;return!e&&_e(r,"iterate",a?Qi:Bt),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[l(d[0]),l(d[1])]:l(d),done:m}},[Symbol.iterator](){return this}}}}function An(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function zd(t,e){const s={get(i){const r=this.__v_raw,o=V(r),c=V(i);t||(xt(i,c)&&_e(o,"get",i),_e(o,"get",c));const{has:a}=On(o),u=e?Ki:t?xn:ae;if(a.call(o,i))return u(r.get(i));if(a.call(o,c))return u(r.get(c));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&_e(V(i),"iterate",Bt),i.size},has(i){const r=this.__v_raw,o=V(r),c=V(i);return t||(xt(i,c)&&_e(o,"has",i),_e(o,"has",c)),i===c?r.has(i):r.has(i)||r.has(c)},forEach(i,r){const o=this,c=o.__v_raw,a=V(c),u=e?Ki:t?xn:ae;return!t&&_e(a,"iterate",Bt),c.forEach((l,d)=>i.call(r,u(l),u(d),o))}};return ye(s,t?{add:An("add"),set:An("set"),delete:An("delete"),clear:An("clear")}:{add(i){!e&&!De(i)&&!Rt(i)&&(i=V(i));const r=V(this);return On(r).has.call(r,i)||(r.add(i),dt(r,"add",i,i)),this},set(i,r){!e&&!De(r)&&!Rt(r)&&(r=V(r));const o=V(this),{has:c,get:a}=On(o);let u=c.call(o,i);u||(i=V(i),u=c.call(o,i));const l=a.call(o,i);return o.set(i,r),u?xt(r,l)&&dt(o,"set",i,r):dt(o,"add",i,r),this},delete(i){const r=V(this),{has:o,get:c}=On(r);let a=o.call(r,i);a||(i=V(i),a=o.call(r,i)),c&&c.call(r,i);const u=r.delete(i);return a&&dt(r,"delete",i,void 0),u},clear(){const i=V(this),r=i.size!==0,o=i.clear();return r&&dt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Bd(i,t,e)}),s}function vn(t,e){const s=zd(t,e);return(n,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(W(s,i)&&i in n?s:n,i,r)}const Hd={get:vn(!1,!1)},Vd={get:vn(!1,!0)},Qd={get:vn(!0,!1)},Wd={get:vn(!0,!0)},Jo=new WeakMap,Xo=new WeakMap,ec=new WeakMap,tc=new WeakMap;function Gd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kd(t){return t.__v_skip||!Object.isExtensible(t)?0:Gd(Sd(t))}function Cn(t){return Rt(t)?t:In(t,!1,Fd,Hd,Jo)}function Yd(t){return In(t,!1,jd,Vd,Xo)}function Yi(t){return In(t,!0,Md,Qd,ec)}function CO(t){return In(t,!0,qd,Wd,tc)}function In(t,e,s,n,i){if(!te(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=Kd(t);if(r===0)return t;const o=i.get(t);if(o)return o;const c=new Proxy(t,r===2?n:s);return i.set(t,c),c}function ss(t){return Rt(t)?ss(t.__v_raw):!!(t&&t.__v_isReactive)}function Rt(t){return!!(t&&t.__v_isReadonly)}function De(t){return!!(t&&t.__v_isShallow)}function Zi(t){return t?!!t.__v_raw:!1}function V(t){const e=t&&t.__v_raw;return e?V(e):t}function Ji(t){return!W(t,"__v_skip")&&Object.isExtensible(t)&&$o(t,"__v_skip",!0),t}const ae=t=>te(t)?Cn(t):t,xn=t=>te(t)?Yi(t):t;function le(t){return t?t.__v_isRef===!0:!1}function Zd(t){return Jd(t,!1)}function Jd(t,e){return le(t)?t:new Xd(t,e)}class Xd{constructor(e,s){this.dep=new Hi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:V(e),this._value=s?e:ae(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||De(e)||Rt(e);e=n?e:V(e),xt(e,s)&&(this._rawValue=e,this._value=n?e:ae(e),this.dep.trigger())}}function Lt(t){return le(t)?t.value:t}const eh={get:(t,e,s)=>e==="__v_raw"?t:Lt(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return le(i)&&!le(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function sc(t){return ss(t)?t:new Proxy(t,eh)}class th{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Hi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Y!==this)return jo(this,!0),!0}get value(){const e=this.dep.track();return zo(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function sh(t,e,s=!1){let n,i;return D(t)?n=t:(n=t.get,i=t.set),new th(n,i,s)}const Rn={},Ln=new WeakMap;let zt;function nh(t,e=!1,s=zt){if(s){let n=Ln.get(s);n||Ln.set(s,n=[]),n.push(t)}}function ih(t,e,s=K){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:c,call:a}=s,u=R=>i?R:De(R)||i===!1||i===0?_t(R,1):_t(R);let l,d,m,E,g=!1,O=!1;if(le(t)?(d=()=>t.value,g=De(t)):ss(t)?(d=()=>u(t),g=!0):U(t)?(O=!0,g=t.some(R=>ss(R)||De(R)),d=()=>t.map(R=>{if(le(R))return R.value;if(ss(R))return u(R);if(D(R))return a?a(R,2):R()})):D(t)?e?d=a?()=>a(t,2):t:d=()=>{if(m){Xe();try{m()}finally{et()}}const R=zt;zt=l;try{return a?a(t,3,[E]):t(E)}finally{zt=R}}:d=Je,e&&i){const R=d,Q=i===!0?1/0:i;d=()=>_t(R(),Q)}const C=Ld(),k=()=>{l.stop(),C&&C.active&&Li(C.effects,l)};if(r&&e){const R=e;e=(...Q)=>{R(...Q),k()}}let j=O?new Array(t.length).fill(Rn):Rn;const M=R=>{if(!(!(l.flags&1)||!l.dirty&&!R))if(e){const Q=l.run();if(i||g||(O?Q.some((be,ne)=>xt(be,j[ne])):xt(Q,j))){m&&m();const be=zt;zt=l;try{const ne=[Q,j===Rn?void 0:O&&j[0]===Rn?[]:j,E];j=Q,a?a(e,3,ne):e(...ne)}finally{zt=be}}}else l.run()};return c&&c(M),l=new Fo(d),l.scheduler=o?()=>o(M,!1):M,E=R=>nh(R,!1,l),m=l.onStop=()=>{const R=Ln.get(l);if(R){if(a)a(R,4);else for(const Q of R)Q();Ln.delete(l)}},e?n?M(!0):j=l.run():o?o(M.bind(null,!0),!0):l.run(),k.pause=l.pause.bind(l),k.resume=l.resume.bind(l),k.stop=k,k}function _t(t,e=1/0,s){if(e<=0||!te(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,le(t))_t(t.value,e,s);else if(U(t))for(let n=0;n<t.length;n++)_t(t[n],e,s);else if(Io(t)||es(t))t.forEach(n=>{_t(n,e,s)});else if(Lo(t)){for(const n in t)_t(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&_t(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ls=[];let Xi=!1;function IO(t,...e){if(Xi)return;Xi=!0,Xe();const s=Ls.length?Ls[Ls.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=rh();if(n)ns(n,s,11,[t+e.map(r=>{var o,c;return(c=(o=r.toString)==null?void 0:o.call(r))!=null?c:JSON.stringify(r)}).join(""),s&&s.proxy,i.map(({vnode:r})=>`at <${Yc(s,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...oh(i)),console.warn(...r)}et(),Xi=!1}function rh(){let t=Ls[Ls.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function oh(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...ch(s))}),e}function ch({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,i=` at <${Yc(t.component,t.type,n)}`,r=">"+s;return t.props?[i,...ah(t.props),r]:[i+r]}function ah(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...nc(n,t[n]))}),s.length>3&&e.push(" ..."),e}function nc(t,e,s){return ie(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:le(e)?(e=nc(t,V(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):D(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=V(e),s?e:[`${t}=`,e])}function ns(t,e,s,n){try{return n?t(...n):t()}catch(i){kn(i,e,s)}}function tt(t,e,s,n){if(D(t)){const i=ns(t,e,s,n);return i&&xo(i)&&i.catch(r=>{kn(r,e,s)}),i}if(U(t)){const i=[];for(let r=0;r<t.length;r++)i.push(tt(t[r],e,s,n));return i}}function kn(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||K;if(e){let c=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const l=c.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](t,a,u)===!1)return}c=c.parent}if(r){Xe(),ns(r,null,10,[t,a,u]),et();return}}lh(t,s,i,n,o)}function lh(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const Ee=[];let st=-1;const is=[];let kt=null,rs=0;const ic=Promise.resolve();let $n=null;function uh(t){const e=$n||ic;return t?e.then(this?t.bind(this):t):e}function fh(t){let e=st+1,s=Ee.length;for(;e<s;){const n=e+s>>>1,i=Ee[n],r=ks(i);r<t||r===t&&i.flags&2?e=n+1:s=n}return e}function er(t){if(!(t.flags&1)){const e=ks(t),s=Ee[Ee.length-1];!s||!(t.flags&2)&&e>=ks(s)?Ee.push(t):Ee.splice(fh(e),0,t),t.flags|=1,rc()}}function rc(){$n||($n=ic.then(ac))}function dh(t){U(t)?is.push(...t):kt&&t.id===-1?kt.splice(rs+1,0,t):t.flags&1||(is.push(t),t.flags|=1),rc()}function oc(t,e,s=st+1){for(;s<Ee.length;s++){const n=Ee[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Ee.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function cc(t){if(is.length){const e=[...new Set(is)].sort((s,n)=>ks(s)-ks(n));if(is.length=0,kt){kt.push(...e);return}for(kt=e,rs=0;rs<kt.length;rs++){const s=kt[rs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}kt=null,rs=0}}const ks=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ac(t){try{for(st=0;st<Ee.length;st++){const e=Ee[st];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ns(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;st<Ee.length;st++){const e=Ee[st];e&&(e.flags&=-2)}st=-1,Ee.length=0,cc(),$n=null,(Ee.length||is.length)&&ac()}}let Fe=null,lc=null;function Pn(t){const e=Fe;return Fe=t,lc=t&&t.type.__scopeId||null,e}function hh(t,e=Fe,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&Bc(-1);const r=Pn(e);let o;try{o=t(...i)}finally{Pn(r),n._d&&Bc(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function _h(t,e){if(Fe===null)return t;const s=Hn(Fe),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,c,a=K]=e[i];r&&(D(r)&&(r={mounted:r,updated:r}),r.deep&&_t(o),n.push({dir:r,instance:s,value:o,oldValue:void 0,arg:c,modifiers:a}))}return t}function Ht(t,e,s,n){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const c=i[o];r&&(c.oldValue=r[o].value);let a=c.dir[n];a&&(Xe(),tt(a,s,8,[t.el,c,t,e]),et())}}const ph=Symbol("_vte"),mh=t=>t.__isTeleport,gh=Symbol("_leaveCb");function tr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function uc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Nn=new WeakMap;function $s(t,e,s,n,i=!1){if(U(t)){t.forEach((g,O)=>$s(g,e&&(U(e)?e[O]:e),s,n,i));return}if(Ps(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&$s(t,e,s,n.component.subTree);return}const r=n.shapeFlag&4?Hn(n.component):n.el,o=i?null:r,{i:c,r:a}=t,u=e&&e.r,l=c.refs===K?c.refs={}:c.refs,d=c.setupState,m=V(d),E=d===K?Co:g=>W(m,g);if(u!=null&&u!==a){if(fc(e),ie(u))l[u]=null,E(u)&&(d[u]=null);else if(le(u)){u.value=null;const g=e;g.k&&(l[g.k]=null)}}if(D(a))ns(a,c,12,[o,l]);else{const g=ie(a),O=le(a);if(g||O){const C=()=>{if(t.f){const k=g?E(a)?d[a]:l[a]:a.value;if(i)U(k)&&Li(k,r);else if(U(k))k.includes(r)||k.push(r);else if(g)l[a]=[r],E(a)&&(d[a]=l[a]);else{const j=[r];a.value=j,t.k&&(l[t.k]=j)}}else g?(l[a]=o,E(a)&&(d[a]=o)):O&&(a.value=o,t.k&&(l[t.k]=o))};if(o){const k=()=>{C(),Nn.delete(t)};k.id=-1,Nn.set(t,k),Pe(k,s)}else fc(t),C()}}}function fc(t){const e=Nn.get(t);e&&(e.flags|=8,Nn.delete(t))}Sn().requestIdleCallback,Sn().cancelIdleCallback;const Ps=t=>!!t.type.__asyncLoader,dc=t=>t.type.__isKeepAlive;function bh(t,e){hc(t,"a",e)}function wh(t,e){hc(t,"da",e)}function hc(t,e,s=Oe){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Un(e,n,s),s){let i=s.parent;for(;i&&i.parent;)dc(i.parent.vnode)&&yh(n,e,s,i),i=i.parent}}function yh(t,e,s,n){const i=Un(e,t,n,!0);pc(()=>{Li(n[e],i)},s)}function Un(t,e,s=Oe,n=!1){if(s){const i=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Xe();const c=js(s),a=tt(e,s,t,o);return c(),et(),a});return n?i.unshift(r):i.push(r),r}}const pt=t=>(e,s=Oe)=>{(!qs||t==="sp")&&Un(t,(...n)=>e(...n),s)},Eh=pt("bm"),_c=pt("m"),Sh=pt("bu"),Th=pt("u"),Oh=pt("bum"),pc=pt("um"),Ah=pt("sp"),vh=pt("rtg"),Ch=pt("rtc");function Ih(t,e=Oe){Un("ec",t,e)}const xh=Symbol.for("v-ndc");function mc(t,e,s,n){let i;const r=s,o=U(t);if(o||ie(t)){const c=o&&ss(t);let a=!1,u=!1;c&&(a=!De(t),u=Rt(t),t=Tn(t)),i=new Array(t.length);for(let l=0,d=t.length;l<d;l++)i[l]=e(a?u?xn(ae(t[l])):ae(t[l]):t[l],l,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let c=0;c<t;c++)i[c]=e(c+1,c,void 0,r)}else if(te(t))if(t[Symbol.iterator])i=Array.from(t,(c,a)=>e(c,a,void 0,r));else{const c=Object.keys(t);i=new Array(c.length);for(let a=0,u=c.length;a<u;a++){const l=c[a];i[a]=e(t[l],l,a,r)}}else i=[];return i}const sr=t=>t?Wc(t)?Hn(t):sr(t.parent):null,Ns=ye(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sr(t.parent),$root:t=>sr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>yc(t),$forceUpdate:t=>t.f||(t.f=()=>{er(t.update)}),$nextTick:t=>t.n||(t.n=uh.bind(t.proxy)),$watch:t=>Zh.bind(t)}),nr=(t,e)=>t!==K&&!t.__isScriptSetup&&W(t,e),Rh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:c,appContext:a}=t;let u;if(e[0]!=="$"){const E=o[e];if(E!==void 0)switch(E){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return r[e]}else{if(nr(n,e))return o[e]=1,n[e];if(i!==K&&W(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&W(u,e))return o[e]=3,r[e];if(s!==K&&W(s,e))return o[e]=4,s[e];ir&&(o[e]=0)}}const l=Ns[e];let d,m;if(l)return e==="$attrs"&&_e(t.attrs,"get",""),l(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(s!==K&&W(s,e))return o[e]=4,s[e];if(m=a.config.globalProperties,W(m,e))return m[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:r}=t;return nr(i,e)?(i[e]=s,!0):n!==K&&W(n,e)?(n[e]=s,!0):W(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:r,type:o}},c){let a,u;return!!(s[c]||t!==K&&c[0]!=="$"&&W(t,c)||nr(e,c)||(a=r[0])&&W(a,c)||W(n,c)||W(Ns,c)||W(i.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:W(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function gc(t){return U(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let ir=!0;function Lh(t){const e=yc(t),s=t.proxy,n=t.ctx;ir=!1,e.beforeCreate&&bc(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:c,provide:a,inject:u,created:l,beforeMount:d,mounted:m,beforeUpdate:E,updated:g,activated:O,deactivated:C,beforeDestroy:k,beforeUnmount:j,destroyed:M,unmounted:R,render:Q,renderTracked:be,renderTriggered:ne,errorCaptured:Ve,serverPrefetch:Ot,expose:ot,inheritAttrs:qt,components:At,directives:ct,filters:Ze}=e;if(u&&kh(u,n,null),o)for(const J in o){const B=o[J];D(B)&&(n[J]=B.bind(s))}if(i){const J=i.call(s,s);te(J)&&(t.data=Cn(J))}if(ir=!0,r)for(const J in r){const B=r[J],at=D(B)?B.bind(s,s):D(B.get)?B.get.bind(s,s):Je,Ss=!D(B)&&D(B.set)?B.set.bind(s):Je,we=Bs({get:at,set:Ss});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>we.value,set:he=>we.value=he})}if(c)for(const J in c)wc(c[J],n,s,J);if(a){const J=D(a)?a.call(s):a;Reflect.ownKeys(J).forEach(B=>{Fh(B,J[B])})}l&&bc(l,t,"c");function Z(J,B){U(B)?B.forEach(at=>J(at.bind(s))):B&&J(B.bind(s))}if(Z(Eh,d),Z(_c,m),Z(Sh,E),Z(Th,g),Z(bh,O),Z(wh,C),Z(Ih,Ve),Z(Ch,be),Z(vh,ne),Z(Oh,j),Z(pc,R),Z(Ah,Ot),U(ot))if(ot.length){const J=t.exposed||(t.exposed={});ot.forEach(B=>{Object.defineProperty(J,B,{get:()=>s[B],set:at=>s[B]=at,enumerable:!0})})}else t.exposed||(t.exposed={});Q&&t.render===Je&&(t.render=Q),qt!=null&&(t.inheritAttrs=qt),At&&(t.components=At),ct&&(t.directives=ct),Ot&&uc(t)}function kh(t,e,s=Je){U(t)&&(t=rr(t));for(const n in t){const i=t[n];let r;te(i)?"default"in i?r=Fn(i.from||n,i.default,!0):r=Fn(i.from||n):r=Fn(i),le(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function bc(t,e,s){tt(U(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function wc(t,e,s,n){let i=n.includes(".")?Dc(s,n):()=>s[n];if(ie(t)){const r=e[t];D(r)&&ur(i,r)}else if(D(t))ur(i,t.bind(s));else if(te(t))if(U(t))t.forEach(r=>wc(r,e,s,n));else{const r=D(t.handler)?t.handler.bind(s):e[t.handler];D(r)&&ur(i,r,t)}}function yc(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,c=r.get(e);let a;return c?a=c:!i.length&&!s&&!n?a=e:(a={},i.length&&i.forEach(u=>Dn(a,u,o,!0)),Dn(a,e,o)),te(e)&&r.set(e,a),a}function Dn(t,e,s,n=!1){const{mixins:i,extends:r}=e;r&&Dn(t,r,s,!0),i&&i.forEach(o=>Dn(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const c=$h[o]||s&&s[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const $h={data:Ec,props:Sc,emits:Sc,methods:Us,computed:Us,beforeCreate:Se,created:Se,beforeMount:Se,mounted:Se,beforeUpdate:Se,updated:Se,beforeDestroy:Se,beforeUnmount:Se,destroyed:Se,unmounted:Se,activated:Se,deactivated:Se,errorCaptured:Se,serverPrefetch:Se,components:Us,directives:Us,watch:Nh,provide:Ec,inject:Ph};function Ec(t,e){return e?t?function(){return ye(D(t)?t.call(this,this):t,D(e)?e.call(this,this):e)}:e:t}function Ph(t,e){return Us(rr(t),rr(e))}function rr(t){if(U(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Se(t,e){return t?[...new Set([].concat(t,e))]:e}function Us(t,e){return t?ye(Object.create(null),t,e):e}function Sc(t,e){return t?U(t)&&U(e)?[...new Set([...t,...e])]:ye(Object.create(null),gc(t),gc(e??{})):e}function Nh(t,e){if(!t)return e;if(!e)return t;const s=ye(Object.create(null),t);for(const n in e)s[n]=Se(t[n],e[n]);return s}function Tc(){return{app:null,config:{isNativeTag:Co,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Uh=0;function Dh(t,e){return function(n,i=null){D(n)||(n=ye({},n)),i!=null&&!te(i)&&(i=null);const r=Tc(),o=new WeakSet,c=[];let a=!1;const u=r.app={_uid:Uh++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:T_,get config(){return r.config},set config(l){},use(l,...d){return o.has(l)||(l&&D(l.install)?(o.add(l),l.install(u,...d)):D(l)&&(o.add(l),l(u,...d))),u},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),u},component(l,d){return d?(r.components[l]=d,u):r.components[l]},directive(l,d){return d?(r.directives[l]=d,u):r.directives[l]},mount(l,d,m){if(!a){const E=u._ceVNode||ue(n,i);return E.appContext=r,m===!0?m="svg":m===!1&&(m=void 0),t(E,l,m),a=!0,u._container=l,l.__vue_app__=u,Hn(E.component)}},onUnmount(l){c.push(l)},unmount(){a&&(tt(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,d){return r.provides[l]=d,u},runWithContext(l){const d=os;os=u;try{return l()}finally{os=d}}};return u}}let os=null;function Fh(t,e){if(Oe){let s=Oe.provides;const n=Oe.parent&&Oe.parent.provides;n===s&&(s=Oe.provides=Object.create(n)),s[t]=e}}function Fn(t,e,s=!1){const n=__();if(n||os){let i=os?os._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&D(e)?e.call(n&&n.proxy):e}}const Oc={},Ac=()=>Object.create(Oc),vc=t=>Object.getPrototypeOf(t)===Oc;function Mh(t,e,s,n=!1){const i={},r=Ac();t.propsDefaults=Object.create(null),Cc(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);s?t.props=n?i:Yd(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function jh(t,e,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,c=V(i),[a]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let d=0;d<l.length;d++){let m=l[d];if(Mn(t.emitsOptions,m))continue;const E=e[m];if(a)if(W(r,m))E!==r[m]&&(r[m]=E,u=!0);else{const g=Ct(m);i[g]=or(a,c,g,E,t,!1)}else E!==r[m]&&(r[m]=E,u=!0)}}}else{Cc(t,e,i,r)&&(u=!0);let l;for(const d in c)(!e||!W(e,d)&&((l=It(d))===d||!W(e,l)))&&(a?s&&(s[d]!==void 0||s[l]!==void 0)&&(i[d]=or(a,c,d,void 0,t,!0)):delete i[d]);if(r!==c)for(const d in r)(!e||!W(e,d))&&(delete r[d],u=!0)}u&&dt(t.attrs,"set","")}function Cc(t,e,s,n){const[i,r]=t.propsOptions;let o=!1,c;if(e)for(let a in e){if(As(a))continue;const u=e[a];let l;i&&W(i,l=Ct(a))?!r||!r.includes(l)?s[l]=u:(c||(c={}))[l]=u:Mn(t.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(r){const a=V(s),u=c||K;for(let l=0;l<r.length;l++){const d=r[l];s[d]=or(i,a,d,u[d],t,!W(u,d))}}return o}function or(t,e,s,n,i,r){const o=t[s];if(o!=null){const c=W(o,"default");if(c&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&D(a)){const{propsDefaults:u}=i;if(s in u)n=u[s];else{const l=js(i);n=u[s]=a.call(null,e),l()}}else n=a;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!c?n=!1:o[1]&&(n===""||n===It(s))&&(n=!0))}return n}const qh=new WeakMap;function Ic(t,e,s=!1){const n=s?qh:e.propsCache,i=n.get(t);if(i)return i;const r=t.props,o={},c=[];let a=!1;if(!D(t)){const l=d=>{a=!0;const[m,E]=Ic(d,e,!0);ye(o,m),E&&c.push(...E)};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!r&&!a)return te(t)&&n.set(t,Xt),Xt;if(U(r))for(let l=0;l<r.length;l++){const d=Ct(r[l]);xc(d)&&(o[d]=K)}else if(r)for(const l in r){const d=Ct(l);if(xc(d)){const m=r[l],E=o[d]=U(m)||D(m)?{type:m}:ye({},m),g=E.type;let O=!1,C=!0;if(U(g))for(let k=0;k<g.length;++k){const j=g[k],M=D(j)&&j.name;if(M==="Boolean"){O=!0;break}else M==="String"&&(C=!1)}else O=D(g)&&g.name==="Boolean";E[0]=O,E[1]=C,(O||W(E,"default"))&&c.push(d)}}const u=[o,c];return te(t)&&n.set(t,u),u}function xc(t){return t[0]!=="$"&&!As(t)}const cr=t=>t==="_"||t==="_ctx"||t==="$stable",ar=t=>U(t)?t.map(nt):[nt(t)],Bh=(t,e,s)=>{if(e._n)return e;const n=hh((...i)=>ar(e(...i)),s);return n._c=!1,n},Rc=(t,e,s)=>{const n=t._ctx;for(const i in t){if(cr(i))continue;const r=t[i];if(D(r))e[i]=Bh(i,r,n);else if(r!=null){const o=ar(r);e[i]=()=>o}}},Lc=(t,e)=>{const s=ar(e);t.slots.default=()=>s},kc=(t,e,s)=>{for(const n in e)(s||!cr(n))&&(t[n]=e[n])},zh=(t,e,s)=>{const n=t.slots=Ac();if(t.vnode.shapeFlag&32){const i=e._;i?(kc(n,e,s),s&&$o(n,"_",i,!0)):Rc(e,n)}else e&&Lc(t,e)},Hh=(t,e,s)=>{const{vnode:n,slots:i}=t;let r=!0,o=K;if(n.shapeFlag&32){const c=e._;c?s&&c===1?r=!1:kc(i,e,s):(r=!e.$stable,Rc(e,i)),o=e}else e&&(Lc(t,e),o={default:1});if(r)for(const c in i)!cr(c)&&o[c]==null&&delete i[c]},Pe=r_;function Vh(t){return Qh(t)}function Qh(t,e){const s=Sn();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:c,createComment:a,setText:u,setElementText:l,parentNode:d,nextSibling:m,setScopeId:E=Je,insertStaticContent:g}=t,O=(f,h,b,S=null,w=null,y=null,I=void 0,v=null,A=!!h.dynamicChildren)=>{if(f===h)return;f&&!Ms(f,h)&&(S=Ii(f),he(f,w,y,!0),f=null),h.patchFlag===-2&&(A=!1,h.dynamicChildren=null);const{type:T,ref:$,shapeFlag:x}=h;switch(T){case jn:C(f,h,b,S);break;case $t:k(f,h,b,S);break;case qn:f==null&&j(h,b,S,I);break;case Me:At(f,h,b,S,w,y,I,v,A);break;default:x&1?Q(f,h,b,S,w,y,I,v,A):x&6?ct(f,h,b,S,w,y,I,v,A):(x&64||x&128)&&T.process(f,h,b,S,w,y,I,v,A,pn)}$!=null&&w?$s($,f&&f.ref,y,h||f,!h):$==null&&f&&f.ref!=null&&$s(f.ref,null,y,f,!0)},C=(f,h,b,S)=>{if(f==null)n(h.el=c(h.children),b,S);else{const w=h.el=f.el;h.children!==f.children&&u(w,h.children)}},k=(f,h,b,S)=>{f==null?n(h.el=a(h.children||""),b,S):h.el=f.el},j=(f,h,b,S)=>{[f.el,f.anchor]=g(f.children,h,b,S,f.el,f.anchor)},M=({el:f,anchor:h},b,S)=>{let w;for(;f&&f!==h;)w=m(f),n(f,b,S),f=w;n(h,b,S)},R=({el:f,anchor:h})=>{let b;for(;f&&f!==h;)b=m(f),i(f),f=b;i(h)},Q=(f,h,b,S,w,y,I,v,A)=>{h.type==="svg"?I="svg":h.type==="math"&&(I="mathml"),f==null?be(h,b,S,w,y,I,v,A):Ot(f,h,w,y,I,v,A)},be=(f,h,b,S,w,y,I,v)=>{let A,T;const{props:$,shapeFlag:x,transition:L,dirs:N}=f;if(A=f.el=o(f.type,y,$&&$.is,$),x&8?l(A,f.children):x&16&&Ve(f.children,A,null,S,w,lr(f,y),I,v),N&&Ht(f,null,S,"created"),ne(A,f,f.scopeId,I,S),$){for(const X in $)X!=="value"&&!As(X)&&r(A,X,null,$[X],y,S);"value"in $&&r(A,"value",null,$.value,y),(T=$.onVnodeBeforeMount)&&it(T,S,f)}N&&Ht(f,null,S,"beforeMount");const H=Wh(w,L);H&&L.beforeEnter(A),n(A,h,b),((T=$&&$.onVnodeMounted)||H||N)&&Pe(()=>{T&&it(T,S,f),H&&L.enter(A),N&&Ht(f,null,S,"mounted")},w)},ne=(f,h,b,S,w)=>{if(b&&E(f,b),S)for(let y=0;y<S.length;y++)E(f,S[y]);if(w){let y=w.subTree;if(h===y||qc(y.type)&&(y.ssContent===h||y.ssFallback===h)){const I=w.vnode;ne(f,I,I.scopeId,I.slotScopeIds,w.parent)}}},Ve=(f,h,b,S,w,y,I,v,A=0)=>{for(let T=A;T<f.length;T++){const $=f[T]=v?Pt(f[T]):nt(f[T]);O(null,$,h,b,S,w,y,I,v)}},Ot=(f,h,b,S,w,y,I)=>{const v=h.el=f.el;let{patchFlag:A,dynamicChildren:T,dirs:$}=h;A|=f.patchFlag&16;const x=f.props||K,L=h.props||K;let N;if(b&&Vt(b,!1),(N=L.onVnodeBeforeUpdate)&&it(N,b,h,f),$&&Ht(h,f,b,"beforeUpdate"),b&&Vt(b,!0),(x.innerHTML&&L.innerHTML==null||x.textContent&&L.textContent==null)&&l(v,""),T?ot(f.dynamicChildren,T,v,b,S,lr(h,w),y):I||B(f,h,v,null,b,S,lr(h,w),y,!1),A>0){if(A&16)qt(v,x,L,b,w);else if(A&2&&x.class!==L.class&&r(v,"class",null,L.class,w),A&4&&r(v,"style",x.style,L.style,w),A&8){const H=h.dynamicProps;for(let X=0;X<H.length;X++){const G=H[X],ke=x[G],$e=L[G];($e!==ke||G==="value")&&r(v,G,ke,$e,w,b)}}A&1&&f.children!==h.children&&l(v,h.children)}else!I&&T==null&&qt(v,x,L,b,w);((N=L.onVnodeUpdated)||$)&&Pe(()=>{N&&it(N,b,h,f),$&&Ht(h,f,b,"updated")},S)},ot=(f,h,b,S,w,y,I)=>{for(let v=0;v<h.length;v++){const A=f[v],T=h[v],$=A.el&&(A.type===Me||!Ms(A,T)||A.shapeFlag&198)?d(A.el):b;O(A,T,$,null,S,w,y,I,!0)}},qt=(f,h,b,S,w)=>{if(h!==b){if(h!==K)for(const y in h)!As(y)&&!(y in b)&&r(f,y,h[y],null,w,S);for(const y in b){if(As(y))continue;const I=b[y],v=h[y];I!==v&&y!=="value"&&r(f,y,v,I,w,S)}"value"in b&&r(f,"value",h.value,b.value,w)}},At=(f,h,b,S,w,y,I,v,A)=>{const T=h.el=f?f.el:c(""),$=h.anchor=f?f.anchor:c("");let{patchFlag:x,dynamicChildren:L,slotScopeIds:N}=h;N&&(v=v?v.concat(N):N),f==null?(n(T,b,S),n($,b,S),Ve(h.children||[],b,$,w,y,I,v,A)):x>0&&x&64&&L&&f.dynamicChildren?(ot(f.dynamicChildren,L,b,w,y,I,v),(h.key!=null||w&&h===w.subTree)&&$c(f,h,!0)):B(f,h,b,$,w,y,I,v,A)},ct=(f,h,b,S,w,y,I,v,A)=>{h.slotScopeIds=v,f==null?h.shapeFlag&512?w.ctx.activate(h,b,S,I,A):Ze(h,b,S,w,y,I,A):hn(f,h,A)},Ze=(f,h,b,S,w,y,I)=>{const v=f.component=h_(f,S,w);if(dc(f)&&(v.ctx.renderer=pn),p_(v,!1,I),v.asyncDep){if(w&&w.registerDep(v,Z,I),!f.el){const A=v.subTree=ue($t);k(null,A,h,b),f.placeholder=A.el}}else Z(v,f,h,b,w,y,I)},hn=(f,h,b)=>{const S=h.component=f.component;if(n_(f,h,b))if(S.asyncDep&&!S.asyncResolved){J(S,h,b);return}else S.next=h,S.update();else h.el=f.el,S.vnode=h},Z=(f,h,b,S,w,y,I)=>{const v=()=>{if(f.isMounted){let{next:x,bu:L,u:N,parent:H,vnode:X}=f;{const ut=Pc(f);if(ut){x&&(x.el=X.el,J(f,x,I)),ut.asyncDep.then(()=>{f.isUnmounted||v()});return}}let G=x,ke;Vt(f,!1),x?(x.el=X.el,J(f,x,I)):x=X,L&&En(L),(ke=x.props&&x.props.onVnodeBeforeUpdate)&&it(ke,H,x,X),Vt(f,!0);const $e=Mc(f),lt=f.subTree;f.subTree=$e,O(lt,$e,d(lt.el),Ii(lt),f,w,y),x.el=$e.el,G===null&&i_(f,$e.el),N&&Pe(N,w),(ke=x.props&&x.props.onVnodeUpdated)&&Pe(()=>it(ke,H,x,X),w)}else{let x;const{el:L,props:N}=h,{bm:H,m:X,parent:G,root:ke,type:$e}=f,lt=Ps(h);Vt(f,!1),H&&En(H),!lt&&(x=N&&N.onVnodeBeforeMount)&&it(x,G,h),Vt(f,!0);{ke.ce&&ke.ce._def.shadowRoot!==!1&&ke.ce._injectChildStyle($e);const ut=f.subTree=Mc(f);O(null,ut,b,S,f,w,y),h.el=ut.el}if(X&&Pe(X,w),!lt&&(x=N&&N.onVnodeMounted)){const ut=h;Pe(()=>it(x,G,ut),w)}(h.shapeFlag&256||G&&Ps(G.vnode)&&G.vnode.shapeFlag&256)&&f.a&&Pe(f.a,w),f.isMounted=!0,h=b=S=null}};f.scope.on();const A=f.effect=new Fo(v);f.scope.off();const T=f.update=A.run.bind(A),$=f.job=A.runIfDirty.bind(A);$.i=f,$.id=f.uid,A.scheduler=()=>er($),Vt(f,!0),T()},J=(f,h,b)=>{h.component=f;const S=f.vnode.props;f.vnode=h,f.next=null,jh(f,h.props,S,b),Hh(f,h.children,b),Xe(),oc(f),et()},B=(f,h,b,S,w,y,I,v,A=!1)=>{const T=f&&f.children,$=f?f.shapeFlag:0,x=h.children,{patchFlag:L,shapeFlag:N}=h;if(L>0){if(L&128){Ss(T,x,b,S,w,y,I,v,A);return}else if(L&256){at(T,x,b,S,w,y,I,v,A);return}}N&8?($&16&&_n(T,w,y),x!==T&&l(b,x)):$&16?N&16?Ss(T,x,b,S,w,y,I,v,A):_n(T,w,y,!0):($&8&&l(b,""),N&16&&Ve(x,b,S,w,y,I,v,A))},at=(f,h,b,S,w,y,I,v,A)=>{f=f||Xt,h=h||Xt;const T=f.length,$=h.length,x=Math.min(T,$);let L;for(L=0;L<x;L++){const N=h[L]=A?Pt(h[L]):nt(h[L]);O(f[L],N,b,null,w,y,I,v,A)}T>$?_n(f,w,y,!0,!1,x):Ve(h,b,S,w,y,I,v,A,x)},Ss=(f,h,b,S,w,y,I,v,A)=>{let T=0;const $=h.length;let x=f.length-1,L=$-1;for(;T<=x&&T<=L;){const N=f[T],H=h[T]=A?Pt(h[T]):nt(h[T]);if(Ms(N,H))O(N,H,b,null,w,y,I,v,A);else break;T++}for(;T<=x&&T<=L;){const N=f[x],H=h[L]=A?Pt(h[L]):nt(h[L]);if(Ms(N,H))O(N,H,b,null,w,y,I,v,A);else break;x--,L--}if(T>x){if(T<=L){const N=L+1,H=N<$?h[N].el:S;for(;T<=L;)O(null,h[T]=A?Pt(h[T]):nt(h[T]),b,H,w,y,I,v,A),T++}}else if(T>L)for(;T<=x;)he(f[T],w,y,!0),T++;else{const N=T,H=T,X=new Map;for(T=H;T<=L;T++){const Ue=h[T]=A?Pt(h[T]):nt(h[T]);Ue.key!=null&&X.set(Ue.key,T)}let G,ke=0;const $e=L-H+1;let lt=!1,ut=0;const mn=new Array($e);for(T=0;T<$e;T++)mn[T]=0;for(T=N;T<=x;T++){const Ue=f[T];if(ke>=$e){he(Ue,w,y,!0);continue}let ft;if(Ue.key!=null)ft=X.get(Ue.key);else for(G=H;G<=L;G++)if(mn[G-H]===0&&Ms(Ue,h[G])){ft=G;break}ft===void 0?he(Ue,w,y,!0):(mn[ft-H]=T+1,ft>=ut?ut=ft:lt=!0,O(Ue,h[ft],b,null,w,y,I,v,A),ke++)}const gd=lt?Gh(mn):Xt;for(G=gd.length-1,T=$e-1;T>=0;T--){const Ue=H+T,ft=h[Ue],bd=h[Ue+1],wd=Ue+1<$?bd.el||bd.placeholder:S;mn[T]===0?O(null,ft,b,wd,w,y,I,v,A):lt&&(G<0||T!==gd[G]?we(ft,b,wd,2):G--)}}},we=(f,h,b,S,w=null)=>{const{el:y,type:I,transition:v,children:A,shapeFlag:T}=f;if(T&6){we(f.component.subTree,h,b,S);return}if(T&128){f.suspense.move(h,b,S);return}if(T&64){I.move(f,h,b,pn);return}if(I===Me){n(y,h,b);for(let x=0;x<A.length;x++)we(A[x],h,b,S);n(f.anchor,h,b);return}if(I===qn){M(f,h,b);return}if(S!==2&&T&1&&v)if(S===0)v.beforeEnter(y),n(y,h,b),Pe(()=>v.enter(y),w);else{const{leave:x,delayLeave:L,afterLeave:N}=v,H=()=>{f.ctx.isUnmounted?i(y):n(y,h,b)},X=()=>{y._isLeaving&&y[gh](!0),x(y,()=>{H(),N&&N()})};L?L(y,H,X):X()}else n(y,h,b)},he=(f,h,b,S=!1,w=!1)=>{const{type:y,props:I,ref:v,children:A,dynamicChildren:T,shapeFlag:$,patchFlag:x,dirs:L,cacheIndex:N}=f;if(x===-2&&(w=!1),v!=null&&(Xe(),$s(v,null,b,f,!0),et()),N!=null&&(h.renderCache[N]=void 0),$&256){h.ctx.deactivate(f);return}const H=$&1&&L,X=!Ps(f);let G;if(X&&(G=I&&I.onVnodeBeforeUnmount)&&it(G,h,f),$&6)Ci(f.component,b,S);else{if($&128){f.suspense.unmount(b,S);return}H&&Ht(f,null,h,"beforeUnmount"),$&64?f.type.remove(f,h,b,pn,S):T&&!T.hasOnce&&(y!==Me||x>0&&x&64)?_n(T,h,b,!1,!0):(y===Me&&x&384||!w&&$&16)&&_n(A,h,b),S&&Ts(f)}(X&&(G=I&&I.onVnodeUnmounted)||H)&&Pe(()=>{G&&it(G,h,f),H&&Ht(f,null,h,"unmounted")},b)},Ts=f=>{const{type:h,el:b,anchor:S,transition:w}=f;if(h===Me){Os(b,S);return}if(h===qn){R(f);return}const y=()=>{i(b),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(f.shapeFlag&1&&w&&!w.persisted){const{leave:I,delayLeave:v}=w,A=()=>I(b,y);v?v(f.el,y,A):A()}else y()},Os=(f,h)=>{let b;for(;f!==h;)b=m(f),i(f),f=b;i(h)},Ci=(f,h,b)=>{const{bum:S,scope:w,job:y,subTree:I,um:v,m:A,a:T}=f;Nc(A),Nc(T),S&&En(S),w.stop(),y&&(y.flags|=8,he(I,f,h,b)),v&&Pe(v,h),Pe(()=>{f.isUnmounted=!0},h)},_n=(f,h,b,S=!1,w=!1,y=0)=>{for(let I=y;I<f.length;I++)he(f[I],h,b,S,w)},Ii=f=>{if(f.shapeFlag&6)return Ii(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const h=m(f.anchor||f.el),b=h&&h[ph];return b?m(b):h};let vo=!1;const md=(f,h,b)=>{f==null?h._vnode&&he(h._vnode,null,null,!0):O(h._vnode||null,f,h,null,null,null,b),h._vnode=f,vo||(vo=!0,oc(),cc(),vo=!1)},pn={p:O,um:he,m:we,r:Ts,mt:Ze,mc:Ve,pc:B,pbc:ot,n:Ii,o:t};return{render:md,hydrate:void 0,createApp:Dh(md)}}function lr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Vt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Wh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function $c(t,e,s=!1){const n=t.children,i=e.children;if(U(n)&&U(i))for(let r=0;r<n.length;r++){const o=n[r];let c=i[r];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[r]=Pt(i[r]),c.el=o.el),!s&&c.patchFlag!==-2&&$c(o,c)),c.type===jn&&c.patchFlag!==-1&&(c.el=o.el),c.type===$t&&!c.el&&(c.el=o.el)}}function Gh(t){const e=t.slice(),s=[0];let n,i,r,o,c;const a=t.length;for(n=0;n<a;n++){const u=t[n];if(u!==0){if(i=s[s.length-1],t[i]<u){e[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)c=r+o>>1,t[s[c]]<u?r=c+1:o=c;u<t[s[r]]&&(r>0&&(e[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function Pc(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Pc(e)}function Nc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Kh=Symbol.for("v-scx"),Yh=()=>Fn(Kh);function ur(t,e,s){return Uc(t,e,s)}function Uc(t,e,s=K){const{immediate:n,deep:i,flush:r,once:o}=s,c=ye({},s),a=e&&n||!e&&r!=="post";let u;if(qs){if(r==="sync"){const E=Yh();u=E.__watcherHandles||(E.__watcherHandles=[])}else if(!a){const E=()=>{};return E.stop=Je,E.resume=Je,E.pause=Je,E}}const l=Oe;c.call=(E,g,O)=>tt(E,l,g,O);let d=!1;r==="post"?c.scheduler=E=>{Pe(E,l&&l.suspense)}:r!=="sync"&&(d=!0,c.scheduler=(E,g)=>{g?E():er(E)}),c.augmentJob=E=>{e&&(E.flags|=4),d&&(E.flags|=2,l&&(E.id=l.uid,E.i=l))};const m=ih(t,e,c);return qs&&(u?u.push(m):a&&m()),m}function Zh(t,e,s){const n=this.proxy,i=ie(t)?t.includes(".")?Dc(n,t):()=>n[t]:t.bind(n,n);let r;D(e)?r=e:(r=e.handler,s=e);const o=js(this),c=Uc(i,r.bind(n),s);return o(),c}function Dc(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const Jh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ct(e)}Modifiers`]||t[`${It(e)}Modifiers`];function Xh(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||K;let i=s;const r=e.startsWith("update:"),o=r&&Jh(n,e.slice(7));o&&(o.trim&&(i=s.map(l=>ie(l)?l.trim():l)),o.number&&(i=s.map(Pi)));let c,a=n[c=$i(e)]||n[c=$i(Ct(e))];!a&&r&&(a=n[c=$i(It(e))]),a&&tt(a,t,6,i);const u=n[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,tt(u,t,6,i)}}const e_=new WeakMap;function Fc(t,e,s=!1){const n=s?e_:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const r=t.emits;let o={},c=!1;if(!D(t)){const a=u=>{const l=Fc(u,e,!0);l&&(c=!0,ye(o,l))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!c?(te(t)&&n.set(t,null),null):(U(r)?r.forEach(a=>o[a]=null):ye(o,r),te(t)&&n.set(t,o),o)}function Mn(t,e){return!t||!bn(e)?!1:(e=e.slice(2).replace(/Once$/,""),W(t,e[0].toLowerCase()+e.slice(1))||W(t,It(e))||W(t,e))}function xO(){}function Mc(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:c,emit:a,render:u,renderCache:l,props:d,data:m,setupState:E,ctx:g,inheritAttrs:O}=t,C=Pn(t);let k,j;try{if(s.shapeFlag&4){const R=i||n,Q=R;k=nt(u.call(Q,R,l,d,E,m,g)),j=c}else{const R=e;k=nt(R.length>1?R(d,{attrs:c,slots:o,emit:a}):R(d,null)),j=e.props?c:t_(c)}}catch(R){Ds.length=0,kn(R,t,1),k=ue($t)}let M=k;if(j&&O!==!1){const R=Object.keys(j),{shapeFlag:Q}=M;R.length&&Q&7&&(r&&R.some(Ri)&&(j=s_(j,r)),M=cs(M,j,!1,!0))}return s.dirs&&(M=cs(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(s.dirs):s.dirs),s.transition&&tr(M,s.transition),k=M,Pn(C),k}const t_=t=>{let e;for(const s in t)(s==="class"||s==="style"||bn(s))&&((e||(e={}))[s]=t[s]);return e},s_=(t,e)=>{const s={};for(const n in t)(!Ri(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function n_(t,e,s){const{props:n,children:i,component:r}=t,{props:o,children:c,patchFlag:a}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return n?jc(n,o,u):!!o;if(a&8){const l=e.dynamicProps;for(let d=0;d<l.length;d++){const m=l[d];if(o[m]!==n[m]&&!Mn(u,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:n===o?!1:n?o?jc(n,o,u):!0:!!o;return!1}function jc(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r]&&!Mn(s,r))return!0}return!1}function i_({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const qc=t=>t.__isSuspense;function r_(t,e){e&&e.pendingBranch?U(t)?e.effects.push(...t):e.effects.push(t):dh(t)}const Me=Symbol.for("v-fgt"),jn=Symbol.for("v-txt"),$t=Symbol.for("v-cmt"),qn=Symbol.for("v-stc"),Ds=[];let Ne=null;function Te(t=!1){Ds.push(Ne=t?null:[])}function o_(){Ds.pop(),Ne=Ds[Ds.length-1]||null}let Fs=1;function Bc(t,e=!1){Fs+=t,t<0&&Ne&&e&&(Ne.hasOnce=!0)}function zc(t){return t.dynamicChildren=Fs>0?Ne||Xt:null,o_(),Fs>0&&Ne&&Ne.push(t),t}function Ce(t,e,s,n,i,r){return zc(q(t,e,s,n,i,r,!0))}function c_(t,e,s,n,i){return zc(ue(t,e,s,n,i,!0))}function Hc(t){return t?t.__v_isVNode===!0:!1}function Ms(t,e){return t.type===e.type&&t.key===e.key}const Vc=({key:t})=>t??null,Bn=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ie(t)||le(t)||D(t)?{i:Fe,r:t,k:e,f:!!s}:t:null);function q(t,e=null,s=null,n=0,i=null,r=t===Me?0:1,o=!1,c=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vc(e),ref:e&&Bn(e),scopeId:lc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Fe};return c?(_r(a,s),r&128&&t.normalize(a)):s&&(a.shapeFlag|=ie(s)?8:16),Fs>0&&!o&&Ne&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Ne.push(a),a}const ue=a_;function a_(t,e=null,s=null,n=0,i=null,r=!1){if((!t||t===xh)&&(t=$t),Hc(t)){const c=cs(t,e,!0);return s&&_r(c,s),Fs>0&&!r&&Ne&&(c.shapeFlag&6?Ne[Ne.indexOf(t)]=c:Ne.push(c)),c.patchFlag=-2,c}if(S_(t)&&(t=t.__vccOpts),e){e=l_(e);let{class:c,style:a}=e;c&&!ie(c)&&(e.class=Ui(c)),te(a)&&(Zi(a)&&!U(a)&&(a=ye({},a)),e.style=Ni(a))}const o=ie(t)?1:qc(t)?128:mh(t)?64:te(t)?4:D(t)?2:0;return q(t,e,s,n,i,o,r,!0)}function l_(t){return t?Zi(t)||vc(t)?ye({},t):t:null}function cs(t,e,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:c,transition:a}=t,u=e?u_(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Vc(u),ref:e&&e.ref?s&&r?U(r)?r.concat(Bn(e)):[r,Bn(e)]:Bn(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Me?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cs(t.ssContent),ssFallback:t.ssFallback&&cs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&n&&tr(l,a.clone(l)),l}function fr(t=" ",e=0){return ue(jn,null,t,e)}function dr(t,e){const s=ue(qn,null,t);return s.staticCount=e,s}function hr(t="",e=!1){return e?(Te(),c_($t,null,t)):ue($t,null,t)}function nt(t){return t==null||typeof t=="boolean"?ue($t):U(t)?ue(Me,null,t.slice()):Hc(t)?Pt(t):ue(jn,null,String(t))}function Pt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cs(t)}function _r(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(U(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),_r(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!vc(e)?e._ctx=Fe:i===3&&Fe&&(Fe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else D(e)?(e={default:e,_ctx:Fe},s=32):(e=String(e),n&64?(s=16,e=[fr(e)]):s=8);t.children=e,t.shapeFlag|=s}function u_(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Ui([e.class,n.class]));else if(i==="style")e.style=Ni([e.style,n.style]);else if(bn(i)){const r=e[i],o=n[i];o&&r!==o&&!(U(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function it(t,e,s,n=null){tt(t,e,7,[s,n])}const f_=Tc();let d_=0;function h_(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||f_,r={uid:d_++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ic(n,i),emitsOptions:Fc(n,i),emit:null,emitted:null,propsDefaults:K,inheritAttrs:n.inheritAttrs,ctx:K,data:K,props:K,attrs:K,slots:K,refs:K,setupState:K,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Xh.bind(null,r),t.ce&&t.ce(r),r}let Oe=null;const __=()=>Oe||Fe;let zn,pr;{const t=Sn(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};zn=e("__VUE_INSTANCE_SETTERS__",s=>Oe=s),pr=e("__VUE_SSR_SETTERS__",s=>qs=s)}const js=t=>{const e=Oe;return zn(t),t.scope.on(),()=>{t.scope.off(),zn(e)}},Qc=()=>{Oe&&Oe.scope.off(),zn(null)};function Wc(t){return t.vnode.shapeFlag&4}let qs=!1;function p_(t,e=!1,s=!1){e&&pr(e);const{props:n,children:i}=t.vnode,r=Wc(t);Mh(t,n,r,e),zh(t,i,s||e);const o=r?m_(t,e):void 0;return e&&pr(!1),o}function m_(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Rh);const{setup:n}=s;if(n){Xe();const i=t.setupContext=n.length>1?b_(t):null,r=js(t),o=ns(n,t,0,[t.props,i]),c=xo(o);if(et(),r(),(c||t.sp)&&!Ps(t)&&uc(t),c){if(o.then(Qc,Qc),e)return o.then(a=>{Gc(t,a)}).catch(a=>{kn(a,t,0)});t.asyncDep=o}else Gc(t,o)}else Kc(t)}function Gc(t,e,s){D(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:te(e)&&(t.setupState=sc(e)),Kc(t)}function Kc(t,e,s){const n=t.type;t.render||(t.render=n.render||Je);{const i=js(t);Xe();try{Lh(t)}finally{et(),i()}}}const g_={get(t,e){return _e(t,"get",""),t[e]}};function b_(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,g_),slots:t.slots,emit:t.emit,expose:e}}function Hn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(sc(Ji(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Ns)return Ns[s](t)},has(e,s){return s in e||s in Ns}})):t.proxy}const w_=/(?:^|[-_])\w/g,y_=t=>t.replace(w_,e=>e.toUpperCase()).replace(/[-_]/g,"");function E_(t,e=!0){return D(t)?t.displayName||t.name:t.name||e&&t.__name}function Yc(t,e,s=!1){let n=E_(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&t&&t.parent){const i=r=>{for(const o in r)if(r[o]===e)return o};n=i(t.components||t.parent.type.components)||i(t.appContext.components)}return n?y_(n):s?"App":"Anonymous"}function S_(t){return D(t)&&"__vccOpts"in t}const Bs=(t,e)=>sh(t,e,qs),T_="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mr;const Zc=typeof window<"u"&&window.trustedTypes;if(Zc)try{mr=Zc.createPolicy("vue",{createHTML:t=>t})}catch{}const Jc=mr?t=>mr.createHTML(t):t=>t,O_="http://www.w3.org/2000/svg",A_="http://www.w3.org/1998/Math/MathML",mt=typeof document<"u"?document:null,Xc=mt&&mt.createElement("template"),v_={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?mt.createElementNS(O_,t):e==="mathml"?mt.createElementNS(A_,t):s?mt.createElement(t,{is:s}):mt.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>mt.createTextNode(t),createComment:t=>mt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>mt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,r){const o=s?s.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{Xc.innerHTML=Jc(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const c=Xc.content;if(n==="svg"||n==="mathml"){const a=c.firstChild;for(;a.firstChild;)c.appendChild(a.firstChild);c.removeChild(a)}e.insertBefore(c,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},C_=Symbol("_vtc");function I_(t,e,s){const n=t[C_];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const ea=Symbol("_vod"),x_=Symbol("_vsh"),R_=Symbol(""),L_=/(?:^|;)\s*display\s*:/;function k_(t,e,s){const n=t.style,i=ie(s);let r=!1;if(s&&!i){if(e)if(ie(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();s[c]==null&&Vn(n,c,"")}else for(const o in e)s[o]==null&&Vn(n,o,"");for(const o in s)o==="display"&&(r=!0),Vn(n,o,s[o])}else if(i){if(e!==s){const o=n[R_];o&&(s+=";"+o),n.cssText=s,r=L_.test(s)}}else e&&t.removeAttribute("style");ea in t&&(t[ea]=r?n.display:"",t[x_]&&(n.display="none"))}const ta=/\s*!important$/;function Vn(t,e,s){if(U(s))s.forEach(n=>Vn(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=$_(t,e);ta.test(s)?t.setProperty(It(n),s.replace(ta,""),"important"):t[n]=s}}const sa=["Webkit","Moz","ms"],gr={};function $_(t,e){const s=gr[e];if(s)return s;let n=Ct(e);if(n!=="filter"&&n in t)return gr[e]=n;n=ko(n);for(let i=0;i<sa.length;i++){const r=sa[i]+n;if(r in t)return gr[e]=r}return e}const na="http://www.w3.org/1999/xlink";function ia(t,e,s,n,i,r=xd(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(na,e.slice(6,e.length)):t.setAttributeNS(na,e,s):s==null||r&&!No(s)?t.removeAttribute(e):t.setAttribute(e,r?"":vt(s)?String(s):s)}function ra(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Jc(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const c=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(c!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const c=typeof t[e];c==="boolean"?s=No(s):s==null&&c==="string"?(s="",o=!0):c==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(i||e)}function as(t,e,s,n){t.addEventListener(e,s,n)}function P_(t,e,s,n){t.removeEventListener(e,s,n)}const oa=Symbol("_vei");function N_(t,e,s,n,i=null){const r=t[oa]||(t[oa]={}),o=r[e];if(n&&o)o.value=n;else{const[c,a]=U_(e);if(n){const u=r[e]=M_(n,i);as(t,c,u,a)}else o&&(P_(t,c,o,a),r[e]=void 0)}}const ca=/(?:Once|Passive|Capture)$/;function U_(t){let e;if(ca.test(t)){e={};let n;for(;n=t.match(ca);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):It(t.slice(2)),e]}let br=0;const D_=Promise.resolve(),F_=()=>br||(D_.then(()=>br=0),br=Date.now());function M_(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;tt(j_(n,s.value),e,5,[n])};return s.value=t,s.attached=F_(),s}function j_(t,e){if(U(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const aa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,q_=(t,e,s,n,i,r)=>{const o=i==="svg";e==="class"?I_(t,n,o):e==="style"?k_(t,s,n):bn(e)?Ri(e)||N_(t,e,s,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):B_(t,e,n,o))?(ra(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ia(t,e,n,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ie(n))?ra(t,Ct(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),ia(t,e,n,o))};function B_(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&aa(e)&&D(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return aa(e)&&ie(s)?!1:e in t}const la=t=>{const e=t.props["onUpdate:modelValue"]||!1;return U(e)?s=>En(e,s):e};function z_(t){t.target.composing=!0}function ua(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const wr=Symbol("_assign"),H_={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[wr]=la(i);const r=n||i.props&&i.props.type==="number";as(t,e?"change":"input",o=>{if(o.target.composing)return;let c=t.value;s&&(c=c.trim()),r&&(c=Pi(c)),t[wr](c)}),s&&as(t,"change",()=>{t.value=t.value.trim()}),e||(as(t,"compositionstart",z_),as(t,"compositionend",ua),as(t,"change",ua))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},o){if(t[wr]=la(o),t.composing)return;const c=(r||t.type==="number")&&!/^0\d/.test(t.value)?Pi(t.value):t.value,a=e??"";c!==a&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===a)||(t.value=a))}},V_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Q_=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=(i=>{if(!("key"in i))return;const r=It(i.key);if(e.some(o=>o===r||V_[o]===r))return t(i)}))},W_=ye({patchProp:q_},v_);let fa;function G_(){return fa||(fa=Vh(W_))}const K_=((...t)=>{const e=G_().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=Z_(n);if(!i)return;const r=e._component;!D(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,Y_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function Y_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Z_(t){return ie(t)?document.querySelector(t):t}const Nt=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},J_={},X_={class:"mi-header"};function ep(t,e){return Te(),Ce("div",X_,[...e[0]||(e[0]=[dr('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none" data-v-dc8499ed><path d="M14.3594 13.6406L22.9756 16.5127L14.3594 19.3848L11.4873 28L8.61621 19.3848L0 16.5127L8.61621 13.6406L11.4873 5.02539L14.3594 13.6406ZM22.6152 5.38477L28 7.17969L22.6152 8.97461L20.8203 14.3594L19.0254 8.97461L13.6406 7.17969L19.0254 5.38477L20.8203 0L22.6152 5.38477Z" fill="url(#paint0_linear_1_4156)" data-v-dc8499ed></path><defs data-v-dc8499ed><linearGradient id="paint0_linear_1_4156" x1="17.2308" y1="20.8205" x2="7.17949" y2="4.30769" gradientUnits="userSpaceOnUse" data-v-dc8499ed><stop stop-color="#303FC8" data-v-dc8499ed></stop><stop offset="1" stop-color="#0F1864" data-v-dc8499ed></stop></linearGradient></defs></svg><h1 class="mi-header-title" data-v-dc8499ed>Investopedia Answers</h1>',2)])])}const tp=Nt(J_,[["render",ep],["__scopeId","data-v-dc8499ed"]]),sp=["onSponsoredPlaceholderReady"],np=t=>{!t||typeof t!="object"||sp.forEach(e=>{t[e]&&typeof t[e]=="function"&&t[e]})};function da(t,e){return function(){return t.apply(e,arguments)}}const{toString:ip}=Object.prototype,{getPrototypeOf:yr}=Object,{iterator:Qn,toStringTag:ha}=Symbol,Wn=(t=>e=>{const s=ip.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),We=t=>(t=t.toLowerCase(),e=>Wn(e)===t),Gn=t=>e=>typeof e===t,{isArray:ls}=Array,us=Gn("undefined");function zs(t){return t!==null&&!us(t)&&t.constructor!==null&&!us(t.constructor)&&Ie(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const _a=We("ArrayBuffer");function rp(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&_a(t.buffer),e}const op=Gn("string"),Ie=Gn("function"),pa=Gn("number"),Hs=t=>t!==null&&typeof t=="object",cp=t=>t===!0||t===!1,Kn=t=>{if(Wn(t)!=="object")return!1;const e=yr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(ha in t)&&!(Qn in t)},ap=t=>{if(!Hs(t)||zs(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},lp=We("Date"),up=We("File"),fp=We("Blob"),dp=We("FileList"),hp=t=>Hs(t)&&Ie(t.pipe),_p=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ie(t.append)&&((e=Wn(t))==="formdata"||e==="object"&&Ie(t.toString)&&t.toString()==="[object FormData]"))},pp=We("URLSearchParams"),[mp,gp,bp,wp]=["ReadableStream","Request","Response","Headers"].map(We),yp=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vs(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ls(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(zs(t))return;const r=s?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let c;for(n=0;n<o;n++)c=r[n],e.call(null,t[c],c,t)}}function ma(t,e){if(zs(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const Qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ga=t=>!us(t)&&t!==Qt;function Er(){const{caseless:t,skipUndefined:e}=ga(this)&&this||{},s={},n=(i,r)=>{const o=t&&ma(s,r)||r;Kn(s[o])&&Kn(i)?s[o]=Er(s[o],i):Kn(i)?s[o]=Er({},i):ls(i)?s[o]=i.slice():(!e||!us(i))&&(s[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Vs(arguments[i],n);return s}const Ep=(t,e,s,{allOwnKeys:n}={})=>(Vs(e,(i,r)=>{s&&Ie(i)?t[r]=da(i,s):t[r]=i},{allOwnKeys:n}),t),Sp=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Tp=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},Op=(t,e,s,n)=>{let i,r,o;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],(!n||n(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=s!==!1&&yr(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},Ap=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},vp=t=>{if(!t)return null;if(ls(t))return t;let e=t.length;if(!pa(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Cp=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&yr(Uint8Array)),Ip=(t,e)=>{const n=(t&&t[Qn]).call(t);let i;for(;(i=n.next())&&!i.done;){const r=i.value;e.call(t,r[0],r[1])}},xp=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Rp=We("HTMLFormElement"),Lp=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),ba=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),kp=We("RegExp"),wa=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Vs(s,(i,r)=>{let o;(o=e(i,r,t))!==!1&&(n[r]=o||i)}),Object.defineProperties(t,n)},$p=t=>{wa(t,(e,s)=>{if(Ie(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Ie(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Pp=(t,e)=>{const s={},n=i=>{i.forEach(r=>{s[r]=!0})};return ls(t)?n(t):n(String(t).split(e)),s},Np=()=>{},Up=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Dp(t){return!!(t&&Ie(t.append)&&t[ha]==="FormData"&&t[Qn])}const Fp=t=>{const e=new Array(10),s=(n,i)=>{if(Hs(n)){if(e.indexOf(n)>=0)return;if(zs(n))return n;if(!("toJSON"in n)){e[i]=n;const r=ls(n)?[]:{};return Vs(n,(o,c)=>{const a=s(o,i+1);!us(a)&&(r[c]=a)}),e[i]=void 0,r}}return n};return s(t,0)},Mp=We("AsyncFunction"),jp=t=>t&&(Hs(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),ya=((t,e)=>t?setImmediate:e?((s,n)=>(Qt.addEventListener("message",({source:i,data:r})=>{i===Qt&&r===s&&n.length&&n.shift()()},!1),i=>{n.push(i),Qt.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ie(Qt.postMessage)),qp=typeof queueMicrotask<"u"?queueMicrotask.bind(Qt):typeof process<"u"&&process.nextTick||ya,_={isArray:ls,isArrayBuffer:_a,isBuffer:zs,isFormData:_p,isArrayBufferView:rp,isString:op,isNumber:pa,isBoolean:cp,isObject:Hs,isPlainObject:Kn,isEmptyObject:ap,isReadableStream:mp,isRequest:gp,isResponse:bp,isHeaders:wp,isUndefined:us,isDate:lp,isFile:up,isBlob:fp,isRegExp:kp,isFunction:Ie,isStream:hp,isURLSearchParams:pp,isTypedArray:Cp,isFileList:dp,forEach:Vs,merge:Er,extend:Ep,trim:yp,stripBOM:Sp,inherits:Tp,toFlatObject:Op,kindOf:Wn,kindOfTest:We,endsWith:Ap,toArray:vp,forEachEntry:Ip,matchAll:xp,isHTMLForm:Rp,hasOwnProperty:ba,hasOwnProp:ba,reduceDescriptors:wa,freezeMethods:$p,toObjectSet:Pp,toCamelCase:Lp,noop:Np,toFiniteNumber:Up,findKey:ma,global:Qt,isContextDefined:ga,isSpecCompliantForm:Dp,toJSONObject:Fp,isAsyncFn:Mp,isThenable:jp,setImmediate:ya,asap:qp,isIterable:t=>t!=null&&Ie(t[Qn])};function F(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}_.inherits(F,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const Ea=F.prototype,Sa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Sa[t]={value:t}}),Object.defineProperties(F,Sa),Object.defineProperty(Ea,"isAxiosError",{value:!0}),F.from=(t,e,s,n,i,r)=>{const o=Object.create(Ea);_.toFlatObject(t,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",a=e==null&&t?t.code:e;return F.call(o,c,a,s,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",r&&Object.assign(o,r),o};const Bp=null;function Sr(t){return _.isPlainObject(t)||_.isArray(t)}function Ta(t){return _.endsWith(t,"[]")?t.slice(0,-2):t}function Oa(t,e,s){return t?t.concat(e).map(function(i,r){return i=Ta(i),!s&&r?"["+i+"]":i}).join(s?".":""):e}function zp(t){return _.isArray(t)&&!t.some(Sr)}const Hp=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function Yn(t,e,s){if(!_.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=_.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,C){return!_.isUndefined(C[O])});const n=s.metaTokens,i=s.visitor||l,r=s.dots,o=s.indexes,a=(s.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(_.isDate(g))return g.toISOString();if(_.isBoolean(g))return g.toString();if(!a&&_.isBlob(g))throw new F("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(g)||_.isTypedArray(g)?a&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function l(g,O,C){let k=g;if(g&&!C&&typeof g=="object"){if(_.endsWith(O,"{}"))O=n?O:O.slice(0,-2),g=JSON.stringify(g);else if(_.isArray(g)&&zp(g)||(_.isFileList(g)||_.endsWith(O,"[]"))&&(k=_.toArray(g)))return O=Ta(O),k.forEach(function(M,R){!(_.isUndefined(M)||M===null)&&e.append(o===!0?Oa([O],R,r):o===null?O:O+"[]",u(M))}),!1}return Sr(g)?!0:(e.append(Oa(C,O,r),u(g)),!1)}const d=[],m=Object.assign(Hp,{defaultVisitor:l,convertValue:u,isVisitable:Sr});function E(g,O){if(!_.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+O.join("."));d.push(g),_.forEach(g,function(k,j){(!(_.isUndefined(k)||k===null)&&i.call(e,k,_.isString(j)?j.trim():j,O,m))===!0&&E(k,O?O.concat(j):[j])}),d.pop()}}if(!_.isObject(t))throw new TypeError("data must be an object");return E(t),e}function Aa(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Tr(t,e){this._pairs=[],t&&Yn(t,this,e)}const va=Tr.prototype;va.append=function(e,s){this._pairs.push([e,s])},va.toString=function(e){const s=e?function(n){return e.call(this,n,Aa)}:Aa;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function Vp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ca(t,e,s){if(!e)return t;const n=s&&s.encode||Vp;_.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let r;if(i?r=i(e,s):r=_.isURLSearchParams(e)?e.toString():new Tr(e,s).toString(n),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Ia{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(n){n!==null&&e(n)})}}const xa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qp={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Tr,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Or=typeof window<"u"&&typeof document<"u",Ar=typeof navigator=="object"&&navigator||void 0,Wp=Or&&(!Ar||["ReactNative","NativeScript","NS"].indexOf(Ar.product)<0),Gp=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Kp=Or&&window.location.href||"http://localhost",pe={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Or,hasStandardBrowserEnv:Wp,hasStandardBrowserWebWorkerEnv:Gp,navigator:Ar,origin:Kp},Symbol.toStringTag,{value:"Module"})),...Qp};function Yp(t,e){return Yn(t,new pe.classes.URLSearchParams,{visitor:function(s,n,i,r){return pe.isNode&&_.isBuffer(s)?(this.append(n,s.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function Zp(t){return _.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Jp(t){const e={},s=Object.keys(t);let n;const i=s.length;let r;for(n=0;n<i;n++)r=s[n],e[r]=t[r];return e}function Ra(t){function e(s,n,i,r){let o=s[r++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),a=r>=s.length;return o=!o&&_.isArray(i)?i.length:o,a?(_.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!c):((!i[o]||!_.isObject(i[o]))&&(i[o]=[]),e(s,n,i[o],r)&&_.isArray(i[o])&&(i[o]=Jp(i[o])),!c)}if(_.isFormData(t)&&_.isFunction(t.entries)){const s={};return _.forEachEntry(t,(n,i)=>{e(Zp(n),i,s,0)}),s}return null}function Xp(t,e,s){if(_.isString(t))try{return(e||JSON.parse)(t),_.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const Qs={transitional:xa,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,r=_.isObject(e);if(r&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return i?JSON.stringify(Ra(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e)||_.isReadableStream(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Yp(e,this.formSerializer).toString();if((c=_.isFileList(e))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Yn(c?{"files[]":e}:e,a&&new a,this.formSerializer)}}return r||i?(s.setContentType("application/json",!1),Xp(e)):e}],transformResponse:[function(e){const s=this.transitional||Qs.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(_.isResponse(e)||_.isReadableStream(e))return e;if(e&&_.isString(e)&&(n&&!this.responseType||i)){const o=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?F.from(c,F.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe.classes.FormData,Blob:pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],t=>{Qs.headers[t]={}});const em=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tm=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),s=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!s||e[s]&&em[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},La=Symbol("internals");function Ws(t){return t&&String(t).trim().toLowerCase()}function Zn(t){return t===!1||t==null?t:_.isArray(t)?t.map(Zn):String(t)}function sm(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const nm=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vr(t,e,s,n,i){if(_.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!_.isString(e)){if(_.isString(n))return e.indexOf(n)!==-1;if(_.isRegExp(n))return n.test(e)}}function im(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function rm(t,e){const s=_.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,r,o){return this[n].call(this,e,i,r,o)},configurable:!0})})}let xe=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function r(c,a,u){const l=Ws(a);if(!l)throw new Error("header name must be a non-empty string");const d=_.findKey(i,l);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||a]=Zn(c))}const o=(c,a)=>_.forEach(c,(u,l)=>r(u,l,a));if(_.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(_.isString(e)&&(e=e.trim())&&!nm(e))o(tm(e),s);else if(_.isObject(e)&&_.isIterable(e)){let c={},a,u;for(const l of e){if(!_.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(a=c[u])?_.isArray(a)?[...a,l[1]]:[a,l[1]]:l[1]}o(c,s)}else e!=null&&r(s,e,n);return this}get(e,s){if(e=Ws(e),e){const n=_.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return sm(i);if(_.isFunction(s))return s.call(this,i,n);if(_.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Ws(e),e){const n=_.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||vr(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function r(o){if(o=Ws(o),o){const c=_.findKey(n,o);c&&(!s||vr(n,n[c],c,s))&&(delete n[c],i=!0)}}return _.isArray(e)?e.forEach(r):r(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const r=s[n];(!e||vr(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const s=this,n={};return _.forEach(this,(i,r)=>{const o=_.findKey(n,r);if(o){s[o]=Zn(i),delete s[r];return}const c=e?im(r):String(r).trim();c!==r&&delete s[r],s[c]=Zn(i),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return _.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&_.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[La]=this[La]={accessors:{}}).accessors,i=this.prototype;function r(o){const c=Ws(o);n[c]||(rm(i,o),n[c]=!0)}return _.isArray(e)?e.forEach(r):r(e),this}};xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_.reduceDescriptors(xe.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}}),_.freezeMethods(xe);function Cr(t,e){const s=this||Qs,n=e||s,i=xe.from(n.headers);let r=n.data;return _.forEach(t,function(c){r=c.call(s,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function ka(t){return!!(t&&t.__CANCEL__)}function fs(t,e,s){F.call(this,t??"canceled",F.ERR_CANCELED,e,s),this.name="CanceledError"}_.inherits(fs,F,{__CANCEL__:!0});function $a(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new F("Request failed with status code "+s.status,[F.ERR_BAD_REQUEST,F.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function om(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cm(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(a){const u=Date.now(),l=n[r];o||(o=u),s[i]=a,n[i]=u;let d=r,m=0;for(;d!==i;)m+=s[d++],d=d%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),u-o<e)return;const E=l&&u-l;return E?Math.round(m*1e3/E):void 0}}function am(t,e){let s=0,n=1e3/e,i,r;const o=(u,l=Date.now())=>{s=l,i=null,r&&(clearTimeout(r),r=null),t(...u)};return[(...u)=>{const l=Date.now(),d=l-s;d>=n?o(u,l):(i=u,r||(r=setTimeout(()=>{r=null,o(i)},n-d)))},()=>i&&o(i)]}const Jn=(t,e,s=3)=>{let n=0;const i=cm(50,250);return am(r=>{const o=r.loaded,c=r.lengthComputable?r.total:void 0,a=o-n,u=i(a),l=o<=c;n=o;const d={loaded:o,total:c,progress:c?o/c:void 0,bytes:a,rate:u||void 0,estimated:u&&c&&l?(c-o)/u:void 0,event:r,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(d)},s)},Pa=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},Na=t=>(...e)=>_.asap(()=>t(...e)),lm=pe.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,pe.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(pe.origin),pe.navigator&&/(msie|trident)/i.test(pe.navigator.userAgent)):()=>!0,um=pe.hasStandardBrowserEnv?{write(t,e,s,n,i,r,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];_.isNumber(s)&&c.push(`expires=${new Date(s).toUTCString()}`),_.isString(n)&&c.push(`path=${n}`),_.isString(i)&&c.push(`domain=${i}`),r===!0&&c.push("secure"),_.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function fm(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dm(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ua(t,e,s){let n=!fm(e);return t&&(n||s==!1)?dm(t,e):e}const Da=t=>t instanceof xe?{...t}:t;function Wt(t,e){e=e||{};const s={};function n(u,l,d,m){return _.isPlainObject(u)&&_.isPlainObject(l)?_.merge.call({caseless:m},u,l):_.isPlainObject(l)?_.merge({},l):_.isArray(l)?l.slice():l}function i(u,l,d,m){if(_.isUndefined(l)){if(!_.isUndefined(u))return n(void 0,u,d,m)}else return n(u,l,d,m)}function r(u,l){if(!_.isUndefined(l))return n(void 0,l)}function o(u,l){if(_.isUndefined(l)){if(!_.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function c(u,l,d){if(d in e)return n(u,l);if(d in t)return n(void 0,u)}const a={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,l,d)=>i(Da(u),Da(l),d,!0)};return _.forEach(Object.keys({...t,...e}),function(l){const d=a[l]||i,m=d(t[l],e[l],l);_.isUndefined(m)&&d!==c||(s[l]=m)}),s}const Fa=t=>{const e=Wt({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:c}=e;if(e.headers=o=xe.from(o),e.url=Ca(Ua(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),_.isFormData(s)){if(pe.hasStandardBrowserEnv||pe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(_.isFunction(s.getHeaders)){const a=s.getHeaders(),u=["content-type","content-length"];Object.entries(a).forEach(([l,d])=>{u.includes(l.toLowerCase())&&o.set(l,d)})}}if(pe.hasStandardBrowserEnv&&(n&&_.isFunction(n)&&(n=n(e)),n||n!==!1&&lm(e.url))){const a=i&&r&&um.read(r);a&&o.set(i,a)}return e},hm=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(s,n){const i=Fa(t);let r=i.data;const o=xe.from(i.headers).normalize();let{responseType:c,onUploadProgress:a,onDownloadProgress:u}=i,l,d,m,E,g;function O(){E&&E(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function k(){if(!C)return;const M=xe.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),Q={data:!c||c==="text"||c==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:M,config:t,request:C};$a(function(ne){s(ne),O()},function(ne){n(ne),O()},Q),C=null}"onloadend"in C?C.onloadend=k:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(k)},C.onabort=function(){C&&(n(new F("Request aborted",F.ECONNABORTED,t,C)),C=null)},C.onerror=function(R){const Q=R&&R.message?R.message:"Network Error",be=new F(Q,F.ERR_NETWORK,t,C);be.event=R||null,n(be),C=null},C.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Q=i.transitional||xa;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),n(new F(R,Q.clarifyTimeoutError?F.ETIMEDOUT:F.ECONNABORTED,t,C)),C=null},r===void 0&&o.setContentType(null),"setRequestHeader"in C&&_.forEach(o.toJSON(),function(R,Q){C.setRequestHeader(Q,R)}),_.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),c&&c!=="json"&&(C.responseType=i.responseType),u&&([m,g]=Jn(u,!0),C.addEventListener("progress",m)),a&&C.upload&&([d,E]=Jn(a),C.upload.addEventListener("progress",d),C.upload.addEventListener("loadend",E)),(i.cancelToken||i.signal)&&(l=M=>{C&&(n(!M||M.type?new fs(null,t,C):M),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const j=om(i.url);if(j&&pe.protocols.indexOf(j)===-1){n(new F("Unsupported protocol "+j+":",F.ERR_BAD_REQUEST,t));return}C.send(r||null)})},_m=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const r=function(u){if(!i){i=!0,c();const l=u instanceof Error?u:this.reason;n.abort(l instanceof F?l:new fs(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,r(new F(`timeout ${e} of ms exceeded`,F.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),t=null)};t.forEach(u=>u.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=()=>_.asap(c),a}},pm=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},mm=async function*(t,e){for await(const s of gm(t))yield*pm(s,e)},gm=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},Ma=(t,e,s,n)=>{const i=mm(t,e);let r=0,o,c=a=>{o||(o=!0,n&&n(a))};return new ReadableStream({async pull(a){try{const{done:u,value:l}=await i.next();if(u){c(),a.close();return}let d=l.byteLength;if(s){let m=r+=d;s(m)}a.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(a){return c(a),i.return()}},{highWaterMark:2})},ja=64*1024,{isFunction:Xn}=_,bm=(({Request:t,Response:e})=>({Request:t,Response:e}))(_.global),{ReadableStream:qa,TextEncoder:Ba}=_.global,za=(t,...e)=>{try{return!!t(...e)}catch{return!1}},wm=t=>{t=_.merge.call({skipUndefined:!0},bm,t);const{fetch:e,Request:s,Response:n}=t,i=e?Xn(e):typeof fetch=="function",r=Xn(s),o=Xn(n);if(!i)return!1;const c=i&&Xn(qa),a=i&&(typeof Ba=="function"?(g=>O=>g.encode(O))(new Ba):async g=>new Uint8Array(await new s(g).arrayBuffer())),u=r&&c&&za(()=>{let g=!1;const O=new s(pe.origin,{body:new qa,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!O}),l=o&&c&&za(()=>_.isReadableStream(new n("").body)),d={stream:l&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!d[g]&&(d[g]=(O,C)=>{let k=O&&O[g];if(k)return k.call(O);throw new F(`Response type '${g}' is not supported`,F.ERR_NOT_SUPPORT,C)})});const m=async g=>{if(g==null)return 0;if(_.isBlob(g))return g.size;if(_.isSpecCompliantForm(g))return(await new s(pe.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(_.isArrayBufferView(g)||_.isArrayBuffer(g))return g.byteLength;if(_.isURLSearchParams(g)&&(g=g+""),_.isString(g))return(await a(g)).byteLength},E=async(g,O)=>{const C=_.toFiniteNumber(g.getContentLength());return C??m(O)};return async g=>{let{url:O,method:C,data:k,signal:j,cancelToken:M,timeout:R,onDownloadProgress:Q,onUploadProgress:be,responseType:ne,headers:Ve,withCredentials:Ot="same-origin",fetchOptions:ot}=Fa(g),qt=e||fetch;ne=ne?(ne+"").toLowerCase():"text";let At=_m([j,M&&M.toAbortSignal()],R),ct=null;const Ze=At&&At.unsubscribe&&(()=>{At.unsubscribe()});let hn;try{if(be&&u&&C!=="get"&&C!=="head"&&(hn=await E(Ve,k))!==0){let we=new s(O,{method:"POST",body:k,duplex:"half"}),he;if(_.isFormData(k)&&(he=we.headers.get("content-type"))&&Ve.setContentType(he),we.body){const[Ts,Os]=Pa(hn,Jn(Na(be)));k=Ma(we.body,ja,Ts,Os)}}_.isString(Ot)||(Ot=Ot?"include":"omit");const Z=r&&"credentials"in s.prototype,J={...ot,signal:At,method:C.toUpperCase(),headers:Ve.normalize().toJSON(),body:k,duplex:"half",credentials:Z?Ot:void 0};ct=r&&new s(O,J);let B=await(r?qt(ct,ot):qt(O,J));const at=l&&(ne==="stream"||ne==="response");if(l&&(Q||at&&Ze)){const we={};["status","statusText","headers"].forEach(Ci=>{we[Ci]=B[Ci]});const he=_.toFiniteNumber(B.headers.get("content-length")),[Ts,Os]=Q&&Pa(he,Jn(Na(Q),!0))||[];B=new n(Ma(B.body,ja,Ts,()=>{Os&&Os(),Ze&&Ze()}),we)}ne=ne||"text";let Ss=await d[_.findKey(d,ne)||"text"](B,g);return!at&&Ze&&Ze(),await new Promise((we,he)=>{$a(we,he,{data:Ss,headers:xe.from(B.headers),status:B.status,statusText:B.statusText,config:g,request:ct})})}catch(Z){throw Ze&&Ze(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new F("Network Error",F.ERR_NETWORK,g,ct),{cause:Z.cause||Z}):F.from(Z,Z&&Z.code,g,ct)}}},ym=new Map,Ha=t=>{let e=t&&t.env||{};const{fetch:s,Request:n,Response:i}=e,r=[n,i,s];let o=r.length,c=o,a,u,l=ym;for(;c--;)a=r[c],u=l.get(a),u===void 0&&l.set(a,u=c?new Map:wm(e)),l=u;return u};Ha();const Ir={http:Bp,xhr:hm,fetch:{get:Ha}};_.forEach(Ir,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Va=t=>`- ${t}`,Em=t=>_.isFunction(t)||t===null||t===!1;function Sm(t,e){t=_.isArray(t)?t:[t];const{length:s}=t;let n,i;const r={};for(let o=0;o<s;o++){n=t[o];let c;if(i=n,!Em(n)&&(i=Ir[(c=String(n)).toLowerCase()],i===void 0))throw new F(`Unknown adapter '${c}'`);if(i&&(_.isFunction(i)||(i=i.get(e))))break;r[c||"#"+o]=i}if(!i){const o=Object.entries(r).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=s?o.length>1?`since :
`+o.map(Va).join(`
`):" "+Va(o[0]):"as no adapter specified";throw new F("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const Qa={getAdapter:Sm,adapters:Ir};function xr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fs(null,t)}function Wa(t){return xr(t),t.headers=xe.from(t.headers),t.data=Cr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Qa.getAdapter(t.adapter||Qs.adapter,t)(t).then(function(n){return xr(t),n.data=Cr.call(t,t.transformResponse,n),n.headers=xe.from(n.headers),n},function(n){return ka(n)||(xr(t),n&&n.response&&(n.response.data=Cr.call(t,t.transformResponse,n.response),n.response.headers=xe.from(n.response.headers))),Promise.reject(n)})}const Ga="1.13.2",ei={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ei[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ka={};ei.transitional=function(e,s,n){function i(r,o){return"[Axios v"+Ga+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,c)=>{if(e===!1)throw new F(i(o," has been removed"+(s?" in "+s:"")),F.ERR_DEPRECATED);return s&&!Ka[o]&&(Ka[o]=!0,console.warn(i(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(r,o,c):!0}},ei.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Tm(t,e,s){if(typeof t!="object")throw new F("options must be an object",F.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const r=n[i],o=e[r];if(o){const c=t[r],a=c===void 0||o(c,r,t);if(a!==!0)throw new F("option "+r+" must be "+a,F.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new F("Unknown option "+r,F.ERR_BAD_OPTION)}}const ti={assertOptions:Tm,validators:ei},rt=ti.validators;let Gt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ia,response:new Ia}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Wt(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:r}=s;n!==void 0&&ti.assertOptions(n,{silentJSONParsing:rt.transitional(rt.boolean),forcedJSONParsing:rt.transitional(rt.boolean),clarifyTimeoutError:rt.transitional(rt.boolean)},!1),i!=null&&(_.isFunction(i)?s.paramsSerializer={serialize:i}:ti.assertOptions(i,{encode:rt.function,serialize:rt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ti.assertOptions(s,{baseUrl:rt.spelling("baseURL"),withXsrfToken:rt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=r&&_.merge(r.common,r[s.method]);r&&_.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),s.headers=xe.concat(o,r);const c=[];let a=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(s)===!1||(a=a&&O.synchronous,c.unshift(O.fulfilled,O.rejected))});const u=[];this.interceptors.response.forEach(function(O){u.push(O.fulfilled,O.rejected)});let l,d=0,m;if(!a){const g=[Wa.bind(this),void 0];for(g.unshift(...c),g.push(...u),m=g.length,l=Promise.resolve(s);d<m;)l=l.then(g[d++],g[d++]);return l}m=c.length;let E=s;for(;d<m;){const g=c[d++],O=c[d++];try{E=g(E)}catch(C){O.call(this,C);break}}try{l=Wa.call(this,E)}catch(g){return Promise.reject(g)}for(d=0,m=u.length;d<m;)l=l.then(u[d++],u[d++]);return l}getUri(e){e=Wt(this.defaults,e);const s=Ua(e.baseURL,e.url,e.allowAbsoluteUrls);return Ca(s,e.params,e.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(e){Gt.prototype[e]=function(s,n){return this.request(Wt(n||{},{method:e,url:s,data:(n||{}).data}))}}),_.forEach(["post","put","patch"],function(e){function s(n){return function(r,o,c){return this.request(Wt(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Gt.prototype[e]=s(),Gt.prototype[e+"Form"]=s(!0)});let Om=class yd{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(r){s=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(c=>{n.subscribe(c),r=c}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,c){n.reason||(n.reason=new fs(r,o,c),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new yd(function(i){e=i}),cancel:e}}};function Am(t){return function(s){return t.apply(null,s)}}function vm(t){return _.isObject(t)&&t.isAxiosError===!0}const Rr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Rr).forEach(([t,e])=>{Rr[e]=t});function Ya(t){const e=new Gt(t),s=da(Gt.prototype.request,e);return _.extend(s,Gt.prototype,e,{allOwnKeys:!0}),_.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Ya(Wt(t,i))},s}const re=Ya(Qs);re.Axios=Gt,re.CanceledError=fs,re.CancelToken=Om,re.isCancel=ka,re.VERSION=Ga,re.toFormData=Yn,re.AxiosError=F,re.Cancel=re.CanceledError,re.all=function(e){return Promise.all(e)},re.spread=Am,re.isAxiosError=vm,re.mergeConfig=Wt,re.AxiosHeaders=xe,re.formToJSON=t=>Ra(_.isHTMLForm(t)?new FormData(t):t),re.getAdapter=Qa.getAdapter,re.HttpStatusCode=Rr,re.default=re;const{Axios:UO,AxiosError:DO,CanceledError:FO,isCancel:MO,CancelToken:jO,VERSION:qO,all:BO,Cancel:zO,isAxiosError:HO,spread:VO,toFormData:QO,AxiosHeaders:WO,HttpStatusCode:GO,formToJSON:KO,getAdapter:YO,mergeConfig:ZO}=re,Za="oB6D6G5TNRmMlOatuPHxKAsWXatp5YBm32dJ2Oy6",Cm="MisoCustomScript",Ja="miso-answer-page",Xa=re.create({baseURL:"https://api-edge.askmiso.com/v1",headers:{"Content-Type":"application/json"},params:{api_key:Za}}),Im=async t=>(await Xa.post("/ask/questions",t)).data,xm=async t=>(await Xa.get(`/ask/questions/${t}/answer`)).data,el="1.12.7";function Rm(){return new AbortController().signal}function Lm(...t){const e=t.length;if(e===0)return Rm();if(e===1)return t[0];const s=new AbortController;for(const n of t)if(!(!n||!n.addEventListener)){if(n.aborted)return AbortSignal.abort(n.reason);n.addEventListener("abort",()=>s.abort(n.reason))}return s.signal}const fe=Object.freeze({ASK:"ask",SEARCH:"search",RECOMMENDATION:"recommendation",INTERACTIONS:"interactions"}),je=Object.freeze({QUESTIONS:"questions",RELATED_QUESTIONS:"related_questions",TRENDING_QUESTIONS:"trending_questions",SEARCH:"search",AUTOCOMPLETE:"autocomplete",SEARCH_AUTOCOMPLETE:"search_autocomplete",MGET:"mget",USER_TO_PRODUCTS:"user_to_products",USER_TO_CATEGORIES:"user_to_categories",USER_TO_ATTRIBUTES:"user_to_attributes",USER_TO_TRENDING:"user_to_trending",USER_TO_HISTORY:"user_to_history",PRODUCT_TO_PRODUCTS:"product_to_products",UPLOAD:"upload"}),Gs=Object.freeze(Object.defineProperty({__proto__:null,GROUP:fe,NAME:je},Symbol.toStringTag,{value:"Module"}));function Lr(t,e){if(!t)return;const s=t.indexOf(e);s>-1&&t.splice(s,1)}function km(t,e){if(!t)return;const s=t.findIndex(e);s>-1&&t.splice(s,1)}function Kt(t){return Array.isArray(t)?t:t===void 0?[]:[t]}function z(t){if(typeof t!="object")return t;const e={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s]!==void 0&&(e[s]=t[s]);return e}function si(t){return t==null}function $m(t,e,s){if(t.has(e))return t.get(e);const n=s(e);return t.set(e,n),n}function Ut(t,e,s){s=typeof s=="string"?[s]:s,Object.defineProperties(t,s.reduce((n,i)=>(n[i]={get:()=>{const r=e[i];return typeof r=="function"?r.bind(e):r}},n),{}))}function Pm(t,e,s){s=typeof s=="string"?[s]:s,Object.defineProperties(t,s.reduce((n,i)=>(n[i]={get:()=>e[i],set:r=>{e[i]=r}},n),{}))}function ee(t,e){for(const s in e)e.hasOwnProperty(s)&&Object.defineProperty(t,s,{value:e[s]})}function Nm(t,e){const s=Symbol.for(e);Object.defineProperty(t,s,{value:!0}),Object.defineProperty(t,"isTypeOf",{value:n=>n&&n instanceof t||typeof n.constructor=="function"&&n.constructor[s]===!0})}function tl(t){return t.replace(/-([a-z])/g,e=>e[1].toUpperCase())}function sl(t){return t.replace(/[-_][a-z]/g,e=>e[1].toUpperCase())}function nl(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function Um(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function Dm(t){return t.replaceAll("-","_")}function Fm(t){return t.replace(/[-_]([a-zA-Z])/g,(e,s)=>` ${s}`)}class il{constructor(e,{duration:s=0,onDuration:n,offDuration:i,state:r}={}){if(typeof e!="function")throw new Error(`Callback must be a function: ${e}`);this._callback=e,Object.defineProperty(this,"durations",{value:Object.freeze({on:n!==void 0?n:s,off:i!==void 0?i:s})}),this._value=this._state=!!r,this._active=!0}get active(){return this._active}get state(){return this._state}get value(){return this._value}set value(e){if(e=!!e,this._value===e)return;Mm(this);const s=this.durations[e?"on":"off"];s?this._timeout=setTimeout(()=>rl(this,e),s):rl(this,e),this._value=e}disconnect(){this._active=!1}}function Mm(t){t._timeout&&(clearTimeout(t._timeout),t._timeout=void 0)}function rl(t,e){t._state!==e&&(t._state=e,t._active&&t._callback(e))}function jm(t){return typeof t=="string"?document.querySelector(t):t}function kr(t,e,{root:s=t.ownerDocument}={}){for(;t&&t!==s;t=t.parentElement){const n=e(t);if(n!==void 0)return n}}function qm(t){const{tagName:e}=t;customElements.define(e,t);for(const s of document.querySelectorAll(e))customElements.upgrade(s)}async function ni(t){return new Promise((e,s)=>{window.requestAnimationFrame(async n=>{try{await t(n),e()}catch(i){s(i)}})})}async function $r(t,{area:e=.5,duration:s=1e3,signal:n}={}){return t=jm(t),new Promise((i,r)=>{const o=new il(a=>{a&&(o.disconnect(),c.disconnect(),i())},{onDuration:s}),c=new IntersectionObserver(a=>{o.value=a[0].isIntersecting},{threshold:e});c.observe(t),n&&n.addEventListener&&n.addEventListener("abort",()=>{o.disconnect(),c.disconnect(),r(new DOMException("Aborted","AbortError"))})})}async function Bm(){document.readyState==="loading"&&await new Promise(t=>{document.addEventListener("DOMContentLoaded",t,{once:!0})})}function Ge(t){return t=`${t}`,t&&t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function Ks(){return zm()||Hm()||Vm()}function zm(){return crypto&&crypto.randomUUID?crypto.randomUUID():void 0}function Hm(){if(!URL||!URL.createObjectURL||URL.revokeObjectURL||!Blob)return;const t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substring(e.lastIndexOf("/")+1)}function Vm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}function Qm(t,e){const s=ii(()=>window.localStorage.getItem(t)),n=ii(()=>Wm(t)),i=s||n||`${e()}`;return i&&!s&&ii(()=>window.localStorage.setItem(t,i)),i&&!n&&ii(()=>Gm(t,i)),i}function Wm(t){const e=`; ${document.cookie}`,s=`; ${encodeURIComponent(t)}=`,n=e.indexOf(s);if(n<0)return;const i=n+s.length,r=e.indexOf(";",i);return decodeURIComponent(r<0?e.substring(i):e.substring(i,r))}function Gm(t,e){document.cookie=`${encodeURIComponent(t)}=${encodeURIComponent(e)}; max-age=31536000; path=/`}function ii(t){try{return t()}catch(e){if(!Km(e))throw e}}function Km(t){return t.name==="SecurityError"}function Ym(t,e,s){return t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(e)+"="+encodeURIComponent(`${s}`)}function ri(t){return new Zm(t)}class Zm{constructor(e){this._value=e;const s=n=>{this._value=n};ee(this,{set:s,args:(...n)=>s(n),t:()=>s(!0),f:()=>s(!1),merge:n=>s({...this._value,...n})})}get value(){return this._value}}class gt{constructor(){const e=this;e.promise=new Promise((s,n)=>{e.resolve=s,e.reject=n}),Object.freeze(this)}}class Jm{constructor(){this._index=-1,this._done=!1,this._aborted=!1,this._abortReason=void 0,this._error=void 0}get aborted(){return this._aborted}get abortReason(){return this._abortReason}get done(){return this._done}update(e,s=!1){this._done||(this._value=e,this._done=s,this._index++,this._resolution&&(this._resolution.resolve(),this._resolution=void 0))}error(e){this._error=e,this._resolution&&(this._resolution.reject(e),this._resolution=void 0)}abort(e){this._aborted=!0,this._abortReason=e,this._resolution&&(e instanceof Error?this._resolution.reject(e):this._resolution.resolve(),this._resolution=void 0)}async*[Symbol.asyncIterator](){let e=0;for(;;){if(this._error)throw this._error;if(this._aborted||(e>this._index&&(this._resolution||(this._resolution=new gt),await this._resolution.promise),this._aborted))break;const s=this._done,n=this._index+1;if(yield this._value,this._aborted||s)break;e=n}}}function Xm(t,{interval:e=1e3,errorLimit:s=10,onError:n,onResponse:i,signal:r}={}){if(r&&r.aborted)return[];let o=0,c,a=!1,u;function l(){c&&clearInterval(c),a=!0}const d=new Jm;return c=setInterval(async()=>{let m,E,g;try{if([m,E,g]=await t(r?{signal:r}:{}),a||!si(u)&&g<=u)return;si(g)||(u=g),i&&i(m,E,g),o=0}catch(O){n&&n(O),o++,o>s&&(l(),d.error(O));return}d.update(m,E),E&&l()},e),r&&r.addEventListener&&r.addEventListener("abort",()=>{l(),d.abort(r.reason)}),d}function eg(t,{onError:e=n=>console.error(n),transform:s=n=>n}={}){try{s(t)()}catch(n){e(n)}}function ol(t,e){const s=window[t]||(window[t]=[]);if(s._processed)return;s._processed=!0;const n=i=>eg(i,e);Object.defineProperty(s,"push",{value:n});for(const i of s)n(i)}const tg="1.12.7";let sg;try{sg=document.currentScript}catch{}async function cl(t){try{let e=ng(t);return e||(e=document.createElement("link"),e.rel="stylesheet",e.href=t,document.head.appendChild(e)),ig(e)}catch(e){console.error(e)}}function al(t){return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${tg}/dist/css/${t}.css`}function ng(t){return document.head.querySelector(`link[href="${t}"]`)}async function ig(t){await rg(t),await og(t)}async function rg(t){if(!t.sheet)return new Promise((e,s)=>{let n;t.onerror=()=>{n&&clearInterval(n),s()},n=setInterval(()=>{t.sheet&&(n&&clearInterval(n),e())},100)})}async function og(t){if(!ll(t))return new Promise(e=>{let s;s=setInterval(()=>{ll(t)&&(s&&clearInterval(s),e())},100)})}function ll(t){for(const e of document.styleSheets)if(e.ownerNode===t)return!0;return!1}function ul(t){let e;return s=>{e&&clearTimeout(e),e=setTimeout(()=>{e=void 0,s()},t)}}function fl(t,{depth:e=5,...s}={}){return Pr(t,e)}function Pr(t,e,s){if(e<=0)return"(...)";switch(typeof t){case"object":if(t)return t.length!==void 0?Array.prototype.map.call(t,n=>Pr(n,e-1)):t instanceof Node?ag(t):cg(t,e);default:return t}}function cg(t,e,s){const n={};if(e<=0)return n;for(const i in t){const r=t[i];typeof r!="function"&&(i.startsWith("_")&&typeof r=="object"&&r.constructor.name!=="Object"||(n[i]=Pr(r,e-1)))}return n}function ag(t){return t instanceof Element?`<${t.tagName.toLowerCase()}${t.id?` id="${t.id}"`:""}${t.className?` class="${t.className}"`:""}>`:`[TextNode](${t.length})`}function Ys(t,e){const s=Object.getOwnPropertyDescriptors(e),n=Object.getOwnPropertyDescriptors(t);for(const[i,r]of Object.entries(s))i!=="constructor"&&n[i]===void 0&&Object.defineProperty(t,i,r)}function oi(t){const e={},s=new Set;for(let n=t;n!==Object.prototype;n=Object.getPrototypeOf(n)){const i=Object.getOwnPropertyDescriptors(n);for(const r in i){if(r==="constructor"||r.startsWith("_")||s.has(r))continue;s.add(r);const{value:o}=i[r];o&&(e[r]=typeof o=="function"?o.bind(t):o)}}return Object.freeze(e)}function ci(t={},e={}){const s=t.metadata||e.metadata?z({...t.metadata,...e.metadata}):void 0,n=t._meta||e._meta?z({...t._meta,...e._meta}):void 0;return z({...t,...e,metadata:s,_meta:n})}function qe(t={},e={}){const s=t.context&&t.context.custom_context||e.context&&e.context.custom_context?z({...t.context&&t.context.custom_context,...e.context&&e.context.custom_context}):void 0,n=t.context||e.context?z({...t.context,...e.context,custom_context:s}):void 0;return z({...t,...e,context:n})}const lg=100,ug=4;function fg(t){const e=dg(t);return(s,n,i,r)=>{const o=e(i,n);return s+Math.max(r-i,0)*o/1e3}}function dg({speed:t=lg,acceleration:e=ug}={}){if(typeof t=="function")return t;if(typeof t!="number")throw new Error(`Invalid speed: ${t}`);if(typeof e!="number")throw new Error(`Invalid acceleration: ${e}`);return(s,n)=>{let i=t*(Math.random()+.5);return e>0&&n!==void 0&&s>n&&(i*=1+(s-n)*e/1e3),i}}const Nr=Symbol.for("miso:resources");class hg{constructor(){this._resources=new Map;const e=window[Nr]||[];for(const s of e)try{const[n,i]=s;this.push([n,i])}catch{}}push([e,s]){dl(this._resources,e).resolve(s)}async get(e){return dl(this._resources,e).promise}}function dl(t,e){if(t.has(e))return t.get(e);const s=new gt;return t.set(e,s),s}function _g(){return window[Nr]||(window[Nr]=new hg)}class pg{constructor(e,s){this._dispatchRequested=!1,this._requests=[],this._run=e,this._error=s||(n=>console.error(n)),this._bulkId=0,this._dispatch=this._dispatch.bind(this)}get info(){return{bulkId:this._bulkId,index:this._requests.length}}async run(e){const s=new gt;return this._requests.push({action:e,resolution:s}),this._requestDispatch(),s.promise}_requestDispatch(){this._dispatchRequested||(this._dispatchRequested=!0,setTimeout(this._dispatch))}_dispatch(){if(!this._dispatchRequested)return;this._dispatchRequested=!1;const e=this._requests,s=this._bulkId++;this._requests=[];try{this._run(e,{bulkId:s})}catch(n){this._error(n)}}}class ds{constructor({target:e,error:s,replays:n=[]}={}){if(this._error=s||(i=>console.error(i)),!Array.isArray(n))throw new Error(`Replays option must be an array of strings: ${n}`);this._replays=new Set(n),this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={},e&&this._injectSubscribeInterface(e)}emit(e,s){const n={data:s,meta:{name:e,ts:Date.now()}},i=this._namedCallbacks[e];if(i)for(const r of i)r(n);for(const r of this._unnamedCallbacks)r(n);this._shallStoreForReplay(e)&&(this._pastEvents[e]||(this._pastEvents[e]=[])).push(n)}on(e,s){return this._checkName(e),this._checkCallback(s),this._on(e,this._wrapCallback(s))}once(e){this._checkName(e);const s=this;return new Promise((n,i)=>{const r=s._on(e,o=>{setTimeout(()=>r());try{n(o)}catch(c){i(c)}})})}clear(){this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={}}_checkName(e){if(typeof e!="string")throw new Error(`Event name should be a string: ${e}`)}_checkCallback(e){if(typeof e!="function")throw new Error(`Event callback should be a function: ${e}`)}_shallStoreForReplay(e){return this._replays.has(e)}_wrapCallback(e){const s=this;return({data:n,meta:i})=>{try{e(n,i)}catch(r){s._error(r)}}}_on(e,s){if(e==="*"?this._unnamedCallbacks.push(s):(this._namedCallbacks[e]||(this._namedCallbacks[e]=[])).push(s),e==="*")for(const n in this._pastEvents)this._pastEvents[n].forEach(s);else this._pastEvents[e]&&this._pastEvents[e].forEach(s);return()=>this._off(e,s)}_off(e,s){if(e==="*")Lr(this._unnamedCallbacks,s);else{const n=this._namedCallbacks[e];n&&Lr(n,s)}}_injectSubscribeInterface(e){Ut(e,this,["on","once"])}}function mg(t,e){if(t!==void 0&&typeof t!="string"&&e===void 0&&(e=t,t=void 0),t!==void 0&&(typeof t!="string"||!t))throw new Error(`Invalid Component name: "${t}"`);return Object.freeze({name:t,parent:e,path:gg(t,e),uuid:Ks()})}function gg(t,e){return Object.freeze([...e&&e.meta&&e.meta.path||[],...t?[t]:[]])}class Re{constructor(e,s){const n=mg(e,s);ee(this,{meta:n});const i=this._error=this._error.bind(this);this._events=new ds({target:this,error:i,replays:["child"]}),this._warn=this._warn.bind(this),s=n.parent,s&&s._events&&s._events.emit("child",this)}_warn(...e){const s=this.meta.parent;(s&&s._warn||console.warn)(...e)}_error(...e){const s=this.meta.parent;(s&&s._error||console.error)(...e)}}Nm(Re,"miso:component");class hl extends Re{constructor(e,s,{libName:n,keyName:i}={}){switch(super(e,s),this._events._replays.add("register"),this._libraries={},this._libResolutions={},this._libName=n,typeof i){case"string":this._keyFn=(r=>r[i]);break;case"function":this._keyFn=i;break;default:throw new Error(`Expect keyName to be a string or a function: ${i}`)}}isRegistered(e){return this._checkKey(e),!!this._libraries[e]}get registered(){return Object.values(this._libraries)}async whenRegistered(e){if(this.isRegistered(e))return this._libraries[e];const{promise:s}=this._libResolutions[e]||(this._libResolutions[e]=new gt);return s}register(...e){for(const s of e)this._register(s)}_checkKey(e){if(typeof e!="string"||!e)throw new Error(`Expect key to be a non-empty string: ${e}`)}_checkLib(e){if(typeof e!="function")throw new Error(`Expect lib to be a class or function: ${e}`)}_register(e){this._checkLib(e);const s=this._keyFn(e);this._checkKey(s);const n=this._libraries||(this._libraries={});n[s],n[s]=e,this._libResolutions[s]&&this._libResolutions[s].resolve(e),this._events.emit("register",e)}}class bg{constructor(e,s){this._callback=e,this._options=s||{},s!==!1&&(this._intersection=new IntersectionObserver(this._handleIntersection.bind(this),{threshold:s.area||.5}),this._continuity=new il(this._handleContinuity.bind(this),{onDuration:s.duration||1e3})),this._displayed=void 0,this._intersecting=!1,this._triggered=new Set}observe(e){this._options!==!1&&this._intersection.observe(e)}unobserve(e){this._options!==!1&&this._intersection.unobserve(e)}display(e){this._options!==!1&&(this._triggered.has(e)&&(e=void 0),this._displayed!==e&&(this._displayed=e,this._continuity.value=!1,this._syncContinuity()))}disconnect(){this._options!==!1&&(this._continuity.disconnect(),this._intersection.disconnect())}get triggeredCount(){return this._triggered.size}get triggered(){return new Set(this._triggered)}_syncContinuity(){this._continuity.value=this._intersecting&&this._displayed!==void 0}_handleIntersection(e){this._intersecting=e[0].isIntersecting,this._syncContinuity()}_handleContinuity(e){const s=this._displayed;if(e&&s!==void 0){if(this._triggered.has(s))return;this._triggered.add(s),this._displayed=void 0,this._callback(s)}}}class wg{constructor(e){this._ac=new AbortController,this._timeout=e,this.touch()}clear(){this._timeoutId!==void 0&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}touch(){this.clear(),this._timeoutId=setTimeout(()=>this.abort(),this._timeout)}get signal(){return this._ac.signal}abort(e){this.clear(),this._ac.abort(e||new Error(`Stall timeout: data stay unchanged for ${this._timeout/1e3} seconds.`))}}const _l=Object.freeze({DATA_ENDPOINT:"https://api-edge.askmiso.com/v1",EVENT_ENDPOINT:"https://api.askmiso.com/v1"});class pl{constructor(e,s){this._client=e,this._root=s,this._bulk=new pg(this._runBulkFetch.bind(this),e._error.bind(e))}async fetch(e,s,{method:n="POST",headers:i,timeout:r}={}){const{apiKey:o,request:c={}}=this._client.options;r=r||c.timeout;const a=n!=="GET"&&s!=null?JSON.stringify(s):void 0,u=r?AbortSignal.timeout(r):void 0,l=await(this._root._customFetch||window.fetch)(e,z({method:n,headers:i,body:a,cache:"no-cache",mode:"cors",signal:u})),d=await l.json();if(l.status>=400||d.errors){var m=new Error(d.message);throw m.data=d,m.status=l.status,m}return d}get bulkInfo(){return this._bulk.info}async fetchForBulk(e,s,n,{method:i}={}){if(i&&i!=="POST")throw new Error(`Non-POST API is not supported in bulk mode: ${url}`);return this._bulk.run({apiGroup:e,apiName:s,payload:n})}async _runBulkFetch(e){const s=this.url(["bulk"]),n={requests:e.map(({action:{apiGroup:r,apiName:o,payload:c}})=>({api_name:`${r}/${o}`,body:c}))},{data:i}=await this.fetch(s,n);for(let r=0,o=e.length;r<o;r++){const{resolution:c}=e[r],{error:a,status_code:u,body:l}=i[r];u>=400||a?c.reject({status_code:u,body:l}):c.resolve(l)}}sendBeacon(e,s,{method:n}={}){if(n&&n!=="POST")throw new Error(`Non-POST API is not supported in useBeacon mode: ${e}`);if(!(this._root._customSendBeacon?this._root._customSendBeacon(e,JSON.stringify(s)):window.navigator.sendBeacon(e,JSON.stringify(s))))throw new Error(`Send beacon unsuccessful: ${e}`)}url(e){const{apiKey:s}=this._client.options,n=e.filter(r=>r).join("/");return`${`${this.getApiEndpoint(n)}/${n}`}?api_key=${window.encodeURIComponent(s)}`}getApiEndpoint(e){const{dataEndpoint:s=_l.DATA_ENDPOINT,eventEndpoint:n=_l.EVENT_ENDPOINT}=this._client.options;return e==="interactions"?n:s}applyUrlPasses(e,{apiGroup:s,apiName:n,url:i}){const r=this._client;for(const o of this._root._urlPasses)try{i=o({client:r,apiGroup:s,apiName:n,url:i})||i}catch(c){(e._error||console.error)(c)}return i}applyPayloadPasses(e,{apiGroup:s,apiName:n,payload:i}){const r=this._client;for(const o of this._root._payloadPasses)try{i=o({client:r,apiGroup:s,apiName:n,payload:i})||i}catch(c){(e._error||console.error)(c)}return i}applyHeaderPasses(e,{apiGroup:s,apiName:n,payload:i,headers:r,options:o}){const c=this._client;for(const a of this._root._headersPasses)try{r=a({client:c,apiGroup:s,apiName:n,payload:i,headers:r,options:o})||r}catch(u){(e._error||console.error)(u)}return r}}class Zs extends Re{constructor(e,s){super(s,e),this._apiPath=s,this.helpers=e.helpers,this.clientOptions=e._client.options,this.context=e._client.context}async _run(e,s,n={}){const{bulk:i}=n,r=i?{bulk:this.helpers.bulkInfo}:void 0,o=this._apiPath,c=this._url({apiGroup:o,apiName:e,payload:s,options:n}),a=this._headers({apiGroup:o,apiName:e,payload:s,options:n});s=this._preprocess({apiGroup:o,apiName:e,payload:s,options:n});const u={apiGroup:o,apiName:e,payload:s,url:c,headers:a,options:n};this._events.emit("request",{...u,...r});const l=await this._send(u),d={...u,response:l};return this._events.emit("response",{...d,...r}),this._postprocess(d)}_headers({apiGroup:e,apiName:s,payload:n,options:i}){return this.helpers.applyHeaderPasses(this,{apiGroup:e,apiName:s,payload:n,headers:{},options:i})}_preprocess({apiGroup:e,apiName:s,payload:n,options:i}){return this.helpers.applyPayloadPasses(this,{apiGroup:e,apiName:s,payload:n,options:i})}_url({apiGroup:e,apiName:s,options:n}){const i=this.helpers.url([e,s],n);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:s,url:i,options:n})}async _send({apiGroup:e,apiName:s,url:n,headers:i,payload:r,options:{bulk:o,...c}={}}){return o?this.helpers.fetchForBulk(e,s,r):this.helpers.fetch(n,r,{...c,headers:i})}_postprocess({response:e}){return e.data}}const{GROUP:yg,NAME:ml}=Gs;class gl extends Zs{constructor(e){super(e,yg.INTERACTIONS)}async upload(e,s){try{return await this._run(ml.UPLOAD,e,s)}catch(n){if(n.status===400&&n.message&&n.message.toLowerCase().indexOf("playground")>-1)this._warn("Ignore interactions uploaded to playground app.");else throw n}}_url({apiGroup:e,apiName:s,options:n}){const i=this.helpers.url([this._apiPath],n);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:s,url:i,options:n})}_preprocess({apiGroup:e,apiName:s,payload:n}){return s===ml.UPLOAD&&(n=this._normalizeUploadPayload(n)),super._preprocess({apiGroup:e,apiName:s,payload:n})}_normalizeUploadPayload(e){if(typeof e!="object")throw new Error(`Interactions payload has to be either an object or an array of objects: ${e}`);return Array.isArray(e)||(e=[e]),{data:e}}async _send({options:{useBeacon:e=!0,...s}={},...n}){if(e){const{url:i,payload:r}=n;return this.helpers.sendBeacon(i,r,s),{}}else return super._send({...n,options:s})}}class Eg{constructor(e={}){this._ac=new AbortController,this._options=e}async get(e){return this._get({...this._options,...e})}_get(e){throw new Error("Not implemented")}abort(e){this._ac.abort(e)}[Symbol.asyncIterator](){const e=async({signal:u}={})=>{const l=await this.get();return[l,this._isFinished(l),this._revisionOf(l)]};let{pollingInterval:s,signal:n,stallTimeout:i=12e4,...r}=this._options;const o=new wg(i);n=Lm(this._ac.signal,o.signal,n);let c;return Xm(e,{interval:s,signal:n,onResponse:(u,l)=>{l?o.clear():this._isUpdated(c,u)&&o.touch(),c=u},...r})[Symbol.asyncIterator]()}_isFinished(e){return!!(e&&e.finished)}_isUpdated(e,s){return!e||e.answer_stage!==s.answer_stage||ai(e.answer)!==ai(s.answer)||ai(e.reasoning)!==ai(s.reasoning)}_revisionOf(e){return e&&e.revision}}class bl extends Eg{constructor(e,s,n,i){super(i),this._api=e,this._method=s,this._id=n}async _get(e){return this._api[this._method](this._id,e)}}function ai(t=""){return t.length}const{GROUP:Sg,NAME:bt}=Gs;let wl=class extends Zs{constructor(e){super(e,Sg.ASK)}async questions(e,s={}){if(Sl(e)&&(e={question_id:e}),e.question_id)return new yl(this,e,s);const n=await this._run(bt.QUESTIONS,e,s);return new yl(this,n,s)}async _questions(e,s){return this._run(bt.QUESTIONS,e,s)}async _questionGet(e,s){return this._run(`${bt.QUESTIONS}/${e}/answer`,void 0,{...s,method:"GET"})}async relatedQuestions(e,s={}){return this._run(bt.RELATED_QUESTIONS,e,s)}async trendingQuestions(e,s={}){return this._run(bt.TRENDING_QUESTIONS,e,s)}async search(e,s={}){if(Sl(e)&&(e={question_id:e}),e.question_id)return new El(this,e,s);const n=await this._run(bt.SEARCH,e,s);return n.question_id?new El(this,n,s):n}async _searchGet(e,s){return this._run(`${bt.QUESTIONS}/${e}/answer`,void 0,{...s,method:"GET"})}async autocomplete(e,s){return this._run(bt.AUTOCOMPLETE,e,s)}async searchAutocomplete(e,s){return this._run(bt.SEARCH_AUTOCOMPLETE,e,s)}};class yl extends bl{constructor(e,s,n={}){super(e,"_questionGet",s.question_id,n),this._response=s}get questionId(){return this._id}}class El extends bl{constructor(e,s,n={}){super(e,"_searchGet",s.question_id,n),ee(this,s),this._response=s}get questionId(){return this._id}}function Sl(t){return typeof t=="string"&&t.charAt(0)!=="{"}const{GROUP:Tg,NAME:Ur}=Gs;let Tl=class extends Zs{constructor(e){super(e,Tg.SEARCH)}async search(e,s){return this._run(Ur.SEARCH,e,s)}async autocomplete(e,s){return this._run(Ur.AUTOCOMPLETE,e,s)}async multipleGet(e,s){return this._run(Ur.MGET,e,s)}};const{GROUP:Og,NAME:hs}=Gs;let Ol=class extends Zs{constructor(e){super(e,Og.RECOMMENDATION)}async userToProducts(e,s){return this._run(hs.USER_TO_PRODUCTS,e,s)}async userToCategories(e,s){return this._run(hs.USER_TO_CATEGORIES,e,s)}async userToAttributes(e,s){return this._run(hs.USER_TO_ATTRIBUTES,e,s)}async userToTrending(e,s){return this._run(hs.USER_TO_TRENDING,e,s)}async userToHistory(e,s){return this._run(hs.USER_TO_HISTORY,e,s)}async productToProducts(e,s){return this._run(hs.PRODUCT_TO_PRODUCTS,e,s)}};class Al extends Re{constructor(e,s){super("api",e),this._client=e,this.helpers=new pl(e,s),this.interactions=new gl(this),this.ask=new wl(this),this.search=new Tl(this),this.recommendation=new Ol(this)}}const Ag=Object.freeze(Object.defineProperty({__proto__:null,Api:Al,ApiBase:Zs,ApiHelpers:pl,Ask:wl,Interactions:gl,Recommendation:Ol,Search:Tl},Symbol.toStringTag,{value:"Module"}));let vl=class extends Re{constructor(e){super("context",e),this._client=e}};const vg={api:Ag,context:{Context:vl}};class Cg{constructor(e){ee(this,{install:e})}}function Ig(t,e,s){const n=t.slice(4);if(e==="dev"){const i=s.src,r=i.indexOf("?"),o=r<0?i.length:r,c=i.lastIndexOf("/",o)+1,a=i.indexOf(".",c),u=a<0?"":i.slice(a,o);return`${i.slice(0,c)}plugins/${n}${u}`}else return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${e}/dist/umd/plugins/${n}.min.js`}class xg extends hl{constructor(e){super("plugins",e,{libName:"plugin class",keyName:"id"}),this._root=e,this._currentScript=document.currentScript,this._events._replays.add("install").add("subtree"),this._installed={},this._installedResolutions={},this._useRequests={},this._subtrees=[],this.context=new Rg(this,vg),this.plugins=new Lg(this)}isInstalled(e){return this._checkKey(e),!!this._installed[e]}get installed(){return Object.values(this._installed)}get(e){return this._installed[e]}getPluginClass(e){return this._libraries[e]}use(e,s){if(typeof e=="function"&&e.id&&typeof e.id=="string"){this.register(e),this.use(e.id,s);return}let n;if(typeof e=="string"&&this.isInstalled(e)){n=this.get(e),this._tryConfig(n,s);return}if(typeof e=="string"&&!this.isRegistered(e)){(this._useRequests[e]||(this._useRequests[e]=[])).push(s);return}n=this._instantiate(e,s),this._install(n)}async install(e,s){return this.use(e,s),typeof e=="string"&&!this.isRegistered(e)&&await this._tryRegisterRemotely(e),this.whenInstalled(e)}async whenInstalled(e){if(typeof e=="function"&&e.id&&typeof e.id=="string"&&(e=e.id),this.isInstalled(e))return this.get(e);const{promise:s}=this._installedResolutions[e]||(this._installedResolutions[e]=new gt);return s}addSubtree(e){this._subtrees.push(e),this._events.emit("subtree",e)}addPayloadPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._payloadPasses.push(e)}addHeadersPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._headersPasses.push(e)}addUrlPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._urlPasses.push(e)}setCustomFetch(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._customFetch=e}setCustomSendBeacon(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._customSendBeacon=e}onHubUpdate(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubUpdateCallbacks.push(e)}onHubEmit(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubEmitCallbacks.push(e)}_tryConfig(e,s){s!==void 0&&(typeof e.config=="function"?(e.config(s),this._events.emit("config",[e,s])):this._warn(`Attempt to pass options to plugin "${e.id}", which offers no config() method.`))}_instantiate(e,s){switch(typeof e){case"string":this._checkKey(e);const n=this._libraries[e];if(!n)throw new Error(`Plugin class not found: ${e}`);const i=new n;return ee(i,{id:e}),this._tryConfig(i,s),i;case"function":return new Cg(e)}throw new Error(`Unexpected parameters: ${e}`)}_install(e){if(typeof e.install!="function")throw new Error(`Expect plugin.install to be a function: ${e}`);try{e.installed=!1,e.install(this.MisoClient,this.context),e.installed=!0}catch(s){throw s}e.id&&(this._installed[e.id]=e,this._installedResolutions[e.id]&&(this._installedResolutions[e.id].resolve(e),delete this._installedResolutions[e.id])),this._events.emit("install",e)}_register(e){super._register(e),this._fulfillUseRequests(e.id)}_fulfillUseRequests(e){const s=this._useRequests[e];if(s){for(const n of s)try{this.use(e,n)}catch(i){this._error(i)}delete this._useRequests[e]}}async _tryRegisterRemotely(e){if(e.startsWith("std:"))try{await this._registerStdRemotely(e);return}catch(s){console.error(s)}throw new Error(`Cannot register plugin remotely: ${e}`)}async _registerStdRemotely(e){const{version:s}=this._root,n=s==="dev"?`plugin:${e}@dev:${this.MisoClient.uuid}`:`plugin:${e}@${s}`;if(!document.querySelector(`script[data-request="${n}"]`)){const r=document.createElement("script");r.async=!0,r.src=Ig(e,s,this._currentScript),r.setAttribute("data-request",n),document.head.appendChild(r)}const i=await new _g().get(n);!this.isRegistered(e)&&this.register(i)}}class Rg{constructor(e,s){Ut(this,e,["getPluginClass","addSubtree","addPayloadPass","addHeadersPass","addUrlPass","setCustomFetch","setCustomSendBeacon","onHubUpdate","onHubEmit","whenInstalled","whenRegistered"]),ee(this,{classes:s})}}class Lg{constructor(e){Ut(this,e,["installed","registered","isInstalled","isRegistered","whenInstalled","whenRegistered","get","register","use","install"])}}class kg extends Re{constructor(){super(),this._events._replays.add("create"),this._pluginRoot=new xg(this),this._clients=[],this._payloadPasses=[],this._headersPasses=[],this._urlPasses=[],this._customFetch=void 0,this._customSendBeacon=void 0,this._hubUpdateCallbacks=[],this._hubEmitCallbacks=[],this.version=el,this._cmdRes=new gt}get instances(){return[...this._clients]}async any(){return this._clients[0]||this._any||(this._any=(await this._events.once("create")).data)}get cmdDone(){return this._cmdRes.promise}}const Dt=new kg;function $g(t){const e=Dt._pluginRoot;return Dt.MisoClient=e.MisoClient=t,Ut(t,Dt,["version","instances","any","meta","on","once","cmdDone"]),Ut(t,e,["plugins"]),t}function Pg(t){Dt._clients.push(t),Dt._events.emit("create",t)}function Ng(){Dt._cmdRes.resolve()}const Ug=Object.freeze(Object.defineProperty({__proto__:null,debounce:ul,viewable:$r},Symbol.toStringTag,{value:"Module"})),{currentScript:Cl}=document;let Dr=class gn extends Re{static attach(){if((window.MisoClients||(window.MisoClients=[])).push(gn),window.MisoClient){window.MisoClient!==gn&&console.warn(`window.MisoClient already exists: (${window.MisoClient.version}).`);return}window.MisoClient=gn}static debug(){}constructor(e){super("client",Dt),this._config(e),this.context=new vl(this),this.api=new Al(this,Dt),Pg(this)}get version(){return gn.version}_config(e){this.options=Object.freeze(this._normalizeOptions(e))}_normalizeOptions(e={}){if(typeof e=="string"&&(e={apiKey:e}),e.readConfigFromScriptUrl&&(e={...this._readConfigFromScriptUrl(),...e}),!e.apiKey)throw new Error("Require API key to initialize miso client.");return e.request&&e.request.sendApiKeyByHeader&&console.warn('`sendApiKeyByHeader` option is deprecated. Please call `MisoClient.plugins.use("std:header-api-key");` instead.'),e.dataEndpoint=e.dataEndpoint||e.apiHost,e.eventEndpoint=e.eventEndpoint||e.apiHost,delete e.apiHost,z(e)}_readConfigFromScriptUrl(){const e=Cl.src||Cl.href,s=new URL(new Request(e).url).searchParams;return z({apiKey:s.get("api_key")||void 0})}};Dr.helpers=Ug,ee(Dr,{uuid:Ks()});const wt=$g(Dr),{GROUP:Dg,NAME:Fg}=Gs,Mg="std:context";class jg extends Re{static get id(){return Mg}constructor(){super("context")}install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this)),s.addHeadersPass(this._modifyHeaders.bind(this)),s.addPayloadPass(this._modifyPayload.bind(this))}_injectClient(e){const s=new Bg(this);Pm(e.context,s,["anonymous_id","user_id","user_hash","user_type","site","auth"])}_modifyHeaders({client:e,headers:s}){const{auth:n}=e.context;return n&&(s={...s,Authorization:n}),s}_modifyPayload({client:e,apiGroup:s,apiName:n,payload:i}){if(!i)return i;switch(s){case Dg.INTERACTIONS:return n===Fg.UPLOAD?this._modifyPayloadForInteractions(e,i):i;default:return this._modifyPayloadForQueries(e,i)}}_modifyPayloadForQueries(e,s){const{user_id:n,user_hash:i,user_type:r,anonymous_id:o,site:c}=e.context;return ci(s,{...n?{user_id:n,user_type:r,user_hash:i}:{anonymous_id:o},metadata:c?{site:c}:void 0})}_modifyPayloadForInteractions(e,{data:s}){const{anonymous_id:n,user_id:i,site:r}=e.context,o={anonymous_id:n,user_id:i},c=r?{site:r}:void 0,a=c?{custom_context:c}:void 0;return s=s.map(u=>qe(u,{...o,context:a})),{data:s}}}let Il;function qg(){return Il||(Il=Qm("miso_anonymous_id",Ks))}class Bg{constructor(e){this._plugin=e,this._props={}}get anonymous_id(){return this._props.anonymous_id||qg()}set anonymous_id(e){this._requireString("anonymous_id",e),this._set("anonymous_id",e)}get user_id(){return this._props.user_id}set user_id(e){this._requireString("user_id",e),this._set("user_id",e)}get user_hash(){return this._props.user_hash}set user_hash(e){this._requireString("user_hash",e),this._set("user_hash",e)}get user_type(){return this._props.user_type}set user_type(e){this._requireString("user_type",e),this._set("user_type",e)}get site(){return this._props.site}set site(e){this._requireString("site",e),this._set("site",e)}get auth(){return this._props.auth}set auth(e){this._requireString("auth",e),this._set("auth",e)}_set(e,s){this._props[e]=s,this._plugin._events.emit("set",`${e} = '${s}'`)}_requireString(e,s){if(typeof s!="string"&&typeof s<"u")throw new Error(`${e} must be a string`);return s}}const zg="std:page-info";class Hg{static get id(){return zg}constructor(){}install(e,{addPayloadPass:s}){s(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:s,payload:n}){return e==="interactions"&&s==="upload"?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:e}){return e=e.map(s=>({...s,context:{...Vg(),...s.context}})),{data:e}}}function Vg(){return z({page:Qg(),campaign:Wg()})}function Qg(){return z({url:window.location.href,referrer:document.referrer||void 0,title:document.title})}function Wg(){const t=new URLSearchParams(window.location.search);let e=z({source:t.get("utm_source")||void 0,medium:t.get("utm_medium")||void 0,name:t.get("utm_campaign")||void 0,term:t.get("utm_term")||void 0,content:t.get("utm_content")||void 0});return Object.keys(e).length===0?void 0:e}const Gg="std:auto-events";class Kg extends Re{static get id(){return Gg}constructor(){super("auto-events"),this._contexts=new WeakMap}install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this)),s.addPayloadPass(this._captureApiRequest.bind(this))}_injectClient(e){const s=new Yg(this);this._contexts.set(e,s),e.autoEvents=s.interface}_captureApiRequest({client:e,apiGroup:s,apiName:n,payload:i}){switch(s){case fe.SEARCH:switch(n){case je.SEARCH:this._captureSearchApiRequest(e,i);break}break}}_captureSearchApiRequest(e,{q:s}){if(!s||s==="*")return;const n=this._contexts.get(e);!n||!n._config.search||e.api.interactions.upload({type:"search",search:{keywords:s},context:{custom_context:{channel:"miso_api"}}})}}class Yg{constructor(e){this._plugin=e,this._config={search:!0},this.interface=Object.freeze({config:this.config.bind(this)})}config(e={}){if(typeof e!="object")throw new Error(`Config options must be an object or undefined: ${e}`);for(const s of e){if(!this._config.hasOwnProperty(s))continue;const n=this._config[s],i=e[s];i!==n&&(this._config[s]=n,this._plugin._events.emit("config",`${s}: ${n} -> ${i}`))}return Object.freeze({...this._config})}}const Zg="std:interactions";class Jg{static get id(){return Zg}constructor(){}install(e,{addPayloadPass:s}){s(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:s,payload:n}){return e==="interactions"&&s==="upload"?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:e}){return{data:e.map(Xg)}}}function Xg(t){const{context:e={}}=t,s={...e.custom_context,sdk_version:el};return s.uuid||(s.uuid=Ks()),{...t,context:{...e,custom_context:s}}}const Fr="std:native-fetch";function eb(t){return t.toString().indexOf("[native code]")>-1}let Mr,xl;const Rl=(()=>{if(eb(window.fetch))return Mr="original",window.fetch;try{const t=document.createElement("iframe");return t.style.display="none",document.head.appendChild(t),Mr="borrowed",t.contentWindow.fetch}catch(t){xl=t}})();class tb{static get id(){return Fr}install(e,s){if(!Rl){e.debug(`<plugin:${Fr}>`,"[error]",`Failed to obtain native fetch: ${xl.message}`);return}s.setCustomFetch(Rl),e.debug(`<plugin:${Fr}>`,"[info]",`Using ${Mr} native fetch`)}}const sb="std:api-patch";class nb extends Re{static get id(){return sb}constructor(){super("api-patch")}install(e,s){s.addSubtree(this),s.addPayloadPass(this._patchApiPayload.bind(this))}_patchApiPayload(e){let{payload:s,...n}=e;return s&&(s=this._copyMetadataToMeta(s,n),s=this._suppressMetadata(s,n),s=this._suppressUserType(s,n),s)}_copyMetadataToMeta(e,{apiGroup:s}){switch(s){case fe.ASK:return e.metadata?{...e,_meta:e.metadata}:e;default:return e}}_suppressMetadata(e,{apiGroup:s}){switch(s){case fe.SEARCH:case fe.RECOMMENDATION:const{_meta:n,metadata:i,...r}=e;return r;default:return e}}_suppressUserType(e,{apiGroup:s}){switch(s){case fe.SEARCH:case fe.RECOMMENDATION:const{user_type:n,...i}=e;return i;default:return e}}}const Ll="std:header-api-key";class ib{static get id(){return Ll}install(e,s){s.addUrlPass(this._modifyUrl.bind(this)),s.addHeadersPass(this._modifyHeaders.bind(this)),e.debug(`<plugin:${Ll}>`,"[info]","Send API key in header")}_modifyUrl({url:e}){return e.replace(/[?&]api_key=[^&]*/g,"")}_modifyHeaders({client:e,headers:s}){const{apiKey:n}=e.options;return n?{...s,"X-API-KEY":n}:s}}const li="miso-logdump",kl="miso-logdump",$l=`${kl}__download-btn`,Pl="Miso Log";class rb{constructor(e={}){this._options=e,this._logs=[]}config(e={}){this._options={...this._options,...e}}async showDownloadButton(){await ub();let e=document.getElementById(li);if(!e){const s=document.createElement("div");s.textContent=this._options.logDownloadButtonText||Pl,s.classList.add($l),s.addEventListener("click",()=>this.download()),e=document.createElement("div"),e.id=li,e.classList.add(kl),e.appendChild(s),document.body.appendChild(e)}e.style.display="block"}_syncUi(){const e=document.getElementById(li),s=e&&e.querySelector(`.${$l}`);s&&(s.textContent=this._options.logDownloadButtonText||Pl)}hideDownloadButton(){const e=document.getElementById(li);e&&(e.style.display="none")}download(){const e=this._logs,s=new Blob([cb(e)],{type:"application/json"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download=this._filename(),i.click()}_filename(){let{logFilename:e}=this._options;if(typeof e=="function"){const s=Nl();e=e({timestamp:s})}return e&&typeof e=="string"?e:ob()}clear(){this._logs=[]}}function ob(){return`miso-log.${Nl()}.jsonl`}function Nl(){return new Date().toISOString().replaceAll(/[\:\.]/g,"-")}function cb(t){return t.map(e=>JSON.stringify(fl(ab(e),{depth:10}))).join(`
`)}function ab(t){if(t[0]==="<progressive-markdown>"){const e=t.length;return[...t.slice(0,e-1),lb(t[e-1])]}return t}function lb(t){return t&&fl(t,{depth:2})}let Ul;async function ub(){return Ul||(Ul=cl(al("logdump")))}const Dl="std:debug";class fb{constructor(e={}){this._options=e,this._logs=new rb(e)}static get id(){return Dl}install(e){this._injectComponents(e),e.debug=(...s)=>this._logr(...s),e.logs=this._logs}config(e={}){this._options={...this._options,...e},this._logs.config(e),e.preserveLog&&this._log(Dl,"ua",window.navigator.userAgent)}_injectComponents(e,s=[]){e.on("child",n=>this._injectComponents(n,s)),e.on("subtree",n=>this._injectComponents(n,s.concat(e.meta.path))),e.on("*",(n,i)=>this._handleEvent(e,i,n,s))}_handleEvent(e,{name:s},n,i=[]){if(s==="child"||s==="subtree")return;const r=i.concat(e.meta.path);if(!r.length)switch(s){case"create":this._handleCreateClient(s,n);return}switch(r[0]){case"client":switch(r[1]){case"api":this._handleApiEvent(s,{...n,groupName:r[2]});return}break;case"plugins":r.length===1?this._handlePluginsEvent(s,n):this._handlePluginSpecificEvent(r[1],r.slice(2),s,n);return}this._logw(r.join("."),s,n)}_handleCreateClient(e,s){this._logw("client",e,s)}_handleApiEvent(e,{groupName:s,apiName:n,url:i,bulk:r,...o}){const c=new URL(i).pathname,a=["api",e];if(r&&a.push(`(bulk ${r.bulkId})`),a.push(`POST ${c}`),s==="interactions"){const u=o.payload.data[0],{type:l,custom_action_name:d,context:{custom_context:{property:m}={}}={}}=u,E=l==="custom"&&d?`${l}:${d}`:l;a.push(m?`${E} (${m})`:`${E}`)}a.push([{...o,url:i}]),this._log(...a)}_handlePluginsEvent(e,s){let n=[];Array.isArray(s)&&(n=s.slice(1),s=s[0]),this._log("plugins",e,`${s.id||"(anonymous)"}`,[s,...n])}_handlePluginSpecificEvent(e,s,n,i){this._logw([e,s.join(".")],n,i)}_getPath(e){const s=[];for(let n=e;n;n=n.meta.parent)n.meta.name&&s.push(n.meta.name);return s.reverse()}_logw(e,s,n){n===void 0?this._log(e,s):Array.isArray(n)?this._log(e,s,...n.map(Fl)):this._log(e,s,Fl(n))}_log(e,s,...n){this._logr(_b(e),pb(s),...n)}_logr(...e){const s=this._options.console||{};this._options.preserveLog&&this._logs._logs.push(e),console.log(db(s),hb(s),...e)}}function db({text:t="Miso"}={}){return`%c${t}`}function hb({color:t="#fff",background:e="#334cbb"}={}){return`color: ${t}; background-color: ${e}; padding: 2px 2px 1px 4px;`}function _b(t){return`<${typeof t=="string"?t:t.filter(e=>e).join("/")}>`}function pb(t){return`[${t}]`}function Fl(t){const e=typeof t;return e==="function"||e==="object"&&!Array.isArray(t)?[t]:t}const mb="std:dry-run";class gb{constructor(e={}){this._options=e,this.id="std:dry-run",this.name="dry-run"}static get id(){return mb}install(e,{addUrlPass:s}){s(this._modifyUrl.bind(this))}_modifyUrl({apiGroup:e,apiName:s,url:n}){return e==="interactions"&&s==="upload"?Ym(n,"dry_run","1"):n}}function Ml(t,e){return e==null||e<=t?t:t+Math.floor(Math.random()*(e-t+1))}const bb={"code-span":()=>["`","`"],"emphasis-1":()=>qr(jr(1),2),"emphasis-2":()=>qr(jr(2),2),"emphasis-3":()=>qr(jr(3),2),strikethrough:()=>["~","~"],link:({url:t="https://miso.ai"}={})=>["[",`](${t})`]};function jr(t=[1,3]){return t=typeof t=="number"?t:Ml(...t),"_*".charAt(Ml(0,1)).repeat(t)}const wb=Object.keys(bb);new Set(wb);function qr(t,e){const s=[];for(let n=0;n<e;n++)s.push(typeof t=="function"?t():t);return s}wt.plugins.register(fb,gb,tb,ib),wt.plugins.use(jg),wt.plugins.use(Hg),wt.plugins.use(Kg),wt.plugins.use(Jg),wt.plugins.use(nb);const yb="data-miso-product-id",Br="default",p=Object.freeze({CONTAINER:"container",BANNER:"banner",QUERY:"query",FEEDBACK:"feedback",PRODUCTS:"products",CATEGORIES:"categories",ATTRIBUTES:"attributes",RESULTS:"results",ITEMS:"items",QUESTION:"question",ANSWER:"answer",REASONING:"reasoning",IMAGES:"images",SOURCES:"sources",RELATED_RESOURCES:"related_resources",FOLLOW_UP_QUESTIONS:"follow_up_questions",QUERY_SUGGESTIONS:"query_suggestions",RELATED_QUESTIONS:"related_questions",AFFILIATION:"affiliation",KEYWORDS:"keywords",FACETS:"facets",TOTAL:"total",MORE:"more",SORT:"sort",ERROR:"error"}),Eb=new Set([p.PRODUCTS,p.CATEGORIES,p.ATTRIBUTES,p.RESULTS,p.ITEMS,p.QUESTION,p.ANSWER,p.REASONING,p.IMAGES,p.SOURCES,p.RELATED_RESOURCES,p.FOLLOW_UP_QUESTIONS,p.QUERY_SUGGESTIONS,p.RELATED_QUESTIONS,p.AFFILIATION,p.FACETS,p.TOTAL]);function Sb(t){return Eb.has(t)}const Tb=new Set([p.PRODUCTS,p.IMAGES,p.SOURCES,p.RELATED_RESOURCES]);function Ob(t){return Tb.has(t)}const Ae=Object.freeze({IMPRESSION:"impression",VIEWABLE:"viewable",CLICK:"click",SUBMIT:"submit",FEEDBACK:"feedback"}),jl=[Ae.IMPRESSION,Ae.VIEWABLE,Ae.CLICK,Ae.SUBMIT,Ae.FEEDBACK],ql=[Ae.IMPRESSION,Ae.VIEWABLE,Ae.CLICK],Ab=new Set(ql);function vb(t){return Ab.has(t)}const Js=Object.freeze({UNTRACKED:"untracked",TRACKING:"tracking",TRIGGERED:"triggered"}),P=Object.freeze({INITIAL:"initial",LOADING:"loading",ERRONEOUS:"erroneous",READY:"ready",ONGOING:"ongoing",DONE:"done",EMPTY:"empty",NONEMPTY:"nonempty",UNANSWERABLE:"unanswerable"}),Yt=Object.freeze({ORGANIC:"_organic",SUGGESTED_QUESTIONS:"_suggested_questions",INLINE_QUESTION_LINK:"_inline_question_link"});function Bl(t){if(jl.indexOf(t)<0)throw new Error(`Unrecognized event type: ${t}`)}function Cb(t){if(t!==Js.UNTRACKED&&t!==Js.TRACKING&&t!==Js.TRIGGERED)throw new Error(`Unrecognized tracking status: ${t}`)}const ce=Object.freeze({API:"api",LAYOUTS:"layouts",DATA_PROCESSOR:"dataProcessor",TRACKERS:"trackers",INTERACTIONS:"interactions",FILTERS:"filters",PAGINATION:"pagination",TEMPLATES:"templates"}),Ft=Object.freeze({QUERY:"query",REFINE:"refine",MORE:"more"});function Xs(t,e){return Object.freeze({...t,...e,members:Ib(t.members,e.members),mappings:Object.freeze({...t.mappings,...e.mappings})})}function Ib(t=[],e=[]){return[...new Set([...t,...e])]}function xb(t,e){return t&&t.length?e&&e.length?[...t,...e]:t:e}function Zt(t,e){let s={};for(const n of t)n&&(s=e(s,n));return z(s)}function ui(t){if(t===void 0)throw new Error(`Expect options to be an object or a boolean value: ${t}`);return typeof t=="boolean"&&(t={active:t}),t}function Rb([t,e]=[]){if(t===!1)return{actor:!1};typeof t=="object"&&e===void 0&&(e=t,t=void 0);let s;if(t&&t.indexOf("/")!==-1&&([s,t]=t.split("/")),t&&typeof t!="string"||e!==void 0&&typeof e!="object")throw new Error(`Invalid arguments for useApi(): ${t}, ${e}`);return z({group:s,name:t,payload:e})}function zl(...t){return t[t.length-1]===!1?!1:Zt(t,(e,s)=>Object.assign(e,{...s,payload:ci(e.payload,s.payload)}))}function Lb(t={}){if(t===!1)return!1;const{results:e,...s}=t;e!==void 0&&(console.warn(`useLayouts({ results: ... }) is deprecated, use useLayouts({ ${p.PRODUCTS}: ... }) instead`),t={...s,[p.PRODUCTS]:e});const n={};for(const[i,r]of Object.entries(t))n[kb(i)]=Hl(r);return n}function kb(t){return t=Um(t),t=Dm(t),t}function Hl(t){if(t===void 0)return;let[e,s]=Kt(t);return typeof e=="object"&&(s=e,e=void 0),[e,s]}function $b(...t){return t[t.length-1]===!1?!1:Zt(t,(e,s)=>{for(const[n,i]of Object.entries(s))e[n]=Pb(e[n],i);return e})}function Pb(t,e){return e=Hl(e),e[0]===!1?e:t&&e?[e[0]||t[0],Nb(t[1],e[1])]:e||t}function Nb(t,e){return{...t,...e,link:{...t&&t.link,...e&&e.link},templates:{...t&&t.templates,...e&&e.templates}}}function Ub(t){t=Kt(t);for(const e of t)if(typeof e!="function")throw new Error(`Expect data processor options to be a function: ${e}`);return t}function Db(...t){return t.flat().filter(Boolean)}const Be=Object.freeze({active:!0,impression:Object.freeze({active:!0}),viewable:Object.freeze({active:!0,area:.5,duration:1e3}),click:Object.freeze({active:!0,lenient:!1})});function Fb(t={}){t=ui(t);const{active:e,...s}=t,n={};for(const[i,r]of Object.entries(s))n[i]=Mb(r);return{active:e,...n}}function Mb(t={}){t=ui(t);const{active:e,...s}=t;for(const[n,i]of Object.entries(s))jb(i);return t}function jb(t={}){return t=ui(t),t}function qb(...t){return t[t.length-1]===!1?!1:Zt(t,(e,s)=>{for(const[n,i]of Object.entries(s))i!==void 0&&(e[n]=n==="active"?i:Bb(e[n],i));return e})}function Bb(t={},e={}){const s={...t};for(const[n,i]of Object.entries(e))i!==void 0&&(s[n]=jl.includes(n)?zb(t[n],i):i);return s}function zb(t={},e={}){return{...t,...e}}function Hb(t){if(t===void 0)return;if(t===!1)return{handle:()=>{}};const e=Kt(t.preprocess);for(const s of e)if(typeof s!="function")throw new Error(`Expect preprocess options to be a function: ${s}`);if(t.handle&&typeof t.handle!="function")throw new Error(`Expect handle options to be a function: ${t.handle}`);return{...t,preprocess:e}}function Vb(...t){return t[t.length-1]===!1?!1:Zt(t,(e,s)=>Object.assign(e,{...s,preprocess:xb(e.preprocess,s.preprocess)}))}const Qb=ui;function Wb(...t){return t[t.length-1]===!1?!1:Zt(t,(e,s)=>Object.assign(e,s))}function Gb(t){if(t===void 0)throw new Error(`Expect pagination options to be an object or a boolean value: ${t}`);return typeof t=="boolean"&&(t={active:t}),t}function Kb(...t){return t[t.length-1]===!1?!1:Zt(t,(e,s)=>Object.assign(e,s))}function Yb(t={}){const e={};for(const[s,n]of Object.entries(t))e[s]=Vl(n);return e}function Vl(t){return t===void 0?void 0:typeof t!="function"?()=>t:t}function Zb(...t){return Zt(t,(e,s)=>{for(const[n,i]of Object.entries(s))e[n]=Jb(e[n],i);return e})}function Jb(t,e){return Vl(e)||t}const Xb=[{key:ce.API,normalize:Rb,merge:zl},{key:ce.LAYOUTS,normalize:Lb,merge:$b},{key:ce.DATA_PROCESSOR,normalize:Ub,merge:Db},{key:ce.TRACKERS,normalize:Fb,merge:qb},{key:ce.INTERACTIONS,normalize:Hb,merge:Vb},{key:ce.FILTERS,normalize:Qb,merge:Wb},{key:ce.PAGINATION,normalize:Gb,merge:Kb},{key:ce.TEMPLATES,normalize:Yb,merge:Zb}];class Ql{constructor(){this._events=new ds({target:this}),this._globals={}}_notify(e){this._events.emit(e),this._events.emit("_update",e)}}class Wl{constructor(e={},s={}){this._events=new ds({target:this}),this._defaults=s,this._context=e||{},this._locals={},ee(this,{resolved:new Gl(this),defaults:s}),e&&e.on&&(this._unsubscribes=[e.on("_update",n=>this._notify(n))])}_notify(e){this.resolved._invalidate(e),this._events.emit(e)}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}}class Gl{constructor(e){this._options=e,this._cache={}}_invalidate(e){this._cache[e]=void 0}_get({key:e,merge:s}){if(this._cache[e]===void 0){const n=this._options,i=n._context[e];this._cache[e]=s(n._defaults[e],i&&i.get(),n._locals[e])}return this._cache[e]}}class Kl{constructor(e,s,n,i,r){this._options=e,this._store=s,this._key=n,this._normalize=o=>o!==void 0?i(o):void 0,this._merge=r}get(){return this._store[this._key]}set(e){this._set(this._normalize(e))}merge(e){this._set(this._merge(this.get(),this._normalize(e)))}_set(e){this._store[this._key]=e,this._options._notify(this._key)}}for(const t of Xb){const{key:e,normalize:s,merge:n}=t;Object.defineProperty(Ql.prototype,e,{get:function(){const i=`_${e}`;return this[i]||(this[i]=new Kl(this,this._globals,e,s,n))}}),Object.defineProperty(Wl.prototype,e,{get:function(){const i=`_${e}`;return this[i]||(this[i]=new Kl(this,this._locals,e,s,n))}}),Object.defineProperty(Gl.prototype,e,{get:function(){return this._get(t)}})}const ew=[ce.API,ce.LAYOUTS,ce.DATA_PROCESSOR,ce.TRACKERS,ce.INTERACTIONS];function en(t,e=ew){for(const s of e)tw(t,s)}function tw(t,e){if(e==="api")Object.assign(t,{useApi(...s){return this._options.api.merge(s),this},clearApi(){return this._options.api.set(),this}});else{const s=sw(e);Object.assign(t,{[`use${s}`](n){return this._options[e].merge(n),this},[`clear${s}`](){return this._options[e].set(),this}})}}function sw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yl="q",nw="qs";function iw({setValue:t=!0,focus:e=!0,updateUrl:s=!0,param:n=Yl,sourceParam:i=nw,...r}={}){return{setValue:t,focus:e,updateUrl:s,param:n,sourceParam:i,...r}}function Zl(t={}){const{setValue:e,focus:s,param:n,sourceParam:i}=this._autoQuery=iw(t),r=new URLSearchParams(window.location.search),o=r.get(n),c=r.get(i)||void 0,{layout:a}=this._views.get(p.QUERY);a&&(o&&e&&(a.value=o),!o&&s&&a.focus()),o&&this.query(z({q:o,qs:c}))}function Jl({value:t,request:e}){if(!this._autoQuery||!this._autoQuery.updateUrl)return;const{param:s,sourceParam:n}=this._autoQuery,i=t&&(t.question||t.keyword)||e&&e.payload&&(e.payload.question||e.payload.q),r=e&&e.payload&&e.payload.metadata&&e.payload.metadata.question_source;if(!i)return;const o=new URL(window.location),c=o.searchParams.get(s),a=o.searchParams.get(n)||Yt.ORGANIC;i===c&&r===a||(o.searchParams.set(s,i),r===Yt.ORGANIC?o.searchParams.delete(n):o.searchParams.set(n,r),window.history.replaceState({},"",o))}class zr extends Re{constructor(e,s,n){super(e,s),this._name=e,this._plugin=s,this._client=n,this._options=new Ql}}en(zr.prototype);function fi(){return"session"}function Hr(){return"completions"}function _s(){return"filters"}function Mt(){return"query"}function Vr(){return"request"}function Xl(){return"response"}function me(){return"data"}function yt(t){return t?`view:${t}`:"view"}function Qr(){return"tracker"}function eu(){return"interaction"}function tu(){return"feedback"}function su(){return"input"}function Wr(){return"more"}class rw{constructor(e={}){(this._events=new ds)._injectSubscribeInterface(this),this._options=e,this._states={},ee(this,{states:new Proxy(this._states,{set(){}})})}update(e,s,n={}){this._states[e]=Object.freeze(s);const i=Object.freeze({action:"update",name:e,state:s,...n});typeof this._options.onUpdate=="function"&&this._options.onUpdate(i),n.silent||this._events.emit(e,s),typeof this._options.onEmit=="function"&&this._options.onEmit(i)}trigger(e,s){const n=Object.freeze({action:"trigger",name:e,state:s});typeof this._options.onUpdate=="function"&&this._options.onUpdate(n),this._events.emit(e,s),typeof this._options.onEmit=="function"&&this._options.onEmit(n)}}class ow{constructor(e){this._hub=e,this._sessionIndex=0}restart(){const e=Object.freeze({uuid:Ks(),index:this._sessionIndex++,meta:{}});this._hub.update(fi(),e)}}function nu(t,e){if(!e)return!1;const{session:s}=t.states;return s&&s.index===e.index}class cw{constructor(e,{source:s,options:n,polling:i=!0}){this._hub=e,this._source=s,this._options=n,this._polling=i,this._unsubscribes=[e.on(fi(),r=>this._handleSession(r)),e.on(Vr(),r=>this._handleRequest(r))]}get active(){return this._options.resolved.api.actor!==!1}get source(){return this._source}_handleSession(e){(!this._session||e.index!==this._session.index)&&(this._ac&&this._ac.abort({type:"new-session",message:"A new session is created, discarding the old one."}),this._ac=new AbortController),this._session=e}async _handleRequest(e){if(!this.active)return;const{session:s,...n}=e;try{const{signal:i}=this._ac||{},r={...e.options,signal:i},o=await this._source({session:s,...n,options:r});if(o&&o[Symbol.asyncIterator]){if(o._response&&this._emitResponseWithSessionCheck({session:s,request:n,value:o._response}),this._polling){let c;for await(c of o){if(!nu(this._hub,s))break;this._emitResponse({session:s,request:n,value:c})}}}else this._emitResponseWithSessionCheck({session:s,request:n,value:o})}catch(i){this._error(i),this._emitResponseWithSessionCheck({session:s,request:n,error:i})}}_emitResponseWithSessionCheck(e){nu(this._hub,e.session)&&this._emitResponse(e)}_emitResponse(e){this._hub.update(Xl(),e)}_error(e){console.error(e)}_destroy(){this._ac&&this._ac.abort({type:"data-actor-destroy",message:"Data actor is destroyed."});for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class aw{constructor(e){this._get=typeof e=="function"?e:()=>e,this._handlers=[],this._elementUpdatedHandlers=[],this.sync()}get current(){return this._element}on(e,s){if(e==="element")return this._onElementUpdated(s);const n=this._get();return n&&n.addEventListener(e,s),this._handlers.push({event:e,handler:s}),()=>this._off(e,s)}_off(e,s){const n=this._get();n&&n.removeEventListener(e,s),km(this._handlers,i=>i.handler===s)}_onElementUpdated(e){return this._elementUpdatedHandlers.push(e),()=>{Lr(this._elementUpdatedHandlers,e)}}sync({silent:e=!1}={}){const s=this._get();if(this._element===s)return;if(this._offAllFromCurrentElement(),s)for(const{event:i,handler:r}of this._handlers)s.addEventListener(i,r);const n=this._element;if(this._element=s,!e)for(const i of this._elementUpdatedHandlers)try{i(s,n)}catch(r){console.error(r)}}_offAllFromCurrentElement(){if(this._element)for(const{event:e,handler:s}of this._handlers)this._element.removeEventListener(e,s)}destroy(){this._offAllFromCurrentElement()}}const{IMPRESSION:lw,VIEWABLE:uw,CLICK:fw}=Ae,{UNTRACKED:di,TRIGGERED:dw}=Js,iu=Object.freeze({[lw]:di,[uw]:di,[fw]:di});class ru{constructor(e){this.sessionId=e,this._states=new Map}getFullState(e){const s=this._states.get(this._getKey(e));return s?{...s}:iu}get(e,s){const n=this._states.get(this._getKey(e));return n&&n[s]||di}set(e,s,n){Bl(s),Cb(n);for(const i of Kt(e))this._setOne(i,s,n)}untriggered(e,s){return e.filter(n=>this.get(n,s)!==dw)}_getKey(e){return e.product_id||e.text||e.id||e}_setOne(e,s,n){$m(this._states,this._getKey(e),()=>({...iu}))[s]=n}}const hw=[Symbol("itemless")];class Gr{constructor({hub:e,role:s,options:n}){this._hub=e,this._role=s,this._options=n,this._states=new ru(this._getSessionId())}get options(){return typeof this._options=="function"?this._options():this._options}getState(e){return this._states.getFullState(e)}_trigger(e,s,n){Bl(e);const{options:i}=this;if(!i||i.active===!1)return;this._syncSession();const{deduplicated:r=!0,itemless:o=!1}=i;if(r){if(o&&(s=hw),s=this._states.untriggered(Kt(s),e),s.length===0)return;this._states.set(s,e,Js.TRIGGERED)}this._sendToHub({type:e,items:o?void 0:s,...n})}submit({value:e}){this._syncSession(),this._sendToHub({type:Ae.SUBMIT,value:e})}_sendToHub(e){this._hub.trigger(Qr(),Object.freeze(z({role:this._role,...e})))}_syncSession(){const e=this._getSessionId();e&&(!this._states||e!==this._states.sessionId)&&(this._states=new ru(e))}_getSessionId(){const{session:e}=this._getViewState()||{};return e&&e.uuid}_getMisoId(){const e=this._getViewState();return e&&e.meta&&e.meta.miso_id||void 0}_getRequestPayload(){const{request:e}=this._getViewState()||{};return e&&e.payload}_getViewState(){return this._hub.states[yt(this._role)]}}for(const t of ql)Gr.prototype[t]=function(e,s){this._trigger(t,e,s)};function _w(t,e){return t===e||t&&e&&t.status===e.status&&t.error===e.error&&t.value===e.value&&t.ongoing===e.ongoing&&ou(t)===ou(e)&&pw(t.session,e.session)}function pw(t,e){return t===e||t&&e&&t.uuid===e.uuid}function ou(t){return t&&t.meta&&t.meta.empty}class cu{constructor(e,s){this._events=new ds({target:this}),this._views=e,this._mapping=au((e._roles.mappings||{})[s]||s),ee(this,{role:s,interface:new mw(this)})}get hub(){return this._views._hub}get element(){return this._element}set element(e){e!==this._element&&(this._element&&this._safeApplyOnLayout("unrender",this._element),this._element=e,this._proxyElement&&this._proxyElement.sync(),this._events.emit("element",e),this.refresh({force:!0}))}get proxyElement(){return this._proxyElement||(this._proxyElement=new aw(()=>this.element)),this._proxyElement}get layout(){return this._layout}set layout(e){if(e===this._layout)return;if(e&&typeof e.render!="function")throw new Error("Render function is mandatory in a layout.");const{element:s}=this;s&&this._safeApplyOnLayout("unrender",s),this._safeApplyOnLayout("destroy"),this._layout=e,e&&(e._view=this,typeof e.initialize=="function"&&e.initialize(this)),this.refresh({force:!0})}get tracker(){const{role:e}=this;if(e===p.CONTAINER)return this._views._getContainerTracker();if(!this._tracker){const{hub:s}=this;this._tracker=new Gr({hub:s,role:e,options:()=>this.trackerOptions})}return this._tracker}get workflow(){return this._views._workflow}get workflowOptions(){return this._views._options.resolved}get trackerOptions(){return this._views._getTrackerOptions(this.role)}get filters(){return this._views.filters}async refresh({force:e=!1,data:s}={}){if(!this._layout)return;const{element:n}=this;if(!n)return;const i=this._data;if(this._data=s=this._sliceData(s||this._views._getData()),!e&&_w(s,i))return;const{session:r,status:o,ongoing:c,request:a,meta:u,value:l}=s,d={session:r,status:o,ongoing:c,request:a,meta:u,data:l,...gw(this.role,s)},m=(E={},g)=>{E!==!1&&this.updateState({...d,...E},g)};try{await this._layout.render(n,s,{notifyUpdate:m})}catch(E){this._error(E),m({error:E})}}updateState(e,{silent:s=!1}={}){const n=e.error?P.ERRONEOUS:e.status;e=this._state=Object.freeze(z({...e,status:n}));const{role:i}=this;this.hub.update(yt(i),e,{silent:s})}_sliceData(e){const{value:s,error:n,status:i,meta:r,...o}=e,c={value:this._mapping(e,this),status:i,data:s,meta:r,...o};return this.role===p.CONTAINER&&(c.meta={...r,empty:this._isContainerEmpty(e)}),z(c)}_isContainerEmpty(e){const{element:s}=this;if(!s)return!1;for(const{role:n}of s.components){if(!Sb(n))continue;const r=au((this._views._roles.mappings||{})[n]||n)(e,this);if(!lu(n,r))return!1}return!0}_syncSize(){this._element&&this._safeApplyOnLayout("syncSize",this._element)}_safeApplyOnLayout(e,...s){if(!(!this._layout||typeof this._layout[e]!="function"))try{this._layout[e](...s)}catch(n){this._error(n)}}_error(e){this._views._error(e)}_destroy(){this._safeApplyOnLayout("destroy"),this._proxyElement&&this._proxyElement.destroy()}}class mw{constructor(e){Ut(this,e,["role","layout","element","proxyElement","refresh","on","tracker"])}}function au(t){switch(typeof t){case"function":return t;case"string":return e=>e.value&&e.value[t];default:throw new Error(`Invalid mapping function: ${t}`)}}function gw(t,e){return bw(e)?{empty:!!lu(t,e&&e.value)}:{}}function bw(t){return t.status===P.READY&&!t.ongoing}function lu(t,e){switch(t){case p.ANSWER:case p.REASONING:return!e||!e.value;default:return e===void 0||(Array.isArray(e)||typeof e=="string")&&!e.length}}function ww(t={},e={}){return Object.freeze(z({...t,...e,facets:Object.freeze(z({...t.facets,...e.facets}))}))}function yw({sort:t}={}){return z({facets:Object.freeze({}),sort:Ew(t)})}function Ew(t){if(!t)return;const{options:e=[]}=t;for(const s of e)if(s.default)return Object.freeze(s);return Object.freeze(e[0])}class Sw{constructor(e,{facets:s}={}){this._views=e,this._hub=e._hub;const n=this._error=this._error.bind(this);this._events=new ds({target:this,error:n}),ee(this,{facets:new Tw(this,s)}),this._unsubscribes=[e._options.on("filters",()=>this._syncOptions())],this._syncOptions(),this._states=void 0}_syncOptions(){const e=this._views._options.resolved.filters;this._initialStates=yw(e),this.apply({silent:!0})}_getStates(){return this._states||this._initialStates}update(e){const s=this._getStates();this._states=ww({...s,...e});const n=this._getStates();this._events.emit("update",{updates:e,states:n,oldStates:s})}reset({silent:e=!1}={}){const s=this._states;this._states=void 0;const n=this._getStates();this._hub.update(_s(),n,{silent:e}),this._events.emit("reset",{states:n,oldStates:s})}apply({silent:e=!1}={}){const s=this._getStates();this._hub.update(_s(),s,{silent:e}),!e&&this._events.emit("apply")}_error(e){this._views._error(e)}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class Tw{constructor(e,s={}){this._filters=e,this._options=s}isSelected(e,s){return this._getFieldValues(e).includes(s)}select(e,s){this.isSelected(e,s)||this._select(e,s)}unselect(e,s){this.isSelected(e,s)&&this._unselect(e,s)}toggle(e,s){this.isSelected(e,s)?this._unselect(e,s):this._select(e,s)}_getFieldValues(e){return this._filters._getStates().facets[e]||[]}_select(e,s){const n=this._options.multivalued?[...this._getFieldValues(e),s]:[s];n.sort(),this._filters.update({facets:{[e]:n}})}_unselect(e,s){let n=this._getFieldValues(e).filter(i=>i!==s);n.length===0&&(n=void 0),this._filters.update({facets:{[e]:n}})}}const uu=Symbol.for("miso:tracked");function Kr(t){return!!t[uu]}function Yr(t){t[uu]=!0}const hi=Object.freeze({impression:Object.freeze({}),viewable:Object.freeze({area:.5,duration:1e3}),click:Object.freeze({lenient:!1})});function Zr(t,e){return!!e&&{...t,...e}}function Ow(t){if(t===!1)return!1;if(t===!0&&(t={}),typeof t!="object")throw new Error(`Invalid options: ${t}`);const{impression:e={},viewable:s={},click:n={},...i}=t;return z({...hi,...i,impression:Zr(hi.impression,e),viewable:Zr(hi.viewable,s),click:Zr(hi.click,n)})}function Aw(t={},e){return t?typeof t.validate=="function"?t.validate(e):t.lenient?!0:!(Kr(e)||e.button!==0||e.defaultPrevented||!kr(e.target,s=>s.tagName==="A"&&s.href||void 0)):!1}class vw{constructor(e,{workflow:s,extensions:n,layouts:i,roles:r,options:o}){this._hub=e,this._workflow=s,this._workflowName=s._name,this._extensions=n,this._layoutFactory=i,this._options=o,this._roles=r,this._containers=new Map,this._containerTracker=void 0,this._views={},this._filters=new Sw(this);for(const a of r.members)a!==p.CONTAINER&&(this._views[a]=new cu(this,a));ee(this,{interface:new Cw(this),trackers:new Iw(this,r.members)});const c=()=>this.syncSize();window.addEventListener("resize",c),this._unsubscribes=[()=>window.removeEventListener("resize",c),e.on(me(),a=>this.refresh({data:a})),o.on("layouts",()=>this._syncLayouts())],this._syncLayouts()}get filters(){return this._filters}addContainer(e){if(this._containers.has(e))return;const s=new cu(this,p.CONTAINER);s.layout=this._createLayout(p.CONTAINER),s.element=e,this._containers.set(e,s);const{components:n}=e;for(const i of n)this.addComponent(i)}removeContainer(e){const s=this._containers.get(e);if(!s)return;const{components:n}=e;for(const i of n)this.removeComponent(i);s._destroy(),this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e}removeComponent(e){this._getViewByElement(e).element=void 0}updateComponentRole(e,s,n){}containsElement(e){return this._containers.has(e)||this._views[e.role]}refreshElement(e){const s=e.isContainer?this._containers.get(e):this._getViewByElement(e);s&&s.refresh({force:!0})}_getViewByElement(e){let{role:s}=e;if(!s)throw new Error("Component must have a role");return this.get(s)}_syncLayouts(){const{layouts:e}=this._options.resolved;if(e===!1){for(const s of this._containers.values())s.layout=void 0;for(const s of Object.values(this._views))s.layout=void 0}else for(let[s,[n,i]]of Object.entries(e)){const r=()=>this._layoutFactory.create(n,{...i,role:s,workflow:this._workflowName});if(s===p.CONTAINER)for(const o of this._containers.values())o.layout=r();else{const o=this.get(s);o&&(o.layout=r())}}}_createLayout(e){const s=this._options.resolved.layouts[e];if(!s)return;const[n,i]=s;return this._layoutFactory.create(n,{...i,role:e,workflow:this._workflowName})}get(e){return this._views[e]}get views(){return this._getViews(!0)}_getViews(e=!0){return e?[...this._containers.values(),...Object.values(this._views)]:[...Object.values(this._views),...this._containers.values()]}syncSize(){for(const e of Object.values(this._views))e._syncSize()}async refresh({force:e,data:s}={}){s=this._getData(s);let n=this._getViews(!0);await Promise.all(n.map(i=>i.refresh({force:e,data:s})))}_getData(e){return e||this._hub.states[me()]}_getTrackerOptions(e){const s=this._options.resolved.trackers;return Ow(s&&s[e]||!1)}_getContainerTracker(){if(!this._containerTracker){const e=this._hub,s=p.CONTAINER;this._containerTracker=new Gr({hub:e,role:s,itemless:!0,options:()=>this._getTrackerOptions(s)})}return this._containerTracker}_error(e){console.error(e)}_destroy({dom:e}={}){for(const s of this._getViews(!1))s._destroy();for(const s of this._unsubscribes)s();this._unsubscribes=[],this._filters._destroy()}}class Cw{constructor(e){this._actor=e,Ut(this,e,["syncSize","refresh","trackers","filters"])}get(e){return this._actor.get(e).interface}get all(){return this._actor.views.map(e=>e.interface)}}class Iw{constructor(e,s){this._views=e;for(const n of s)n!==p.CONTAINER&&Object.defineProperty(this,n,{get:()=>e.get(n).tracker});Object.defineProperty(this,p.CONTAINER,{get:()=>e._getContainerTracker()})}}class xw{constructor(e){this._hub=e,this._unsubscribes=[e.on(tu(),s=>this._trigger(s))]}_trigger(e){this._hub.trigger(Qr(),{type:Ae.FEEDBACK,result_type:"answer",value:e.unselected?"unselected":e.value})}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class Rw{constructor(e,{client:s,options:n}){this._client=s,this._options=n,this._unsubscribes=[e.on(eu(),i=>this._handle(i))]}_handle(e){e=Kt(e),e.length!==0&&this._client.api.interactions.upload(e,{merge:!0})}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}function fu(t){return async({group:e,name:s,payload:n,options:i})=>{if(e===fe.ASK)switch(s){case je.QUESTIONS:return t.api.ask.questions(n,i);case je.SEARCH:return t.api.ask.search(n,i)}return t.api[e]._run(s,n,i)}}class Jr{constructor({role:e,workflow:s,...n}={}){ee(this,{role:e,workflow:s,options:n}),this._unsubscribes=[],this._rendered=new WeakMap,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}async render(e,s,n={}){this._syncElement(e);const i=this._rendered.get(e),r=ri(!1);s=this._preprocess({state:s,rendered:i},{skip:r.t})||s,this._updatePending(s,n),r.value||this._handleInput({state:s,rendered:i},n)}_syncElement(e){this._element!==e&&this._rendered.delete(this._element),this._element=e}_preprocess({state:e}){return e}_updatePending(e,s){this._pending=[Object.freeze(e),s]}_takePending(){const e=this._pending;return this._pending=void 0,e}_handleInput(){this._requestRaf()}_requestRaf(){this._requested||(this._requested=!0,ni(e=>this._doRaf(e)))}_doRaf(e){this._requested&&(this._requested=!1,this._applyRender(e))}_applyRender(e,s={}){if(!this._pending)return;let[n,{notifyUpdate:i}]=this._takePending();n=Object.freeze({...n,timestamp:e});const r=this._rendered.get(this._element),o=ri([]),c=ri({});this._render(this._element,{state:n,rendered:r,timestamp:e},{notifyUpdate:o.args,writeToState:c.merge,...s}),n=Object.freeze({...n,...c.value}),this._rendered.set(this._element,n),i&&i(...o.value),this._afterRender(this._element,n)}_render(){throw new Error("Unimplemented")}_afterRender(){}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[],this._view=void 0,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}}function du(...t){return t.reduce((e,s)=>(e[s]=Lw(s),e),{})}function Lw(t){return()=>{throw new Error(`Template '${t}' is not implemented.`)}}function kw(t,e,s,n){const{templates:i}=t,[r,o]=jt(t,s);return[r,(i.imageBlock||ms)(t,s,n),(i.infoBlock||i.productInfoBlock||Xr)(t,s,n),o].join("")}function $w(t,e,s){const[n,i]=jt(t,s);return`${n}${s.value||s.text||s}${i}`}function Pw(t,e,s,n){const{templates:i}=t,[r,o]=jt(t,s);return[r,(i.imageBlock||ms)(t,s,n),(i.infoBlock||i.articleInfoBlock||_u)(t,s,n),(i.indexBlock||no)(t,s,n),o].join("")}function hu(t,e,s,n){const{templates:i}=t,[r,o]=jt(t,s);return[r,(i.indexBlock||no)(t,s,n),(i.infoBlock||i.articleInfoBlock||eo)(t,s,n),o].join("")}function Nw(t,e,s,n){const{templates:i}=t,[r,o]=jt(t,s);return[r,(i.imageBlock||ms)(t,s,n),(i.infoBlock||i.imageInfoBlock||pu)(t,s,n),o].join("")}function Uw(t,e,s,n){const{templates:i}=t,[r,o]=jt(t,s,{link:!1});return[r,(i.infoBlock||i.affiliationInfoBlock||Dw)(t,s,n),(i.imageBlock||ms)(t,s,{brand:!0,...n}),o].join("")}function Dw(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||ps)(t,e,s),(i.descriptionBlock||_i)(t,e,s),(i.priceBlock||so)(t,e,s),(i.ctaBlock||io)(t,e,s)].join("")}</div>`}function Xr(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||ps)(t,e,s),(i.descriptionBlock||_i)(t,e,s),(i.priceBlock||so)(t,e,s)].join("")}</div>`}function _u(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||ps)(t,e,s),(i.dateBlock||to)(t,e,s),(i.descriptionBlock||_i)(t,e,s),(i.ctaBlock||io)(t,e,s)].join("")}</div>`}function eo(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||ps)(t,e,s),(i.authorsAndDateBlock||bu)(t,e,s)].join("")}</div>`}function pu(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||ps)(t,e,s)].join("")}</div>`}function ps({className:t},{title:e,_title_with_markups:s}){const n=ro(s)||Ge(e);return n?`<div class="${t}__item-title">${n}</div>`:""}function mu({className:t},{brand:e,brand_logo:s}){if(!e&&!s)return"";const n=s?`<img class="${t}__item-brand-logo" src="${s}"${e?` alt="${e}"`:""}>`:`<div class="${t}__item-brand">${e}</div>`;return`<div class="${t}__item-brand-container">${n}</div>`}function _i({className:t},{snippet:e,description:s}){return e?`<div class="${t}__item-snippet">${ro(e)}</div>`:s?`<div class="${t}__item-desc">${Ge(s)}</div>`:""}function to({className:t,templates:e},{created_at:s,updated_at:n,published_at:i}){const r=i||s||n;return r?`<div class="${t}__item-date">${Su(r,e.date)}</div>`:""}function gu({className:t},{authors:e}){return e&&Array.isArray(e)&&e.length?`<div class="${t}__item-authors">${e.join(", ")}</div>`:""}function bu(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-authors-and-date-container">${[(i.authorsBlock||gu)(t,e,s),(i.dateBlock||to)(t,e,s)].join("")}</div>`}function so(t,e){const{className:s,templates:n}=t,{sale_price:i,original_price:r,currency:o="USD"}=e,c=i||r;if(!c)return"";const a=r!==void 0&&i!==void 0&&i<r,u=e.discount_rate_percent||(a?Math.floor((1-i/r)*100):void 0);let l="";if(a&&(l+=`<span class="${s}__item-original-price miso-price" data-currency="${o}">${r}</span><br>`),l+=`<span class="${s}__item-price miso-price" data-currency="${o}">${c}</span>`,u){const d=(n.discountRateText||wu)(t,{...e,discount_rate_percent:u});l+=` <span class="${s}__item-discount-rate">${d}</span>`}return`<div class="${s}__item-price-container">${l}</div>`}function wu(t,{discount_rate_percent:e}){return`(${e}% off)`}function ms(t,e,s={}){const{className:n,templates:i}=t,{cover_image:r,image_src:o,image_alt:c}=e;if(!r&&!o)return"";const a=o?"image":"cover-image",u=a==="image"?`<img class="${n}__item-${a}" src="${o}"${c?` alt="${c}"`:""}>`:`<img class="${n}__item-${a}" src="${r}">`,l=a==="cover-image"&&s.brand?(i.brandBlock||mu)(t,e,s):"";return`<div class="${n}__item-${a}-container">${u}${l}</div>`}function no({className:t},e,{index:s}){return`<div class="${t}__item-index-container"><span class="${t}__item-index miso-citation-index" data-index="${s+1}"></span></div>`}function io(t,e,s){const{className:n,templates:i}=t,r=Et.asFunction(i.cta)(t,e,s);return r?`<div class="${n}__item-cta-container">${r}</div>`:""}function Fw(t,e,s){const{templates:n}=t,{url:i}=e;if(!i)return"";const[r,o]=jt(t,{url:i},{classSuffix:"item-cta",role:"cta"}),c=Et.asFunction(n.ctaText)(t,e,s);return c?`${r}${c}${o}`:""}function jt({className:t,options:e={}},{product_id:s,url:n},{classSuffix:i="item-body",role:r="item",...o}={}){const c=o.link!==!1&&n?"a":"div",a=o.link!==!1&&n?`href="${n}" ${Mw(e.link)}`:"",u=s?`${yb}="${s}"`:"",l=r?`data-role="${r}"`:"";return[`<${c} class="${t}__${i}" ${l} ${u} ${a}>`,`</${c}>`]}function Mw(t={}){const{target:e="_blank",rel:s="noopener",open:n=!0}=t;let i="";return n&&(e&&(i+=` target="${e}"`),s&&(i+=` rel="${s}"`)),i}const yu=Object.freeze({locale:"en-US",year:"numeric",month:"short",day:"numeric"}),Eu="en-US";function Su(t,e=yu){switch(typeof e){case"function":return e(t);case"string":return new Date(t).toLocaleDateString(e);case"object":return new Date(t).toLocaleDateString(e.locale||yu.locale,e);default:throw new Error(`Invalid date format: ${e}`)}}function jw(t,e=Eu){switch(typeof e){case"function":return e(t);case"string":return new Intl.NumberFormat(e).format(t);case"object":return new Intl.NumberFormat(e.locale||Eu.locale,e).format(t);default:throw new Error(`Invalid number format: ${e}`)}}function ro(t){return t&&t.replace(/<\/mark>\s+<mark>/g,"</mark>&nbsp;<mark>")}function qw(t=""){return typeof t=="function"?t:()=>t}const Et=Object.freeze({tagPair:jt,formatDate:Su,formatNumber:jw,formatHtmlWithMarkup:ro,escapeHtml:Ge,asFunction:qw});class Ke extends Jr{constructor({className:e,templates:s,...n}={}){super(n),ee(this,{className:e,templates:{...du("root"),...s,helpers:Et}})}_preprocess({state:e}){const s=this.templates.root(this,e);return{...e,html:s}}_render(e,{state:s}){e.innerHTML=s.html}}const Bw="miso-banner";class pi extends HTMLElement{static get tagName(){return Bw}async connectedCallback(){pi.MisoClient.ui.layouts.create("banner").render(this)}}class Tu{constructor(){this._entries=new WeakMap}isTracked(e){return this._entries.has(e)}async track(e,s={}){if(!s||this._entries.get(e))return!1;const i=new AbortController,{signal:r}=i;this._entries.set(e,{ac:i});let o=!1;try{await $r(e,{...s,signal:r}),o=!0}catch(c){if(c.name!=="AbortError")throw c}finally{this._entries.delete(e)}return o}untrack(e){const s=this._entries.get(e);s&&(s.ac.abort(),this._entries.delete(e))}}const zw="container";class Ou extends Jr{static get type(){return zw}constructor({logo:e="auto",...s}={}){super({logo:e,...s}),this._impression=!1,this._viewables=new Tu}_syncElement(e){this._element!==e&&this._viewables.untrack(this._element),super._syncElement(e)}_render(e,s){this._syncBanner(e),this._syncStatus(e,s),this._trackInteractions(e,s)}_afterRender(e,s){this._trackInteractions(e,s)}_syncBanner(e){const s=pi.tagName,n=this._shallRenderBanner(e),i=e.querySelector(s);n&&!i?e.insertAdjacentHTML("beforeend",`<${s} visible-when="ready"></${s}>`):!n&&i&&i.remove()}_shallRenderBanner(e){const{logo:s}=this.options,{logo:n}=e,i=n!==void 0&&n!=="auto"?n:s;return i==="auto"?e.components.some(({role:r})=>Hw(r)):!!i}_syncStatus(e,{state:s}){if(!e)return;const{status:n,ongoing:i,meta:{miso_id:r,empty:o=!1,unanswerable:c=!1}={}}=s,a=[n,o?P.EMPTY:P.NONEMPTY];n===P.READY&&a.push(i?P.ONGOING:P.DONE),c&&a.push(P.UNANSWERABLE),e.setAttribute("status",a.join(" ")),r?e.setAttribute("miso-id",r):e.removeAttribute("miso-id")}_trackInteractions(e,s){const{status:n}=s;n===P.READY&&(this._trackImpression(),this._trackViewable(e))}_trackImpression(){const{impression:e}=this._view.tracker.options||{};e&&(this._impression||(this._impression=!0,this._view.tracker.impression()))}async _trackViewable(e){const{viewable:s}=this._view.tracker.options||{};s&&await this._viewables.track(e,s)&&this._view.tracker.viewable()}}function Hw(t){return t===p.PRODUCTS||t===p.ANSWER}const Vw="error",Qw="miso-error";function Ww(t,e){const{className:s,templates:n}=t,{status:i,value:r}=e;return i!=="erroneous"?"":`<div class="${s}"><div class="${s}__message">${n.message(t,r)}</div></div>`}function Gw(t,e){return`Error: ${e.message||e}`}const Au=Object.freeze({root:Ww,message:Gw});class vu extends Ke{static get type(){return Vw}static get defaultTemplates(){return Au}constructor({className:e=Qw,templates:s,...n}={}){super({className:e,templates:{...Au,...s},...n})}}const Kw='<svg viewBox="0 0 500 200"><path d="M131.1,39.4 C144.3,39.4 155,43.8 163.2,52.7 C171.3,61.3 175.2,72.9 175.2,87.6 L175.2,159.1 L140.4,159.1 L140.4,90.6 C140.4,78.7 134.6,71.5 123.7,71.5 C112.3,71.5 105.5,79.7 105.5,93.4 L105.5,159.1 L70.7,159.1 L70.7,90.6 C70.7,78.7 64.9,71.5 54,71.5 C42.6,71.5 35.8,79.7 35.8,93.4 L35.8,159.1 L1,159.1 L1,42.7 L35.8,42.7 L35.8,53.4 C42.1,44.1 52.6,39.4 67,39.4 C80.5,39.4 90.7,44.5 97.4,54.8 C104.6,44.5 115.8,39.4 131.1,39.4 Z M202,42.4 L238.4,42.4 L238.4,159.1 L202,159.1 Z M202,0 L238.4,0 L202,36.4 Z M302.6,76.6 C302.6,81.2 311.7,83.8 323,86.8 C339.2,90.3 360.5,98.7 360.3,124 C360.3,136.6 355.6,146.1 346.2,152.6 C336.8,158.9 325.3,162.1 311.5,162.1 C286.9,162.1 270,152.8 261.1,134.5 L291.6,117.3 C294.6,126.3 301.4,131 311.5,131 C319.9,131 324.2,128.7 324.2,123.8 C324.2,119.1 315,116.3 303.8,113.5 C287.6,109.1 266.5,101.2 266.5,77.5 C266.5,65.4 270.9,56.1 279.6,49.4 C288.5,42.6 299.5,39.4 312.4,39.4 C331.9,39.4 348.6,48.2 358.2,64.3 L328.2,80.3 C324.4,73.6 319.2,70.1 312.4,70.1 C305.9,70.1 302.6,72.2 302.6,76.6 Z M480.4,144.5 C468.4,156.3 453.7,162.1 436.3,162.1 C419,162.1 404.2,156.3 392.2,144.5 C380.3,132.6 374.2,118 374.2,100.8 C374.2,83.6 380.3,69.1 392.2,57.3 C404.2,45.4 419,39.4 436.3,39.4 C453.7,39.4 468.4,45.4 480.4,57.3 C492.4,69.1 498.5,83.6 498.5,100.8 C498.5,118 492.4,132.6 480.4,144.5 Z M417.1,120.5 C422.2,125.6 428.6,128.2 436.3,128.2 C444.1,128.2 450.4,125.6 455.5,120.5 C460.7,115.4 463.3,108.9 463.3,100.8 C463.3,92.6 460.7,86.1 455.5,81 C450.4,75.9 444.1,73.3 436.3,73.3 C428.6,73.3 422.2,75.9 417.1,81 C411.9,86.1 409.3,92.6 409.3,100.8 C409.3,108.9 411.9,115.4 417.1,120.5 Z" /></svg>',Yw='<svg viewBox="0 0 16 16"><path d="M8.342 3.652 4.979 5.708a1 1 0 0 0-.479.852v5.561a1 1 0 0 0 .87.992l6.029.79a1 1 0 0 0 1.042-.583l2.534-5.65a1 1 0 0 0-.74-1.394l-3.543-.623.9-3.1A2.097 2.097 0 0 0 10.297 0L8.719 3.237a1 1 0 0 1-.377.415ZM1 6.5a1.5 1.5 0 0 1 3 0v6a1.5 1.5 0 0 1-3 0Z"/></svg>',Zw="banner",Jw="miso-banner";function Xw(t){const{className:e,templates:s}=t;return`<div class="${e}"><div class="${e}__logo">${s.logo(t)}</div></div>`}const Cu=Object.freeze({root:Xw,logo:()=>Kw});class ey extends Ke{static get type(){return Zw}static get defaultTemplates(){return Cu}constructor({className:e=Jw,templates:s,...n}={}){super({className:e,templates:{...Cu,...s},...n})}}function ty(t,e,s){const n=new Map,i=new Map,r=[];for(let o=0;o<t.length;o++){const c=t[o],a=s[o],u=e[o],l=Object.freeze({index:o,key:c,value:u,element:a});n.set(c,l),i.set(a,l),r.push(l)}return{k2b:n,e2b:i,entries:r}}function Iu(t,e){const s=[];for(const n of e.entries){const i=t.e2b.get(n.element);(!i||i.key!==n.key)&&s.push(n)}return s}class xu{constructor(){this._k2b=new Map,this._e2b=new Map,this._entries=[]}get entries(){return[...this._entries]}get(e){return this._e2b.get(e)||void 0}find(e){return this._k2b.get(e)||void 0}update(e,s,n){const i=ty(e,s,n),r={k2b:this._k2b,e2b:this._e2b,entries:this._entries},o=Iu(r,i),c=Iu(i,r);return this._k2b=i.k2b,this._e2b=i.e2b,this._entries=i.entries,{bounds:o,unbounds:c}}clear(){const e=this._entries;return this._k2b=new Map,this._e2b=new Map,this._entries=[],{bounds:[],unbounds:e}}}function oo(t){Ys(t,sy.prototype)}class sy{_initTrackable(){this._bindings=new xu,this._viewables=new Tu}_syncBindings(e,s){const n=this._getItems(s)||[],i=n.map(a=>this._getItemKey(a)),r=this._getItemElements(e),{bounds:o,unbounds:c}=this._bindings.update(i,n,r);this._onBindingsUpdate(o,c)}_clearBindings(){const{bounds:e,unbounds:s}=this._bindings.clear();this._onBindingsUpdate(e,s)}_getItemKey(e){return e.product_id||e.text||e.id||e}_getItems(e){throw new Error("Not implemented.")}_getItemElements(e){throw new Error("Not implemented.")}_onBindingsUpdate(e,s){this._trackImpressions(e),this._untrackViewables(s),this._trackViewables(e)}_trackImpressions(e){if(e.length===0)return;const{impression:s}=this._view.tracker.options||{};s&&this._view.tracker.impression(e.map(({value:n})=>n))}_untrackViewables(e){for(const{element:s}of e)this._viewables.untrack(s)}_trackViewables(e){if(e.length===0)return;const{viewable:s}=this._view.tracker.options||{};if(s)for(const{value:n,element:i}of e)(async()=>await this._viewables.track(i,s)&&this._view.tracker.viewable([n]))()}_trackClick(e,s){const{click:n}=this._view.tracker.options||{};Aw(n,e)&&(Yr(e),this._view.tracker.click([s.value]))}_destroyTrackable(){const{unbounds:e}=this._bindings.clear();this._untrackViewables(e)}}function ny(t){Ys(t,iy.prototype)}class iy{_initTriggerable(){this._trigger=void 0}_syncTrigger(e,s){if(!this.options.infiniteScroll)return;const n=this._view.workflowOptions.pagination;!n.active||n.mode!=="infiniteScroll"||(s.status===P.READY?this._trackTrigger(e):this._untrackTrigger())}async _trackTrigger(e){if(this._trigger)return;const s=e.querySelector('[data-role="trigger"]');if(!s)return;const n=new AbortController;this._trigger=Object.freeze({element:s,ac:n});let i=!1;try{await $r(s,{area:1,duration:0,signal:n.signal}),i=!0}catch(r){if(r.name!=="AbortError")throw r}finally{this._trigger=void 0}i&&this._onTrigger()}_onTrigger(){this._view.hub.trigger(Wr())}_untrackTrigger(){this._trigger&&(this._trigger.ac&&this._trigger.ac.abort(),this._trigger=void 0)}_destroyTriggerable(){this._untrackTrigger()}}function ry(t,e){const{className:s,role:n,templates:i,options:r}=t,{status:o}=e,c=n?` data-role="${n}"`:"",a=r.itemType?` data-item-type="${r.itemType}"`:"";return`<div class="${s} ${o}"${c}${a}>${o===P.READY?i[o](t,e):""}${i.trigger(t,e)}${i.loading(t,e)}</div>`}function oy(t,e){const{templates:s}=t,n=t._getItems(e)||[];return n.length>0||e.ongoing?s.body(t,e,n):s.empty(t,e)}function cy(t,e,s){return t.templates.list(t,e,s)}function ay(t,e,s){const{className:n,templates:i,options:r}=t,o=i.ordered?"ol":"ul",c=r.itemType?` data-item-type="${r.itemType}"`:"";return`<${o} class="${n}__list" data-role="list"${c}>${i.items(t,e,s)}</${o}>`}function ly(t,e,s,{offset:n=0}={}){const{templates:i}=t;let r=n;return s.map(o=>i.item(t,e,o,r++)).join("")}function uy(t,e,s,n){const{className:i,templates:r,options:o}=t,{itemType:c}=o,a=r[c](t,e,s,{index:n});return`<li class="${i}__item">${a}</li>`}function fy(t,e){const{className:s}=t;return`<div class="${s}__trigger" data-role="trigger"></div>`}function dy(){return'<div class="miso-loading" aria-label="Loading" data-role="loading"></div>'}const Ru=Object.freeze({product:kw,article:Pw,compactArticle:hu,image:Nw,question:$w,root:ry,[P.READY]:oy,empty:()=>"",body:cy,list:ay,ordered:!1,items:ly,item:uy,productInfoBlock:Xr,articleInfoBlock:_u,compactArticleInfoBlock:eo,imageInfoBlock:pu,brandBlock:mu,titleBlock:ps,descriptionBlock:_i,dateBlock:to,authorsBlock:gu,authorsAndDateBlock:bu,priceBlock:so,discountRateText:wu,ctaBlock:io,cta:Fw,imageBlock:ms,indexBlock:no,trigger:fy,loading:dy});class ze extends Ke{static get defaultTemplates(){return Ru}constructor({templates:e,itemType:s="product",...n}){super({templates:{...Ru,...e},itemType:s,...n}),this._initTrackable(),this._initTriggerable()}initialize(e){this._unsubscribes.push(e.proxyElement.on("click",this._onClick.bind(this)))}_preprocess({state:e,rendered:s}){const n=this._shallRenderIncrementally(e,s),i=this._html(e,s,n);return{...e,incremental:n,html:i}}_shallRenderIncrementally(e,s){return this.options.incremental&&s&&s.value&&s.value.length>0&&e.value&&e.value.length>=s.value.length&&e.session&&s.session&&e.session.id===s.session.id}_html(e,s,n){if(n){const i=s.value.length,r=(this._getItems(e)||[]).slice(i);return r.length>0?this.templates.items(this,e,r,{offset:i}):""}else return this.templates.root(this,e)}_render(e,{state:s},{notifyUpdate:n}){const{incremental:i,html:r}=s;i?r?this._getListElement(e).insertAdjacentHTML("beforeend",r):n(!1):e.innerHTML=r}_afterRender(e,s){this._syncBindings(e,s),this._syncTrigger(e,s)}_unrender(){this._clearBindings(),this._untrackTrigger()}_getItems(e){return e.value&&(e.value.products||e.value)}_getListElement(e){return e.querySelector('[data-role="list"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="item"]')):[]}_onClick(e){const s=e.target.closest('[data-role="item"]');if(!s)return;const n=this._bindings.get(s);n&&(this._trackClick(e,n),this._emitClickEvent(e,n))}_emitClickEvent(e,s){const{session:n}=this._view._state,{value:i,element:r}=s;this._view._events.emit("click",{session:n,value:i,element:r,domEvent:e})}destroy(){this._destroyTrackable(),this._destroyTriggerable(),this._view=void 0,super.destroy()}}oo(ze.prototype),ny(ze.prototype);const hy="list",Lu="miso-list";class gs extends ze{static get type(){return hy}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Lu}constructor({className:e=Lu,...s}={}){super({className:e,...s})}}const _y="horizontal",ku="miso-horizontal";class $u extends ze{static get type(){return _y}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return ku}constructor({className:e=ku,...s}={}){super({className:e,...s})}}const py="cards",Pu="miso-cards";class my extends ze{static get type(){return py}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Pu}constructor({className:e=Pu,...s}={}){super({className:e,...s})}}function Nu(t,e,s){s===void 0?t.removeAttribute(e):t.setAttribute(e,s)}function bs(t,e,s){s?t.classList.add(e):t.classList.remove(e)}function gy(t){if(typeof t=="number")return t;const[e,s]=by(t);switch(s){case"":case"px":return e;case"rem":return wy(e);default:throw new Error(`Unsupported unit: ${s}`)}}function by(t){const e=t.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*)$/);if(!e)throw new Error(`Invalid length: ${t}`);const s=parseFloat(e[1]),n=e[2]||"";return[s,n]}function wy(t=1){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function co(t){return t===void 0||t instanceof Uu?t:new Uu(t)}class Uu{constructor(e){switch(this._width=NaN,this._height=NaN,typeof e){case"number":this._width=e,this._height=1;break;case"object":Array.isArray(e)&&(this._width=parseFloat(e[0]),this._height=parseFloat(e[1]));break;case"string":const s=e.indexOf("/");s<0?(this._width=parseFloat(e),this._height=1):(this._width=parseFloat(e.slice(0,s).trim()),this._height=parseFloat(e.slice(s+1).trim()));break}if(this._width===NaN||this._height===NaN)throw new Error(`Invalid aspect ratio value: ${e}`)}get width(){return this._width}get height(){return this._height}get floatValue(){return this._width/this._height}scaleBy(e){return e=co(e),co([e._width*this._width,e._height*this._height])}toString(){return this._height===1?`${this._width}`:`${this._width} / ${this._height}`}}function yy(t){Ys(t,Ey.prototype)}class Ey{_initSwipeable(){this._swipeableContext={itemCount:void 0,itemIndex:void 0,displayedCount:void 0,displayedIndex:void 0,displayEventIndex:void 0}}get itemIndex(){return this._swipeableContext.itemIndex}set itemIndex(e){const s=this._swipeableContext;s.itemCount!==void 0&&(e<0?e=s.itemCount-1:e>=s.itemCount&&(e=0),s.itemIndex=e,ni(()=>this._syncDisplayedSwipeableItemIndex()))}next(){this._swipeableContext.itemCount!==void 0&&this.itemIndex++}previous(){this._swipeableContext.itemCount!==void 0&&this.itemIndex--}_renderSwipeable(e,s,n){this._syncSwipeableItemCount(s),this._syncDisplayedSwipeableItemCount(),this._syncDisplayedSwipeableItemIndex()}_afterRenderSwipeable(){this._emitSwipeableDisplayEvent()}_syncSwipeableItemCount({state:e}={}){const s=this._swipeableContext,n=this._getItems(e),i=s.itemCount,r=s.itemCount=n?n.length:void 0;r!==i&&(r===void 0?s.itemIndex=void 0:i===void 0&&(s.itemIndex=0))}_syncDisplayedSwipeableItemCount(){const e=this._swipeableContext,{itemCount:s}=e;if(s===e.displayedCount)return;let{element:n}=this._view;n=n.firstElementChild,n&&(Nu(n,"data-item-count",s),e.displayedCount=s)}_syncDisplayedSwipeableItemIndex(){const e=this._swipeableContext,{itemIndex:s}=e;s!==e.displayedIndex&&(e.displayedIndex=s,this._syncSwipeableListIndex(s),this._syncSwipeableIndicatorIndex(s))}_syncSwipeableListIndex(e){const{element:s}=this._view,n=s&&this._getListElement(s);n&&(n.style.left=`${-e*100}%`)}_syncSwipeableIndicatorIndex(e){const{element:s}=this._view,n=s&&this._getSwipeableIndicatorElement(s);if(!n)return;let i=0;for(const r of n.children)bs(r,"active",i===e),i++}_getSwipeableIndicatorElement(e){return e.querySelector('[data-role="index-indicator"]')}_emitSwipeableDisplayEvent(){const e=this._swipeableContext,s=e.displayedIndex;e.displayEventIndex!==s&&(e.displayEventIndex=s,this._view._events.emit("display",{index:s}))}_onClickSwipeable(e){const{target:s}=e;s.closest('[data-role="previous"]')&&(e.preventDefault(),this.previous()),s.closest('[data-role="next"]')&&(e.preventDefault(),this.next())}}const Sy="1.12.7";function Ty(t){const s=t*Math.tan(3*Math.PI/8),n=s*Math.sin(Math.PI/4);return`M${t} 0L${100-s} 0A${t} ${t} 0 0 1 ${100-n} ${n}L${n} ${100-n}A${t} ${t} 0 0 1 0 ${100-s}L0 ${t}Z`}const St="miso-ui-icon",Du=`${St}-svg-${Sy.replaceAll(".","_")}`,He={SEND:"send",SEARCH:"search",TRIANGLE:"triangle",TRIANGLE_EQ:"triangle-eq",CHEVRON:"chevron",CHEVRON_NEGATIVE:"chevron-negative",BULB:"bulb"},Oy=`<symbol id="${St}-${He.SEND}" viewBox="0 0 32 32"><path fill="currentColor" d="M11.499,19.173l5.801,-5.849c0.389,-0.392 1.022,-0.394 1.414,-0.006c0.392,0.389 0.395,1.022 0.006,1.414l-5.798,5.847l5.306,8.002c0.207,0.313 0.572,0.483 0.945,0.441c0.373,-0.042 0.691,-0.289 0.824,-0.64l9.024,-23.904c0.138,-0.366 0.05,-0.78 -0.226,-1.058c-0.276,-0.278 -0.689,-0.369 -1.057,-0.233l-24.004,8.892c-0.353,0.13 -0.602,0.448 -0.646,0.821c-0.044,0.373 0.125,0.74 0.438,0.948l7.973,5.325Z"/></symbol>`,Ay=`<symbol id="${St}-${He.SEARCH}" viewBox="0 0 24 24"><path fill="currentColor" d="M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"/></symbol>`,vy=`<symbol id="${St}-${He.TRIANGLE}" viewBox="-5 -5 105 105"><path d="${Ty(5)}"/></symbol>`,Cy=`<symbol id="${St}-${He.TRIANGLE_EQ}" viewBox="-100 -100 200 200"><path d="M12.99 -77.5A15 15,0,0,0,-12.99 -77.5L-73.61 27.5A15 15,0,0,0,-60.62 50L60.62 50A15 15,0,0,0,73.61 27.5L12.99 -77.5Z"/></symbol>`,Iy=`<symbol id="${St}-${He.CHEVRON}" viewBox="-100 -100 200 200"><path d="M10.61 -43.94A15 15,0,0,0,-10.61 -43.94L-60.61 6.06A15 15,0,0,0,-39.39 27.27L0 -12.12L39.39 27.27A15 15,0,0,0,60.61 6.06L10.61 -43.94Z"/></symbol>`,xy=`<symbol id="${St}-${He.CHEVRON_NEGATIVE}" viewBox="-100 -100 200 200"><path d="M100 100V-200H-200V200H200ZM-10.61 -43.94A15 15,0,0,1,10.61 -43.94L60.61 6.06A15 15,0,0,1,39.39 27.27L0 -12.12L-39.39 27.27A15 15,0,0,1,-60.61 6.06L-10.61 -43.94Z"/></symbol>`,Ry=`<symbol id="${St}-${He.BULB}" viewBox="0 0 16 16"><path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a2 2 0 0 0-.453-.618A5.98 5.98 0 0 1 2 6m6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1"/></symbol>`,Ly=`<svg id="${Du}" style="display:none;">${[Oy,Ay,vy,Cy,Iy,xy,Ry].join("")}</svg>`;let Fu=!1;function ky(){Fu||document.head.querySelector(`#${Du}`)||(Fu=!0,document.head.insertAdjacentHTML("beforeend",Ly))}ky();function tn(t){return`<svg class="miso-ui-icon miso-ui-icon-${t}"><use href="#${St}-${t}"></use></svg>`}const $y=new Set(Object.values(He));function Py(t){return $y.has(t)?tn(t):""}const Ny=tn(He.TRIANGLE),Mu=tn(He.CHEVRON),Uy=tn(He.CHEVRON_NEGATIVE),Dy=tn(He.BULB),Fy="carousel",ju="miso-carousel",qu=Object.freeze({body:jy,controls:qy,controlContainer:By,control:zy,controlIcon:Hy,indexIndicator:Vy,indexIndicatorItem:()=>"",trigger:()=>""}),My=Object.freeze({...ze.defaultTemplates,...qu});function jy(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__viewport"><div class="${n}__viewport-inner">${i.list(t,e,s)}</div></div>${i.controls(t,e,s)}`}function qy(t,e,s){const{templates:n}=t;return`${n.controlContainer(t,e,"previous")}${n.controlContainer(t,e,"next")}${n.indexIndicator(t,e,s)}`}function By(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-container-${s}">${i.control(t,e,s)}</div>`}function zy(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-${s}" data-role="${s}">${i.controlIcon(t,e,s)}</div>`}function Hy(t){return t.options.itemType==="image"?Uy:Mu}function Vy(t,e,s){const{className:n,templates:i}=t;return`<ul class="${n}__index-indicator" data-role="index-indicator">${s.map(r=>`<li class="${n}__index-indicator-item">${i.indexIndicatorItem(t,e,r)}</li>`).join("")}</ul>`}class Bu extends ze{static get type(){return Fy}static get defaultTemplates(){return My}static get defaultClassName(){return ju}constructor({className:e=ju,templates:s,...n}={}){super({className:e,templates:{...qu,...s},...n}),this._initSwipeable()}_render(e,s,n){super._render(e,s,n),this._renderSwipeable(e,s,n)}_afterRender(e,s){super._afterRender(e,s),this._afterRenderSwipeable(e,s)}_onClick(e){this._onClickSwipeable(e),super._onClick(e)}}yy(Bu.prototype);function Qy(t,e){const s=e*2;let n=Math.max(s-t,0),i=t;const r=Math.min(Math.floor(n/3),i);i-=r,n-=r*3;const o=Math.min(n,i);return i-=o,n-=o,[r,o,i]}function Wy(t,e,s,n){const{className:i,templates:r,options:o}=t,{itemType:c}=o,a=r[c](t,e,s,{index:n}),u=s._size?` ${i}__item-${s._size}`:"";return`<li class="${i}__item${u}">${a}</li>`}const Gy="16rem",zu=Object.freeze({...ze.defaultTemplates,item:Wy}),Ky="gallery",Hu="miso-gallery";class Vu extends ze{static get type(){return Ky}static get defaultTemplates(){return zu}static get defaultClassName(){return Hu}constructor({className:e=Hu,templates:s,...n}={}){super({className:e,templates:{...zu,...s},...n}),this._galleryContext={itemAspectRatio:void 0,itemCount:void 0,columnCount:void 0}}syncSize(){const{element:e}=this._view,s=e&&this._getListElement(e);s&&(this._syncListAspectRatio(s),this._syncItemSizes(s))}_preprocess({state:e,rendered:s}){const n=this._shallRenderIncrementally(e,s),i=n?void 0:this._bodyHtml(e),r=this._itemsHtml(e,s);return{...e,...z({incremental:n,bodyHtml:i,itemsHtml:r})}}_bodyHtml(e){return this.templates.root(this,{...e,value:[]})}_itemsHtml(e,s){const n=s&&s.value&&s.value.length||0,i=(this._getItems(e)||[]).slice(n);return i.length>0?this.templates.items(this,e,i,{offset:n}):""}_render(e,s,n){this._syncItemCount(s),this._syncCssVariables();const i=this._renderListElement(e,s,n);i&&(this._syncListAspectRatio(i),this._renderItems(i,s,n))}_renderListElement(e,{state:s}){const{incremental:n,bodyHtml:i}=s;return n||(e.innerHTML=i),this._getListElement(e)}_renderItems(e,s){s.state.incremental?this._appendItems(e,s):this._updateItems(e,s)}_updateItems(e,{state:s}){const{itemSizes:n}=this._galleryContext,i=this._writeItemSizes(this._getItems(s)||[],n);e.innerHTML=this.templates.items(this,s,i)}_appendItems(e,{state:s}){const{itemSizes:n}=this._galleryContext;this._syncItemSizes(e);const i=e.children.length,r=this._writeItemSizes((this._getItems(s)||[]).slice(i),n,i);e.insertAdjacentHTML("beforeend",this.templates.items(this,s,r,{offset:i}))}_writeItemSizes(e,[s=0,n=0]=[],i=0){let r=0;i>0&&(r=Math.min(i,s),i-=r,s-=r),i>0&&(r=Math.min(i,n),i-=r,n-=r);const o=[];for(const c of e){let a="small";s>0?(a="large",s--):n>0&&(a="medium",n--),o.push({...c,_size:a})}return o}_syncCssVariables(){const e=this._galleryContext;let{itemAspectRatio:s=1}=this.options;s=e.itemAspectRatio=co(s);const{element:n}=this._view;n&&(n.style.setProperty("--miso-gallery-item-1x1-aspect-ratio",`${s}`),n.style.setProperty("--miso-gallery-item-1x2-aspect-ratio",`${s.scaleBy([1,2])}`))}_syncListAspectRatio(e){const s=this._galleryContext,{itemCount:n,itemAspectRatio:i}=s,{height:r=Gy}=this.options,o=gy(r),c=e.clientWidth;if(c===0){s.columnCount=void 0,s.itemSizes=void 0;return}const a=s.columnCount=Math.round(c*i.width*2/(o*i.height));s.itemSizes=Qy(n,a),e.style.aspectRatio=`${a} / 2`,e.style.height=n>0?"auto":"0"}_syncItemCount({state:e}={}){const s=this._getItems(e);this._galleryContext.itemCount=s?s.length:void 0}_syncItemSizes(e){const{itemSizes:s=[]}=this._galleryContext;let[n=0,i=0]=s;const{className:r}=this;for(const o of e.children){let c=!1,a=!1;n>0?(c=!0,n--):i>0&&(a=!0,i--),bs(o,`${r}__item-large`,c),bs(o,`${r}__item-medium`,a),bs(o,`${r}__item-small`,!c&&!a)}}}const Yy="search-box",Qu="miso-search-box",Zy="miso-autocomplete";function Jy(t){const{className:e,templates:s,role:n,options:i,autocomplete:r}=t,{placeholder:o}=i,c=n?`data-role="${n}"`:"";return`
<div class="${e}" ${c}>
  <div class="${e}__input-group">
    <input class="${e}__input" type="text" data-role="input" ${o?`placeholder="${o}"`:""}>
    <button class="${e}__button" type="submit" data-role="submit">${s.buttonContent(t)}</button>
  </div>
  <div class="${r.className}" data-role="autocomplete"></div>
</div>`.trim()}function Xy(t){const{templates:e,options:s}=t;if(s.buttonText)return s.buttonText;const{buttonText:n,buttonIcon:i}=e,r=typeof n=="function"?n(t):`${n}`,o=typeof i=="function"?i(t):Py(i)||`${i}`;return r+o}function e1(t,e){const{templates:s,workflow:n,autocomplete:i}=t;t={templates:s,workflow:n,...i};const r=[],o=[];for(const c of e)(c.product?r:o).push(c);return s.queries(t,o)+(o.length>0&&r.length>0?"<hr>":"")+s.products(t,r)}function t1(t,e){const{templates:s}=t;return s.completionList(t,"query",e)}function s1(t,e){const{templates:s}=t;return s.completionList(t,"product",e)}function n1(t,{text:e,text_with_inverted_markups:s}={}){return s||Ge(e)}function i1(t,{product:e}){const{templates:s}=t,[n,i]=s.helpers.tagPair(t,e,{role:!1});return[n,s.imageBlock(t,e),s.productInfoBlock(t,e),i].join("")}function r1(t,e,s){const{className:n,templates:i}=t;return`<ul class="${n}__${e}-list" data-role="${e}-list">${s.map(r=>i.completionItem(t,e,r)).join("")}</ul>`}function o1(t,e,s){const{className:n,templates:i}=t;return`
<li class="${n}__${e}-item" data-role="${e}-item" data-index="${s._index}" tabindex="0">
  ${i[e](t,s)}
</li>`.trim()}const Wu=Object.freeze({root:Jy,buttonContent:Xy,buttonText:"",buttonIcon:"search",completions:e1,completionList:r1,completionItem:o1,queries:t1,products:s1,query:n1,product:i1,imageBlock:ms,productInfoBlock:Xr}),c1=Object.freeze({className:Zy,debounce:300});class ws extends Ke{static get type(){return Yy}static get defaultTemplates(){return Wu}static get defaultClassName(){return Qu}constructor({className:e=Qu,templates:s,autocomplete:n,...i}={}){super({className:e,templates:{...Wu,...s},...i}),ee(this,{autocomplete:{...c1,...n}}),this._contexts=new WeakMap,this._prevInput=void 0,this._debounce=ul(this.autocomplete.debounce)}initialize(e){const{proxyElement:s,hub:n}=e;this._unsubscribes=[...this._unsubscribes,s.on("input",i=>this._syncInput(i)),s.on("keydown",i=>this._handleKeyDown(i)),s.on("click",i=>this._handleClick(i)),s.on("focusin",i=>this._handleFocusIn(i)),s.on("focusout",i=>this._handleFocusOut(i)),n.on(Hr(),()=>e.refresh({force:!0}))]}focus(){this._element?this._context().focus():this._focusRequested=!0}open(){this._element.classList.add("open")}close(){this._element.classList.remove("open")}set value(e){this._element?this._context().value=e:this._valueRequested=e}_preprocess({state:e}){return e=super._preprocess({state:e}),{...e,completions:this._view.hub.states[Hr()]}}_render(e,s,n){e.childElementCount===0&&super._render(e,s,n),this._updateCompletions(e,s,n)}_afterRender(e,s){this._fullfillFocusRequest(e),this._fullfillValueRequest(e)}_updateCompletions(e,{state:s,rendered:n},{writeToState:i}){if(!s.completions)return;const{status:r=P.INITIAL,session:o,value:c}=s.completions,{index:a}=o;if(n&&n.completions.index===a&&n.completions.status===r)return;const u=this._context(e),{autocompleteElement:l}=u;if(!l)return;const d=u.trackItems(c);bs(e,"nonempty",d.length>0),l.setAttribute("data-status",r),l.innerHTML=this.templates.completions(this,d),i({completions:{index:a,status:r}})}_fullfillFocusRequest(e){!e||!this._focusRequested||(this._focusRequested=!1,this._context(e).focus())}_fullfillValueRequest(e){!e||!this._valueRequested||(this._context(e).value=this._valueRequested,this._valueRequested=void 0)}_context(e){if(e=e||this._view.element,!e)return ys.empty();let s=this._contexts.get(e);return s||this._contexts.set(e,s=new ys(e)),s}_syncInput(){const{inputElement:e}=this._context();if(!e)return;const s=e.value.trim();if(this._prevInput===s)return;this._prevInput=s;const n=this;this._debounce(()=>n._view.hub.update(su(),{value:s}))}_handleFocusIn({target:e}){this._element&&e.matches('[data-role="input"]')&&(this._syncInput(),this.open())}_handleFocusOut({relatedTarget:e}){this._element&&(!e||!kr(e,s=>s===this._element||void 0))&&this.close()}_handleKeyDown({key:e,target:s,isComposing:n}){!n&&e==="Enter"&&s.matches('[data-role="input"]')&&(this._submit(s.value),s.blur())}_handleClick(e){const{target:s}=e,{inputElement:n}=this._context();for(let i=s;i&&i!==this._element;i=i.parentElement){if(i.matches('[data-role="submit"]')||i.matches('[data-role="button"]')||i.matches('[type="submit"]')){n&&(n.blur(),this._submit(n.value));return}if(i.matches('[data-role="query-item"]')){const r=i.getAttribute("data-index"),o=this._context().data.get(parseInt(r)),c=o&&o.text;c&&(n&&(n.value=c),this._view._events.emit("select",Object.freeze({value:o,index:r,domEvent:e})),e.defaultPrevented||this._submit(c)),this.close();return}if(i.matches('[data-role="product-item"]')){this._view._events.emit("select",Object.freeze({value:item,index,domEvent:e}));return}}}async _submit(e){!e||!e.trim()||(this.close(),this._view.hub.update(Mt(),{q:e}),this._trackSubmit(e))}_trackSubmit(e){const{[Ae.SUBMIT]:s}=this._view.tracker.options||{};s&&this._view.tracker.submit({value:e})}}class ys{static empty(){return ys._empty||(ys._empty=new ys)}constructor(e){this._element=e,this._cache={},this._data=new Map}get inputElement(){return this._get("input")}get autocompleteElement(){return this._get("autocomplete")}get data(){return this._data}trackItems(e){let s=0;const n=this._data=new Map,i=[];for(const r in e)for(const o of e[r])o.product&&!o.product.url||(o._index=s,o._field=r,n.set(s,o),i.push(o),s++);return i}focus(){if(!this._element)return;const{inputElement:e}=this;e&&e.focus()}set value(e){if(!this._element)return;const{inputElement:s}=this;s&&(s.value=e)}_get(e){return this._element?this._cache[e]||(this._cache[e]=this._element.querySelector(`[data-role="${e}"]`)):void 0}}const a1="option-list",Gu="miso-option-list";function l1(t,e){const{className:s,role:n,templates:i}=t,r=n?`data-role="${n}"`:"";return`
<div class="${s}" ${r}>
  ${i.options(t,e)}
</div>
`}function u1(t,e){const{className:s,templates:n}=t,i=e.value||[];return`
<ol class="${s}__options" data-role="options">
  ${i.map((r,o)=>n.option(t,r,{index:o})).join("")}
</ol>
`}function f1(t,e){const{className:s}=t,n=Ge(e.text||e);return`<li class="${s}__option" data-role="option" tabindex="0">${n}</li>`}const Ku=Object.freeze({root:l1,options:u1,option:f1});class mi extends Ke{static get type(){return a1}static get defaultTemplates(){return Ku}static get defaultClassName(){return Gu}constructor({className:e=Gu,templates:s,...n}={}){super({className:e,templates:{...Ku,...s},...n}),this._initTrackable()}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",n=>this._handleClick(n))]}_render(e,s,n){super._render(e,s,n);const{state:i}=s;this._syncOptionValues(e,i)}_afterRender(e,s){this._syncBindings(e,s)}_unrender(){this._clearBindings()}_syncOptionValues(e,s){const n=e&&this._getOptionsElement(e);if(!n)return;const i=this._getItems(s)||[];bs(n,"empty",i.length===0)}_getItems(e){return e.value}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){const s=e.target.closest('[data-role="option"]');if(!s)return;const n=this._bindings.get(s),i=n&&n.value;i&&(this._trackClick(e,n),this._select(i.text))}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}oo(mi.prototype);function d1(t){const{className:e,role:s,templates:n}=t,i=s?`data-role="${s}"`:"";return`
<div class="${e}" ${i}>
  ${n.options(t)}
</div>
`}function h1(t,e){const{className:s,templates:n}=t;return`
<div role="button" class="${s}__option" data-value="${e.value}">
  ${n.content(t,e)}
</div>
`}const Yu=Object.freeze({...du("options"),root:d1,option:h1});class _1 extends Ke{static get defaultTemplates(){return Yu}constructor({className:e,templates:s,field:n,defaultValue:i,...r}={}){super({className:e,templates:{...Yu,...s},...r}),this._field=n,this._defaultValue=i}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,e.hub.on(this._field,()=>this._refresh()),s.on("click",n=>this._handleClick(n))],this._defaultValue?this._select(this._defaultValue,{silent:!0}):this._clear({silent:!0})}_preprocess(e,s){return e.rendered&&s.skip(),super._preprocess(e,s)}_handleClick({target:e}){const s=kr(e,o=>o.hasAttribute("data-value")?o:void 0);if(!s)return;let{unselected:n,value:i}=this._view.hub.states[this._field];n=n||i===void 0;const r=s.getAttribute("data-value");n||i===void 0||i!==r?this._select(r):this._clear()}_refresh(){this._state=this._view.hub.states[this._field],ni(()=>this._syncValueAttribute())}_syncValueAttribute(){if(!this._state||!this._view)return;const{element:e}=this._view,s=e&&e.children[0];if(!s)return;let{unselected:n,value:i}=this._state;n?s.removeAttribute("data-selected"):s.setAttribute("data-selected",i),this._state=void 0}_select(e,s){this._submit({value:e},s)}_clear(e){this._submit({unselected:!0},e)}async _submit(e,s){this._view.hub.update(this._field,e,s)}}const p1="feedback",Zu="miso-feedback",m1=["helpful","unhelpful"];function g1(t){const{templates:e}=t;return m1.map(s=>e.option(t,{value:s})).join("")}function b1(t,{value:e}){const{className:s,templates:n,options:i={}}=t;return`
${i.icon!==!1?`<i class="${s}__icon">${n.icon(t,e)}</i>`:""}
${i.text!==!1?`<span class="${s}__text">${n.text(t,e)}</span>`:""}
`}function w1(t,e){switch(e){case"helpful":case"unhelpful":return Yw;default:return""}}function y1(t,e){switch(e){case"helpful":return"Helpful";case"unhelpful":return"Not helpful";default:return""}}const Ju=Object.freeze({options:g1,content:b1,icon:w1,text:y1});class Xu extends _1{static get type(){return p1}static get defaultTemplates(){return Ju}static get defaultClassName(){return Zu}constructor({className:e=Zu,templates:s,...n}={}){if(super({className:e,templates:{...Ju,...s},field:tu(),...n}),n.text===!1&&n.icon===!1)throw new Error("At least one of options.text or options.icon must be enabled")}}const E1="text",ef="miso-text";function S1(t,{value:e}){const{className:s,role:n,options:{raw:i=!1,tag:r}}=t,o=n?`data-role="${n}"`:"",c=e!==void 0?Ge(T1(t)(e)):"";return i?c:`<${r} class="${s}" ${o}>${c}</${r}>`}function T1(t){let{format:e}=t.options;const{formatDate:s,formatNumber:n}=t.templates.helpers;if(!e)return o=>`${o}`;switch(typeof e){case"function":return e;case"string":e=[e];break}let[i,r]=e;switch(i){case"date":return o=>s(o,r);case"number":return o=>n(o,r);default:return o=>`${o}`}}const tf=Object.freeze({root:S1});class sn extends Ke{static get type(){return E1}static get defaultTemplates(){return tf}static get defaultClassName(){return ef}constructor({className:e=ef,templates:s,tag:n="p",...i}={}){super({className:e,templates:{...tf,...s},tag:n,...i})}}class O1 extends Jr{constructor(e){super(e)}_takePending(){return this._pending}_applyRender(e,s={}){const n=ri(!1);super._applyRender(e,{...s,loop:n.t}),n.value&&this._requestRaf()}}class A1{clear(e){return e.innerText="",{cursor:0,done:!1}}update(e,{value:s,cursor:n},{value:i,cursor:r,done:o}){const c=i.length;r=Math.min(r,c);const a=!!o&&r===c,u=s.substring(0,n),l=!i.startsWith(u);return a||l?e.innerText=i:e.insertAdjacentText("beforeend",i.substring(n,r)),a&&e.classList.add("done"),{cursor:r,done:a}}}function v1(t,e,{status:s}){if(!e)return;e.children.length===0&&(e.innerHTML=C1(t));const n=e.children[0];return n.setAttribute("data-status",s||P.INITIAL),n}function C1(t){let{className:e,role:s,options:{tag:n,format:i,builtInStyles:r=!0}}=t;n==="auto"&&(n=i==="markdown"?"div":"p");const o=s?`data-role="${s}"`:"",c=[e,sf(e)];return r&&i==="markdown"&&c.push("miso-markdown"),`<${n} class="${c.join(" ")}" ${o} data-format="${i}"></${n}>`}function sf(t){return`${t}__cursor`}function I1(t,e){return t&&e&&t.session&&e.session&&t.session.uuid===e.session.uuid}function x1(t){if(t===!0)return R1();if(t){if(typeof t=="function")return t;throw new Error("onDebug must be a function or a boolean")}}function R1(t=performance.now()){return function({summary:e,timestamp:s,elapsed:n,ref:i,operation:r,conflict:o}){MisoClient.debug("<progressive-markdown>",`[${L1(s-t)}](${nf(n[0])}, ${nf(n[1])})`,e,`${r}`,i,o)}}function L1(t){return`${Math.floor(t)/1e3}s`}function nf(t){return`${Math.floor(t*100)/100}ms`}const k1="typewriter",rf="miso-typewriter";class nn extends O1{static get type(){return k1}static get defaultClassName(){return rf}constructor({className:e=rf,tag:s="auto",format:n="markdown",tooltip:i=!1,speed:r,acceleration:o,nextCursorFn:c,...a}={}){super({tag:s,format:n,tooltip:i,...a}),ee(this,{className:e}),this._prevState=void 0,this._getNextCursor=typeof c=="function"?c:fg({speed:r,acceleration:o}),this._readiness=new gt,n==="markdown"&&nn.MisoClient.plugins.install("std:ui-markdown")}initialize(){this._setup()}async _setup(){try{switch(this.options.format){case"plaintext":await this._setupForPlaintext();break;default:await this._setupForMarkdown()}this._readiness.resolve()}catch(e){this._readiness.reject(e)}}async _setupForMarkdown(){const e=await this._view._views._extensions.require("markdown");if(!this._view)return;const s=sf(this.className),{onDebug:n,onCitationLink:i,variant:r}=this.options;this._renderer=e.createRenderer({cursorClass:s,getSource:o=>this._getSource(o),onCitationLink:i,onDebug:x1(n),variant:r}),this._unsubscribes.push(this._view.proxyElement.on("click",o=>this._onClick(o)))}_getSource(e){const{data:s={}}=this._view._data,{sources:n=[]}=s;return n[e]}async _setupForPlaintext(){this._renderer=new A1}async _ready(){return this._readiness.promise}async render(...e){await this._ready(),await super.render(...e)}_preprocess({state:e}){const s=this._prevState,{value:{value:n="",stage:i,finished:r}={},session:o,status:c}=e,a=I1(s,e),u=a&&i===s.stage,l=s?u?s.streak:s.streak+1:0,d=a&&s&&s.doneAt||(c===P.READY&&r?performance.now():void 0),m=d!==void 0;return this._prevState=Object.freeze(z({session:o,status:c,value:n,stage:i,streak:l,doneAt:d,done:m}))}_render(e,{state:s,rendered:n},{notifyUpdate:i,writeToState:r,loop:o}){const c=v1(this,e,s);let a;const u=!n||s.streak!==n.streak;if(u)a=this._renderer.clear(c,n);else{const m=this._getNextCursor(n.cursor,s.doneAt,n.timestamp,s.timestamp);a=this._renderer.update(c,n,{...s,cursor:m})}r(a);const l=s.status===P.READY&&!a.done,d=l&&(!n||n.status===P.READY)&&!u;i({ongoing:l},{silent:d}),l&&o()}_onClick(e){const{target:s}=e,n=s.closest('[data-role="citation-link"]');if(n){const o=parseInt(n.dataset.index);Number.isNaN(o)||this._view._events.emit("citation-click",{event:e,index:o});return}const i=s.closest('[data-role="follow-up-link"]');if(i){let{q:o}=i.dataset;o=o?o.trim():void 0,o&&this._view._events.emit("follow-up-click",{event:e,q:o});return}const r=s.closest("a");if(r){if(!e.defaultPrevented){const{href:o,innerText:c,className:a}=r;o&&this._view._events.emit("link-click",z({event:e,url:o,text:c?c.trim():"",className:a||"",attributes:$1(r)}))}return}}}function $1(t){const{attributes:e}=t,s={};for(const{name:n,value:i}of e)n.startsWith("data-")&&(s[n]=i);try{return JSON.stringify(s)}catch{return"{}"}}const P1="affiliation",of="miso-affiliation";function N1(t,e){const{className:s,role:n,templates:i,options:r}=t,{status:o}=e,c=n?` data-role="${n}"`:"",a=e.value||{},u=a.channel?` data-channel="${a.channel}"`:"",l=t._getItems(e),d=l?l.length:void 0,m=d!==void 0?` data-item-count="${d}"`:"",E=r.itemType?` data-item-type="${r.itemType}"`:"";return`<div class="${s} ${o}"${c}${u}${E}${m}>${o===P.READY?i[o](t,e):""}</div>`}function U1(t,e){const{templates:s}=t,n=t._getItems(e);return n&&n.length>0?s.controlContainer(t,e,"previous")+s.body(t,e)+s.controlContainer(t,e,"next"):s.empty(t,e)}function D1(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-${s}-container">${i.control(t,e,s)}</div>`}function F1(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-${s}" data-role="${s}">${i.controlIcon(t,e,s)}</div>`}function M1(t,e,s){return Ny}function j1(t,e){const{className:s,templates:n}=t,i=t._getItems(e);return`<div class="${s}__body">${n.list(t,e,i)}</div>`}function q1(t,e,s,n){const{className:i,templates:r,options:o}=t,{itemType:c}=o,a=r.itemHeader(t,e,s,{index:n}),u=r[c](t,e,s,{index:n});return`<li class="${i}__item"><div class="${i}__item-inner">${a}${u}</div></li>`}function B1(t,e,s,n){const{className:i,templates:r}=t;let{itemHeaderLeftText:o,itemHeaderRightText:c}=r;return o=Et.asFunction(o)(t,e,s,n),c=Et.asFunction(c)(t,e,s,n),`<div class="${i}__item-header">
  <div class="${i}__item-header-left">${o}</div>
  <div class="${i}__item-header-right">${c}</div>
</div>`}function z1(t,e,s,n){const{className:i,templates:r}=t,o=Et.asFunction(r.logoText)(t,e,s,n)||"",c=Et.asFunction(r.logoImg)(t,e,s,n);return c?`<span class="${i}__item-header-logo-text">${o}</span>${c}`:""}function H1(t,e,s,n){const{className:i,templates:r}=t,o=Et.asFunction(r.logoUrl)(t,e,s,n);if(!o)return"";const c=Et.asFunction(r.logoAltText)(t,e,s,n),a=c?` alt="${c}"`:"";return`<img class="${i}__item-header-logo" src="${o}"${a}>`}const cf=Object.freeze({root:N1,[P.READY]:U1,controlContainer:D1,control:F1,controlIcon:M1,body:j1,item:q1,itemHeader:B1,affiliation:Uw,ctaText:"View deal",itemHeaderLeftText:"Today's best deals",itemHeaderRightText:z1,logoImg:H1,logoText:"Selected by"}),V1=Object.freeze({...ze.defaultTemplates,...cf});class af extends ze{static get type(){return P1}static get defaultTemplates(){return V1}static get defaultClassName(){return of}constructor({className:e=of,templates:s,autoplay:n,...i}={}){super({className:e,itemType:"affiliation",templates:{...cf,...s},...i}),this._itemCount=void 0,this._itemIndex=0,this._displayedCount=void 0,this._displayedIndex=void 0,this._viewable=void 0}initialize(e){super.initialize(e);const{viewable:s}=this._view.tracker.options||{};this._viewable=new bg(this._onViewable.bind(this),s)}get itemIndex(){return this._itemIndex}set itemIndex(e){this._itemCount!==void 0&&(e<0?e=this._itemCount-1:e>=this._itemCount&&(e=0),this._itemIndex=e,ni(()=>this._syncItemIndex()))}next(){this._itemCount!==void 0&&this.itemIndex++}previous(){this._itemCount!==void 0&&this.itemIndex--}_render(e,s,n){super._render(e,s,n),this._syncItemCount(s),this._syncItemIndex()}_syncElement(e){const s=this._element;super._syncElement(e),this._syncViewableElement(s,e)}_syncViewableElement(e,s){e!==s&&(e&&this._viewable.unobserve(e),s&&this._viewable.observe(s))}_syncItemCount({state:e}={}){const s=this._getItems(e),n=this._itemCount=s?s.length:void 0;if(n===this._displayedCount)return;let{element:i}=this._view;i=i.firstElementChild,i&&(Nu(i,"data-item-count",n),this._displayedCount=n)}_syncItemIndex(){const e=this._itemIndex;if(e===this._displayedIndex)return;const{element:s}=this._view,n=s&&this._getListElement(s);n&&(this._displayedIndex=e,n.style.left=`${-e*100}%`,this._viewable.display(e),this._view._events.emit("display",{index:e}))}_onViewable(e){const s=this._getRenderedItemData(e);s&&this._view.tracker.viewable([s])}_getRenderedItemData(e){const{value:s}=this._rendered.get(this._element)||{};if(!s)return;const{products:n=[]}=s;return n[e]}_trackViewables(){}_onClick(e){const s=e.target;if(s.closest('[data-role="previous"]')){this.previous();return}if(s.closest('[data-role="next"]')){this.next();return}super._onClick(e)}}const Q1="facets",lf="miso-facets",gi="miso-facet",uf="custom_attributes.";function W1(t,e){const{className:s,role:n,templates:i}=t,r=n?`data-role="${n}"`:"";return`<div class="${s}" ${r}>${i.facets(t,e)}</div>`}function G1(t,e){const{templates:s}=t,{facet_fields:n={}}=e.value||{};return Object.keys(n).map(i=>s.facet(t,{field:i,entries:n[i]},e))}function K1(t,e,s){const{facetClassName:n=gi,templates:i}=t,{field:r}=e;return`<div class="${n}" data-role="facet" data-field="${Ge(r)}">${i.header(t,e,s)}${i.options(t,e,s)}</div>`}function Y1(t,e,s){const{facetClassName:n=gi,templates:i}=t;return`<div class="${n}__header">${i.title(t,e,s)}</div>`}function Z1(t,{field:e}){return e.startsWith(uf)&&(e=e.substring(uf.length)),Ge(e)}function J1(t,{field:e,entries:s},n){const{facetClassName:i=gi,templates:r}=t;return`<ul class="${i}__options" data-role="options">${s.map(([o,c])=>r.option(t,{field:e,value:o,count:c},n)).join("")}</ul>`}function X1(t,e,s){const{facetClassName:n=gi,templates:i}=t;return`
<li class="${n}__option" data-role="option" tabindex="0">
  <span class="${n}__value">${i.value(t,e,s)}</span>
  <span class="${n}__count">${i.count(t,e,s)}</span>
</li>`}function eE(t,{value:e},s){return Ge(e)}function tE(t,{count:e},s){return t.templates.helpers.formatNumber(e)}const ff=Object.freeze({root:W1,facets:G1,facet:K1,header:Y1,title:Z1,options:J1,option:X1,value:eE,count:tE});function sE(t,e){return`${t}:::${e}`}function df(t){const e={};for(const s in t)e[s]=new Set(t[s]);return e}class hf extends Ke{static get type(){return Q1}static get defaultTemplates(){return ff}static get defaultClassName(){return lf}constructor({className:e=lf,templates:s,...n}={}){super({className:e,templates:{...ff,...s},...n}),this._bindings=new xu}initialize(e){const{proxyElement:s,filters:n}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",i=>this._handleClick(i)),n.on("update",i=>this._updateSelections(i)),n.on("reset",()=>this._syncSelections())]}_render(e,s,n){super._render(e,s,n)}_afterRender(e,s){this._syncBindings(e,s),this._syncSelections()}_unrender(){this._clearBindings()}_syncSelections(){const e=df(this._view.hub.states[_s()].facets);for(const{value:{field:s,value:n},element:i}of this._bindings.entries)this._setSelected(i,e[s]&&e[s].has(n))}_updateSelections({updates:e}){const s=df(e.facets);for(const{value:{field:n,value:i},element:r}of this._bindings.entries)s[n]&&this._setSelected(r,s[n].has(i))}_setSelected(e,s){e&&(s?e.classList.add("selected"):e.classList.remove("selected"))}_syncBindings(e,s){if(!e||!s.value)return;const n=this._getItems(s),i=[],r=[],o=[];for(const c of this._getFacetElements(e)){const a=c.getAttribute("data-field"),u=n[a];if(!u)continue;const l=this._getItemElements(c);for(let d=0;d<l.length;d++){const m=l[d],E=u[d];if(!E)break;i.push(sE(a,E)),r.push({field:a,value:E}),o.push(m)}}this._bindings.update(i,r,o)}_clearBindings(){this._bindings.clear()}_getItems({value:e}={}){const{facet_fields:s={}}=e||{},n={};for(const i in s)n[Ge(i)]=s[i].map(([r])=>r);return n}_getFacetElements(e){return Array.from(e.querySelectorAll('[data-role="facet"]'))}_getFacetElement(e,s){return e.querySelector(`[data-role="facet"][data-field="${s}"]`)}_getItemElements(e){return Array.from(e.querySelectorAll('[data-role="option"]'))}_handleClick(e){if(e.button!==0)return;const s=e.target.closest('[data-role="option"]');if(!s)return;const n=this._bindings.get(s),i=n&&n.value;if(!i)return;const{field:r,value:o}=i;this._view.filters.facets.toggle(r,o),this._view.filters.apply()}destroy(){this._bindings.clear(),super.destroy()}}const nE="select",_f="miso-select";function iE(t,e){const{className:s,role:n,templates:i}=t,r=n?`data-role="${n}"`:"",o=t._getItems(e),c=o.find(a=>a.selected)||o[0];return`
<div class="${s}" ${r}>
  ${i.button(t,c)}
  ${i.options(t,e)}
</div>`}function rE(t,e){const{className:s,templates:n}=t;return`<button class="${s}__button" data-role="button" tabindex="0">${n.text(t,e)}</button>`}function oE(t,e){const{className:s,templates:n}=t,i=t._getItems(e);return`<ul class="${s}__options">${i.map((r,o)=>n.option(t,r,{index:o})).join("")}</ul>`}function cE(t,e){const{className:s,templates:n}=t,i=e.selected?"selected":"";return`<li class="${s}__option ${i}" data-role="option" tabindex="0">${n.text(t,e)}</li>`}function aE(t,e){return Ge(e&&e.text&&Fm(e.text)||e||"")}const pf=Object.freeze({root:iE,button:rE,options:oE,option:cE,text:aE});class ao extends Ke{static get type(){return nE}static get defaultTemplates(){return pf}static get defaultClassName(){return _f}constructor({className:e=_f,templates:s,...n}={}){super({className:e,templates:{...pf,...s},...n}),this._initTrackable()}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",n=>this._handleClick(n))]}_afterRender(e,s){this._syncBindings(e,s)}_unrender(){this._clearBindings()}_getItems(e){return e.value||[]}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){if(this._element)for(let s=e.target;s&&s!==this._element;s=s.parentElement){const{role:n}=s.dataset;switch(n){case"button":this._toggle();break;case"option":const i=this._bindings.get(s);this._select(i&&i.value);break}}}_toggle(){if(!this._element)return;const e=this._element.children[0];e&&e.classList.toggle("open")}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}oo(ao.prototype);const lE="more-button",mf="miso-more-button";function uE(t,e){const{className:s,role:n,templates:i}=t,r=n?` data-role="${n}"`:"",o=e.status!==P.READY?" disabled":"";return`
<div class="${s}"${r}${o}>
  ${i.text(t)}
</div>
`}const gf=Object.freeze({root:uE,text:fE});function fE(t){return"More"}class bf extends Ke{static get type(){return lE}static get defaultTemplates(){return gf}static get defaultClassName(){return mf}constructor({className:e=mf,templates:s,...n}={}){super({className:e,templates:{...gf,...s},...n})}initialize(e){this._unsubscribes=[...this._unsubscribes,e.proxyElement.on("click",s=>this._handleClick(s))]}_handleClick(e){if(e.button!==0)return;const s=e.target.closest('[data-role="more"]');!s||s.disabled||this._view.hub.trigger(Wr())}}const dE=Object.freeze(Object.defineProperty({__proto__:null,AffiliationLayout:af,BannerLayout:ey,CardsLayout:my,CarouselLayout:Bu,CollectionLayout:ze,ContainerLayout:Ou,ErrorLayout:vu,FacetsLayout:hf,FeedbackLayout:Xu,GalleryLayout:Vu,HorizontalLayout:$u,ListLayout:gs,MoreButtonLayout:bf,OptionListLayout:mi,SearchBoxLayout:ws,SelectLayout:ao,TemplateBasedLayout:Ke,TextLayout:sn,TypewriterLayout:nn},Symbol.toStringTag,{value:"Module"}));function hE(t,{hub:e,workflowOptions:s={}}={}){const{sort:{options:n=[]}={}}=s.filters||{};if(!n.length)return[];const{sort:i}=e.states[_s()]||{},r=i&&i.field||_E(n).field;return r?n.map(o=>({...o,selected:o.field===r})):n}function _E(t){for(const e of t)if(e.default)return e;return t[0]}function pE(t){if(!t||!t.value)return;const{answer:e="",answer_stage:s,finished:n}=t.value;return Object.freeze({value:e,stage:s,finished:!!n})}function mE(t){if(!t||!t.value)return;const{reasoning:e="",reasoning_finished:s}=t.value;return Object.freeze({value:e,stage:"reasoning",finished:!!s})}function gE(t,{workflow:e}={}){const s=e.previous,n=s&&s.states[me()].value,i=n&&(n.suggested_followup_questions||n.followup_questions||[]);return i&&i.map(r=>({text:r}))}function bE(t){if(!(!t||!t.value))return(t.value.followup_questions||[]).map(e=>({text:e}))}function wf({qs:t,...e}={}){return ci(e,{metadata:{question_source:t||Yt.ORGANIC}})}function wE(t,e){return e===Ft.QUERY?t:{...t,answer:!1}}function yf(t){return t&&t.value&&t.value.revision}function yE(t,e){if(!t||!t.value||t.request||!e||!e.request)return t;const{request:s}=e;return{...t,request:s}}function EE(t){const e=SE(t),s=e===P.READY?t.ongoing:void 0;return z({status:e,ongoing:s,...t})}function SE(t){if(!t)return P.INITIAL;const{request:e,error:s,value:n}=t;return s?P.ERRONEOUS:n?P.READY:e?P.LOADING:P.INITIAL}function TE(t){const{value:e}=t;if(!e)return t;const{miso_id:s}=e;return s?{...t,meta:{...t.meta,miso_id:s}}:t}function Ef(t){const{session:e,value:s}=t;if(!e||!s)return;const{miso_id:n}=s;n&&(e.meta.miso_id=n)}function OE(t){const{session:e,value:s}=t;if(!e||!s)return t;const{meta:{miso_id:n}={}}=e;return n?{...t,meta:{...t.meta,miso_id:n}}:t}function Sf(t){const{request:e,value:s}=t;if(!e)return t;const{payload:n}=e||{},{q:i}=n||{};return i?{...t,value:{...s,keywords:i}}:t}function AE(t){const{value:e}=t;if(!e)return t;const{answer_stage:s}=e;return s?{...t,ongoing:!e.finished,meta:{...t.meta,answer_stage:s}}:t}function vE(t,e){if(!e)return t;const{status:s,value:n}=t;switch(s){case P.INITIAL:case P.LOADING:break;default:return t}return n&&n.facet_counts?t:{...t,value:{...n,facet_counts:e}}}function CE(t){const{value:e}=t;if(!e)return t;const{miso_id:s}=e;return s?{...t,value:{...e,root_miso_id:s}}:t}function IE(t,e,{role:s=p.PRODUCTS}={}){if(!e.value)return t;const{[s]:n=[],facet_counts:i,total:r,root_miso_id:o}=t.value,{[s]:c=[]}=e.value;return{...e,value:{...e.value,facet_counts:i,total:r,root_miso_id:o,[s]:[...n,...c]}}}function xE(t,{role:e=p.PRODUCTS}={}){const{status:s,request:n,value:i}=t;if(s!==P.READY||!n||!i)return t;const{[e]:r}=i;if(!r)return t;const{rows:o}=n.payload,{length:c}=r;return c<o?{...t,meta:{...t.meta,exhausted:!0}}:t}function RE(t,e){const{question_id:s}=e&&e.value||{};return s?{...t,value:{...t.value,question_id:s}}:t}function LE(t){const{role:e,type:s,items:n}=t,i={type:s==="viewable"?"viewable_impression":s,context:{custom_context:z({property:e})}};switch(vb(s)&&(kE(e,n)?i.product_ids=(n||[]).map(r=>typeof r=="string"?r:r.product_id).filter(r=>r):(i.product_ids=[],i.context.custom_context.items=(n||[]).map(r=>r.text||r.id||r))),s){case Ae.SUBMIT:i.context.custom_context.value=t.value;break;case Ae.FEEDBACK:i.context.custom_context.value=i.value=t.value,i.context.custom_context.result_type=i.result_type=t.result_type;break}return z(i)}function kE(t,e=[]){return Ob(t)||e.length>0&&typeof e[0]=="object"&&e[0].product_id}function $E(t,e){const{data:s}=e;if(!s)return t;const n=s.request&&s.request.payload&&s.request.payload.metadata;return n?qe(t,{context:{custom_context:n}}):t}function PE(t,e){const{data:s}=e;if(!s)return t;const n=s.request&&s.request.payload;if(!n)return t;const{question:i,q:r,fq:o}=n;return qe(t,{context:{custom_context:{question:i,q:r,fq:o}}})}function NE(t,e){if(e.role!==p.AFFILIATION)return t;const{items:s}=e,n=s[0]&&s[0].channel||void 0,i=s.map(r=>r.position);return qe(t,{context:{custom_context:{channel:n,positions:i}}})}function Tf(t,e){return t=UE(t,e),t=DE(t,e),t=FE(t,e),t}function UE(t={},{data:e}={}){if(!e)return t;const{request:s={},value:n={}}=e,{question_source:i}=s.payload&&s.payload.metadata||{},{question_id:r}=n;return qe(t,{context:{custom_context:{question_source:i,question_id:r}}})}function DE(t,e){if(e.role!==p.ANSWER)return t;const{items:s=[]}=e;return qe(t,{context:{custom_context:{urls:s.map(n=>n.url),texts:s.map(n=>n.text),class_names:s.map(n=>n.className),attributes:s.map(n=>n.attributes)}}})}function FE(t,{event_target:e}={}){return e?qe(t,{context:{custom_context:{event_target:e}}}):t}function ME(t){const{value:e}=t;return!e||!e.finished||e.finish_reason!=="success"||e.sources&&e.sources.length>0?t:{...t,meta:{...t.meta,unanswerable:!0}}}const Of=Object.freeze({}),Af=Object.freeze({[p.CONTAINER]:Ou.type,[p.ERROR]:vu.type}),vf=Object.freeze({}),jE=Object.freeze({api:Of,layouts:Af,trackers:vf}),qE=Object.freeze({mappings:{[p.ERROR]:t=>t.error}});class se extends Re{constructor(e){super(e.name||"workflow",e.plugin);let{context:s,plugin:n,client:i,defaults:r,options:o,extraOptions:c}=e;this._context=s,this._plugin=n=n||s._plugin,this._client=i=i||s._client,e=Object.freeze({...e,plugin:n,client:i}),this._name=e.name,this._roles=e.roles,this._extensions=n._getExtensions(i),this._defaults=r,this._options=o||new Wl(s&&s._options,r),this._extraOptions=c||{},this._hub=new rw({onUpdate:a=>this._onHubUpdate(a),onEmit:a=>this._onHubEmit(a)}),this._sessionContext=new WeakMap,i._events.emit("workflow",this),this._initProperties(e),this._initActors(e),this._initSubscriptions(e),this._initSession(e)}_initProperties(){}_initActors({roles:e}){const s=this._hub,n=this._client,i=this._options,r=this._extensions,o=this._plugin.layouts;this._sessions=new ow(s),this._data=new cw(s,{source:fu(n),options:i,...this._extraOptions.api}),this._views=new vw(s,{extensions:r,layouts:o,roles:e,options:i,workflow:this}),this._interactions=new Rw(s,{client:n,options:i})}_initSubscriptions({roles:e}){this._unsubscribes=[this._hub.on(fi(),s=>this._onSession(s)),this._hub.on(Xl(),s=>this.updateData(s)),this._hub.on(Qr(),s=>this._onTracker(s))],e.main&&this._unsubscribes.push(this._hub.on(yt(e.main),s=>this._onMainViewUpdate(s)))}_initSession(){this.restart()}_getSessionContext(e){let s=this._sessionContext.get(e);return s||this._sessionContext.set(e,s={}),s}_onHubUpdate(e){this._runCallbacks(this._client.meta.parent._hubUpdateCallbacks,e)}_onHubEmit(e){this._runCallbacks(this._client.meta.parent._hubEmitCallbacks,e),this._emitAsWorkflowEvent(e)}_emitAsWorkflowEvent({action:e,name:s,state:n,silent:i}){i||this._emit(s,{_action:e,...n})}get uuid(){return this.session&&this.session.uuid}get session(){return this._hub.states[fi()]}get states(){return this._hub.states}get status(){const e=this._hub.states[me()];return e&&e.status}get views(){return this._views.interface}restart(){return this._emitInterruptEventIfNecessary(),this._sessions.restart(),this}_emitInterruptEventIfNecessary(){const{main:e}=this._roles;if(!e)return;const s=this._hub.states[yt(e)]||{};s.session&&s.status===P.LOADING&&(this._emitLifecycleEvent("interrupt",s),this._emitLifecycleEvent("finally",s))}_onSession(e){this.updateData({session:e})}_onMainViewUpdate(e){const{status:s}=e,n=s===P.READY,i=s===P.ERRONEOUS,r=i?"error":s;this._emitLifecycleEvent(r,e),n&&this._emitLifecycleEvent("done",e),(n||i)&&this._emitLifecycleEvent("finally",e)}_shallEmitLifecycleEvent(e,{session:s}){const n=this._getSessionContext(s),i=n.lifecycleEvents||(n.lifecycleEvents=new Set),r=i.has(e);return i.add(e),!r}_emitLifecycleEvent(e,s){this._shallEmitLifecycleEvent(e,s)&&this._emit(e,s)}_request(e={}){const{session:s}=this,n=zl(this._options.resolved.api,e);this.updateData({session:s,request:n}),this._hub.update(Vr(),{...n,session:s})}updateData(e){if(!e)throw new Error("Data is required.");const{session:s}=e;if(!s)throw new Error("Session is required to update data.");if(!this.session)throw new Error("No session is created yet. Call workflow.restart() to start a new session.");if(s.uuid!==this.session.uuid)return;const n=yf(e);if(!si(n)){const i=yf(this._hub.states[me()]);if(!si(i)&&n<=i)return}return this._updateData(e),this}_updateData(e){const s=this._hub.states[me()];e=this._defaultProcessData(e,s);for(const n of this._options.resolved.dataProcessor)e=n(e,s);this._updateDataInHub(e,s)}_defaultProcessData(e,s){return e=yE(e,s),e=EE(e),e=TE(e),e}_updateDataInHub(e){this._hub.update(me(),e)}notifyViewUpdate(e,s){return s={status:P.READY,session:this.session,...s},this._hub.update(yt(e),s),this}get trackers(){return this._views.trackers}_onTracker(e){const s=this,n=this._hub.states[me()],i=this._buildInteraction({...e,data:n,workflow:s});this._sendInteraction(i)}_buildInteraction(e){let s=LE(e);s=this._defaultProcessInteraction(s,e);const{preprocess:n=[]}=this._options.resolved.interactions;for(const i of n)s=i(s,e);return s}_defaultProcessInteraction(e,s){return e=this._writeApiInfoToInteraction(e,s),e=this._writeMisoIdToInteraction(e,s),e=PE(e,s),e=$E(e,s),e=NE(e,s),e}_writeApiInfoToInteraction(e){const{group:s,name:n}=this._options.resolved.api;return qe(e,{context:{custom_context:{api_group:s,api_name:n}}})}_writeMisoIdToInteraction(e,s){const n=this._hub.states[yt(s.role)]||{},i=n.meta&&n.meta.miso_id||void 0;return i?qe(e,{miso_id:i}):e}_sendInteraction(e){const{handle:s}=this._options.resolved.interactions;typeof s=="function"?s(e):this._hub.trigger(eu(),e)}destroy(e){this._emit("destroy"),this._destroy(e)}get destroyed(){return!!this._destroyed}_destroy({dom:e}={}){for(const s of this._unsubscribes||[])s();this._unsubscribes=[],this._views._destroy({dom:e}),this._data._destroy(),this._destroyed=!0}_runCallbacks(e,s){for(const n of e)try{n({workflow:this,...s})}catch(i){this._error(i)}}_emit(e,s){this._events.emit(e,{_event:e,...s}),this._context&&this._context._events.emit(e,{workflow:this,_event:e,...s})}}en(se.prototype),Object.assign(se,{DEFAULT_API_OPTIONS:Of,DEFAULT_LAYOUTS:Af,DEFAULT_TRACKERS:vf,DEFAULT_OPTIONS:jE,ROLES_OPTIONS:qE});function BE(t){if(!t||!t.value)return t;const{value:e}=t;return{...t,value:zE(e)}}function zE(t){if(t.affiliation_products){const{affiliation_products:e,...s}=t;t={...s,affiliation:VE(e)}}else if(t.sovrn_aff){const{sovrn_aff:e,...s}=t;t={...s,affiliation:QE(e)}}return HE(t)}function HE(t){const{affiliation:e}=t;if(!e)return t;let{channel:s,products:n}=e;if(!n)return t;n=n.map(r=>({...r}));let i=0;for(const r of n)s&&(r.channel=s),r.position=i++;return{...t,affiliation:{...e,products:n}}}function VE(t){return{channel:"miso",products:t}}function QE({products:t,...e}){return{channel:"sovrn",...e,products:t.map(WE)}}function WE({id:t,deeplink:e,headline:s,description:n,currency:i,retailPrice:r,salePrice:o,discountRate:c,image:a,thumbnail:u,merchant:l,...d}){const m=l&&l.name,E=l&&l.logo;return z({id:`sovrn-${t}`,title:s,description:n,cover_image:a,url:e,currency:i,original_price:r,sale_price:o,discount_rate_percent:c,brand:m,brand_logo:E,custom_attributes:Cf({sovrn_id:t,thumbnail:u,merchant:l,...d})})}function Cf(t,e=""){return Object.keys(t).reduce((s,n)=>{const i=t[n];if(i===void 0)return s;const r=e?`${e}_${n}`:n;return typeof i=="object"?{...s,...Cf(i,r)}:{...s,[r]:i}},{})}function lo(t){Ys(t,uo.prototype)}class uo{useLink(e,s={}){if(typeof e!="function"&&e!==!1)throw new Error("useLink(fn) expects fn to be a function or false");return this._linkFn=e?[e,s]:!1,this}_submitToPage(e={}){if(!this._linkFn)return;const s=this._getSubmitUrl(e),[n,i={}]=this._linkFn;if(i.open===!1)window.location.href=s;else{const r=i.target||"_blank",o=i.windowFeatures||"";window.open(s,r,o)}}_getSubmitUrl({q:e,...s}={}){if(!this._linkFn)throw new Error("useLink(fn) must be called before _getSubmitUrl()");return this._linkFn[0](e,s)}}const If=Object.freeze({...se.DEFAULT_API_OPTIONS,group:fe.ASK,payload:{...se.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at"],cite_link:1,cite_start:"[",cite_end:"]"}}),xf=Object.freeze({actor:!1,api:{group:fe.ASK,name:je.AUTOCOMPLETE}}),fo=Object.freeze({...se.DEFAULT_LAYOUTS,[p.QUERY]:[ws.type,{placeholder:"Ask a question"}],[p.QUESTION]:[sn.type,{tag:"h2"}],[p.ANSWER]:nn.type,[p.FEEDBACK]:Xu.type,[p.IMAGES]:[Vu.type,{incremental:!0,itemType:"image"}],[p.SOURCES]:[gs.type,{incremental:!0,itemType:"article",templates:{ordered:!0}}],[p.AFFILIATION]:[af.type,{incremental:!0,itemType:"affiliation",link:{rel:"noopener nofollow"}}]}),Rf=Object.freeze({...se.DEFAULT_TRACKERS,[p.ANSWER]:{active:!0,itemless:!0,deduplicated:!1,click:Be.click},[p.IMAGES]:Be,[p.SOURCES]:Be,[p.AFFILIATION]:Be,[p.PRODUCTS]:Be}),GE=Object.freeze({...se.DEFAULT_OPTIONS,api:If,autocomplete:xf,layouts:fo,trackers:Rf}),KE=Xs(se.ROLES_OPTIONS,{main:p.ANSWER,members:Object.keys(fo),mappings:{[p.ANSWER]:pE,[p.REASONING]:mE}});class de extends se{_initProperties(e){super._initProperties(e),this._questionId=void 0,this._autoQuery=!1}_initActors(e){super._initActors(e),this._feedback=new xw(this._hub)}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(Mt(),s=>this._query(s)),this._views.get(p.ANSWER).on("citation-click",s=>this._onCitationClick(s)),this._views.get(p.ANSWER).on("link-click",s=>this._onAnswerLinkClick(s))]}restart(){this._questionId&&(this._questionId=void 0),super.restart()}_shallEmitLifecycleEvent(e,s){return e==="answer-stage"||super._shallEmitLifecycleEvent(e,s)}_emitInterruptEventIfNecessary(){const e=this._hub.states[yt(this._roles.main)]||{};e.session&&e.status!==P.INITIAL&&(e.status!==P.READY||e.ongoing)&&(this._emitLifecycleEvent("interrupt",e),this._emitLifecycleEvent("finally",e))}_onMainViewUpdate(e){const{status:s,session:n}=e,i=s===P.READY&&!e.ongoing,r=s===P.ERRONEOUS,o=i?"done":r?"error":s,c=this._getSessionContext(n),a=c.answerStage,u=e.meta&&e.meta.answer_stage;u&&u!==a&&(this._emitLifecycleEvent("answer-stage",Object.freeze({...e,answer_stage:u})),c.answerStage=u),this._emitLifecycleEvent(o,e),(i||r)&&this._emitLifecycleEvent("finally",e)}get questionId(){return this._questionId}autoQuery(e={}){Zl.call(this,e)}query(e){if(!e.q&&!e.questionId)throw new Error("q is required in query() call");this._hub.update(Mt(),e)}_query(e={}){if(this._linkFn){this._submitToPage(e);return}this.restart(),this._writeQuestionSourceToSession(e);const s=this._buildPayload(e);this._request({payload:s})}_writeQuestionSourceToSession(e){this.session.meta.question_source=e.qs||Yt.ORGANIC}_buildPayload(){throw new Error("Not implemented")}_writeWikiLinkTemplateToPayload(e){return!this._autoQuery||!this._autoQuery.param||this._autoQuery.param===Yl?e:{...e,wiki_link_template:`?${this._autoQuery.param}=%s`}}_updateData(e){if(this._writeQuestionIdFromData(e),e.value&&!e.value.answer_stage){this._handleHeadResponse(e);return}super._updateData(e),Jl.call(this,e)}_handleHeadResponse(e){}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=BE(e),e=AE(e),e}_writeQuestionIdFromData({value:e}){e&&this._writeQuestionId(e.question_id)}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=Tf(e,s),e}_getQuestionSourceFromViewState(e){const{request:s}=this._hub.states[yt(e.role)]||{},{payload:n}=s||{};return n&&n.metadata&&n.metadata.question_source||void 0}_onCitationClick({index:e,event:s}){if(s.button!==0||Kr(s))return;const{value:n}=this._hub.states[me()]||{},{sources:i}=n||{},r=i&&i[e-1];!r||!r.product_id||(Yr(s),this._views.trackers.sources.click([r.product_id],{event_target:"citation-link"}))}_onAnswerLinkClick({event:e,...s}){e.button===0&&(Kr(e)||(Yr(e),this._views.trackers.answer.click([],{items:[s]})))}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e)}_clearQuestionId(){this._questionId=void 0}_destroy(e){this._feedback._destroy(),super._destroy(e)}}lo(de.prototype),Object.assign(de,{DEFAULT_API_OPTIONS:If,DEFAULT_AUTOCOMPLETE_OPTIONS:xf,DEFAULT_LAYOUTS:fo,DEFAULT_TRACKERS:Rf,DEFAULT_OPTIONS:GE,ROLES_OPTIONS:KE});const Lf=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:"miso-ask-combo",CONAINER_TAG:"miso-ask"},Symbol.toStringTag,{value:"Module"})),kf=Object.freeze(Object.defineProperty({__proto__:null,followUpQuestions:"Related questions you can explore",question:"You asked...",relatedResources:"Go beyond, and learn more about this topic",sources:"This reply is based on the following articles",thoughts:"Thoughts"},Symbol.toStringTag,{value:"Module"}));let $f=class{constructor({helpers:e}){this._helpers=e}errorSection(e){const{section:s,container:n}=this._helpers;return s(e,{name:"error"},[n(e,{name:"error",visibleWhen:"erroneous"},"<miso-error></miso-error>")])}answerGroup(e){return[this.answer(e),this.affiliation(e),this.sources(e)]}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}question(e){const{phrase:s}=this._helpers;return[s(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"]}sources(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"sources",visibleWhen:"nonempty"},[n(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}affiliation(e){const{container:s}=this._helpers,{affiliation:n=!0}=e||{};return n?s(e,{name:"affiliation",visibleWhen:"nonempty"},["<miso-affiliation></miso-affiliation>"]):""}};class Pf{constructor(e){this._context=e,ee(this,{lowerCamelToKebab:nl,kebabToLowerCamel:tl,kebabOrSnakeToLowerCamel:sl})}normalizeOptions({classPrefix:e,circledCitationIndex:s=!0,phrases:n,...i}={}){return e=e||this._context.CLASS_PREFIX,n=this.normalizePhraseOptions(n),{classPrefix:e,circledCitationIndex:s,phrases:n,...i}}normalizePhraseOptions(e={}){if(!e)return{};const s={};for(const n in e)s[this.normalizePhraseOptionKey(n)]=e[n];return s}normalizePhraseOptionKey(e){return e=sl(e),e==="relatedQuestions"||e==="querySuggestions"?"followUpQuestions":e}phrase(e,{name:s,extraNames:n=[],tag:i="div",inline:r=!1}){const{classPrefix:o}=e,c=r?`${o}__phrase-inline`:`${o}__phrase`;return`<${i} class="${c} ${[s,...n].map(a=>`${o}__${a}-phrase`).join(" ")}">${this.phraseText(e,tl(s))}</${i}>`}phraseText(e,s){const{phrases:n={}}=e,i=n[s]||this._context.DEFAULT_PHRASES[s];switch(typeof i){case"function":return i(e);case"string":return i;default:return""}}section({classPrefix:e},{name:s},n){return this.element("section",{classes:[`${e}__section`,`${e}__${s}`]},n)}container({classPrefix:e,circledCitationIndex:s,parentQuestionId:n,workflow:i},{name:r,extraNames:o=[],visibleWhen:c,trait:a,logo:u=!1},l){const d=[r,...o].map(m=>`${e}__${m}-container`);return s&&d.push("miso-circled-citation-index"),this.element(this._context.CONAINER_TAG,{classes:d,visibleWhen:c,trait:a,logo:u,parentQuestionId:n,workflow:i},l)}element(e,s={},n=""){return`<${e}${this.attrs(s)}>${Array.isArray(n)?n.join(""):n}</${e}>`}attrs({classes:e=[],...s}={}){let n="";e.length&&(n+=` class="${e.join(" ")}"`);for(const i in s){const r=s[i];r!==void 0&&(n+=` ${nl(i)}="${r}"`)}return n}}let YE=class extends $f{constructor(){super({helpers:rn})}answerGroup(e){const{container:s}=this._helpers;return[this.question(e),this.reasoning(e),this.answer(e),this.affiliation(e),this.sources(e),this.followUpQuestions(e),s(e,{name:"bottom-spacing",visibleWhen:"ongoing"})]}question(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"question",visibleWhen:"ready"},[e.parentQuestionId?"<hr>":"",n(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"])}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready"},["<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}reasoning(e={}){const{phrases:s,reasoning:n={}}=e,{container:i,element:r,phraseText:o}=this._helpers,c=[];return n.expand&&c.push("expanded"),i(e,{name:"reasoning",visibleWhen:"nonempty"},[r("miso-stub",{classes:c,trait:"collapsible","data-role":"reasoning-box"},[r("div",{classes:["miso-collapsible__header"],"data-role":"toggle-expand"},[`<div class="miso-collapsible__icon">${n.icon||Dy}</div>`,`<div class="miso-collapsible__title" data-role="title">${o(s,"thoughts")}</div>`,`<div class="miso-collapsible__toggle">${Mu}</div>`]),r("div",{classes:["miso-collapsible__body"]},["<miso-reasoning></miso-reasoning>"])])])}sources(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"sources",visibleWhen:"nonempty"},["<hr>",n(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}followUpQuestions(e){const{container:s,phrase:n}=this._helpers,i="follow-up-questions",r=["query-suggestions"];return s(e,{name:i,extraNames:r,visibleWhen:"nonempty"},[n(e,{name:i,extraNames:r,tag:"h3"}),"<miso-follow-up-questions></miso-follow-up-questions>"])}followUps(e){const{features:s={}}=e;return s.followUpQuestions===!1?"":'<miso-follow-ups id="miso-ask-combo__follow-ups" class="miso-ask-combo__follow-ups"></miso-follow-ups>'}relatedResourcesSection(e){const{container:s,phrase:n,section:i}=this._helpers,{features:r={},logo:o=!0}=e,c=r.relatedResources===!1?"":s({...e,workflow:"active"},{name:"related-resources",visibleWhen:"nonempty",logo:o},[n(e,{name:"related-resources",tag:"h2"}),"<miso-related-resources></miso-related-resources>"]);return i(e,{name:"related-resources"},c)}};const rn=oi(new Pf({...Lf,DEFAULT_PHRASES:kf})),ho=oi(new YE({helpers:rn}));function ZE(t={}){const{normalizeOptions:e,section:s,container:n}=rn,{followUps:i,relatedResourcesSection:r,answerGroup:o}=ho;return t=e(t),[s(t,{name:"question"},[n(t,{name:"query"},"<miso-query></miso-query>")]),s(t,{name:"answer"},o(t)),i(t),r(t)].join("")}function bi(t={}){const{normalizeOptions:e,section:s,container:n}=rn,{answerGroup:i}=ho;return t=e(t),s(t,{name:"follow-up"},[n(t,{name:"query",visibleWhen:"initial loading"},"<miso-query></miso-query>"),...i(t)])}const JE=Object.freeze(Object.defineProperty({__proto__:null,followUp:bi,helpers:rn,root:ZE,sections:ho},Symbol.toStringTag,{value:"Module"})),XE=Object.freeze({...de.DEFAULT_API_OPTIONS,name:je.QUESTIONS,payload:{...de.DEFAULT_API_OPTIONS.payload,related_resource_fl:["cover_image","url","created_at","updated_at","published_at"]}}),Nf=Object.freeze({...de.DEFAULT_LAYOUTS,[p.QUERY]:[ws.type,{templates:{buttonIcon:"send"}}],[p.REASONING]:nn.type,[p.RELATED_RESOURCES]:[gs.type,{incremental:!0,itemType:"article"}],[p.QUERY_SUGGESTIONS]:mi.type,[p.FOLLOW_UP_QUESTIONS]:mi.type}),e0=Object.freeze({...de.DEFAULT_TRACKERS,[p.RELATED_RESOURCES]:Be,[p.QUERY_SUGGESTIONS]:{...Be,click:{...Be.click,validate:t=>t.button===0}}}),t0=Object.freeze({followUp:bi}),s0=Object.freeze({...de.DEFAULT_OPTIONS,api:XE,layouts:Nf,trackers:e0,templates:t0}),n0=Xs(de.ROLES_OPTIONS,{members:Object.keys(Nf),mappings:{[p.QUERY_SUGGESTIONS]:gE,[p.FOLLOW_UP_QUESTIONS]:bE}});class Uf extends de{constructor(e,s){super({name:"ask",context:e,roles:n0,defaults:s0,parentQuestionId:s})}_initProperties(e){super._initProperties(e);const{parentQuestionId:s}=e;ee(this,{parentQuestionId:s})}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(yt(p.REASONING),s=>this._onReasoningViewUpdate(s)),this._views.get(p.ANSWER).on("follow-up-click",s=>this._onFollowUpClick(s)),this._views.get(p.FOLLOW_UP_QUESTIONS).on("select",s=>this._onFollowUpQuestionSelect(s)),this._views.get(p.QUERY_SUGGESTIONS).on("select",s=>this._onQuerySuggestionSelect(s))]}_initSession(e){e.parentQuestionId&&this._context._byPqid.set(e.parentQuestionId,this),this._context._events.emit("create",this),super._initSession(e)}restart(){const{next:e}=this;e&&e.destroy(),this._questionId&&this._context._byQid.delete(this._questionId),super.restart()}get rootQuestionId(){return this._context.root.questionId}get previous(){const{parentQuestionId:e}=this;return e?this._context.getByQuestionId(e):void 0}get next(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e):void 0}getOrCreateNext(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e,{autoCreate:!0}):void 0}_buildPayload({q:e,qs:s,questionId:n,...i}={}){if(n)return z({...i,question_id:n});const{parentQuestionId:r}=this;let o=z({...i,question:e,parent_question_id:r});return o=wf({...o,qs:s}),o=this._writeWikiLinkTemplateToPayload(o),o}_updateData(e){super._updateData(e),this._triggerSuggestionsRefreshIfNecessary()}_triggerSuggestionsRefreshIfNecessary(){const{next:e}=this;if(!e)return;const s=e._views.get(p.QUERY_SUGGESTIONS);s&&s.refresh()}_onReasoningViewUpdate({status:e,ongoing:s}){if(e!==P.READY||s)return;const n=this._getReasoningBoxElement();n&&n.classList.add("done")}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeAdditionalAskPropertiesToInteraction(e,s),e}_writeAdditionalAskPropertiesToInteraction(e,s){const n=this.rootQuestionId;let{property:i}=e.context&&e.context.custom_context||{},r,o,c;return(s.role===p.FOLLOW_UP_QUESTIONS||s.role===p.QUERY_SUGGESTIONS)&&(i="suggested_followup_questions"),s.role===p.QUERY_SUGGESTIONS?(o=this.previous&&this.previous.parentQuestionId,r=this.parentQuestionId,c=this.previous&&this.previous.session.meta.question_source):o=this.parentQuestionId,qe(e,{context:{custom_context:z({property:i,root_question_id:n,parent_question_id:o,question_id:r,question_source:c})}})}_onFollowUpClick({q:e,event:s}={}){s.button===0&&this._submitFollowUpQuestion({q:e,qs:Yt.INLINE_QUESTION_LINK})}_onFollowUpQuestionSelect({value:e}){this._submitFollowUpQuestion({q:e,qs:Yt.SUGGESTED_QUESTIONS})}_submitFollowUpQuestion({q:e="",qs:s}={}){if(e=e.trim(),!e)return;this.getOrCreateNext().query({q:e,qs:s})}_onQuerySuggestionSelect({value:e}){e&&this.query({q:e,qs:Yt.SUGGESTED_QUESTIONS})}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e,this._context._byQid.set(e,this))}_clearQuestionId(){this._questionId&&(this._context._byQid.delete(this._questionId),this._questionId=void 0)}_getReasoningBoxElement(){const e=this._views.get(p.REASONING),s=e&&e.element;return s&&s.closest('[data-role="reasoning-box"]')}_destroy(e){const{next:s,parentQuestionId:n,questionId:i}=this;s&&s.destroy(e),n&&this._context._byPqid.delete(n),i&&this._context._byQid.delete(i),super._destroy(e)}}const Df={event:"done"};function i0(t=Df){switch(t===!0&&(t=Df),typeof t=="string"&&(t={event:t}),typeof t){case"object":return e=>e&&t.event===e._event;case"function":return t;default:return()=>!1}}class Ff extends zr{constructor(e,s){super("asks",e,s),this._byQid=new Map,this._byPqid=new Map,this._root=new Uf(this),this._events.on("*",n=>this._createNextIfNecessary(n)),this._events.on("loading",n=>this._setActive(n.workflow)),this._events.on("destroy",()=>this._requestEmitAfterDestroy()),this._events.on("after-destroy",()=>this._syncActiveOnAfterDestroy()),this._autoNextFn=void 0,this._active=this._root}get root(){return this._root}get workflows(){return[this._root,...this._byPqid.values()]}get active(){return this._active}getByQuestionId(e){if(typeof e!="string")throw new Error(`Required ID to be a string: ${e}`);return this._byQid.get(e)}getByParentQuestionId(e,{autoCreate:s=!1}={}){if(e===void 0)return this._root;if(typeof e!="string")throw new Error(`Required ID to be a string: ${e}`);let n=this._byPqid.get(e);return!n&&s&&(n=new Uf(this,e)),n}reset({root:e=!0,events:s,...n}={}){s===void 0&&(s=!!e),s&&this._events.clear();for(const i of this._byPqid.values())i.destroy(n);e&&this._root.restart()}autoNext(e){this._autoNextFn=i0(e)}_createNextIfNecessary(e){if(!this._autoNextFn||!this._autoNextFn(e))return;const{workflow:s}=e;s&&s.getOrCreateNext()}_requestEmitAfterDestroy(){this._emitAfterDestroyRequested||(this._emitAfterDestroyRequested=!0,setTimeout(()=>{this._emitAfterDestroyRequested=!1,this._events.emit("after-destroy",{})},0))}_syncActiveOnAfterDestroy(){if(!this._active.destroyed)return;let e=this._root;for(;e.next&&e.next.status!==P.INITIAL;e=e.next);this._setActive(e)}_setActive(e){e!==this._active&&(this._active=e,this._events.emit("active",{workflow:e}))}}en(Ff.prototype,[ce.TEMPLATES]);const r0=10,o0=10,Mf=Object.freeze({...se.DEFAULT_API_OPTIONS,group:fe.SEARCH,payload:{...se.DEFAULT_API_OPTIONS.payload,fl:["cover_image","url","created_at","updated_at","published_at","title"],rows:r0}}),_o=Object.freeze({...se.DEFAULT_LAYOUTS,[p.QUERY]:[ws.type],[p.PRODUCTS]:[gs.type,{incremental:!0,infiniteScroll:!0}],[p.KEYWORDS]:[sn.type,{raw:!0}],[p.TOTAL]:[sn.type,{raw:!0,format:"number"}],[p.FACETS]:[hf.type],[p.SORT]:[ao.type],[p.MORE]:[bf.type]}),jf=Object.freeze({...se.DEFAULT_TRACKERS,[p.PRODUCTS]:Be}),qf=Object.freeze({active:!1,mode:"infiniteScroll",pageLimit:10}),c0=Object.freeze({...se.DEFAULT_OPTIONS,api:Mf,layouts:_o,trackers:jf,pagination:qf}),a0=Xs(se.ROLES_OPTIONS,{main:p.PRODUCTS,members:Object.keys(_o),mappings:{[p.FACETS]:"facet_counts",[p.SORT]:hE}});class ge extends se{_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(Mt(),s=>this._query(s)),this._hub.on(_s(),()=>this._refine()),this._hub.on(Wr(),()=>this._more()),this._views.get(p.SORT).on("select",s=>this._handleSortSelect(s))]}restart(){super.restart(),this._page=0}get exhausted(){const e=this._hub.states[me()];return!!(e&&e.meta&&e.meta.exhausted)}get page(){return this._page}autoQuery(e={}){Zl.call(this,e)}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update(Mt(),e)}_query(e){if(this._linkFn){this._submitToPage(e);return}const s=Ft.QUERY;this._views.filters.reset({silent:!0}),this.restart({type:s});const n=this._buildPayload(e,s);this._request({payload:n,type:s})}_refine(){const e=Ft.REFINE,{facet_counts:s}=this._hub.states[me()].value||{};this._currentFacetCounts=s,this.restart({type:e});const n=this._getQuery(),i=this._buildPayload(n,e);this._request({payload:i,type:e})}_more(){if(this.status!==P.READY)throw new Error("Can not call more() while loading.");if(this.exhausted||this._page>=o0-1)return;this._page++;const e=Ft.MORE,s=this._getQuery(),n=this._buildPayload(s,e);this._request({payload:n,type:e})}_getQuery(){return this._hub.states[Mt()]}_getPageSize(){return this._options.resolved.api.payload.rows}_buildPayload(e,s){return e=this._writeFiltersToPayload(e),e=this._writePageInfoToPayload(e),s===Ft.MORE&&(e=this._processPayloadForMoreRequest(e)),e}_writeFiltersToPayload(e){const s=this._hub.states[_s()],{facets:n,sort:i}=s||{};return z({...e,facet_filters:this._buildFacetFilters(n),order_by:this._buildOrderBy(i)})}_buildFacetFilters(e){if(!e)return;const s={};for(const n in e){const i=e[n];!i||!i.length||(s[n]={terms:i})}return Object.keys(s).length?s:void 0}_buildOrderBy(e){if(e)return Kt(e)}_writePageInfoToPayload(e){return{...e,metadata:{...e.metadata,page:this._page}}}_processPayloadForMoreRequest(e={}){const s=this._hub.states[me()],{[this._roles.main]:n=[]}=s&&s.value||{},i=n.map(o=>o.product_id).filter(o=>o),r=[...e.exclude||[],...i];return r.length===0?e:{...e,exclude:r}}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=Sf(e),e=vE(e,this._currentFacetCounts),e=xE(e,{role:this._roles.main}),e}_updateData(e){super._updateData(e),Jl.call(this,e)}_updateDataInHub(e,s){e=this._appendResultsFromMoreRequest(e),super._updateDataInHub(e,s)}_appendResultsFromMoreRequest(e){const{request:s}=e;if(!s)return e;const{metadata:n}=s.payload;if(!n||!n.page)return CE(e);const i=this._hub.states[me()];return IE(i,e,{role:this._roles.main})}_handleSortSelect({value:e}={}){e&&(this._views.filters.update({sort:e}),this._views.filters.apply())}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeRootMisoIdToInteraction(e),e}_writeRootMisoIdToInteraction(e){const s=this._hub.states[me()],{root_miso_id:n}=s&&s.value||{};return n?qe(e,{context:{custom_context:{root_miso_id:n}}}):e}}en(ge.prototype,[ce.PAGINATION,ce.FILTERS]),lo(ge.prototype),Object.assign(ge,{DEFAULT_API_OPTIONS:Mf,DEFAULT_LAYOUTS:_o,DEFAULT_TRACKERS:jf,DEFAULT_PAGINATION:qf,DEFAULT_OPTIONS:c0,ROLES_OPTIONS:a0});const l0=de.ROLES_OPTIONS;class u0 extends de{constructor(e){super({name:"hybrid-search/answer",plugin:e._plugin,client:e._client,options:e._options,defaults:e._defaults,roles:l0,superworkflow:e})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow}_initSession(){}_doLoading(e){const{session:s}=this;this.updateData({...e,session:s})}_queryWithQuestionId(e){const{session:s}=this,{request:n,value:i}=e;this.updateData({...e,session:s});const{question_id:r}=i;if(!r)return;const o={...n.payload,question_id:r};o.metadata.page!==void 0&&delete o.metadata.page,this._hub.update(Vr(),{...n,payload:o,session:s})}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=Sf(e),e=OE(e),e=ME(e),e}_handleHeadResponse(e){super._handleHeadResponse(e),Ef(e)}_onTracker(e){this._superworkflow._onTracker(e)}}const f0=ge.ROLES_OPTIONS.members;function d0(t){return f0.includes(t)?"results":"answer"}class h0{constructor(e){this._subviews=e,this._containers=new Set}get filters(){return this._subviews.results.filters}get(e){return this._getSubviews(e).get(e)}addContainer(e){if(this._containers.has(e))return;this._containers.add(e);const{components:s}=e;for(const n of s)this.addComponent(n)}removeContainer(e){for(const s of this._getAllSubviews())s.removeContainer(e);this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e,this._addContainerToSubviews(e._container,e)}removeComponent(e){this._getViewByElement(e).element=void 0,this._removeContainerFromSubviewsIfNecessary(e._container)}updateComponentRole(e,s,n){}refreshElement(e){const s=e.isContainer?this._containers.get(e):this._getViewByElement(e);s&&s.refresh({force:!0})}_getAllSubviews(){return Object.values(this._subviews)}_getSubviews(e){return this._subviews[d0(e)]}_getViewByElement(e){let{role:s}=e;if(!s)throw new Error("Component must have a role");return this.get(s)}_addContainerToSubviews(e,s){if(!e)return;const{role:n}=s,i=this._getSubviews(n);if(!i._containers.has(e)){for(const r of this._getAllSubviews())if(r!==i&&r._containers.has(e)){for(const o of e.components)if(r.containsElement(o))throw new Error(`<${e.tagName.toLowerCase()}> cannot contain both <${o.tagName.toLowerCase()}> and <${s.tagName.toLowerCase()}>, for they don't share the same data lifecycle.`);throw new Error(`Failed to add container <${e.tagName.toLowerCase()}> with child component <${s.tagName.toLowerCase()}>.`)}i.addContainer(e)}}_removeContainerFromSubviewsIfNecessary(e){if(!(!e||e.components.length>0))for(const s of this._getAllSubviews())s.removeContainer(e)}}const _0=Object.freeze({members:[]});function p0({layouts:t,trackers:e,...s}={}){return{active:!1,...s,layouts:{},trackers:{}}}function m0(t,e){return wi(t)===wi(e)}function wi(t){return t&&t.value&&t.value.trim()||void 0}class g0 extends se{constructor(e,{defaults:s,...n}={}){super({name:"autocomplete",plugin:e._plugin,client:e._client,defaults:p0(s),roles:_0,superworkflow:e,...n})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow,this._active=e.defaults.active}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,e.superworkflow._hub.on(su(),s=>this._query(s))]}get enabled(){return this._active}enable(){this._active=!0}disable(){this._active=!1}_query(e){if(!this._active||m0(e,this._args))return;this._args=e,this.restart();const{session:s}=this;if(s.meta.input=e,!wi(e)){this._updateCompletions({session:s,status:P.INITIAL});return}const n=this._buildPayload(e);this._request({payload:n})}_buildPayload(e){return{q:wi(e)}}_updateDataInHub(e){e.value&&(e={...e,value:e.value.completions}),this._updateCompletions(e)}_updateCompletions(e){this._superworkflow.updateCompletions(e)}}function Bf(t){Ys(t,b0.prototype)}class b0{_initAutocomplete(e){this._autocomplete=new g0(this,{defaults:e.defaults.autocomplete})}get autocomplete(){return this._autocomplete}updateCompletions(e){return this._hub.update(Hr(),e),this}_destroyAutocomplete(){this._autocomplete&&this._autocomplete._destroy(),this._autocomplete=void 0}}const w0=Object.freeze({group:fe.ASK,name:je.SEARCH,payload:{...de.DEFAULT_API_OPTIONS.payload,...ge.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at","title","authors"]}}),zf=Object.freeze({...de.DEFAULT_LAYOUTS,...ge.DEFAULT_LAYOUTS,[p.QUERY]:[ws.type,{placeholder:""}],[p.QUESTION]:[sn.type,{raw:!0}],[p.SOURCES]:[$u.type,{incremental:!0,itemType:"article",templates:{ordered:!0,article:hu,articleInfoBlock:eo}}]}),y0=Object.freeze({...de.DEFAULT_TRACKERS,...ge.DEFAULT_TRACKERS}),E0=Object.freeze({...ge.DEFAULT_PAGINATION,active:!0}),S0=Object.freeze({api:{group:fe.ASK,name:je.SEARCH_AUTOCOMPLETE,payload:{completion_fields:["suggested_queries"]}}}),T0=Object.freeze({sort:{options:[{field:"relevance",text:"Relevance",default:!0},{field:"published_at",text:"Date"}]}}),O0=Object.freeze({...de.DEFAULT_OPTIONS,...ge.DEFAULT_OPTIONS,api:w0,layouts:zf,trackers:y0,autocomplete:S0,pagination:E0,filters:T0}),A0=Object.freeze({main:p.PRODUCTS,members:Object.keys(zf),mappings:Object.freeze({...de.ROLES_OPTIONS.mappings,...ge.ROLES_OPTIONS.mappings})}),v0=Object.freeze({api:Object.freeze({polling:!1})});class po extends ge{constructor(e,s){super({name:"hybrid-search",plugin:e,client:s,roles:A0,defaults:O0,extraOptions:v0})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e),this._answer=new u0(this)}_initActors(e){super._initActors(e),this._views=new h0({results:this._views,answer:this._answer._views})}restart({type:e}={}){super.restart(),(!e||e===Ft.QUERY)&&this._answer.restart()}get answer(){return this._answer}get questionId(){return this._answer.questionId}_buildPayload(e,s){return e=super._buildPayload(e,s),e=wE(e,s),e=wf(e),e=this._writeQuestionIdToPayload(e,s),e.answer!==!1&&(e=de.prototype._writeWikiLinkTemplateToPayload.call(this,e)),e}_buildOrderBy(e){if(e)return e.field}_writeQuestionIdToPayload(e,s){if(s===Ft.QUERY)return e;const n=this._answer.questionId;return n?ci(e,{metadata:{question_id:n}}):e}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),Ef(e),e}_updateDataInHub(e,s){this._dispatchDataToAnswerWorkflow(e),e=RE(e,s),super._updateDataInHub(e,s)}_dispatchDataToAnswerWorkflow(e){const{request:s}=e;if(!s)return;const{type:n,payload:i}=s;if(!(n!==Ft.QUERY||!i||i.answer===!1))switch(e.status){case P.LOADING:this._answer._doLoading(e);break;case P.READY:this._answer._queryWithQuestionId(e);break}}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=Tf(e,s),e}_destroy(){this._answer.destroy(),super._destroy()}}en(po.prototype,[ce.PAGINATION,ce.FILTERS]),Bf(po.prototype);const C0=Object.freeze({group:fe.SEARCH,name:je.SEARCH,payload:{fl:["*"]}}),I0=Object.freeze({api:{group:fe.SEARCH,name:je.AUTOCOMPLETE,payload:{completion_fields:["suggested_queries","title"],fl:["title","url","cover_image"]}}}),x0=Object.freeze({...ge.DEFAULT_LAYOUTS}),R0=Object.freeze({...ge.DEFAULT_TRACKERS}),L0=Object.freeze({...ge.DEFAULT_OPTIONS,api:C0,autocomplete:I0,layouts:x0,trackers:R0}),k0=ge.ROLES_OPTIONS;class Hf extends ge{constructor(e,s){super({name:"search",plugin:e,client:s,roles:k0,defaults:L0})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e)}notifyViewUpdate(e=p.PRODUCTS,...s){return super.notifyViewUpdate(e,...s),this}_destroy(e){this._destroyAutocomplete(),super._destroy(e)}}Bf(Hf.prototype);class Vf extends zr{constructor(e,s,n){super(e,s,n),this._members=new Map}workflows(){return[...this._members.values()]}create(e=Br){if(this._members.has(e))throw new Error(`Unit already exists: ${e}`);return this._create(e)}has(e=Br){return this._members.has(e)}get(e=Br){if(typeof e!="string")throw new Error(`Required unit ID to be a string: ${e}`);return this._members.get(e)||this._create(e)}_create(e){throw new Error("Not implemented")}}class Le extends se{_initProperties(e){super._initProperties(e);const{id:s}=e;ee(this,{id:s})}_initSession(e){this._context._members.set(e.id,this),super._initSession(e)}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeUnitIdToInteraction(e,s),e}_writeUnitIdToInteraction(e){const s=this.id,n=this.uuid;return qe(e,{context:{custom_context:{unit_id:s,unit_instance_uuid:n}}})}_destroy(e){this._context._members.delete(this.id),super._destroy(e)}}Object.assign(Le,{DEFAULT_API_OPTIONS:se.DEFAULT_API_OPTIONS,DEFAULT_LAYOUTS:se.DEFAULT_LAYOUTS,DEFAULT_TRACKERS:se.DEFAULT_TRACKERS,DEFAULT_OPTIONS:se.DEFAULT_OPTIONS,ROLES_OPTIONS:se.ROLES_OPTIONS});const $0=Object.freeze({...Le.DEFAULT_API_OPTIONS,group:fe.RECOMMENDATION,name:je.USER_TO_PRODUCTS,payload:{...Le.DEFAULT_API_OPTIONS.payload,fl:["*"]}}),Qf=Object.freeze({...Le.DEFAULT_LAYOUTS,[p.PRODUCTS]:gs.type}),P0=Object.freeze({...Le.DEFAULT_TRACKERS,[p.PRODUCTS]:Be}),N0=Object.freeze({...Le.DEFAULT_OPTIONS,api:$0,layouts:Qf,trackers:P0}),U0=Xs(Le.ROLES_OPTIONS,{main:p.PRODUCTS,members:Object.keys(Qf)});class D0 extends Le{constructor(e,s){super({name:"recommendation",context:e,roles:U0,defaults:N0,id:s})}start(){return this._request(),this}notifyViewUpdate(e=p.PRODUCTS,...s){return super.notifyViewUpdate(e,...s),this}}class F0 extends Vf{constructor(e,s){super("recommendations",e,s)}_create(e){return new D0(this,e)}}const M0=Object.freeze({...Le.DEFAULT_API_OPTIONS,group:fe.ASK,name:je.RELATED_QUESTIONS}),Wf=Object.freeze({...Le.DEFAULT_LAYOUTS,[p.RELATED_QUESTIONS]:[gs.type,{itemType:"question",link:{rel:"noopener nofollow"}}],[p.QUERY]:[ws.type,{placeholder:"Ask a question"}]}),j0=Object.freeze({...Le.DEFAULT_TRACKERS,[p.RELATED_QUESTIONS]:Be,[p.CONTAINER]:{...Be,itemless:!0},[p.QUERY]:{[Ae.SUBMIT]:{active:!0}}}),q0=Object.freeze({...Le.DEFAULT_OPTIONS,api:M0,layouts:Wf,trackers:j0}),B0=Xs(Le.ROLES_OPTIONS,{main:p.RELATED_QUESTIONS,members:Object.keys(Wf)});class Gf extends Le{constructor(e,s){super({name:"explore",context:e,roles:B0,defaults:q0,id:s})}_initProperties(e){super._initProperties(e),this._productId=void 0,this._linkFn=void 0}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._views.get(p.RELATED_QUESTIONS).on("click",s=>this._handleRelatedQuestionClick(s)),this._hub.on(Mt(),s=>this._query(s))]}set productId(e){console.warning("DEPRECATED: use useApi() instead"),this.useApi({product_id:e})}useApi(...e){const s=(typeof e[0]=="object"?e[0]:e[1])||{},{product_id:n}=s;return n&&(this._productId=n),super.useApi(...e)}useLink(e,s){return uo.prototype.useLink.call(this,e,s),s&&this.useLayouts({[p.RELATED_QUESTIONS]:{link:s}}),this}start({relatedQuestions:e=!0}={}){if(this._linkFn===void 0)throw new Error("Must define link mapping function with useLink(fn) before calling start()");if(e)this._request();else{const{session:s}=this;this.updateData({session:s,request:{},value:{related_questions:[]}})}return this}notifyViewUpdate(e=p.RELATED_QUESTIONS,...s){return super.notifyViewUpdate(e,...s),this}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=this._addUrlToRelatedQuestions(e),e}_addUrlToRelatedQuestions(e){const{value:s}=e;if(!s||!s.related_questions)return e;const n=this._linkFn&&this._linkFn[0],i=s.related_questions.map(n?(r=>({text:r,url:this._getSubmitUrl({q:r,generated:!0})})):(r=>({text:r})));return{...e,value:{...s,related_questions:i}}}_handleRelatedQuestionClick({value:e,...s}){this._events.emit("select",Object.freeze({...s,question:e}))}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update(Mt(),e)}_query(e){this._submitToPage({...e,generated:!1})}_getSubmitUrl(e){let s=uo.prototype._getSubmitUrl.call(this,e);return!e.generated||!this._productId?s:`${s}&qs=${encodeURIComponent(this._productId)}`}}lo(Gf.prototype);class z0 extends Vf{constructor(e,s){super("explores",e,s)}_create(e){return new Gf(this,e)}}let H0=class extends Re{constructor({name:e,plugin:s,MisoClient:n,...i}){super(e||"combo",s),this._name=e,this._plugin=s,this._MisoClient=n,this._options=i}get MisoClient(){return this._MisoClient}get element(){return this._element}async waitForElement(){return this._element||(this._elementRes||(this._elementRes=new gt)).promise}set element(e){this._element=e,this._elementRes&&this._elementRes.resolve(e)}start(e){this._started||(this._started=!0,e&&this.config(e),this._start())}_start(){throw new Error("Unimplemented")}};function V0(t,e,s){if(!t)throw new Error("client is required");Q0(t,s),W0(e)}function Q0(t,{template:e=bi,...s}={}){if(typeof e!="function")throw new Error("template must be a function or undefined");const n=Object.keys(s).length>0;e===bi&&!n||t.ui.asks.useTemplates({followUp:n?i=>e({...s,...i}):e})}function W0(t){if(!t||t.tagName.toLowerCase()==="miso-follow-ups")return;const e=document.createElement("miso-follow-ups");for(const{name:s,value:n}of t.attributes)e.setAttribute(s,n);t.parentNode.replaceChild(e,t)}function G0(t,e){if(!t)throw new Error("client is required");if(e)for(const s of e.querySelectorAll("miso-ask"))s.setAttribute("workflow","active")}const Kf=Object.freeze(Lf),K0=Object.freeze(kf),Yf=Object.freeze(JE),Y0=Object.freeze(Object.defineProperty({__proto__:null,constants:Kf,phrases:K0,templates:Yf,wireFollowUps:V0,wireRelatedResources:G0},Symbol.toStringTag,{value:"Module"})),{currentScript:mo}=document,Z0=Object.freeze({templates:Yf,autostart:!0}),J0=["templates","phrases","features"];class X0{constructor(){this._defaults=Z0,this._scriptSrc=sS(),this._pageUrl=nS()}resolve(e){return tS(Zf(this._defaults,this._scriptSrc,e,this._pageUrl))}}function Zf(...t){let e={};for(const s of t)s&&(e=eS(e,s));return e}function eS(t,e){if(!e)return t;Object.assign(t,e);for(const s of J0)s in e&&(t[s]={...t[s],...e[s]});return t}function tS({api_key:t,api_host:e,templates:s,phrases:n,...i}={}){return z({apiKey:t,apiHost:e,templates:go(s),phrases:n,...i})}function sS(){if(!mo||!mo.src)return{};const t=document.createElement("a");t.href=mo.src;const e={};for(const[s,n]of new URLSearchParams(t.search))s!=="q"&&(e[s]=Jf(n));return e}function nS(){const t={};for(const[e,s]of new URLSearchParams(window.location.search))e.startsWith("miso_")&&e.length>5&&e!=="miso_api_key"?t[e.substring(5)]=Jf(s):e==="q"&&(t.q=s);return t}function Jf(t){return t===""?!0:t==="false"?!1:t}function go(t){if(t==null)return t;switch(typeof t){case"function":return t;case"string":case"number":return()=>t;case"object":return Array.isArray(t)?t.map(go):iS(t,go);default:throw new Error(`Unsupported template type: ${t}`)}}function iS(t,e){const s={};for(const[n,i]of Object.entries(t))s[n]=e(i);return s}class rS{constructor(e,{classPrefix:s=Kf.CLASS_PREFIX}={}){if(!e)throw new Error("Root element is required");ee(this,{root:e,followUpsSection:e.querySelector(`.${s}__follow-ups`),relatedResourcesSection:e.querySelector(`.${s}__related-resources`),relatedResourcesContainer:e.querySelector(`.${s}__related-resources miso-ask`)})}}class oS extends H0{constructor(e,s){super({name:"ask-combo",plugin:e,MisoClient:s}),this._options=new X0,this._localOptions={}}config(e={}){e=Zf(this._localOptions,e);const s=this._options.resolve(e);return this._localOptions=e,this._resolvedOptions=s,this}get resolvedOptions(){return this._resolvedOptions||(this._resolvedOptions=this._options.resolve(this._localOptions))}get client(){return this._client}get elements(){return this._elements}autoStart(){this.resolvedOptions.autostart&&this.start()}async _start(){await Bm(),await this.waitForElement(),await this._setupMisoClient(),this._renderRootContent(),this._createClientInstance(),this._setupWorkflows()}async _setupMisoClient(){const{MisoClient:e,resolvedOptions:s}=this,{version:n}=e;ee(e,{name:"miso-ask-combo"}),(n==="dev"||n.indexOf("beta")>0||s.debug)&&e.plugins.use("std:debug"),s.dry_run&&e.plugins.use("std:dry-run"),s.lorem&&await e.plugins.install("std:lorem")}_renderRootContent(){const{element:e,resolvedOptions:s}=this,{templates:n={}}=s;e.innerHTML=n.root(s),this._elements=new rS(e,s)}async _createClientInstance(){this._client=new MisoClient(this.resolvedOptions)}async _setupWorkflows(){const{MisoClient:e,client:s,elements:n,resolvedOptions:i}=this,{wireFollowUps:r,wireRelatedResources:o}=e.ui.defaults.ask,{templates:c={},features:a={},api:u}=i,l=s.ui.asks,d=s.ui.ask;u&&l.useApi(u),a.followUpQuestions!==!1&&r(s,n.followUpsSection,{...i,template:c.followUp}),a.relatedResources!==!1&&a.followUpQuestions!==!1&&o(s,n.relatedResourcesSection),d.autoQuery()}}class cS extends hl{constructor(e){super("layouts",e,{libName:"layout",keyName:s=>s.type}),this._plugin=e}get(e){return this._libraries[e]}create(e,s){if(e!==!1)switch(typeof e){case"function":return{render:e};case"string":const n=this.get(e);if(!n)throw new Error(`Layout of name '${e}' not found.`);return new n(s);default:throw new Error(`Expect a string, a render function, or boolean value false: ${e}`)}}}const aS="miso-stub",bo="trait",lS=Object.freeze([bo]);class Jt extends HTMLElement{static get tagName(){return aS}static get observedAttributes(){return lS}constructor(){super(),this._traits=[]}connectedCallback(){this._syncTraits()}disconnectedCallback(){for(const e of this._traits)this._destroyTrait(e);this._traits=[]}attributeChangedCallback(e){switch(e){case bo:this._syncTraits();break}}_syncTraits(){const e=(this.getAttribute(bo)||"").split(/\s+/).filter(Boolean),s=[];for(const n of this._traits)e.includes(n.constructor.traitName)?s.push(n):this._destroyTrait(n);if(e.length>0){const n=uS(Jt.MisoClient);for(const i of e){if(this._traits.find(c=>c.constructor.traitName===i))continue;const r=n[i];if(!r){console.warn(`Unknown trait: ${i}`);continue}const o=new r(this);s.push(o)}}this._traits=s}_destroyTrait(e){try{e._destroy&&e._destroy()}catch(s){console.error(s)}}}function uS(t){const e=t.ui&&t.ui.traits||{};return Object.values(e).reduce((s,n)=>(s[n.traitName]=n,s),{})}let Xf,wo,yi;async function ed(t){const e=await fS(t);return wo=wo||e.any(),yi=yi||await wo,yi.ui||await _S(0),yi}async function fS(t){return t.MisoClient||window.MisoClient||Xf||(Xf=dS())}async function dS(){return new Promise(t=>{(window.misocmd||(window.misocmd=[])).push(()=>t(window.MisoClient))})}function hS(t){for(let e=t;e;e=e.parentNode)if(e.isContainer)return e;throw new Error(`${t.tagName} needs to be placed under a workflow container element.`)}function _S(t){return new Promise(e=>setTimeout(e,t))}const on="logo",td="auto",pS=Object.freeze([...Jt.observedAttributes,on]);function yo(t){if(!t)return td;switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Invalid logo attribute value: ${t}.`)}}function mS(t){switch(t){case td:return;case!0:return"true";case!1:return"false";default:throw new Error(`Invalid logo property value: ${t}.`)}}class Ye extends Jt{static get observedAttributes(){return pS}constructor(){super(),this._workflow=void 0,this._components=new Set}get isContainer(){return!0}get workflow(){return this._workflow}set workflow(e){this._setWorkflow(e)}get logo(){return yo(this.getAttribute(on))}set logo(e){if(this.logo===e)return;const s=mS(e);s?this.setAttribute(on,s):this.removeAttribute(on)}async connectedCallback(){super.connectedCallback();const e=this._client=await ed(Ye);document.body.contains(this)&&(this._setWorkflow(this._getWorkflow(e)),this._onConnected(e))}disconnectedCallback(){this._setWorkflow(void 0),super.disconnectedCallback()}_onConnected(e){}_getWorkflow(e){throw new Error("Unimplemented")}_setWorkflow(e){this._workflow!==e&&(this._workflow&&this._workflow._views.removeContainer(this),e&&e._views.addContainer(this),this._workflow=e)}attributeChangedCallback(e,s,n){switch(e){case on:this._handleLogoUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleLogoUpdate(e,s){const n=yo(e),i=yo(s);n===i||!this._workflow||this._workflow._views.refreshElement(this)}get components(){return[...this._components]}_addComponent(e){this._components.has(e)||(this._components.add(e),this._workflow&&this._workflow._views.addComponent(e))}_removeComponent(e){this._components.has(e)&&(this._workflow&&this._workflow._views.removeComponent(e),this._components.delete(e))}_updateComponentRole(e,s,n){this._workflow&&this._workflow._views.updateComponentRole(e,s,n)}}const gS="miso-ask",Eo="workflow",cn="parent-question-id",bS=Object.freeze([...Ye.observedAttributes,Eo,cn]);class wS extends Ye{static get tagName(){return gS}static get observedAttributes(){return bS}_getWorkflow(e){return this.boundToActiveWorkflow?e.ui.asks.active:this._getWorkflowByParentQuestionId(e,this.parentQuestionId)}_getWorkflowByParentQuestionId(e,s){return e.ui.asks.getByParentQuestionId(s,{autoCreate:!0})}get parentQuestionId(){return this.getAttribute(cn)||void 0}set parentQuestionId(e){e=e!==void 0?`${e}`:void 0,e!==this.parentQuestionId&&(e?this.setAttribute(cn,e):this.removeAttribute(cn))}get boundToActiveWorkflow(){return this.getAttribute(Eo)==="active"}_setWorkflow(e){this._workflow!==e&&(super._setWorkflow(e),e&&(this.parentQuestionId=e.parentQuestionId))}async connectedCallback(){if(await super.connectedCallback(),document.body.contains(this)){const e=this._client.ui.asks;this._unsubscribes=[...this._unsubscribes||[],e.on("active",s=>{this.boundToActiveWorkflow&&(this.workflow=s.workflow)})]}}disconnectedCallback(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],super.disconnectedCallback()}attributeChangedCallback(e,s,n){switch(e){case cn:this._handleParentQuestionIdUpdate(s,n);break;case Eo:this._handleQuestionUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleQuestionUpdate(e,s){e=e||void 0,s=s||void 0,!(e===s||!this._client)&&s===ATTR_VALUE_ACTIVE&&this._setWorkflow(this._getWorkflow(this._client))}_handleParentQuestionIdUpdate(e,s){e=e||void 0,s=s||void 0,!(e===s||!this._client)&&this._setWorkflow(this._getWorkflowByParentQuestionId(this._client,s))}}const an="unit-id",yS=Object.freeze([...Ye.observedAttributes,an]);class Ei extends Ye{static get observedAttributes(){return yS}_getWorkflow(e){return this._getWorkflowByUnitId(e,this.unitId)}_getWorkflowByUnitId(e,s){throw new Error("Not implemented")}get unitId(){return this.getAttribute(an)||void 0}set unitId(e){e=e&&`${e}`,e?this.setAttribute(an,e):this.removeAttribute(an)}attributeChangedCallback(e,s,n){switch(e){case an:this._handleUnitIdUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleUnitIdUpdate(e,s){e===s||!this._client||this._setWorkflow(this._getWorkflowByUnitId(this._client,s))}}const ES="miso-explore";class SS extends Ei{static get tagName(){return ES}static get observedAttributes(){return Ei.observedAttributes}_getWorkflowByUnitId(e,s){return e.ui.explores.get(s)}}const TS="miso-hybrid-search";class OS extends Ye{static get tagName(){return TS}static get observedAttributes(){return Ye.observedAttributes}_getWorkflow(e){return e.ui.hybridSearch}}const AS="miso-search";class vS extends Ye{static get tagName(){return AS}static get observedAttributes(){return Ye.observedAttributes}_getWorkflow(e){return e.ui.search}}const CS="miso-recommendation";class IS extends Ei{static get tagName(){return CS}static get observedAttributes(){return Ei.observedAttributes}_getWorkflowByUnitId(e,s){return e.ui.recommendations.get(s)}}const xS=Object.freeze(Object.defineProperty({__proto__:null,MisoAskElement:wS,MisoExploreElement:SS,MisoHybridSearchElement:OS,MisoRecommendationElement:IS,MisoSearchElement:vS},Symbol.toStringTag,{value:"Module"})),RS="miso-component",ln="role",LS=Object.freeze([ln]);class oe extends HTMLElement{static get tagName(){return RS}static get observedAttributes(){return LS}constructor({role:e}={}){super(),e&&Object.defineProperty(this,"_role",{value:e,writable:!1})}get role(){return this._role}connectedCallback(){const e=hS(this);this._container&&this._container!==e&&this._container._removeComponent(this),this._syncRole(),e._addComponent(this),this._container=e,this._containerResolution&&this._containerResolution.resolve(e)}_syncRole(){const e=this.getAttribute(ln);if(e)this._role?console.warn(`Element <${this.tagName}>' already has a predefined role '${this._role}', so attribute '${ln}="${e}"' is ignored.`):this._role=e;else{if(!this._role)throw new Error(`An attribute '${ln}' is required for element <${this.tagName}>`);return}}disconnectedCallback(){this._container&&(this._container._removeComponent(this),this._container=void 0,this._containerResolution=void 0)}attributeChangedCallback(e,s,n){s!==n&&e===ln&&this._container&&this._container._updateComponentRole(this,s,n)}}class kS extends oe{constructor(){super({role:p.QUERY})}static get tagName(){return"miso-query"}}class $S extends oe{constructor(){super({role:p.FOLLOW_UP_QUESTIONS})}static get tagName(){return"miso-follow-up-questions"}}class PS extends oe{constructor(){super({role:p.QUERY_SUGGESTIONS})}static get tagName(){return"miso-query-suggestions"}}class NS extends oe{constructor(){super({role:p.FEEDBACK})}static get tagName(){return"miso-feedback"}}class US extends oe{constructor(){super({role:p.PRODUCTS})}connectedCallback(){console.warn("Element <miso-results> is deprecated. Please use <miso-products> instead."),super.connectedCallback()}static get tagName(){return"miso-results"}}class DS extends oe{constructor(){super({role:p.PRODUCTS})}static get tagName(){return"miso-products"}}class FS extends oe{constructor(){super({role:p.QUESTION})}static get tagName(){return"miso-question"}}class MS extends oe{constructor(){super({role:p.ANSWER})}static get tagName(){return"miso-answer"}}class jS extends oe{constructor(){super({role:p.REASONING})}static get tagName(){return"miso-reasoning"}}class qS extends oe{constructor(){super({role:p.SOURCES})}static get tagName(){return"miso-sources"}}class BS extends oe{constructor(){super({role:p.IMAGES})}static get tagName(){return"miso-images"}}class zS extends oe{constructor(){super({role:p.RELATED_RESOURCES})}static get tagName(){return"miso-related-resources"}}class HS extends oe{constructor(){super({role:p.RELATED_QUESTIONS})}static get tagName(){return"miso-related-questions"}}class VS extends oe{constructor(){super({role:p.AFFILIATION})}static get tagName(){return"miso-affiliation"}}class QS extends oe{constructor(){super({role:p.KEYWORDS})}static get tagName(){return"miso-keywords"}}class WS extends oe{constructor(){super({role:p.TOTAL})}static get tagName(){return"miso-total"}}class GS extends oe{constructor(){super({role:p.FACETS})}static get tagName(){return"miso-facets"}}class KS extends oe{constructor(){super({role:p.MORE})}static get tagName(){return"miso-more"}}class YS extends oe{constructor(){super({role:p.SORT})}static get tagName(){return"miso-sort"}}class ZS extends oe{constructor(){super({role:p.ERROR})}static get tagName(){return"miso-error"}}const JS=Object.freeze(Object.defineProperty({__proto__:null,MisoAffiliationElement:VS,MisoAnswerElement:MS,MisoComponentElement:oe,MisoErrorElement:ZS,MisoFacetsElement:GS,MisoFeedbackElement:NS,MisoFollowUpQuestionsElement:$S,MisoImagesElement:BS,MisoKeywordsElement:QS,MisoMoreElement:KS,MisoProductsElement:DS,MisoQueryElement:kS,MisoQuerySuggestionsElement:PS,MisoQuestionElement:FS,MisoReasoningElement:jS,MisoRelatedQuestionsElement:HS,MisoRelatedResourcesElement:zS,MisoResultsElement:US,MisoSortElement:YS,MisoSourcesElement:qS,MisoTotalElement:WS},Symbol.toStringTag,{value:"Module"}));class un extends Jt{static get observedAttributes(){return Jt.observedAttributes}constructor(){super(),this._context=void 0}get context(){return this._context}set context(e){this._setContext(e)}async connectedCallback(){super.connectedCallback();const e=this._client=await ed(un);document.body.contains(this)&&this._setContext(this._getContext(e))}disconnectedCallback(){this._setContext(void 0),super.disconnectedCallback()}_getContext(e){throw new Error("Unimplemented")}_setContext(e){if(this._context===e)return;const s=this._context;this._context=e,this._onContext(e,s)}_onContext(){}}const XS="miso-follow-ups";class eT extends un{static get tagName(){return XS}static get observedAttributes(){return un.observedAttributes}constructor(){super(),this._elementToWorkflow=new WeakMap,this._unsubscribes=[]}_getContext(e){return e.ui.asks}_onContext(e,s){e!==s&&(this._unwire(),this._wire(e))}_unwire(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}_wire(e){e&&(e._autoNextFn||e.autoNext(),this._unsubscribes.push(e.on("create",s=>{const{parentQuestionId:n}=s,i=s._options.resolved.templates.followUp;if(!n||!i)return;const r=this.children.length;this.insertAdjacentHTML("beforeend",i({parentQuestionId:n}));const o=this.children.length;for(const c of Array.prototype.slice.call(this.children,r,o))this._elementToWorkflow.set(c,s)})),this._unsubscribes.push(e.on("loading",({workflow:s})=>{for(const n of this.children)if(this._elementToWorkflow.get(n)===s){n.scrollIntoView({behavior:"smooth",block:"start"});break}})),this._unsubscribes.push(e.on("destroy",({workflow:s})=>{for(const n of this.children)this._elementToWorkflow.get(n)===s&&(this._elementToWorkflow.delete(n),n.remove())})))}}const tT=Object.freeze(Object.defineProperty({__proto__:null,MisoFollowUpsElement:eT},Symbol.toStringTag,{value:"Module"}));class Si extends HTMLElement{constructor(){super()}async connectedCallback(){document.body.contains(this)&&this._setCombo(this._getCombo(Si.MisoClient))}disconnectedCallback(){}_getCombo(e){throw new Error("Unimplemented")}_setCombo(e){this._combo!==e&&(this._combo=e,e.element=this,e.autoStart())}}const sT="miso-ask-combo";class nT extends Si{static get tagName(){return sT}constructor(){super()}_getCombo(e){return e.ui.combo.ask}}const iT=Object.freeze(Object.defineProperty({__proto__:null,MisoBannerElement:pi,MisoStubElement:Jt,combos:Object.freeze(Object.defineProperty({__proto__:null,MisoAskComboElement:nT},Symbol.toStringTag,{value:"Module"})),containers:xS,contexts:tT,roles:JS},Symbol.toStringTag,{value:"Module"})),sd="miso-hybrid-search-combo",nd=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:sd,CONAINER_TAG:"miso-hybrid-search"},Symbol.toStringTag,{value:"Module"})),rT="You asked ${value}",oT="Sources",cT="You searched for ${value}",aT="${value} Results",id="Show more",rd="Show less",od=Object.freeze(Object.defineProperty({__proto__:null,keywords:cT,question:rT,showLess:rd,showMore:id,sources:oT,total:aT},Symbol.toStringTag,{value:"Module"}));class lT extends $f{constructor(){super({helpers:Ti})}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready !unanswerable"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}answerBox(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__answer-box`]},[s("div",{classes:[`${n}__answer-box-inner`]},this.answerGroup(e)),this.answerBoxToggle(e)])}question(e){const{phrase:s}=this._helpers;return s(e,{name:"question",tag:"div"}).replaceAll("${value}","<miso-question></miso-question>")}answerBoxToggle(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__answer-box-toggle-container`]},[s("div",{classes:[`${n}__answer-box-toggle`],"data-role":"answer-box-toggle"})])}searchResultsGroup(e){const{container:s}=this._helpers;return s(e,{name:"search-results",visibleWhen:"loading ready"},[this.searchResultsInfoGroup(e),this.searchResultsFilters(e),"<miso-products></miso-products>",this.more(e)])}searchResultsInfoGroup(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-info`]},[this.keywords(e),this.total(e)])}searchResultsFilters(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-filters`]},["<miso-facets></miso-facets>","<miso-sort></miso-sort>"])}keywords(e){const{phrase:s}=this._helpers;return s(e,{name:"keywords",tag:"div",inline:!0}).replaceAll("${value}","<miso-keywords></miso-keywords>")}total(e){const{phrase:s}=this._helpers;return s(e,{name:"total",tag:"div",inline:!0}).replaceAll("${value}","<miso-total></miso-total>")}more(e){if(!e.moreButton)return"";const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-more-container`]},["<miso-more></miso-more>"])}}const Ti=oi(new Pf({...nd,DEFAULT_PHRASES:od})),cd=oi(new lT({helpers:Ti}));function uT(t={}){const{normalizeOptions:e,section:s,container:n}=Ti;t=e(t);const{answerBox:i,answerGroup:r,searchResultsGroup:o}=cd,{answerBox:c=!1}=t;return[s(t,{name:"question"},[n(t,{name:"query"},"<miso-query></miso-query>")]),s(t,{name:"answer"},c?[i(t)]:r(t)),s(t,{name:"search-results"},o(t))].join("")}const fT=Object.freeze(Object.defineProperty({__proto__:null,helpers:Ti,root:uT,sections:cd},Symbol.toStringTag,{value:"Module"})),fn="answer-box-open",Oi="answer-box-shown",ad='[data-role="answer-box-toggle"]';class So{constructor(e,s,{classPrefix:n=sd,phrases:i={},hideWhenUnanswerable:r=!0}={}){this._client=e,this._workflow=e.ui.hybridSearch,this._element=s,this._classPrefix=n,this._phrases=i,this._hideWhenUnanswerable=r,this._init()}_init(){const e=this._element,s=this._workflow;s.answerBox=this,s._unsubscribes.push(()=>{s.answerBox===this&&(this.destroy(),s.answerBox=void 0)});const n=i=>this._handleClick(i);e.addEventListener("click",n),this._syncWofkflowStatus(),this._syncButtonText(),this._unsubscribes=[()=>e.removeEventListener("click",n),s._answer._hub.on(me(),()=>this._syncWofkflowStatus())]}_handleClick({target:e,button:s}){s===0&&e.closest(ad)&&this.toggleOpen()}_syncWofkflowStatus(){const{status:e}=this._workflow._answer,{meta:{unanswerable:s=!1}={}}=this._workflow._answer._hub.states[me()];switch(e){case P.ERRONEOUS:case P.READY:s&&this._hideWhenUnanswerable?this.hide():this.show();break;default:this.hide()}}_updateBoxStatus(e,s){this._element.classList[e](`${this._classPrefix}__${s}`)}_syncButtonText(){const e=this.isOpen?this._phrases.showLess||rd:this._phrases.showMore||id;for(const s of this._element.querySelectorAll(ad))s.textContent=e}_syncScroll(){this.isOpen||this._element.scrollIntoView({behavior:"smooth"})}destroy(){for(const s of this._unsubscribes)s();const e=this._workflow;e&&e.answerBox===this&&delete e.answerBox}}const dT={isOpen:fn,shown:Oi},hT={toggleOpen:["toggle",fn],open:["add",fn],close:["remove",fn],toggleHidden:["toggle",Oi],show:["add",Oi],hide:["remove",Oi]};for(const[t,e]of Object.entries(dT))Object.defineProperty(So.prototype,t,{get(){return this._element.classList.contains(`${this._classPrefix}__${e}`)}});for(const[t,[e,s]]of Object.entries(hT))So.prototype[t]=function(){this._updateBoxStatus(e,s),s===fn&&(this._syncButtonText(),this._syncScroll())};function _T(t,e,s={}){if(!t)throw new Error("client is required");e&&new So(t,e,s)}const pT=Object.freeze(nd),mT=Object.freeze(od),gT=Object.freeze(fT),bT=Object.freeze(Object.defineProperty({__proto__:null,constants:pT,phrases:mT,templates:gT,wireAnswerBox:_T},Symbol.toStringTag,{value:"Module"})),wT=Object.freeze(Y0),yT=Object.freeze(bT),ET=Object.freeze(Object.defineProperty({__proto__:null,ask:wT,hybridSearch:yT},Symbol.toStringTag,{value:"Module"}));function ST(t,e){for(const s of e)Object.defineProperty(t,s,{get(){return this._element&&this._element.classList.contains(s)}})}function TT(t,e){for(const{action:s,classAction:n,className:i}of e)t[s]=function(){this._element&&this._element.classList[n](i),this[`_${s}`]&&this[`_${s}`]()}}function OT(t,e){t._handleClick=function(s){const{target:n,button:i}=s;if(i===0){for(let{role:r,selector:o,action:c}of e)if(o=o||`[data-role="${r}"]`,!!o&&n.closest(o)){this[c](),s.stopPropagation();return}}}}function AT(t){const e=t._element;if(!e)return()=>{};const s=n=>t._handleClick(n);return e.addEventListener("click",s),()=>e.removeEventListener("click",s)}const ld="miso-collapsible",To="expanded",vT=[{action:"expand",classAction:"add",className:To},{action:"collapse",classAction:"remove",className:To}],CT=[{role:"expand",action:"expand"},{role:"collapse",action:"collapse"},{role:"toggle-expand",action:"toggle"}];class Ai{static get traitName(){return"collapsible"}constructor(e){this._element=e,e.collapsible=this,e.classList.add(ld),this._unsubscribes=[AT(this)]}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],delete this._element.collapsible,this._element.classList.remove(ld),this._element=void 0}toggle(){this.expanded?this.collapse():this.expand()}}ST(Ai.prototype,[To]),TT(Ai.prototype,vT),OT(Ai.prototype,CT);const IT=Object.freeze(Object.defineProperty({__proto__:null,CollapsibleTrait:Ai},Symbol.toStringTag,{value:"Module"})),xT="ui";let ud,fd;async function RT(){return fd||(fd=cl(LT()))}function LT(){return ud||(ud=al(xT))}const kT="std:ui";class $T extends Re{static get id(){return kT}constructor(){super("ui"),this.layouts=new cS(this),this._recommendations=new WeakMap,this._explores=new WeakMap,this._asks=new WeakMap,this._extensions=new WeakMap,this._ready=new gt}async install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this));const n={defaults:ET,traits:IT};Ut(n,this,["layouts","combo","ready"]),ee(this,{MisoClient:e}),ee(e,{ui:n}),this.combo=new UT(this,e);const i=Object.values(dE).filter(m=>m.type);for(const m of i)m.MisoClient=e;for(const m of i)this.layouts.register(m);const{containers:r,roles:o,combos:c,contexts:a,...u}=iT,l=[...Object.values(c),...Object.values(a),...Object.values(r),...Object.values(o),...Object.values(u)],d=[Ye,un,Si];for(const m of[...d,...l])m.MisoClient=e;await RT();for(const m of l)qm(m);this._ready.resolve()}async requireExtension(e){switch(e){case"markdown":return await this.MisoClient.plugins.install("std:ui-markdown");default:throw new Error(`Unknown extension: ${e}`)}}get ready(){return Promise.all([this._ready.promise,MisoClient.any()]).then(()=>{})}_injectClient(e){ee(e,{ui:new NT(this,e)})}_getExtensions(e){if(this._extensions.has(e))return this._extensions.get(e);const s=new PT(this,e);return this._extensions.set(e,s),s}_getRecommendations(e){let s=this._recommendations.get(e);return s||this._recommendations.set(e,s=new F0(this,e)),s}_getExplores(e){let s=this._explores.get(e);return s||this._explores.set(e,s=new z0(this,e)),s}_getAsks(e){let s=this._asks.get(e);return s||this._asks.set(e,s=new Ff(this,e)),s}}class PT{constructor(e,s){this._plugin=e,this._client=s,this._contexts={}}async require(e){if(this._contexts[e])return this._contexts[e];const s=await this._plugin.requireExtension(e);return this._contexts[e]=s.getContext(this._client)}}class NT{constructor(e,s){this._plugin=e,this._client=s,ee(this,{sources:{api:fu(s)}})}get recommendations(){return this._recommendations||(this._recommendations=this._plugin._getRecommendations(this._client))}get recommendation(){return this.recommendations.get()}get search(){return this._search||(this._search=new Hf(this._plugin,this._client))}get asks(){return this._asks||(this._asks=this._plugin._getAsks(this._client))}get ask(){return this.asks.root}get hybridSearch(){return this._hybridSearch||(this._hybridSearch=new po(this._plugin,this._client))}get explores(){return this._explores||(this._explores=this._plugin._getExplores(this._client))}get explore(){return this.explores.get()}get ready(){return this._plugin._ready.promise}}class UT{constructor(e,s){this._plugin=e,this._MisoClient=s}get ask(){return this._ask||(this._ask=new oS(this._plugin,this._MisoClient))}}wt.plugins.use($T);function DT(t){const e=[];function s(i){e.push(i)}ol("misodev",{transform:i=>()=>i({addCmdTransform:s})});const n=i=>{for(const r of e)i=r(i);return i};setTimeout(()=>{ol("misocmd",{transform:n}),t&&t()})}wt.attach(),DT(Ng);const Oo=new wt(Za);Oo.ui.asks.useApi(!1);const vi={setRequestListener:t=>{Oo.ui.asks.on("request",t)},query:t=>{Oo.ui.ask.query({q:t})},updateData:(t,e,s)=>{t.updateData({session:e,value:s})},askFollowUpQuestion:(t,e)=>{if(!t||!e)return;const s=t.getOrCreateNext();s&&s.query({q:e})}},FT=(t={})=>({parentQuestionId:null,questionId:null,query:null,data:null,pollingIntervalId:null,sdkSession:null,sdkWorkflow:null,...t}),Tt=Cn({threadQuestions:[]}),MT=async t=>{vi.query(t)},jT=async t=>{if(Tt.threadQuestions.length===0)return;const e=_d().sdkWorkflow;vi.askFollowUpQuestion(e,t)};vi.setRequestListener(({workflow:t,session:e,payload:s})=>{const{parent_question_id:n=null,question:i}=s;Tt.threadQuestions.push(FT({parentQuestionId:n,query:i,sdkWorkflow:Ji(t),sdkSession:Ji(e)})),qT(s)});const qT=async t=>{try{const e=await Im(t),{question_id:s}=e.data;_d().questionId=s,BT(s)}catch(e){console.error(e)}},BT=t=>{const e=Ao(t);!e||e.pollingIntervalId||(hd(t),e.pollingIntervalId=setInterval(()=>{hd(t)},1e3))},dd=t=>{const e=Ao(t);!e||!e.pollingIntervalId||(clearInterval(e.pollingIntervalId),e.pollingIntervalId=null)},hd=async t=>{const e=Ao(t);if(e)try{const s=await xm(t),{data:n}=s,{finished:i}=n;e.data=n,vi.updateData(e.sdkWorkflow,e.sdkSession,n),i&&dd(t)}catch(s){dd(t),console.error(s)}},Ao=t=>Tt.threadQuestions.find(e=>e.questionId===t),_d=()=>Tt.threadQuestions[Tt.threadQuestions.length-1],zT=t=>Bs(()=>Tt.threadQuestions.find(e=>e.questionId===t)),HT=()=>Bs(()=>Tt.threadQuestions[Tt.threadQuestions.length-1]),dn=()=>({query:MT,askFollowUpQuestion:jT,questions:Bs(()=>Tt.threadQuestions.filter(t=>t.questionId)),useQuestionById:zT,useLatestQuestion:HT}),VT={class:"mi-answer-dialog"},QT={class:"mi-answer-dialog__question-container"},WT={class:"mi-answer-dialog__question"},GT={class:"mi-answer-dialog__answer-container"},KT={class:"mi-answer-dialog__answer"},YT=["parent-question-id"],ZT={key:0,class:"mi-answer-dialog__view-sources-button"},JT={key:0,class:"mi-answer-dialog__feedback-block"},XT=Nt({__name:"AnswerDialog",props:{questionId:{type:String,required:!0}},setup(t){const e=t,{useQuestionById:s}=dn(),n=s(e.questionId);return(i,r)=>(Te(),Ce("div",VT,[q("div",QT,[r[0]||(r[0]=q("div",{class:"mi-answer-dialog__question-icon"},[q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},[q("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 15C0 23.28 6.72 30 15 30C23.28 30 30 23.28 30 15C30 6.72 23.28 0 15 0C6.72 0 0 6.72 0 15ZM15 4.5C17.49 4.5 19.5 6.51 19.5 9C19.5 11.49 17.49 13.5 15 13.5C12.51 13.5 10.5 11.49 10.5 9C10.5 6.51 12.51 4.5 15 4.5ZM15 25.8C11.25 25.8 7.935 23.88 6 20.97C6.045 17.985 12 16.35 15 16.35C17.985 16.35 23.955 17.985 24 20.97C22.065 23.88 18.75 25.8 15 25.8Z",fill:"#0053C0"})])],-1)),q("div",WT,Di(Lt(n).query),1)]),q("div",GT,[r[3]||(r[3]=dr('<div class="mi-answer-dialog__answer-icon" data-v-3cde2612><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none" data-v-3cde2612><path d="M13.9599 10.5273L16.5781 12.1834L15.5771 21.6525L29.6648 13.0529C29.4112 11.0257 28.7439 9.07228 27.7044 7.31403C26.6649 5.55578 25.2754 4.03022 23.6223 2.83208C21.9691 1.63395 20.0874 0.788819 18.0943 0.349181C16.1011 -0.0904579 14.0389 -0.11522 12.0357 0.276432C10.0326 0.668083 8.13128 1.46779 6.44985 2.62588C4.76842 3.78397 3.34278 5.27573 2.26146 7.00851C1.18015 8.7413 0.466243 10.6781 0.164082 12.6987C-0.138078 14.7192 -0.0220431 16.7804 0.504982 18.7542L13.9599 10.5273Z" fill="#323A56" data-v-3cde2612></path><path d="M14.3898 26.4296L11.7717 24.7735L12.7726 15.3086L1.75391 22.0408C3.22578 24.837 5.54748 27.0925 8.38364 28.4814C11.2198 29.8703 14.4236 30.3208 17.5323 29.7679C20.641 29.2149 23.4936 27.6871 25.6781 25.405C27.8626 23.123 29.2659 20.205 29.6853 17.0724L14.3898 26.4296Z" fill="#323A56" data-v-3cde2612></path><path d="M15.699 9.16412C16.8618 9.16412 17.8043 8.22058 17.8043 7.05667C17.8043 5.89276 16.8618 4.94922 15.699 4.94922C14.5363 4.94922 13.5938 5.89276 13.5938 7.05667C13.5938 8.22058 14.5363 9.16412 15.699 9.16412Z" fill="#F64E00" data-v-3cde2612></path></svg></div>',1)),q("div",KT,[q("miso-ask",{class:"miso-circled-citation-index","visible-when":"ready",logo:!1,"parent-question-id":Lt(n).parentQuestionId},[...r[1]||(r[1]=[q("miso-answer",null,null,-1)])],8,YT),Lt(n)?.data?.sources&&Lt(n).data.sources.length>0?(Te(),Ce("button",ZT,[...r[2]||(r[2]=[fr(" View all sources ",-1),q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[q("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.6798 0L4.7998 1.88L10.9065 8L4.7998 14.12L6.6798 16L14.6798 8L6.6798 0Z",fill:"#0053C0"})],-1)])])):hr("",!0)])]),Lt(n)?.data?.finished?(Te(),Ce("div",JT,[...r[4]||(r[4]=[fr(" Was this answer helpful? ",-1),q("div",{class:"mi-answer-dialog__feedback-buttons-container"},[q("button",{class:"mi-answer-dialog__feedback-button"},"Yes"),q("button",{class:"mi-answer-dialog__feedback-button"},"No")],-1)])])):hr("",!0)]))}},[["__scopeId","data-v-3cde2612"]]),eO={class:"mi-answer-thread"},tO=Nt({__name:"AnswerThread",setup(t){const{questions:e}=dn();return(s,n)=>(Te(),Ce("div",eO,[(Te(!0),Ce(Me,null,mc(Lt(e),i=>(Te(),Ce("div",{class:"mi-answer-thread__item",key:i.questionId},[ue(XT,{"question-id":i.questionId},null,8,["question-id"])]))),128))]))}},[["__scopeId","data-v-9797949d"]]),sO={},nO={class:"mi-sponsored-results-block"};function iO(t,e){return Te(),Ce("div",nO,[...e[0]||(e[0]=[q("div",{class:"mi-sponsored-results-block__title"},"Sponsored Results",-1),q("div",{class:"mi-sponsored-results-block__placeholder"},"PLACEHOLDER",-1)])])}const rO=Nt(sO,[["render",iO],["__scopeId","data-v-b9df4590"]]),oO={key:0,class:"mi-related-questions-block"},cO={class:"mi-related-questions-block__list"},aO=["onClick"],lO={class:"mi-related-questions-block__question-text"},uO=Nt({__name:"RelatedQuestionsBlock",setup(t){const{useLatestQuestion:e,askFollowUpQuestion:s}=dn(),n=e(),i=Bs(()=>n.value?.data?.followup_questions||[]);return(r,o)=>i.value.length>0?(Te(),Ce("div",oO,[o[2]||(o[2]=q("div",{class:"mi-related-questions-block__title"},"Related Questions",-1)),q("div",cO,[(Te(!0),Ce(Me,null,mc(i.value,c=>(Te(),Ce("button",{key:c,class:"mi-related-questions-block__question",onClick:a=>Lt(s)(c)},[o[0]||(o[0]=dr('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17" fill="none" data-v-47100018><mask id="path-1-outside-1_43036_900" maskUnits="userSpaceOnUse" x="5.53027" y="1.62976" width="15" height="15" fill="black" data-v-47100018><rect fill="white" x="5.53027" y="1.62976" width="15" height="15" data-v-47100018></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1066 10.1769H14.5646L14.3725 9.99168C15.0449 9.20952 15.4497 8.19408 15.4497 7.08945C15.4497 4.62633 13.4531 2.62976 10.99 2.62976C8.52684 2.62976 6.53027 4.62633 6.53027 7.08945C6.53027 9.55257 8.52684 11.5491 10.99 11.5491C12.0946 11.5491 13.11 11.1443 13.8922 10.472L14.0774 10.6641V11.2061L17.508 14.6298L18.5303 13.6075L15.1066 10.1769ZM10.9907 10.1771C9.28226 10.1771 7.90319 8.79804 7.90319 7.08964C7.90319 5.38123 9.28226 4.00216 10.9907 4.00216C12.6991 4.00216 14.0781 5.38123 14.0781 7.08964C14.0781 8.79804 12.6991 10.1771 10.9907 10.1771Z" data-v-47100018></path></mask><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1066 10.1769H14.5646L14.3725 9.99168C15.0449 9.20952 15.4497 8.19408 15.4497 7.08945C15.4497 4.62633 13.4531 2.62976 10.99 2.62976C8.52684 2.62976 6.53027 4.62633 6.53027 7.08945C6.53027 9.55257 8.52684 11.5491 10.99 11.5491C12.0946 11.5491 13.11 11.1443 13.8922 10.472L14.0774 10.6641V11.2061L17.508 14.6298L18.5303 13.6075L15.1066 10.1769ZM10.9907 10.1771C9.28226 10.1771 7.90319 8.79804 7.90319 7.08964C7.90319 5.38123 9.28226 4.00216 10.9907 4.00216C12.6991 4.00216 14.0781 5.38123 14.0781 7.08964C14.0781 8.79804 12.6991 10.1771 10.9907 10.1771Z" fill="url(#paint0_linear_43036_900)" data-v-47100018></path><path d="M14.5646 10.1769L13.8704 10.8968L14.161 11.1769H14.5646V10.1769ZM14.3725 9.99168L13.6142 9.3398L12.9985 10.056L13.6783 10.7115L14.3725 9.99168ZM13.8922 10.472L14.612 9.77782L13.9565 9.09798L13.2403 9.71364L13.8922 10.472ZM14.0774 10.6641H15.0774V10.2605L14.7973 9.96993L14.0774 10.6641ZM14.0774 11.2061H13.0774V11.6209L13.371 11.9139L14.0774 11.2061ZM17.508 14.6298L16.8016 15.3376L17.5087 16.0433L18.2151 15.3369L17.508 14.6298ZM18.5303 13.6075L19.2374 14.3146L19.9438 13.6082L19.2381 12.9011L18.5303 13.6075ZM15.1066 10.1769V9.17693H14.5646V10.1769V11.1769H15.1066V10.1769ZM14.5646 10.1769L15.2587 9.45709L15.0666 9.27184L14.3725 9.99168L13.6783 10.7115L13.8704 10.8968L14.5646 10.1769ZM14.3725 9.99168L15.1308 10.6436C15.9529 9.6872 16.4497 8.44261 16.4497 7.08945H15.4497H14.4497C14.4497 7.94556 14.1368 8.73184 13.6142 9.3398L14.3725 9.99168ZM15.4497 7.08945H16.4497C16.4497 4.07405 14.0054 1.62976 10.99 1.62976V2.62976V3.62976C12.9008 3.62976 14.4497 5.17862 14.4497 7.08945H15.4497ZM10.99 2.62976V1.62976C7.97456 1.62976 5.53027 4.07405 5.53027 7.08945H6.53027H7.53027C7.53027 5.17862 9.07913 3.62976 10.99 3.62976V2.62976ZM6.53027 7.08945H5.53027C5.53027 10.1049 7.97456 12.5491 10.99 12.5491V11.5491V10.5491C9.07913 10.5491 7.53027 9.00029 7.53027 7.08945H6.53027ZM10.99 11.5491V12.5491C12.3431 12.5491 13.5877 12.0524 14.5441 11.2303L13.8922 10.472L13.2403 9.71364C12.6323 10.2363 11.8461 10.5491 10.99 10.5491V11.5491ZM13.8922 10.472L13.1724 11.1661L13.3576 11.3582L14.0774 10.6641L14.7973 9.96993L14.612 9.77782L13.8922 10.472ZM14.0774 10.6641H13.0774V11.2061H14.0774H15.0774V10.6641H14.0774ZM14.0774 11.2061L13.371 11.9139L16.8016 15.3376L17.508 14.6298L18.2144 13.9219L14.7838 10.4983L14.0774 11.2061ZM17.508 14.6298L18.2151 15.3369L19.2374 14.3146L18.5303 13.6075L17.8232 12.9004L16.8009 13.9227L17.508 14.6298ZM18.5303 13.6075L19.2381 12.9011L15.8144 9.47053L15.1066 10.1769L14.3988 10.8833L17.8225 14.3139L18.5303 13.6075ZM10.9907 10.1771V9.17711C9.83455 9.17711 8.90319 8.24576 8.90319 7.08964H7.90319H6.90319C6.90319 9.35033 8.72998 11.1771 10.9907 11.1771V10.1771ZM7.90319 7.08964H8.90319C8.90319 5.93352 9.83455 5.00216 10.9907 5.00216V4.00216V3.00216C8.72998 3.00216 6.90319 4.82895 6.90319 7.08964H7.90319ZM10.9907 4.00216V5.00216C12.1468 5.00216 13.0781 5.93352 13.0781 7.08964H14.0781H15.0781C15.0781 4.82895 13.2514 3.00216 10.9907 3.00216V4.00216ZM14.0781 7.08964H13.0781C13.0781 8.24576 12.1468 9.17711 10.9907 9.17711V10.1771V11.1771C13.2514 11.1771 15.0781 9.35033 15.0781 7.08964H14.0781Z" fill="white" mask="url(#path-1-outside-1_43036_900)" data-v-47100018></path><path d="M7.41016 2.40283L8.47168 5.5874L11.6572 6.6499L12.7949 7.02979L11.6572 7.40967L8.47168 8.47119L7.41016 11.6567L7.03027 12.7944L6.65039 11.6567L5.58789 8.47119L2.40332 7.40967L1.26562 7.02979L2.40332 6.6499L5.58789 5.5874L6.65039 2.40283L7.03027 1.26514L7.41016 2.40283Z" fill="url(#paint1_linear_43036_900)" stroke="white" stroke-width="0.8" data-v-47100018></path><defs data-v-47100018><linearGradient id="paint0_linear_43036_900" x1="7.53027" y1="2.32312" x2="14.3461" y2="15.286" gradientUnits="userSpaceOnUse" data-v-47100018><stop stop-color="#0F1865" data-v-47100018></stop><stop offset="1" stop-color="#303FC8" data-v-47100018></stop></linearGradient><linearGradient id="paint1_linear_43036_900" x1="5.90527" y1="3.31723" x2="10.2576" y2="9.95246" gradientUnits="userSpaceOnUse" data-v-47100018><stop stop-color="#0F1865" data-v-47100018></stop><stop offset="1" stop-color="#303FC8" data-v-47100018></stop></linearGradient></defs></svg>',1)),q("span",lO,Di(c),1),o[1]||(o[1]=q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none"},[q("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.34039 0L2.40039 0.94L5.45372 4L2.40039 7.06L3.34039 8L7.34039 4L3.34039 0Z",fill:"#333E8B"})],-1))],8,aO))),128))])])):hr("",!0)}},[["__scopeId","data-v-47100018"]]),fO={},dO={class:""};function hO(t,e){return Te(),Ce("div",dO)}const _O=Nt(fO,[["render",hO]]),pO={class:"mi-ask-box-block"},mO={class:"mi-ask-box-block__ask-box"},gO={class:"mi-ask-box-block__input-group"},bO=Nt({__name:"AskBoxBlock",setup(t){const{askFollowUpQuestion:e}=dn(),s=Zd(""),n=()=>{s.value.trim()!==""&&(e(s.value),s.value="")};return(i,r)=>(Te(),Ce("div",pO,[q("div",mO,[q("div",gO,[r[1]||(r[1]=q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[q("path",{d:"M10 9.5L16 11.5L10 13.5L8 19.5L6 13.5L0 11.5L6 9.5L8 3.5L10 9.5ZM15.75 3.75L19.5 5L15.75 6.25L14.5 10L13.25 6.25L9.5 5L13.25 3.75L14.5 0L15.75 3.75Z",fill:"#333E8B"})],-1)),_h(q("input",{class:"mi-ask-box-block__input",type:"text",placeholder:"Ask anything from Investopedia...","onUpdate:modelValue":r[0]||(r[0]=o=>s.value=o),onKeyup:Q_(n,["enter"])},null,544),[[H_,s.value]])]),q("button",{onClick:n,class:"mi-ask-box-block__button"},"Ask")])]))}},[["__scopeId","data-v-b8d4a09d"]]),wO={class:"mi-layout"},yO={class:"mi-layout__answer-thread"},EO={class:"mi-layout__sponsored-results-block"},SO={class:"mi-layout__related-questions-block"},TO={class:"mi-layout__recommended-articles-block"},OO={class:"mi-layout__ask-box-block"},AO=Nt({__name:"App",props:{query:{type:String,required:!0}},setup(t){const e=t,s=dn();return _c(()=>{s.query(e.query)}),(n,i)=>(Te(),Ce(Me,null,[ue(tp),q("div",wO,[q("div",yO,[ue(tO)]),q("div",EO,[ue(rO)]),q("div",SO,[ue(uO)]),q("div",TO,[ue(_O)]),q("div",OO,[ue(bO)])])],64))}},[["__scopeId","data-v-100e4b86"]]);let Es=null;const pd=t=>{Es&&(Es.unmount(),Es=null);const e=document.getElementById(Ja);return e?(Es=K_(AO,{query:t}),Es.mount(e),Es):(console.error(`[miso-investopedia-script] Can't find answer page element with id: ${Ja}`),null)};typeof window<"u"&&(window[Cm]={init:pd,setEventHooks:t=>{np(t)},renderAnswerPage:t=>{pd(t)}})})();
