(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@import"https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap";.mi-header[data-v-96a976e4]{position:sticky;top:0;left:0;width:100%;z-index:10;display:flex;gap:.25rem;align-items:center;justify-content:center;padding:1rem;background-color:#feffff;border-bottom:1px solid rgba(0,0,0,.15)}.mi-header-title[data-v-96a976e4]{font-family:var(--mi-font-cabin);font-size:23px;font-weight:700;line-height:120%;letter-spacing:0;background:linear-gradient(270deg,#303fc8 20.24%,#0f1864 86.03%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.mi-answer-dialog[data-v-bfb47cca]{display:flex;flex-direction:column}.mi-answer-dialog__question-container[data-v-bfb47cca]{display:flex;justify-content:end;position:relative;margin-bottom:20px}.mi-answer-dialog__question[data-v-bfb47cca]{padding:8px 12px;border-radius:8px;border:1px solid #8bb9ff;background:#e2edff;color:#2b2b2b;font-family:var(--mi-font-source-sans);font-size:18px;font-weight:400;line-height:150%;letter-spacing:.05px}.mi-answer-dialog__answer-container[data-v-bfb47cca]{display:flex;justify-content:start;position:relative}.mi-answer-dialog__answer[data-v-bfb47cca]{min-height:44px;padding:8px 12px;border-radius:8px;border:1px solid #c5dcff;background:transparent;color:#2b2b2b;font-family:var(--mi-font-source-sans);font-size:18px;font-weight:400;line-height:150%;letter-spacing:.05px}.mi-answer-dialog__answer [data-v-bfb47cca] .miso-markdown p{line-height:150%!important}.mi-answer-dialog__answer [data-v-bfb47cca] .miso-markdown p:last-child{margin-bottom:0!important}.mi-answer-dialog__answer [data-v-bfb47cca] .miso-markdown a:not(.miso-citation-link){text-decoration:underline;color:#2b2b2b}.mi-answer-dialog__answer [data-v-bfb47cca] .miso-markdown .miso-citation-link{color:#2b2b2b}.mi-answer-dialog__question-icon[data-v-bfb47cca]{position:absolute;top:8px;right:-40px}.mi-answer-dialog__answer-icon[data-v-bfb47cca]{position:absolute;top:8px;left:-40px}.mi-answer-dialog__view-sources-button[data-v-bfb47cca]{margin-top:16px;display:flex;align-items:center;gap:8px;background:none;color:#000000f2;padding:8px 0;font-family:var(--mi-font-cabin);font-size:14px;font-weight:700;line-height:140%;letter-spacing:1px;text-transform:uppercase;cursor:pointer}.mi-answer-dialog__feedback-block[data-v-bfb47cca]{margin-top:10px;display:flex;align-items:center;gap:12px;color:#000000f2;font-family:var(--mi-font-source-sans);font-size:14px;font-weight:300;line-height:130%;letter-spacing:0}.mi-answer-dialog__feedback-buttons-container[data-v-bfb47cca]{display:flex;align-items:center;gap:8px}.mi-answer-dialog__feedback-button[data-v-bfb47cca]{border-radius:3px;border:1px solid #333e8b;background:#fff;color:#000000f2;font-family:var(--mi-font-source-sans);font-size:12px;font-weight:600;line-height:130%;letter-spacing:0;cursor:pointer;display:flex;padding:0 16px;justify-content:center;align-items:center;height:24px;width:45px}.mi-answer-dialog__feedback-button--active[data-v-bfb47cca]{background:#0053c0;color:#fff}.mi-answer-dialog__sponsored-results-block[data-v-bfb47cca]{margin-top:32px;display:none;flex-direction:column;gap:24px}.mi-answer-dialog__sponsored-results-block-title[data-v-bfb47cca]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:23px;font-weight:550;line-height:120%;letter-spacing:0}@media(max-width:768px){.mi-answer-dialog__question-icon[data-v-bfb47cca],.mi-answer-dialog__answer-icon[data-v-bfb47cca]{display:none}.mi-answer-dialog__sponsored-results-block[data-v-bfb47cca]{display:flex}}.mi-answer-thread[data-v-67cc1278]{display:flex;flex-direction:column;gap:20px;min-height:60vh}.mi-sponsored-results-block[data-v-20ce34d2]{height:100%;display:flex;flex-direction:column;gap:24px}.mi-sponsored-results-block__title[data-v-20ce34d2]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:23px;font-weight:550;line-height:120%;letter-spacing:0}.mi-sponsored-results-block__sticky-container[data-v-20ce34d2]{position:sticky;top:calc(61px + 1.5rem)}@media(max-width:768px){.mi-sponsored-results-block[data-v-20ce34d2]{display:none}}.mi-related-questions-block[data-v-e3bba5ef]{display:flex;flex-direction:column;gap:12px}.mi-related-questions-block__title[data-v-e3bba5ef]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:23px;font-weight:550;line-height:120%;letter-spacing:0}.mi-related-questions-block__list[data-v-e3bba5ef]{display:flex;flex-direction:column;gap:4px}.mi-related-questions-block__question[data-v-e3bba5ef]{display:flex;padding:12px;align-items:center;gap:4px;border-radius:8px;border:1px solid rgba(0,0,0,.15);background:#fff;width:fit-content;text-align:left;cursor:pointer}.mi-related-questions-block__question-text[data-v-e3bba5ef]{margin-right:20px;color:#000000f2;font-family:var(--mi-font-cabin);font-size:11px;font-weight:500;line-height:140%;letter-spacing:.75px;text-transform:uppercase}.mi-recommended-articles-block__header[data-v-2f66c087]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.mi-recommended-articles-block__title[data-v-2f66c087]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:23px;font-weight:500;line-height:120%;letter-spacing:0}.mi-recommended-articles-block__control-buttons-container[data-v-2f66c087]{display:flex;gap:8px}.mi-recommended-articles-block__control-button-previous[data-v-2f66c087],.mi-recommended-articles-block__control-button-next[data-v-2f66c087]{background:none;display:flex;width:36px;height:36px;justify-content:center;align-items:center;border-radius:100%;border:1px solid #0053c0;background:#fff;cursor:pointer}.mi-recommended-articles-block__content-container[data-v-2f66c087]{position:relative;width:38vw;overflow-x:hidden;box-sizing:border-box}.mi-recommended-articles-block__list[data-v-2f66c087]{display:flex;gap:24px}.mi-recommended-articles-block__list a[data-v-2f66c087]{text-decoration:none}.mi-recommended-articles-block__item[data-v-2f66c087]{display:flex;flex-direction:column;gap:16px;width:10.2vw;flex-grow:0;flex-shrink:0}.mi-recommended-articles-block__item-image-container[data-v-2f66c087]{width:100%;aspect-ratio:3/2;background-color:#00000026}.mi-recommended-articles-block__item-image[data-v-2f66c087]{width:100%;height:100%;object-fit:cover}.mi-recommended-articles-block__item-content-container[data-v-2f66c087]{display:flex;flex-direction:column;gap:12px}.mi-recommended-articles-block__item-tag[data-v-2f66c087]{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#2c40d0;font-family:var(--mi-font-cabin);font-size:11px;font-weight:700;line-height:140%;letter-spacing:.75px;text-transform:uppercase}.mi-recommended-articles-block__item-title[data-v-2f66c087]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:16px;font-weight:600;line-height:120%;letter-spacing:.25px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.mi-recommended-articles-block__item-author[data-v-2f66c087]{color:#000000a6;font-family:var(--mi-font-cabin);font-size:12px;font-weight:400;line-height:130%;letter-spacing:0}@media(max-width:768px){.mi-recommended-articles-block__control-buttons-container[data-v-2f66c087]{display:none}.mi-recommended-articles-block__content-container[data-v-2f66c087]{width:100%;overflow-x:auto}.mi-recommended-articles-block__list[data-v-2f66c087]{gap:12px}.mi-recommended-articles-block__item[data-v-2f66c087]{width:40vw}}.mi-ask-box-block[data-v-b3ffa6e5]{margin:0 -8px;background:#e7f2ff;padding:0 8px 16px}.mi-ask-box-block__ask-box[data-v-b3ffa6e5]{display:flex;align-items:center;margin-bottom:20px;box-shadow:0 4px 24px #00000026;border-radius:8px;outline:4px solid rgba(51,62,139,.15)}.mi-ask-box-block__input-group[data-v-b3ffa6e5]{flex:1;display:flex;gap:4px;align-items:center;border-radius:8px 0 0 8px;background:#fff;height:48px;padding:16px}.mi-ask-box-block__input[data-v-b3ffa6e5]{flex:1;outline:none;color:#2b2b2b;caret-color:#303fc8;font-family:var(--mi-font-source-sans);font-size:16px;font-weight:400;line-height:150%;letter-spacing:.05px}.mi-ask-box-block__input[data-v-b3ffa6e5]::placeholder{color:#000000a6;font-family:var(--mi-font-source-sans);font-size:16px;font-weight:400;line-height:150%;letter-spacing:.05px;opacity:.5}.mi-ask-box-block__button[data-v-b3ffa6e5]{border-radius:0 8px 8px 0;background:linear-gradient(252deg,#0f1865 -58.83%,#303fc8 136.93%);display:flex;width:74px;height:48px;padding:8px 14px;justify-content:center;align-items:center;font-family:var(--mi-font-cabin);font-size:14px;font-weight:600;line-height:120%;letter-spacing:.75px;text-transform:uppercase;color:#fff;cursor:pointer}.mi-disclaimers[data-v-b3ffa6e5]{position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:5px}.mi-disclaimers__text[data-v-b3ffa6e5]{color:#000;font-family:var(--mi-font-cabin);font-size:12px;font-weight:400;line-height:130%;letter-spacing:0;opacity:.6}.mi-disclaimers__button[data-v-b3ffa6e5]{font-size:12px;background:none;border:none;cursor:pointer;text-decoration:underline}.mi-disclaimers__link[data-v-b3ffa6e5]{color:#000;text-decoration:underline;cursor:pointer}.mi-advertisement-disclosure-tooltip[data-v-b3ffa6e5]{position:absolute;bottom:135%;left:35%;width:260px;background:#fff;color:#000;font-family:var(--mi-font-cabin);font-size:12px;font-weight:400;line-height:130%;letter-spacing:0;padding:12px 16px 16px;box-shadow:0 4px 24px #00000026;display:flex;flex-direction:column;align-items:end;gap:8px}.mi-advertisement-disclosure-tooltip__close-button[data-v-b3ffa6e5]{background:none;border:none;cursor:pointer;width:12px;height:12px}.mi-advertisement-disclosure-tooltip__close-button svg[data-v-b3ffa6e5]{width:100%;height:100%}@media(max-width:768px){.mi-advertisement-disclosure-tooltip[data-v-b3ffa6e5]{left:16%}}.mi-sources-overlay[data-v-441a2e59]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000026;z-index:900}.mi-sources-overlay__container[data-v-441a2e59]{box-sizing:border-box;position:absolute;top:0;right:0;width:415px;height:100vh;background:#fff;padding:24px;display:flex;flex-direction:column;gap:24px}.mi-sources-overlay__header[data-v-441a2e59]{display:flex;justify-content:space-between;align-items:center}.mi-sources-overlay__title[data-v-441a2e59]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:23px;font-weight:600;line-height:120%;letter-spacing:0}.mi-sources-overlay__close-button[data-v-441a2e59]{background:none;border:none;cursor:pointer}.mi-sources-overlay__content[data-v-441a2e59]{flex:1;display:flex;flex-direction:column;overflow-y:auto}.mi-sources-overlay__source[data-v-441a2e59]{display:flex;gap:10px}.mi-sources-overlay__source a[data-v-441a2e59]{text-decoration:none}.mi-sources-overlay__source>*[data-v-441a2e59]{padding:12px 0}.mi-sources-overlay__source:not(:first-child) .mi-sources-overlay__source-card[data-v-441a2e59]{border-top:1px solid rgba(0,0,0,.15)}.mi-sources-overlay__source-index[data-v-441a2e59]{width:14px;flex-shrink:0;color:#000000f2;font-family:var(--mi-font-cabin);font-size:16px;font-weight:600;line-height:120%;letter-spacing:.25px}.mi-sources-overlay__source-card[data-v-441a2e59]{flex:1}.mi-sources-overlay__source-card-tag[data-v-441a2e59]{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#2c40d0;font-family:var(--mi-font-cabin);font-size:11px;font-weight:700;line-height:140%;letter-spacing:.75px;text-transform:uppercase;margin-bottom:8px}.mi-sources-overlay__source-card-title[data-v-441a2e59]{color:#000000f2;font-family:var(--mi-font-cabin);font-size:16px;font-weight:600;line-height:120%;letter-spacing:.25px}.mi-sources-overlay__source-card-author[data-v-441a2e59]{color:#000000a6;font-family:var(--mi-font-cabin);font-size:12px;font-weight:400;line-height:130%;letter-spacing:0;margin-top:8px}@media(max-width:768px){.mi-sources-overlay__container[data-v-441a2e59]{top:auto;bottom:0;width:100%;height:auto;max-height:90vh;padding:12px;gap:12px}}.mi-answer-page__background[data-v-9c2cae42]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.mi-answer-page__background[data-v-9c2cae42]:before{content:"";display:block;position:sticky;top:0;left:0;width:100%;height:100vh;background:linear-gradient(180deg,#e7f2ff00,#e7f2ff)}.mi-layout[data-v-9c2cae42]{padding:1.5rem 15% 0;display:grid;grid-template-columns:minmax(0,1fr) 365px;grid-template-areas:"area-answer-thread area-sponsored-results-block" "area-related-questions-block area-sponsored-results-block" "area-recommended-articles-block area-sponsored-results-block" "area-ask-box-block area-sponsored-results-block";gap:36px 90px}.mi-layout__answer-thread[data-v-9c2cae42]{grid-area:area-answer-thread}.mi-layout__sponsored-results-block[data-v-9c2cae42]{grid-area:area-sponsored-results-block}.mi-layout__related-questions-block[data-v-9c2cae42]{grid-area:area-related-questions-block}.mi-layout__recommended-articles-block[data-v-9c2cae42]{grid-area:area-recommended-articles-block}.mi-layout__ask-box-block[data-v-9c2cae42]{grid-area:area-ask-box-block;position:sticky;bottom:0;display:flex;flex-direction:column;justify-content:end}@media(max-width:768px){.mi-layout[data-v-9c2cae42]{padding:.75rem;display:flex;flex-direction:column;gap:1.5rem}}:root{--mi-font-source-sans: "Source Sans 3", sans-serif;--mi-font-cabin: "Cabin", sans-serif;--mi-client-width: 100vw}.miso-answer-page{position:relative;width:var(--mi-client-width);min-height:100vh;right:50%;left:50%;margin-right:calc(var(--mi-client-width) / -2);margin-left:calc(var(--mi-client-width) / -2)}.miso-answer-page *,.miso-answer-page :after,.miso-answer-page :before,.miso-answer-page ::backdrop,.miso-answer-page ::file-selector-button{margin:0;padding:0}.miso-answer-page *,.miso-answer-page :after,.miso-answer-page :before,.miso-answer-page ::backdrop,.miso-answer-page ::file-selector-button{box-sizing:border-box;border:0 solid}.miso-answer-page h1,.miso-answer-page h2,.miso-answer-page h3,.miso-answer-page h4,.miso-answer-page h5,.miso-answer-page h6{font-size:inherit;font-weight:inherit}.miso-answer-page img,.miso-answer-page svg,.miso-answer-page video,.miso-answer-page canvas,.miso-answer-page audio,.miso-answer-page iframe,.miso-answer-page embed,.miso-answer-page object{display:block;vertical-align:middle}.miso-answer-page img,.miso-answer-page video{max-width:100%;height:auto}')),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(){"use strict";/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hi(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Y={},is=[],nt=()=>{},jo=()=>!1,xn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Vi=t=>t.startsWith("onUpdate:"),Oe=Object.assign,Qi=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Fd=Object.prototype.hasOwnProperty,W=(t,e)=>Fd.call(t,e),D=Array.isArray,rs=t=>Rn(t)==="[object Map]",qo=t=>Rn(t)==="[object Set]",F=t=>typeof t=="function",ce=t=>typeof t=="string",$t=t=>typeof t=="symbol",ie=t=>t!==null&&typeof t=="object",Bo=t=>(ie(t)||F(t))&&F(t.then)&&F(t.catch),zo=Object.prototype.toString,Rn=t=>zo.call(t),Md=t=>Rn(t).slice(8,-1),Ho=t=>Rn(t)==="[object Object]",Wi=t=>ce(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$s=Hi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kn=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},jd=/-\w/g,Pt=kn(t=>t.replace(jd,e=>e.slice(1).toUpperCase())),qd=/\B([A-Z])/g,Nt=kn(t=>t.replace(qd,"-$1").toLowerCase()),Vo=kn(t=>t.charAt(0).toUpperCase()+t.slice(1)),Gi=kn(t=>t?`on${Vo(t)}`:""),Ut=(t,e)=>!Object.is(t,e),Ln=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Qo=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Ki=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Wo;const $n=()=>Wo||(Wo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yi(t){if(D(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=ce(n)?Vd(n):Yi(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(ce(t)||ie(t))return t}const Bd=/;(?![^(]*\))/g,zd=/:([^]+)/,Hd=/\/\*[^]*?\*\//g;function Vd(t){const e={};return t.replace(Hd,"").split(Bd).forEach(s=>{if(s){const n=s.split(zd);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ps(t){let e="";if(ce(t))e=t;else if(D(t))for(let s=0;s<t.length;s++){const n=Ps(t[s]);n&&(e+=n+" ")}else if(ie(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Qd=Hi("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Go(t){return!!t||t===""}const Ko=t=>!!(t&&t.__v_isRef===!0),it=t=>ce(t)?t:t==null?"":D(t)||ie(t)&&(t.toString===zo||!F(t.toString))?Ko(t)?it(t.value):JSON.stringify(t,Yo,2):String(t),Yo=(t,e)=>Ko(e)?Yo(t,e.value):rs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,i],r)=>(s[Zi(n,r)+" =>"]=i,s),{})}:qo(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Zi(s))}:$t(e)?Zi(e):ie(e)&&!D(e)&&!Ho(e)?String(e):e,Zi=(t,e="")=>{var s;return $t(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Le;class Wd{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!e&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Le;try{return Le=this,e()}finally{Le=s}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Gd(){return Le}let J;const Ji=new WeakSet;class Zo{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ji.has(this)&&(Ji.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ic(this),ec(this);const e=J,s=Ke;J=this,Ke=!0;try{return this.fn()}finally{tc(this),J=e,Ke=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)sr(e);this.deps=this.depsTail=void 0,ic(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ji.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){tr(this)&&this.run()}get dirty(){return tr(this)}}let Jo=0,Ns,Us;function Xo(t,e=!1){if(t.flags|=8,e){t.next=Us,Us=t;return}t.next=Ns,Ns=t}function Xi(){Jo++}function er(){if(--Jo>0)return;if(Us){let e=Us;for(Us=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Ns;){let e=Ns;for(Ns=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function ec(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function tc(t){let e,s=t.depsTail,n=s;for(;n;){const i=n.prevDep;n.version===-1?(n===s&&(s=i),sr(n),Kd(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}t.deps=e,t.depsTail=s}function tr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(sc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function sc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ds)||(t.globalVersion=Ds,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!tr(t))))return;t.flags|=2;const e=t.dep,s=J,n=Ke;J=t,Ke=!0;try{ec(t);const i=t.fn(t._value);(e.version===0||Ut(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{J=s,Ke=n,tc(t),t.flags&=-3}}function sr(t,e=!1){const{dep:s,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)sr(r,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Kd(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Ke=!0;const nc=[];function rt(){nc.push(Ke),Ke=!1}function ot(){const t=nc.pop();Ke=t===void 0?!0:t}function ic(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=J;J=void 0;try{e()}finally{J=s}}}let Ds=0;class Yd{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class nr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!J||!Ke||J===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==J)s=this.activeLink=new Yd(J,this),J.deps?(s.prevDep=J.depsTail,J.depsTail.nextDep=s,J.depsTail=s):J.deps=J.depsTail=s,rc(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=J.depsTail,s.nextDep=void 0,J.depsTail.nextDep=s,J.depsTail=s,J.deps===s&&(J.deps=n)}return s}trigger(e){this.version++,Ds++,this.notify(e)}notify(e){Xi();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{er()}}}function rc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)rc(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const ir=new WeakMap,Wt=Symbol(""),rr=Symbol(""),Fs=Symbol("");function ye(t,e,s){if(Ke&&J){let n=ir.get(t);n||ir.set(t,n=new Map);let i=n.get(s);i||(n.set(s,i=new nr),i.map=n,i.key=s),i.track()}}function wt(t,e,s,n,i,r){const o=ir.get(t);if(!o){Ds++;return}const c=a=>{a&&a.trigger()};if(Xi(),e==="clear")o.forEach(c);else{const a=D(t),u=a&&Wi(s);if(a&&s==="length"){const l=Number(n);o.forEach((d,m)=>{(m==="length"||m===Fs||!$t(m)&&m>=l)&&c(d)})}else switch((s!==void 0||o.has(void 0))&&c(o.get(s)),u&&c(o.get(Fs)),e){case"add":a?u&&c(o.get("length")):(c(o.get(Wt)),rs(t)&&c(o.get(rr)));break;case"delete":a||(c(o.get(Wt)),rs(t)&&c(o.get(rr)));break;case"set":rs(t)&&c(o.get(Wt));break}}er()}function os(t){const e=Q(t);return e===t?e:(ye(e,"iterate",Fs),Be(t)?e:e.map(pe))}function Pn(t){return ye(t=Q(t),"iterate",Fs),t}const Zd={__proto__:null,[Symbol.iterator](){return or(this,Symbol.iterator,pe)},concat(...t){return os(this).concat(...t.map(e=>D(e)?os(e):e))},entries(){return or(this,"entries",t=>(t[1]=pe(t[1]),t))},every(t,e){return yt(this,"every",t,e,void 0,arguments)},filter(t,e){return yt(this,"filter",t,e,s=>s.map(pe),arguments)},find(t,e){return yt(this,"find",t,e,pe,arguments)},findIndex(t,e){return yt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return yt(this,"findLast",t,e,pe,arguments)},findLastIndex(t,e){return yt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return yt(this,"forEach",t,e,void 0,arguments)},includes(...t){return cr(this,"includes",t)},indexOf(...t){return cr(this,"indexOf",t)},join(t){return os(this).join(t)},lastIndexOf(...t){return cr(this,"lastIndexOf",t)},map(t,e){return yt(this,"map",t,e,void 0,arguments)},pop(){return Ms(this,"pop")},push(...t){return Ms(this,"push",t)},reduce(t,...e){return oc(this,"reduce",t,e)},reduceRight(t,...e){return oc(this,"reduceRight",t,e)},shift(){return Ms(this,"shift")},some(t,e){return yt(this,"some",t,e,void 0,arguments)},splice(...t){return Ms(this,"splice",t)},toReversed(){return os(this).toReversed()},toSorted(t){return os(this).toSorted(t)},toSpliced(...t){return os(this).toSpliced(...t)},unshift(...t){return Ms(this,"unshift",t)},values(){return or(this,"values",pe)}};function or(t,e,s){const n=Pn(t),i=n[e]();return n!==t&&!Be(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=s(r.value)),r}),i}const Jd=Array.prototype;function yt(t,e,s,n,i,r){const o=Pn(t),c=o!==t&&!Be(t),a=o[e];if(a!==Jd[e]){const d=a.apply(t,r);return c?pe(d):d}let u=s;o!==t&&(c?u=function(d,m){return s.call(this,pe(d),m,t)}:s.length>2&&(u=function(d,m){return s.call(this,d,m,t)}));const l=a.call(o,u,n);return c&&i?i(l):l}function oc(t,e,s,n){const i=Pn(t);let r=s;return i!==t&&(Be(t)?s.length>3&&(r=function(o,c,a){return s.call(this,o,c,a,t)}):r=function(o,c,a){return s.call(this,o,pe(c),a,t)}),i[e](r,...n)}function cr(t,e,s){const n=Q(t);ye(n,"iterate",Fs);const i=n[e](...s);return(i===-1||i===!1)&&ur(s[0])?(s[0]=Q(s[0]),n[e](...s)):i}function Ms(t,e,s=[]){rt(),Xi();const n=Q(t)[e].apply(t,s);return er(),ot(),n}const Xd=Hi("__proto__,__v_isRef,__isVue"),cc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter($t));function eh(t){$t(t)||(t=String(t));const e=Q(this);return ye(e,"has",t),e.hasOwnProperty(t)}class ac{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!i;if(s==="__v_isReadonly")return i;if(s==="__v_isShallow")return r;if(s==="__v_raw")return n===(i?r?_c:hc:r?dc:fc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=D(e);if(!i){let a;if(o&&(a=Zd[s]))return a;if(s==="hasOwnProperty")return eh}const c=Reflect.get(e,s,me(e)?e:n);if(($t(s)?cc.has(s):Xd(s))||(i||ye(e,"get",s),r))return c;if(me(c)){const a=o&&Wi(s)?c:c.value;return i&&ie(a)?lr(a):a}return ie(c)?i?lr(c):Fn(c):c}}class lc extends ac{constructor(e=!1){super(!1,e)}set(e,s,n,i){let r=e[s];if(!this._isShallow){const a=Dt(r);if(!Be(n)&&!Dt(n)&&(r=Q(r),n=Q(n)),!D(e)&&me(r)&&!me(n))return a||(r.value=n),!0}const o=D(e)&&Wi(s)?Number(s)<e.length:W(e,s),c=Reflect.set(e,s,n,me(e)?e:i);return e===Q(i)&&(o?Ut(n,r)&&wt(e,"set",s,n):wt(e,"add",s,n)),c}deleteProperty(e,s){const n=W(e,s);e[s];const i=Reflect.deleteProperty(e,s);return i&&n&&wt(e,"delete",s,void 0),i}has(e,s){const n=Reflect.has(e,s);return(!$t(s)||!cc.has(s))&&ye(e,"has",s),n}ownKeys(e){return ye(e,"iterate",D(e)?"length":Wt),Reflect.ownKeys(e)}}class uc extends ac{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const th=new lc,sh=new uc,nh=new lc(!0),ih=new uc(!0),ar=t=>t,Nn=t=>Reflect.getPrototypeOf(t);function rh(t,e,s){return function(...n){const i=this.__v_raw,r=Q(i),o=rs(r),c=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,u=i[t](...n),l=s?ar:e?jn:pe;return!e&&ye(r,"iterate",a?rr:Wt),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[l(d[0]),l(d[1])]:l(d),done:m}},[Symbol.iterator](){return this}}}}function Un(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function oh(t,e){const s={get(i){const r=this.__v_raw,o=Q(r),c=Q(i);t||(Ut(i,c)&&ye(o,"get",i),ye(o,"get",c));const{has:a}=Nn(o),u=e?ar:t?jn:pe;if(a.call(o,i))return u(r.get(i));if(a.call(o,c))return u(r.get(c));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&ye(Q(i),"iterate",Wt),i.size},has(i){const r=this.__v_raw,o=Q(r),c=Q(i);return t||(Ut(i,c)&&ye(o,"has",i),ye(o,"has",c)),i===c?r.has(i):r.has(i)||r.has(c)},forEach(i,r){const o=this,c=o.__v_raw,a=Q(c),u=e?ar:t?jn:pe;return!t&&ye(a,"iterate",Wt),c.forEach((l,d)=>i.call(r,u(l),u(d),o))}};return Oe(s,t?{add:Un("add"),set:Un("set"),delete:Un("delete"),clear:Un("clear")}:{add(i){!e&&!Be(i)&&!Dt(i)&&(i=Q(i));const r=Q(this);return Nn(r).has.call(r,i)||(r.add(i),wt(r,"add",i,i)),this},set(i,r){!e&&!Be(r)&&!Dt(r)&&(r=Q(r));const o=Q(this),{has:c,get:a}=Nn(o);let u=c.call(o,i);u||(i=Q(i),u=c.call(o,i));const l=a.call(o,i);return o.set(i,r),u?Ut(r,l)&&wt(o,"set",i,r):wt(o,"add",i,r),this},delete(i){const r=Q(this),{has:o,get:c}=Nn(r);let a=o.call(r,i);a||(i=Q(i),a=o.call(r,i)),c&&c.call(r,i);const u=r.delete(i);return a&&wt(r,"delete",i,void 0),u},clear(){const i=Q(this),r=i.size!==0,o=i.clear();return r&&wt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=rh(i,t,e)}),s}function Dn(t,e){const s=oh(t,e);return(n,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(W(s,i)&&i in n?s:n,i,r)}const ch={get:Dn(!1,!1)},ah={get:Dn(!1,!0)},lh={get:Dn(!0,!1)},uh={get:Dn(!0,!0)},fc=new WeakMap,dc=new WeakMap,hc=new WeakMap,_c=new WeakMap;function fh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dh(t){return t.__v_skip||!Object.isExtensible(t)?0:fh(Md(t))}function Fn(t){return Dt(t)?t:Mn(t,!1,th,ch,fc)}function hh(t){return Mn(t,!1,nh,ah,dc)}function lr(t){return Mn(t,!0,sh,lh,hc)}function _v(t){return Mn(t,!0,ih,uh,_c)}function Mn(t,e,s,n,i){if(!ie(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=dh(t);if(r===0)return t;const o=i.get(t);if(o)return o;const c=new Proxy(t,r===2?n:s);return i.set(t,c),c}function cs(t){return Dt(t)?cs(t.__v_raw):!!(t&&t.__v_isReactive)}function Dt(t){return!!(t&&t.__v_isReadonly)}function Be(t){return!!(t&&t.__v_isShallow)}function ur(t){return t?!!t.__v_raw:!1}function Q(t){const e=t&&t.__v_raw;return e?Q(e):t}function fr(t){return!W(t,"__v_skip")&&Object.isExtensible(t)&&Qo(t,"__v_skip",!0),t}const pe=t=>ie(t)?Fn(t):t,jn=t=>ie(t)?lr(t):t;function me(t){return t?t.__v_isRef===!0:!1}function Et(t){return _h(t,!1)}function _h(t,e){return me(t)?t:new ph(t,e)}class ph{constructor(e,s){this.dep=new nr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Q(e),this._value=s?e:pe(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||Be(e)||Dt(e);e=n?e:Q(e),Ut(e,s)&&(this._rawValue=e,this._value=n?e:pe(e),this.dep.trigger())}}function fe(t){return me(t)?t.value:t}const mh={get:(t,e,s)=>e==="__v_raw"?t:fe(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const i=t[e];return me(i)&&!me(s)?(i.value=s,!0):Reflect.set(t,e,s,n)}};function pc(t){return cs(t)?t:new Proxy(t,mh)}class gh{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new nr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ds-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&J!==this)return Xo(this,!0),!0}get value(){const e=this.dep.track();return sc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function bh(t,e,s=!1){let n,i;return F(t)?n=t:(n=t.get,i=t.set),new gh(n,i,s)}const qn={},Bn=new WeakMap;let Gt;function wh(t,e=!1,s=Gt){if(s){let n=Bn.get(s);n||Bn.set(s,n=[]),n.push(t)}}function yh(t,e,s=Y){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:c,call:a}=s,u=k=>i?k:Be(k)||i===!1||i===0?St(k,1):St(k);let l,d,m,w,_=!1,y=!1;if(me(t)?(d=()=>t.value,_=Be(t)):cs(t)?(d=()=>u(t),_=!0):D(t)?(y=!0,_=t.some(k=>cs(k)||Be(k)),d=()=>t.map(k=>{if(me(k))return k.value;if(cs(k))return u(k);if(F(k))return a?a(k,2):k()})):F(t)?e?d=a?()=>a(t,2):t:d=()=>{if(m){rt();try{m()}finally{ot()}}const k=Gt;Gt=l;try{return a?a(t,3,[w]):t(w)}finally{Gt=k}}:d=nt,e&&i){const k=d,B=i===!0?1/0:i;d=()=>St(k(),B)}const v=Gd(),L=()=>{l.stop(),v&&v.active&&Qi(v.effects,l)};if(r&&e){const k=e;e=(...B)=>{k(...B),L()}}let q=y?new Array(t.length).fill(qn):qn;const M=k=>{if(!(!(l.flags&1)||!l.dirty&&!k))if(e){const B=l.run();if(i||_||(y?B.some((re,G)=>Ut(re,q[G])):Ut(B,q))){m&&m();const re=Gt;Gt=l;try{const G=[B,q===qn?void 0:y&&q[0]===qn?[]:q,w];q=B,a?a(e,3,G):e(...G)}finally{Gt=re}}}else l.run()};return c&&c(M),l=new Zo(d),l.scheduler=o?()=>o(M,!1):M,w=k=>wh(k,!1,l),m=l.onStop=()=>{const k=Bn.get(l);if(k){if(a)a(k,4);else for(const B of k)B();Bn.delete(l)}},e?n?M(!0):q=l.run():o?o(M.bind(null,!0),!0):l.run(),L.pause=l.pause.bind(l),L.resume=l.resume.bind(l),L.stop=L,L}function St(t,e=1/0,s){if(e<=0||!ie(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,me(t))St(t.value,e,s);else if(D(t))for(let n=0;n<t.length;n++)St(t[n],e,s);else if(qo(t)||rs(t))t.forEach(n=>{St(n,e,s)});else if(Ho(t)){for(const n in t)St(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&St(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const js=[];let dr=!1;function pv(t,...e){if(dr)return;dr=!0,rt();const s=js.length?js[js.length-1].component:null,n=s&&s.appContext.config.warnHandler,i=Eh();if(n)as(n,s,11,[t+e.map(r=>{var o,c;return(c=(o=r.toString)==null?void 0:o.call(r))!=null?c:JSON.stringify(r)}).join(""),s&&s.proxy,i.map(({vnode:r})=>`at <${ha(s,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${t}`,...e];i.length&&r.push(`
`,...Sh(i)),console.warn(...r)}ot(),dr=!1}function Eh(){let t=js[js.length-1];if(!t)return[];const e=[];for(;t;){const s=e[0];s&&s.vnode===t?s.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function Sh(t){const e=[];return t.forEach((s,n)=>{e.push(...n===0?[]:[`
`],...Th(s))}),e}function Th({vnode:t,recurseCount:e}){const s=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,i=` at <${ha(t.component,t.type,n)}`,r=">"+s;return t.props?[i,...Ah(t.props),r]:[i+r]}function Ah(t){const e=[],s=Object.keys(t);return s.slice(0,3).forEach(n=>{e.push(...mc(n,t[n]))}),s.length>3&&e.push(" ..."),e}function mc(t,e,s){return ce(e)?(e=JSON.stringify(e),s?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?s?e:[`${t}=${e}`]:me(e)?(e=mc(t,Q(e.value),!0),s?e:[`${t}=Ref<`,e,">"]):F(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=Q(e),s?e:[`${t}=`,e])}function as(t,e,s,n){try{return n?t(...n):t()}catch(i){zn(i,e,s)}}function ct(t,e,s,n){if(F(t)){const i=as(t,e,s,n);return i&&Bo(i)&&i.catch(r=>{zn(r,e,s)}),i}if(D(t)){const i=[];for(let r=0;r<t.length;r++)i.push(ct(t[r],e,s,n));return i}}function zn(t,e,s,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Y;if(e){let c=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;c;){const l=c.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](t,a,u)===!1)return}c=c.parent}if(r){rt(),as(r,null,10,[t,a,u]),ot();return}}vh(t,s,i,n,o)}function vh(t,e,s,n=!0,i=!1){if(i)throw t;console.error(t)}const Ce=[];let at=-1;const ls=[];let Ft=null,us=0;const gc=Promise.resolve();let Hn=null;function Oh(t){const e=Hn||gc;return t?e.then(this?t.bind(this):t):e}function Ch(t){let e=at+1,s=Ce.length;for(;e<s;){const n=e+s>>>1,i=Ce[n],r=qs(i);r<t||r===t&&i.flags&2?e=n+1:s=n}return e}function hr(t){if(!(t.flags&1)){const e=qs(t),s=Ce[Ce.length-1];!s||!(t.flags&2)&&e>=qs(s)?Ce.push(t):Ce.splice(Ch(e),0,t),t.flags|=1,bc()}}function bc(){Hn||(Hn=gc.then(Ec))}function Ih(t){D(t)?ls.push(...t):Ft&&t.id===-1?Ft.splice(us+1,0,t):t.flags&1||(ls.push(t),t.flags|=1),bc()}function wc(t,e,s=at+1){for(;s<Ce.length;s++){const n=Ce[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Ce.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function yc(t){if(ls.length){const e=[...new Set(ls)].sort((s,n)=>qs(s)-qs(n));if(ls.length=0,Ft){Ft.push(...e);return}for(Ft=e,us=0;us<Ft.length;us++){const s=Ft[us];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ft=null,us=0}}const qs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ec(t){try{for(at=0;at<Ce.length;at++){const e=Ce[at];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),as(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;at<Ce.length;at++){const e=Ce[at];e&&(e.flags&=-2)}at=-1,Ce.length=0,yc(),Hn=null,(Ce.length||ls.length)&&Ec()}}let ze=null,Sc=null;function Vn(t){const e=ze;return ze=t,Sc=t&&t.type.__scopeId||null,e}function xh(t,e=ze,s){if(!e||t._n)return t;const n=(...i)=>{n._d&&ia(-1);const r=Vn(e);let o;try{o=t(...i)}finally{Vn(r),n._d&&ia(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Tc(t,e){if(ze===null)return t;const s=ri(ze),n=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,c,a=Y]=e[i];r&&(F(r)&&(r={mounted:r,updated:r}),r.deep&&St(o),n.push({dir:r,instance:s,value:o,oldValue:void 0,arg:c,modifiers:a}))}return t}function Kt(t,e,s,n){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const c=i[o];r&&(c.oldValue=r[o].value);let a=c.dir[n];a&&(rt(),ct(a,s,8,[t.el,c,t,e]),ot())}}const Ac=Symbol("_vte"),Rh=t=>t.__isTeleport,Bs=t=>t&&(t.disabled||t.disabled===""),vc=t=>t&&(t.defer||t.defer===""),Oc=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Cc=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,_r=(t,e)=>{const s=t&&t.to;return ce(s)?e?e(s):null:s},Ic={name:"Teleport",__isTeleport:!0,process(t,e,s,n,i,r,o,c,a,u){const{mc:l,pc:d,pbc:m,o:{insert:w,querySelector:_,createText:y,createComment:v}}=u,L=Bs(e.props);let{shapeFlag:q,children:M,dynamicChildren:k}=e;if(t==null){const B=e.el=y(""),re=e.anchor=y("");w(B,s,n),w(re,s,n);const G=(ue,Ae)=>{q&16&&l(M,ue,Ae,i,r,o,c,a)},de=()=>{const ue=e.target=_r(e.props,_),Ae=xc(ue,e,y,w);ue&&(o!=="svg"&&Oc(ue)?o="svg":o!=="mathml"&&Cc(ue)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(ue),L||(G(ue,Ae),Wn(e,!1)))};L&&(G(s,re),Wn(e,!0)),vc(e.props)?(e.el.__isMounted=!1,xe(()=>{de(),delete e.el.__isMounted},r)):de()}else{if(vc(e.props)&&t.el.__isMounted===!1){xe(()=>{Ic.process(t,e,s,n,i,r,o,c,a,u)},r);return}e.el=t.el,e.targetStart=t.targetStart;const B=e.anchor=t.anchor,re=e.target=t.target,G=e.targetAnchor=t.targetAnchor,de=Bs(t.props),ue=de?s:re,Ae=de?B:G;if(o==="svg"||Oc(re)?o="svg":(o==="mathml"||Cc(re))&&(o="mathml"),k?(m(t.dynamicChildren,k,ue,i,r,o,c),Ar(t,e,!0)):a||d(t,e,ue,Ae,i,r,o,c,!1),L)de?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Qn(e,s,B,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const tt=e.target=_r(e.props,_);tt&&Qn(e,tt,null,u,0)}else de&&Qn(e,re,G,u,1);Wn(e,L)}},remove(t,e,s,{um:n,o:{remove:i}},r){const{shapeFlag:o,children:c,anchor:a,targetStart:u,targetAnchor:l,target:d,props:m}=t;if(d&&(i(u),i(l)),r&&i(a),o&16){const w=r||!Bs(m);for(let _=0;_<c.length;_++){const y=c[_];n(y,e,s,w,!!y.dynamicChildren)}}},move:Qn,hydrate:kh};function Qn(t,e,s,{o:{insert:n},m:i},r=2){r===0&&n(t.targetAnchor,e,s);const{el:o,anchor:c,shapeFlag:a,children:u,props:l}=t,d=r===2;if(d&&n(o,e,s),(!d||Bs(l))&&a&16)for(let m=0;m<u.length;m++)i(u[m],e,s,2);d&&n(c,e,s)}function kh(t,e,s,n,i,r,{o:{nextSibling:o,parentNode:c,querySelector:a,insert:u,createText:l}},d){function m(y,v,L,q){v.anchor=d(o(y),v,c(y),s,n,i,r),v.targetStart=L,v.targetAnchor=q}const w=e.target=_r(e.props,a),_=Bs(e.props);if(w){const y=w._lpa||w.firstChild;if(e.shapeFlag&16)if(_)m(t,e,y,y&&o(y));else{e.anchor=o(t);let v=y;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")e.targetStart=v;else if(v.data==="teleport anchor"){e.targetAnchor=v,w._lpa=e.targetAnchor&&o(e.targetAnchor);break}}v=o(v)}e.targetAnchor||xc(w,e,l,u),d(y&&o(y),e,w,s,n,i,r)}Wn(e,_)}else _&&e.shapeFlag&16&&m(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Lh=Ic;function Wn(t,e){const s=t.ctx;if(s&&s.ut){let n,i;for(e?(n=t.el,i=t.anchor):(n=t.targetStart,i=t.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function xc(t,e,s,n){const i=e.targetStart=s(""),r=e.targetAnchor=s("");return i[Ac]=r,t&&(n(i,t),n(r,t)),r}const $h=Symbol("_leaveCb");function pr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,pr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Rc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Gn=new WeakMap;function zs(t,e,s,n,i=!1){if(D(t)){t.forEach((_,y)=>zs(_,e&&(D(e)?e[y]:e),s,n,i));return}if(Hs(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&zs(t,e,s,n.component.subTree);return}const r=n.shapeFlag&4?ri(n.component):n.el,o=i?null:r,{i:c,r:a}=t,u=e&&e.r,l=c.refs===Y?c.refs={}:c.refs,d=c.setupState,m=Q(d),w=d===Y?jo:_=>W(m,_);if(u!=null&&u!==a){if(kc(e),ce(u))l[u]=null,w(u)&&(d[u]=null);else if(me(u)){u.value=null;const _=e;_.k&&(l[_.k]=null)}}if(F(a))as(a,c,12,[o,l]);else{const _=ce(a),y=me(a);if(_||y){const v=()=>{if(t.f){const L=_?w(a)?d[a]:l[a]:a.value;if(i)D(L)&&Qi(L,r);else if(D(L))L.includes(r)||L.push(r);else if(_)l[a]=[r],w(a)&&(d[a]=l[a]);else{const q=[r];a.value=q,t.k&&(l[t.k]=q)}}else _?(l[a]=o,w(a)&&(d[a]=o)):y&&(a.value=o,t.k&&(l[t.k]=o))};if(o){const L=()=>{v(),Gn.delete(t)};L.id=-1,Gn.set(t,L),xe(L,s)}else kc(t),v()}}}function kc(t){const e=Gn.get(t);e&&(e.flags|=8,Gn.delete(t))}$n().requestIdleCallback,$n().cancelIdleCallback;const Hs=t=>!!t.type.__asyncLoader,Lc=t=>t.type.__isKeepAlive;function Ph(t,e){$c(t,"a",e)}function Nh(t,e){$c(t,"da",e)}function $c(t,e,s=Re){const n=t.__wdc||(t.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Kn(e,n,s),s){let i=s.parent;for(;i&&i.parent;)Lc(i.parent.vnode)&&Uh(n,e,s,i),i=i.parent}}function Uh(t,e,s,n){const i=Kn(e,t,n,!0);Vs(()=>{Qi(n[e],i)},s)}function Kn(t,e,s=Re,n=!1){if(s){const i=s[t]||(s[t]=[]),r=e.__weh||(e.__weh=(...o)=>{rt();const c=Zs(s),a=ct(e,s,t,o);return c(),ot(),a});return n?i.unshift(r):i.push(r),r}}const Tt=t=>(e,s=Re)=>{(!Js||t==="sp")&&Kn(t,(...n)=>e(...n),s)},Dh=Tt("bm"),Yn=Tt("m"),Fh=Tt("bu"),Mh=Tt("u"),jh=Tt("bum"),Vs=Tt("um"),qh=Tt("sp"),Bh=Tt("rtg"),zh=Tt("rtc");function Hh(t,e=Re){Kn("ec",t,e)}const Vh=Symbol.for("v-ndc");function Zn(t,e,s,n){let i;const r=s,o=D(t);if(o||ce(t)){const c=o&&cs(t);let a=!1,u=!1;c&&(a=!Be(t),u=Dt(t),t=Pn(t)),i=new Array(t.length);for(let l=0,d=t.length;l<d;l++)i[l]=e(a?u?jn(pe(t[l])):pe(t[l]):t[l],l,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let c=0;c<t;c++)i[c]=e(c+1,c,void 0,r)}else if(ie(t))if(t[Symbol.iterator])i=Array.from(t,(c,a)=>e(c,a,void 0,r));else{const c=Object.keys(t);i=new Array(c.length);for(let a=0,u=c.length;a<u;a++){const l=c[a];i[a]=e(t[l],l,a,r)}}else i=[];return i}const mr=t=>t?ua(t)?ri(t):mr(t.parent):null,Qs=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>mr(t.parent),$root:t=>mr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Dc(t),$forceUpdate:t=>t.f||(t.f=()=>{hr(t.update)}),$nextTick:t=>t.n||(t.n=Oh.bind(t.proxy)),$watch:t=>h_.bind(t)}),gr=(t,e)=>t!==Y&&!t.__isScriptSetup&&W(t,e),Qh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:i,props:r,accessCache:o,type:c,appContext:a}=t;let u;if(e[0]!=="$"){const w=o[e];if(w!==void 0)switch(w){case 1:return n[e];case 2:return i[e];case 4:return s[e];case 3:return r[e]}else{if(gr(n,e))return o[e]=1,n[e];if(i!==Y&&W(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&W(u,e))return o[e]=3,r[e];if(s!==Y&&W(s,e))return o[e]=4,s[e];br&&(o[e]=0)}}const l=Qs[e];let d,m;if(l)return e==="$attrs"&&ye(t.attrs,"get",""),l(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(s!==Y&&W(s,e))return o[e]=4,s[e];if(m=a.config.globalProperties,W(m,e))return m[e]},set({_:t},e,s){const{data:n,setupState:i,ctx:r}=t;return gr(i,e)?(i[e]=s,!0):n!==Y&&W(n,e)?(n[e]=s,!0):W(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:i,propsOptions:r,type:o}},c){let a,u;return!!(s[c]||t!==Y&&c[0]!=="$"&&W(t,c)||gr(e,c)||(a=r[0])&&W(a,c)||W(n,c)||W(Qs,c)||W(i.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:W(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Pc(t){return D(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let br=!0;function Wh(t){const e=Dc(t),s=t.proxy,n=t.ctx;br=!1,e.beforeCreate&&Nc(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:c,provide:a,inject:u,created:l,beforeMount:d,mounted:m,beforeUpdate:w,updated:_,activated:y,deactivated:v,beforeDestroy:L,beforeUnmount:q,destroyed:M,unmounted:k,render:B,renderTracked:re,renderTriggered:G,errorCaptured:de,serverPrefetch:ue,expose:Ae,inheritAttrs:tt,components:Lt,directives:_t,filters:st}=e;if(u&&Gh(u,n,null),o)for(const ee in o){const z=o[ee];F(z)&&(n[ee]=z.bind(s))}if(i){const ee=i.call(s,s);ie(ee)&&(t.data=Fn(ee))}if(br=!0,r)for(const ee in r){const z=r[ee],pt=F(z)?z.bind(s,s):F(z.get)?z.get.bind(s,s):nt,Rs=!F(z)&&F(z.set)?z.set.bind(s):nt,ve=ft({get:pt,set:Rs});Object.defineProperty(n,ee,{enumerable:!0,configurable:!0,get:()=>ve.value,set:we=>ve.value=we})}if(c)for(const ee in c)Uc(c[ee],n,s,ee);if(a){const ee=F(a)?a.call(s):a;Reflect.ownKeys(ee).forEach(z=>{e_(z,ee[z])})}l&&Nc(l,t,"c");function X(ee,z){D(z)?z.forEach(pt=>ee(pt.bind(s))):z&&ee(z.bind(s))}if(X(Dh,d),X(Yn,m),X(Fh,w),X(Mh,_),X(Ph,y),X(Nh,v),X(Hh,de),X(zh,re),X(Bh,G),X(jh,q),X(Vs,k),X(qh,ue),D(Ae))if(Ae.length){const ee=t.exposed||(t.exposed={});Ae.forEach(z=>{Object.defineProperty(ee,z,{get:()=>s[z],set:pt=>s[z]=pt,enumerable:!0})})}else t.exposed||(t.exposed={});B&&t.render===nt&&(t.render=B),tt!=null&&(t.inheritAttrs=tt),Lt&&(t.components=Lt),_t&&(t.directives=_t),ue&&Rc(t)}function Gh(t,e,s=nt){D(t)&&(t=wr(t));for(const n in t){const i=t[n];let r;ie(i)?"default"in i?r=Xn(i.from||n,i.default,!0):r=Xn(i.from||n):r=Xn(i),me(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function Nc(t,e,s){ct(D(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Uc(t,e,s,n){let i=n.includes(".")?Xc(s,n):()=>s[n];if(ce(t)){const r=e[t];F(r)&&ds(i,r)}else if(F(t))ds(i,t.bind(s));else if(ie(t))if(D(t))t.forEach(r=>Uc(r,e,s,n));else{const r=F(t.handler)?t.handler.bind(s):e[t.handler];F(r)&&ds(i,r,t)}}function Dc(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,c=r.get(e);let a;return c?a=c:!i.length&&!s&&!n?a=e:(a={},i.length&&i.forEach(u=>Jn(a,u,o,!0)),Jn(a,e,o)),ie(e)&&r.set(e,a),a}function Jn(t,e,s,n=!1){const{mixins:i,extends:r}=e;r&&Jn(t,r,s,!0),i&&i.forEach(o=>Jn(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const c=Kh[o]||s&&s[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const Kh={data:Fc,props:Mc,emits:Mc,methods:Ws,computed:Ws,beforeCreate:Ie,created:Ie,beforeMount:Ie,mounted:Ie,beforeUpdate:Ie,updated:Ie,beforeDestroy:Ie,beforeUnmount:Ie,destroyed:Ie,unmounted:Ie,activated:Ie,deactivated:Ie,errorCaptured:Ie,serverPrefetch:Ie,components:Ws,directives:Ws,watch:Zh,provide:Fc,inject:Yh};function Fc(t,e){return e?t?function(){return Oe(F(t)?t.call(this,this):t,F(e)?e.call(this,this):e)}:e:t}function Yh(t,e){return Ws(wr(t),wr(e))}function wr(t){if(D(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Ie(t,e){return t?[...new Set([].concat(t,e))]:e}function Ws(t,e){return t?Oe(Object.create(null),t,e):e}function Mc(t,e){return t?D(t)&&D(e)?[...new Set([...t,...e])]:Oe(Object.create(null),Pc(t),Pc(e??{})):e}function Zh(t,e){if(!t)return e;if(!e)return t;const s=Oe(Object.create(null),t);for(const n in e)s[n]=Ie(t[n],e[n]);return s}function jc(){return{app:null,config:{isNativeTag:jo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jh=0;function Xh(t,e){return function(n,i=null){F(n)||(n=Oe({},n)),i!=null&&!ie(i)&&(i=null);const r=jc(),o=new WeakSet,c=[];let a=!1;const u=r.app={_uid:Jh++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:F_,get config(){return r.config},set config(l){},use(l,...d){return o.has(l)||(l&&F(l.install)?(o.add(l),l.install(u,...d)):F(l)&&(o.add(l),l(u,...d))),u},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),u},component(l,d){return d?(r.components[l]=d,u):r.components[l]},directive(l,d){return d?(r.directives[l]=d,u):r.directives[l]},mount(l,d,m){if(!a){const w=u._ceVNode||he(n,i);return w.appContext=r,m===!0?m="svg":m===!1&&(m=void 0),t(w,l,m),a=!0,u._container=l,l.__vue_app__=u,ri(w.component)}},onUnmount(l){c.push(l)},unmount(){a&&(ct(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(l,d){return r.provides[l]=d,u},runWithContext(l){const d=fs;fs=u;try{return l()}finally{fs=d}}};return u}}let fs=null;function e_(t,e){if(Re){let s=Re.provides;const n=Re.parent&&Re.parent.provides;n===s&&(s=Re.provides=Object.create(n)),s[t]=e}}function Xn(t,e,s=!1){const n=x_();if(n||fs){let i=fs?fs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return s&&F(e)?e.call(n&&n.proxy):e}}const qc={},Bc=()=>Object.create(qc),zc=t=>Object.getPrototypeOf(t)===qc;function t_(t,e,s,n=!1){const i={},r=Bc();t.propsDefaults=Object.create(null),Hc(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);s?t.props=n?i:hh(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function s_(t,e,s,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,c=Q(i),[a]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const l=t.vnode.dynamicProps;for(let d=0;d<l.length;d++){let m=l[d];if(ei(t.emitsOptions,m))continue;const w=e[m];if(a)if(W(r,m))w!==r[m]&&(r[m]=w,u=!0);else{const _=Pt(m);i[_]=yr(a,c,_,w,t,!1)}else w!==r[m]&&(r[m]=w,u=!0)}}}else{Hc(t,e,i,r)&&(u=!0);let l;for(const d in c)(!e||!W(e,d)&&((l=Nt(d))===d||!W(e,l)))&&(a?s&&(s[d]!==void 0||s[l]!==void 0)&&(i[d]=yr(a,c,d,void 0,t,!0)):delete i[d]);if(r!==c)for(const d in r)(!e||!W(e,d))&&(delete r[d],u=!0)}u&&wt(t.attrs,"set","")}function Hc(t,e,s,n){const[i,r]=t.propsOptions;let o=!1,c;if(e)for(let a in e){if($s(a))continue;const u=e[a];let l;i&&W(i,l=Pt(a))?!r||!r.includes(l)?s[l]=u:(c||(c={}))[l]=u:ei(t.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(r){const a=Q(s),u=c||Y;for(let l=0;l<r.length;l++){const d=r[l];s[d]=yr(i,a,d,u[d],t,!W(u,d))}}return o}function yr(t,e,s,n,i,r){const o=t[s];if(o!=null){const c=W(o,"default");if(c&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&F(a)){const{propsDefaults:u}=i;if(s in u)n=u[s];else{const l=Zs(i);n=u[s]=a.call(null,e),l()}}else n=a;i.ce&&i.ce._setProp(s,n)}o[0]&&(r&&!c?n=!1:o[1]&&(n===""||n===Nt(s))&&(n=!0))}return n}const n_=new WeakMap;function Vc(t,e,s=!1){const n=s?n_:e.propsCache,i=n.get(t);if(i)return i;const r=t.props,o={},c=[];let a=!1;if(!F(t)){const l=d=>{a=!0;const[m,w]=Vc(d,e,!0);Oe(o,m),w&&c.push(...w)};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!r&&!a)return ie(t)&&n.set(t,is),is;if(D(r))for(let l=0;l<r.length;l++){const d=Pt(r[l]);Qc(d)&&(o[d]=Y)}else if(r)for(const l in r){const d=Pt(l);if(Qc(d)){const m=r[l],w=o[d]=D(m)||F(m)?{type:m}:Oe({},m),_=w.type;let y=!1,v=!0;if(D(_))for(let L=0;L<_.length;++L){const q=_[L],M=F(q)&&q.name;if(M==="Boolean"){y=!0;break}else M==="String"&&(v=!1)}else y=F(_)&&_.name==="Boolean";w[0]=y,w[1]=v,(y||W(w,"default"))&&c.push(d)}}const u=[o,c];return ie(t)&&n.set(t,u),u}function Qc(t){return t[0]!=="$"&&!$s(t)}const Er=t=>t==="_"||t==="_ctx"||t==="$stable",Sr=t=>D(t)?t.map(lt):[lt(t)],i_=(t,e,s)=>{if(e._n)return e;const n=xh((...i)=>Sr(e(...i)),s);return n._c=!1,n},Wc=(t,e,s)=>{const n=t._ctx;for(const i in t){if(Er(i))continue;const r=t[i];if(F(r))e[i]=i_(i,r,n);else if(r!=null){const o=Sr(r);e[i]=()=>o}}},Gc=(t,e)=>{const s=Sr(e);t.slots.default=()=>s},Kc=(t,e,s)=>{for(const n in e)(s||!Er(n))&&(t[n]=e[n])},r_=(t,e,s)=>{const n=t.slots=Bc();if(t.vnode.shapeFlag&32){const i=e._;i?(Kc(n,e,s),s&&Qo(n,"_",i,!0)):Wc(e,n)}else e&&Gc(t,e)},o_=(t,e,s)=>{const{vnode:n,slots:i}=t;let r=!0,o=Y;if(n.shapeFlag&32){const c=e._;c?s&&c===1?r=!1:Kc(i,e,s):(r=!e.$stable,Wc(e,i)),o=e}else e&&(Gc(t,e),o={default:1});if(r)for(const c in i)!Er(c)&&o[c]==null&&delete i[c]},xe=E_;function c_(t){return a_(t)}function a_(t,e){const s=$n();s.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:c,createComment:a,setText:u,setElementText:l,parentNode:d,nextSibling:m,setScopeId:w=nt,insertStaticContent:_}=t,y=(f,h,b,T=null,E=null,S=null,x=void 0,I=null,O=!!h.dynamicChildren)=>{if(f===h)return;f&&!Ys(f,h)&&(T=zi(f),we(f,E,S,!0),f=null),h.patchFlag===-2&&(O=!1,h.dynamicChildren=null);const{type:A,ref:P,shapeFlag:R}=h;switch(A){case ti:v(f,h,b,T);break;case Mt:L(f,h,b,T);break;case si:f==null&&q(h,b,T,x);break;case $e:Lt(f,h,b,T,E,S,x,I,O);break;default:R&1?B(f,h,b,T,E,S,x,I,O):R&6?_t(f,h,b,T,E,S,x,I,O):(R&64||R&128)&&A.process(f,h,b,T,E,S,x,I,O,On)}P!=null&&E?zs(P,f&&f.ref,S,h||f,!h):P==null&&f&&f.ref!=null&&zs(f.ref,null,S,f,!0)},v=(f,h,b,T)=>{if(f==null)n(h.el=c(h.children),b,T);else{const E=h.el=f.el;h.children!==f.children&&u(E,h.children)}},L=(f,h,b,T)=>{f==null?n(h.el=a(h.children||""),b,T):h.el=f.el},q=(f,h,b,T)=>{[f.el,f.anchor]=_(f.children,h,b,T,f.el,f.anchor)},M=({el:f,anchor:h},b,T)=>{let E;for(;f&&f!==h;)E=m(f),n(f,b,T),f=E;n(h,b,T)},k=({el:f,anchor:h})=>{let b;for(;f&&f!==h;)b=m(f),i(f),f=b;i(h)},B=(f,h,b,T,E,S,x,I,O)=>{h.type==="svg"?x="svg":h.type==="math"&&(x="mathml"),f==null?re(h,b,T,E,S,x,I,O):ue(f,h,E,S,x,I,O)},re=(f,h,b,T,E,S,x,I)=>{let O,A;const{props:P,shapeFlag:R,transition:$,dirs:U}=f;if(O=f.el=o(f.type,S,P&&P.is,P),R&8?l(O,f.children):R&16&&de(f.children,O,null,T,E,Tr(f,S),x,I),U&&Kt(f,null,T,"created"),G(O,f,f.scopeId,x,T),P){for(const te in P)te!=="value"&&!$s(te)&&r(O,te,null,P[te],S,T);"value"in P&&r(O,"value",null,P.value,S),(A=P.onVnodeBeforeMount)&&ut(A,T,f)}U&&Kt(f,null,T,"beforeMount");const V=l_(E,$);V&&$.beforeEnter(O),n(O,h,b),((A=P&&P.onVnodeMounted)||V||U)&&xe(()=>{A&&ut(A,T,f),V&&$.enter(O),U&&Kt(f,null,T,"mounted")},E)},G=(f,h,b,T,E)=>{if(b&&w(f,b),T)for(let S=0;S<T.length;S++)w(f,T[S]);if(E){let S=E.subTree;if(h===S||na(S.type)&&(S.ssContent===h||S.ssFallback===h)){const x=E.vnode;G(f,x,x.scopeId,x.slotScopeIds,E.parent)}}},de=(f,h,b,T,E,S,x,I,O=0)=>{for(let A=O;A<f.length;A++){const P=f[A]=I?jt(f[A]):lt(f[A]);y(null,P,h,b,T,E,S,x,I)}},ue=(f,h,b,T,E,S,x)=>{const I=h.el=f.el;let{patchFlag:O,dynamicChildren:A,dirs:P}=h;O|=f.patchFlag&16;const R=f.props||Y,$=h.props||Y;let U;if(b&&Yt(b,!1),(U=$.onVnodeBeforeUpdate)&&ut(U,b,h,f),P&&Kt(h,f,b,"beforeUpdate"),b&&Yt(b,!0),(R.innerHTML&&$.innerHTML==null||R.textContent&&$.textContent==null)&&l(I,""),A?Ae(f.dynamicChildren,A,I,b,T,Tr(h,E),S):x||z(f,h,I,null,b,T,Tr(h,E),S,!1),O>0){if(O&16)tt(I,R,$,b,E);else if(O&2&&R.class!==$.class&&r(I,"class",null,$.class,E),O&4&&r(I,"style",R.style,$.style,E),O&8){const V=h.dynamicProps;for(let te=0;te<V.length;te++){const K=V[te],Fe=R[K],Me=$[K];(Me!==Fe||K==="value")&&r(I,K,Fe,Me,E,b)}}O&1&&f.children!==h.children&&l(I,h.children)}else!x&&A==null&&tt(I,R,$,b,E);((U=$.onVnodeUpdated)||P)&&xe(()=>{U&&ut(U,b,h,f),P&&Kt(h,f,b,"updated")},T)},Ae=(f,h,b,T,E,S,x)=>{for(let I=0;I<h.length;I++){const O=f[I],A=h[I],P=O.el&&(O.type===$e||!Ys(O,A)||O.shapeFlag&198)?d(O.el):b;y(O,A,P,null,T,E,S,x,!0)}},tt=(f,h,b,T,E)=>{if(h!==b){if(h!==Y)for(const S in h)!$s(S)&&!(S in b)&&r(f,S,h[S],null,E,T);for(const S in b){if($s(S))continue;const x=b[S],I=h[S];x!==I&&S!=="value"&&r(f,S,I,x,E,T)}"value"in b&&r(f,"value",h.value,b.value,E)}},Lt=(f,h,b,T,E,S,x,I,O)=>{const A=h.el=f?f.el:c(""),P=h.anchor=f?f.anchor:c("");let{patchFlag:R,dynamicChildren:$,slotScopeIds:U}=h;U&&(I=I?I.concat(U):U),f==null?(n(A,b,T),n(P,b,T),de(h.children||[],b,P,E,S,x,I,O)):R>0&&R&64&&$&&f.dynamicChildren?(Ae(f.dynamicChildren,$,b,E,S,x,I),(h.key!=null||E&&h===E.subTree)&&Ar(f,h,!0)):z(f,h,b,P,E,S,x,I,O)},_t=(f,h,b,T,E,S,x,I,O)=>{h.slotScopeIds=I,f==null?h.shapeFlag&512?E.ctx.activate(h,b,T,x,O):st(h,b,T,E,S,x,O):An(f,h,O)},st=(f,h,b,T,E,S,x)=>{const I=f.component=I_(f,T,E);if(Lc(f)&&(I.ctx.renderer=On),R_(I,!1,x),I.asyncDep){if(E&&E.registerDep(I,X,x),!f.el){const O=I.subTree=he(Mt);L(null,O,h,b),f.placeholder=O.el}}else X(I,f,h,b,E,S,x)},An=(f,h,b)=>{const T=h.component=f.component;if(w_(f,h,b))if(T.asyncDep&&!T.asyncResolved){ee(T,h,b);return}else T.next=h,T.update();else h.el=f.el,T.vnode=h},X=(f,h,b,T,E,S,x)=>{const I=()=>{if(f.isMounted){let{next:R,bu:$,u:U,parent:V,vnode:te}=f;{const gt=Yc(f);if(gt){R&&(R.el=te.el,ee(f,R,x)),gt.asyncDep.then(()=>{f.isUnmounted||I()});return}}let K=R,Fe;Yt(f,!1),R?(R.el=te.el,ee(f,R,x)):R=te,$&&Ln($),(Fe=R.props&&R.props.onVnodeBeforeUpdate)&&ut(Fe,V,R,te),Yt(f,!0);const Me=ta(f),mt=f.subTree;f.subTree=Me,y(mt,Me,d(mt.el),zi(mt),f,E,S),R.el=Me.el,K===null&&y_(f,Me.el),U&&xe(U,E),(Fe=R.props&&R.props.onVnodeUpdated)&&xe(()=>ut(Fe,V,R,te),E)}else{let R;const{el:$,props:U}=h,{bm:V,m:te,parent:K,root:Fe,type:Me}=f,mt=Hs(h);Yt(f,!1),V&&Ln(V),!mt&&(R=U&&U.onVnodeBeforeMount)&&ut(R,K,h),Yt(f,!0);{Fe.ce&&Fe.ce._def.shadowRoot!==!1&&Fe.ce._injectChildStyle(Me);const gt=f.subTree=ta(f);y(null,gt,b,T,f,E,S),h.el=gt.el}if(te&&xe(te,E),!mt&&(R=U&&U.onVnodeMounted)){const gt=h;xe(()=>ut(R,K,gt),E)}(h.shapeFlag&256||K&&Hs(K.vnode)&&K.vnode.shapeFlag&256)&&f.a&&xe(f.a,E),f.isMounted=!0,h=b=T=null}};f.scope.on();const O=f.effect=new Zo(I);f.scope.off();const A=f.update=O.run.bind(O),P=f.job=O.runIfDirty.bind(O);P.i=f,P.id=f.uid,O.scheduler=()=>hr(P),Yt(f,!0),A()},ee=(f,h,b)=>{h.component=f;const T=f.vnode.props;f.vnode=h,f.next=null,s_(f,h.props,T,b),o_(f,h.children,b),rt(),wc(f),ot()},z=(f,h,b,T,E,S,x,I,O=!1)=>{const A=f&&f.children,P=f?f.shapeFlag:0,R=h.children,{patchFlag:$,shapeFlag:U}=h;if($>0){if($&128){Rs(A,R,b,T,E,S,x,I,O);return}else if($&256){pt(A,R,b,T,E,S,x,I,O);return}}U&8?(P&16&&vn(A,E,S),R!==A&&l(b,R)):P&16?U&16?Rs(A,R,b,T,E,S,x,I,O):vn(A,E,S,!0):(P&8&&l(b,""),U&16&&de(R,b,T,E,S,x,I,O))},pt=(f,h,b,T,E,S,x,I,O)=>{f=f||is,h=h||is;const A=f.length,P=h.length,R=Math.min(A,P);let $;for($=0;$<R;$++){const U=h[$]=O?jt(h[$]):lt(h[$]);y(f[$],U,b,null,E,S,x,I,O)}A>P?vn(f,E,S,!0,!1,R):de(h,b,T,E,S,x,I,O,R)},Rs=(f,h,b,T,E,S,x,I,O)=>{let A=0;const P=h.length;let R=f.length-1,$=P-1;for(;A<=R&&A<=$;){const U=f[A],V=h[A]=O?jt(h[A]):lt(h[A]);if(Ys(U,V))y(U,V,b,null,E,S,x,I,O);else break;A++}for(;A<=R&&A<=$;){const U=f[R],V=h[$]=O?jt(h[$]):lt(h[$]);if(Ys(U,V))y(U,V,b,null,E,S,x,I,O);else break;R--,$--}if(A>R){if(A<=$){const U=$+1,V=U<P?h[U].el:T;for(;A<=$;)y(null,h[A]=O?jt(h[A]):lt(h[A]),b,V,E,S,x,I,O),A++}}else if(A>$)for(;A<=R;)we(f[A],E,S,!0),A++;else{const U=A,V=A,te=new Map;for(A=V;A<=$;A++){const qe=h[A]=O?jt(h[A]):lt(h[A]);qe.key!=null&&te.set(qe.key,A)}let K,Fe=0;const Me=$-V+1;let mt=!1,gt=0;const Cn=new Array(Me);for(A=0;A<Me;A++)Cn[A]=0;for(A=U;A<=R;A++){const qe=f[A];if(Fe>=Me){we(qe,E,S,!0);continue}let bt;if(qe.key!=null)bt=te.get(qe.key);else for(K=V;K<=$;K++)if(Cn[K-V]===0&&Ys(qe,h[K])){bt=K;break}bt===void 0?we(qe,E,S,!0):(Cn[bt-V]=A+1,bt>=gt?gt=bt:mt=!0,y(qe,h[bt],b,null,E,S,x,I,O),Fe++)}const Pd=mt?u_(Cn):is;for(K=Pd.length-1,A=Me-1;A>=0;A--){const qe=V+A,bt=h[qe],Nd=h[qe+1],Ud=qe+1<P?Nd.el||Nd.placeholder:T;Cn[A]===0?y(null,bt,b,Ud,E,S,x,I,O):mt&&(K<0||A!==Pd[K]?ve(bt,b,Ud,2):K--)}}},ve=(f,h,b,T,E=null)=>{const{el:S,type:x,transition:I,children:O,shapeFlag:A}=f;if(A&6){ve(f.component.subTree,h,b,T);return}if(A&128){f.suspense.move(h,b,T);return}if(A&64){x.move(f,h,b,On);return}if(x===$e){n(S,h,b);for(let R=0;R<O.length;R++)ve(O[R],h,b,T);n(f.anchor,h,b);return}if(x===si){M(f,h,b);return}if(T!==2&&A&1&&I)if(T===0)I.beforeEnter(S),n(S,h,b),xe(()=>I.enter(S),E);else{const{leave:R,delayLeave:$,afterLeave:U}=I,V=()=>{f.ctx.isUnmounted?i(S):n(S,h,b)},te=()=>{S._isLeaving&&S[$h](!0),R(S,()=>{V(),U&&U()})};$?$(S,V,te):te()}else n(S,h,b)},we=(f,h,b,T=!1,E=!1)=>{const{type:S,props:x,ref:I,children:O,dynamicChildren:A,shapeFlag:P,patchFlag:R,dirs:$,cacheIndex:U}=f;if(R===-2&&(E=!1),I!=null&&(rt(),zs(I,null,b,f,!0),ot()),U!=null&&(h.renderCache[U]=void 0),P&256){h.ctx.deactivate(f);return}const V=P&1&&$,te=!Hs(f);let K;if(te&&(K=x&&x.onVnodeBeforeUnmount)&&ut(K,h,f),P&6)Bi(f.component,b,T);else{if(P&128){f.suspense.unmount(b,T);return}V&&Kt(f,null,h,"beforeUnmount"),P&64?f.type.remove(f,h,b,On,T):A&&!A.hasOnce&&(S!==$e||R>0&&R&64)?vn(A,h,b,!1,!0):(S===$e&&R&384||!E&&P&16)&&vn(O,h,b),T&&ks(f)}(te&&(K=x&&x.onVnodeUnmounted)||V)&&xe(()=>{K&&ut(K,h,f),V&&Kt(f,null,h,"unmounted")},b)},ks=f=>{const{type:h,el:b,anchor:T,transition:E}=f;if(h===$e){Ls(b,T);return}if(h===si){k(f);return}const S=()=>{i(b),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(f.shapeFlag&1&&E&&!E.persisted){const{leave:x,delayLeave:I}=E,O=()=>x(b,S);I?I(f.el,S,O):O()}else S()},Ls=(f,h)=>{let b;for(;f!==h;)b=m(f),i(f),f=b;i(h)},Bi=(f,h,b)=>{const{bum:T,scope:E,job:S,subTree:x,um:I,m:O,a:A}=f;Zc(O),Zc(A),T&&Ln(T),E.stop(),S&&(S.flags|=8,we(x,f,h,b)),I&&xe(I,h),xe(()=>{f.isUnmounted=!0},h)},vn=(f,h,b,T=!1,E=!1,S=0)=>{for(let x=S;x<f.length;x++)we(f[x],h,b,T,E)},zi=f=>{if(f.shapeFlag&6)return zi(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const h=m(f.anchor||f.el),b=h&&h[Ac];return b?m(b):h};let Mo=!1;const $d=(f,h,b)=>{f==null?h._vnode&&we(h._vnode,null,null,!0):y(h._vnode||null,f,h,null,null,null,b),h._vnode=f,Mo||(Mo=!0,wc(),yc(),Mo=!1)},On={p:y,um:we,m:ve,r:ks,mt:st,mc:de,pc:z,pbc:Ae,n:zi,o:t};return{render:$d,hydrate:void 0,createApp:Xh($d)}}function Tr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Yt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function l_(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ar(t,e,s=!1){const n=t.children,i=e.children;if(D(n)&&D(i))for(let r=0;r<n.length;r++){const o=n[r];let c=i[r];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[r]=jt(i[r]),c.el=o.el),!s&&c.patchFlag!==-2&&Ar(o,c)),c.type===ti&&c.patchFlag!==-1&&(c.el=o.el),c.type===Mt&&!c.el&&(c.el=o.el)}}function u_(t){const e=t.slice(),s=[0];let n,i,r,o,c;const a=t.length;for(n=0;n<a;n++){const u=t[n];if(u!==0){if(i=s[s.length-1],t[i]<u){e[n]=i,s.push(n);continue}for(r=0,o=s.length-1;r<o;)c=r+o>>1,t[s[c]]<u?r=c+1:o=c;u<t[s[r]]&&(r>0&&(e[n]=s[r-1]),s[r]=n)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=e[o];return s}function Yc(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Yc(e)}function Zc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const f_=Symbol.for("v-scx"),d_=()=>Xn(f_);function ds(t,e,s){return Jc(t,e,s)}function Jc(t,e,s=Y){const{immediate:n,deep:i,flush:r,once:o}=s,c=Oe({},s),a=e&&n||!e&&r!=="post";let u;if(Js){if(r==="sync"){const w=d_();u=w.__watcherHandles||(w.__watcherHandles=[])}else if(!a){const w=()=>{};return w.stop=nt,w.resume=nt,w.pause=nt,w}}const l=Re;c.call=(w,_,y)=>ct(w,l,_,y);let d=!1;r==="post"?c.scheduler=w=>{xe(w,l&&l.suspense)}:r!=="sync"&&(d=!0,c.scheduler=(w,_)=>{_?w():hr(w)}),c.augmentJob=w=>{e&&(w.flags|=4),d&&(w.flags|=2,l&&(w.id=l.uid,w.i=l))};const m=yh(t,e,c);return Js&&(u?u.push(m):a&&m()),m}function h_(t,e,s){const n=this.proxy,i=ce(t)?t.includes(".")?Xc(n,t):()=>n[t]:t.bind(n,n);let r;F(e)?r=e:(r=e.handler,s=e);const o=Zs(this),c=Jc(i,r.bind(n),s);return o(),c}function Xc(t,e){const s=e.split(".");return()=>{let n=t;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}const __=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Pt(e)}Modifiers`]||t[`${Nt(e)}Modifiers`];function p_(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||Y;let i=s;const r=e.startsWith("update:"),o=r&&__(n,e.slice(7));o&&(o.trim&&(i=s.map(l=>ce(l)?l.trim():l)),o.number&&(i=s.map(Ki)));let c,a=n[c=Gi(e)]||n[c=Gi(Pt(e))];!a&&r&&(a=n[c=Gi(Nt(e))]),a&&ct(a,t,6,i);const u=n[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,ct(u,t,6,i)}}const m_=new WeakMap;function ea(t,e,s=!1){const n=s?m_:e.emitsCache,i=n.get(t);if(i!==void 0)return i;const r=t.emits;let o={},c=!1;if(!F(t)){const a=u=>{const l=ea(u,e,!0);l&&(c=!0,Oe(o,l))};!s&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!c?(ie(t)&&n.set(t,null),null):(D(r)?r.forEach(a=>o[a]=null):Oe(o,r),ie(t)&&n.set(t,o),o)}function ei(t,e){return!t||!xn(e)?!1:(e=e.slice(2).replace(/Once$/,""),W(t,e[0].toLowerCase()+e.slice(1))||W(t,Nt(e))||W(t,e))}function mv(){}function ta(t){const{type:e,vnode:s,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:c,emit:a,render:u,renderCache:l,props:d,data:m,setupState:w,ctx:_,inheritAttrs:y}=t,v=Vn(t);let L,q;try{if(s.shapeFlag&4){const k=i||n,B=k;L=lt(u.call(B,k,l,d,w,m,_)),q=c}else{const k=e;L=lt(k.length>1?k(d,{attrs:c,slots:o,emit:a}):k(d,null)),q=e.props?c:g_(c)}}catch(k){Gs.length=0,zn(k,t,1),L=he(Mt)}let M=L;if(q&&y!==!1){const k=Object.keys(q),{shapeFlag:B}=M;k.length&&B&7&&(r&&k.some(Vi)&&(q=b_(q,r)),M=hs(M,q,!1,!0))}return s.dirs&&(M=hs(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(s.dirs):s.dirs),s.transition&&pr(M,s.transition),L=M,Vn(v),L}const g_=t=>{let e;for(const s in t)(s==="class"||s==="style"||xn(s))&&((e||(e={}))[s]=t[s]);return e},b_=(t,e)=>{const s={};for(const n in t)(!Vi(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function w_(t,e,s){const{props:n,children:i,component:r}=t,{props:o,children:c,patchFlag:a}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return n?sa(n,o,u):!!o;if(a&8){const l=e.dynamicProps;for(let d=0;d<l.length;d++){const m=l[d];if(o[m]!==n[m]&&!ei(u,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:n===o?!1:n?o?sa(n,o,u):!0:!!o;return!1}function sa(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==t[r]&&!ei(s,r))return!0}return!1}function y_({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const na=t=>t.__isSuspense;function E_(t,e){e&&e.pendingBranch?D(t)?e.effects.push(...t):e.effects.push(t):Ih(t)}const $e=Symbol.for("v-fgt"),ti=Symbol.for("v-txt"),Mt=Symbol.for("v-cmt"),si=Symbol.for("v-stc"),Gs=[];let je=null;function Z(t=!1){Gs.push(je=t?null:[])}function S_(){Gs.pop(),je=Gs[Gs.length-1]||null}let Ks=1;function ia(t,e=!1){Ks+=t,t<0&&je&&e&&(je.hasOnce=!0)}function ra(t){return t.dynamicChildren=Ks>0?je||is:null,S_(),Ks>0&&je&&je.push(t),t}function se(t,e,s,n,i,r){return ra(C(t,e,s,n,i,r,!0))}function oa(t,e,s,n,i){return ra(he(t,e,s,n,i,!0))}function ca(t){return t?t.__v_isVNode===!0:!1}function Ys(t,e){return t.type===e.type&&t.key===e.key}const aa=({key:t})=>t??null,ni=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ce(t)||me(t)||F(t)?{i:ze,r:t,k:e,f:!!s}:t:null);function C(t,e=null,s=null,n=0,i=null,r=t===$e?0:1,o=!1,c=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&aa(e),ref:e&&ni(e),scopeId:Sc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ze};return c?(Cr(a,s),r&128&&t.normalize(a)):s&&(a.shapeFlag|=ce(s)?8:16),Ks>0&&!o&&je&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&je.push(a),a}const he=T_;function T_(t,e=null,s=null,n=0,i=null,r=!1){if((!t||t===Vh)&&(t=Mt),ca(t)){const c=hs(t,e,!0);return s&&Cr(c,s),Ks>0&&!r&&je&&(c.shapeFlag&6?je[je.indexOf(t)]=c:je.push(c)),c.patchFlag=-2,c}if(D_(t)&&(t=t.__vccOpts),e){e=A_(e);let{class:c,style:a}=e;c&&!ce(c)&&(e.class=Ps(c)),ie(a)&&(ur(a)&&!D(a)&&(a=Oe({},a)),e.style=Yi(a))}const o=ce(t)?1:na(t)?128:Rh(t)?64:ie(t)?4:F(t)?2:0;return C(t,e,s,n,i,o,r,!0)}function A_(t){return t?ur(t)||zc(t)?Oe({},t):t:null}function hs(t,e,s=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:c,transition:a}=t,u=e?v_(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&aa(u),ref:e&&e.ref?s&&r?D(r)?r.concat(ni(e)):[r,ni(e)]:ni(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$e?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hs(t.ssContent),ssFallback:t.ssFallback&&hs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&n&&pr(l,a.clone(l)),l}function vr(t=" ",e=0){return he(ti,null,t,e)}function Or(t,e){const s=he(si,null,t);return s.staticCount=e,s}function Ye(t="",e=!1){return e?(Z(),oa(Mt,null,t)):he(Mt,null,t)}function lt(t){return t==null||typeof t=="boolean"?he(Mt):D(t)?he($e,null,t.slice()):ca(t)?jt(t):he(ti,null,String(t))}function jt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hs(t)}function Cr(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(D(e))s=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),Cr(t,i()),i._c&&(i._d=!0));return}else{s=32;const i=e._;!i&&!zc(e)?e._ctx=ze:i===3&&ze&&(ze.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else F(e)?(e={default:e,_ctx:ze},s=32):(e=String(e),n&64?(s=16,e=[vr(e)]):s=8);t.children=e,t.shapeFlag|=s}function v_(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Ps([e.class,n.class]));else if(i==="style")e.style=Yi([e.style,n.style]);else if(xn(i)){const r=e[i],o=n[i];o&&r!==o&&!(D(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function ut(t,e,s,n=null){ct(t,e,7,[s,n])}const O_=jc();let C_=0;function I_(t,e,s){const n=t.type,i=(e?e.appContext:t.appContext)||O_,r={uid:C_++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Wd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vc(n,i),emitsOptions:ea(n,i),emit:null,emitted:null,propsDefaults:Y,inheritAttrs:n.inheritAttrs,ctx:Y,data:Y,props:Y,attrs:Y,slots:Y,refs:Y,setupState:Y,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=p_.bind(null,r),t.ce&&t.ce(r),r}let Re=null;const x_=()=>Re||ze;let ii,Ir;{const t=$n(),e=(s,n)=>{let i;return(i=t[s])||(i=t[s]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};ii=e("__VUE_INSTANCE_SETTERS__",s=>Re=s),Ir=e("__VUE_SSR_SETTERS__",s=>Js=s)}const Zs=t=>{const e=Re;return ii(t),t.scope.on(),()=>{t.scope.off(),ii(e)}},la=()=>{Re&&Re.scope.off(),ii(null)};function ua(t){return t.vnode.shapeFlag&4}let Js=!1;function R_(t,e=!1,s=!1){e&&Ir(e);const{props:n,children:i}=t.vnode,r=ua(t);t_(t,n,r,e),r_(t,i,s||e);const o=r?k_(t,e):void 0;return e&&Ir(!1),o}function k_(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Qh);const{setup:n}=s;if(n){rt();const i=t.setupContext=n.length>1?$_(t):null,r=Zs(t),o=as(n,t,0,[t.props,i]),c=Bo(o);if(ot(),r(),(c||t.sp)&&!Hs(t)&&Rc(t),c){if(o.then(la,la),e)return o.then(a=>{fa(t,a)}).catch(a=>{zn(a,t,0)});t.asyncDep=o}else fa(t,o)}else da(t)}function fa(t,e,s){F(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ie(e)&&(t.setupState=pc(e)),da(t)}function da(t,e,s){const n=t.type;t.render||(t.render=n.render||nt);{const i=Zs(t);rt();try{Wh(t)}finally{ot(),i()}}}const L_={get(t,e){return ye(t,"get",""),t[e]}};function $_(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,L_),slots:t.slots,emit:t.emit,expose:e}}function ri(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(pc(fr(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Qs)return Qs[s](t)},has(e,s){return s in e||s in Qs}})):t.proxy}const P_=/(?:^|[-_])\w/g,N_=t=>t.replace(P_,e=>e.toUpperCase()).replace(/[-_]/g,"");function U_(t,e=!0){return F(t)?t.displayName||t.name:t.name||e&&t.__name}function ha(t,e,s=!1){let n=U_(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&t&&t.parent){const i=r=>{for(const o in r)if(r[o]===e)return o};n=i(t.components||t.parent.type.components)||i(t.appContext.components)}return n?N_(n):s?"App":"Anonymous"}function D_(t){return F(t)&&"__vccOpts"in t}const ft=(t,e)=>bh(t,e,Js),F_="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xr;const _a=typeof window<"u"&&window.trustedTypes;if(_a)try{xr=_a.createPolicy("vue",{createHTML:t=>t})}catch{}const pa=xr?t=>xr.createHTML(t):t=>t,M_="http://www.w3.org/2000/svg",j_="http://www.w3.org/1998/Math/MathML",At=typeof document<"u"?document:null,ma=At&&At.createElement("template"),q_={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const i=e==="svg"?At.createElementNS(M_,t):e==="mathml"?At.createElementNS(j_,t):s?At.createElement(t,{is:s}):At.createElement(t);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>At.createTextNode(t),createComment:t=>At.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>At.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,i,r){const o=s?s.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),s),!(i===r||!(i=i.nextSibling)););else{ma.innerHTML=pa(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const c=ma.content;if(n==="svg"||n==="mathml"){const a=c.firstChild;for(;a.firstChild;)c.appendChild(a.firstChild);c.removeChild(a)}e.insertBefore(c,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},B_=Symbol("_vtc");function z_(t,e,s){const n=t[B_];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const oi=Symbol("_vod"),ga=Symbol("_vsh"),H_={name:"show",beforeMount(t,{value:e},{transition:s}){t[oi]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Xs(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),Xs(t,!0),n.enter(t)):n.leave(t,()=>{Xs(t,!1)}):Xs(t,e))},beforeUnmount(t,{value:e}){Xs(t,e)}};function Xs(t,e){t.style.display=e?t[oi]:"none",t[ga]=!e}const V_=Symbol(""),Q_=/(?:^|;)\s*display\s*:/;function W_(t,e,s){const n=t.style,i=ce(s);let r=!1;if(s&&!i){if(e)if(ce(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();s[c]==null&&ci(n,c,"")}else for(const o in e)s[o]==null&&ci(n,o,"");for(const o in s)o==="display"&&(r=!0),ci(n,o,s[o])}else if(i){if(e!==s){const o=n[V_];o&&(s+=";"+o),n.cssText=s,r=Q_.test(s)}}else e&&t.removeAttribute("style");oi in t&&(t[oi]=r?n.display:"",t[ga]&&(n.display="none"))}const ba=/\s*!important$/;function ci(t,e,s){if(D(s))s.forEach(n=>ci(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=G_(t,e);ba.test(s)?t.setProperty(Nt(n),s.replace(ba,""),"important"):t[n]=s}}const wa=["Webkit","Moz","ms"],Rr={};function G_(t,e){const s=Rr[e];if(s)return s;let n=Pt(e);if(n!=="filter"&&n in t)return Rr[e]=n;n=Vo(n);for(let i=0;i<wa.length;i++){const r=wa[i]+n;if(r in t)return Rr[e]=r}return e}const ya="http://www.w3.org/1999/xlink";function Ea(t,e,s,n,i,r=Qd(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ya,e.slice(6,e.length)):t.setAttributeNS(ya,e,s):s==null||r&&!Go(s)?t.removeAttribute(e):t.setAttribute(e,r?"":$t(s)?String(s):s)}function Sa(t,e,s,n,i){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?pa(s):s);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const c=r==="OPTION"?t.getAttribute("value")||"":t.value,a=s==null?t.type==="checkbox"?"on":"":String(s);(c!==a||!("_value"in t))&&(t.value=a),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const c=typeof t[e];c==="boolean"?s=Go(s):s==null&&c==="string"?(s="",o=!0):c==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(i||e)}function _s(t,e,s,n){t.addEventListener(e,s,n)}function K_(t,e,s,n){t.removeEventListener(e,s,n)}const Ta=Symbol("_vei");function Y_(t,e,s,n,i=null){const r=t[Ta]||(t[Ta]={}),o=r[e];if(n&&o)o.value=n;else{const[c,a]=Z_(e);if(n){const u=r[e]=ep(n,i);_s(t,c,u,a)}else o&&(K_(t,c,o,a),r[e]=void 0)}}const Aa=/(?:Once|Passive|Capture)$/;function Z_(t){let e;if(Aa.test(t)){e={};let n;for(;n=t.match(Aa);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Nt(t.slice(2)),e]}let kr=0;const J_=Promise.resolve(),X_=()=>kr||(J_.then(()=>kr=0),kr=Date.now());function ep(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ct(tp(n,s.value),e,5,[n])};return s.value=t,s.attached=X_(),s}function tp(t,e){if(D(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const va=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,sp=(t,e,s,n,i,r)=>{const o=i==="svg";e==="class"?z_(t,n,o):e==="style"?W_(t,s,n):xn(e)?Vi(e)||Y_(t,e,s,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):np(t,e,n,o))?(Sa(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ea(t,e,n,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ce(n))?Sa(t,Pt(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Ea(t,e,n,o))};function np(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&va(e)&&F(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return va(e)&&ce(s)?!1:e in t}const Oa=t=>{const e=t.props["onUpdate:modelValue"]||!1;return D(e)?s=>Ln(e,s):e};function ip(t){t.target.composing=!0}function Ca(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Lr=Symbol("_assign"),rp={created(t,{modifiers:{lazy:e,trim:s,number:n}},i){t[Lr]=Oa(i);const r=n||i.props&&i.props.type==="number";_s(t,e?"change":"input",o=>{if(o.target.composing)return;let c=t.value;s&&(c=c.trim()),r&&(c=Ki(c)),t[Lr](c)}),s&&_s(t,"change",()=>{t.value=t.value.trim()}),e||(_s(t,"compositionstart",ip),_s(t,"compositionend",Ca),_s(t,"change",Ca))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:i,number:r}},o){if(t[Lr]=Oa(o),t.composing)return;const c=(r||t.type==="number")&&!/^0\d/.test(t.value)?Ki(t.value):t.value,a=e??"";c!==a&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||i&&t.value.trim()===a)||(t.value=a))}},op=["ctrl","shift","alt","meta"],cp={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>op.some(s=>t[`${s}Key`]&&!e.includes(s))},ap=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=((i,...r)=>{for(let o=0;o<e.length;o++){const c=cp[e[o]];if(c&&c(i,e))return}return t(i,...r)}))},lp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},up=(t,e)=>{const s=t._withKeys||(t._withKeys={}),n=e.join(".");return s[n]||(s[n]=(i=>{if(!("key"in i))return;const r=Nt(i.key);if(e.some(o=>o===r||lp[o]===r))return t(i)}))},fp=Oe({patchProp:sp},q_);let Ia;function dp(){return Ia||(Ia=c_(fp))}const hp=((...t)=>{const e=dp().createApp(...t),{mount:s}=e;return e.mount=n=>{const i=pp(n);if(!i)return;const r=e._component;!F(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=s(i,!1,_p(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function _p(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function pp(t){return ce(t)?document.querySelector(t):t}const vt=(t,e)=>{const s=t.__vccOpts||t;for(const[n,i]of e)s[n]=i;return s},mp={},gp={class:"mi-header"};function bp(t,e){return Z(),se("div",gp,[...e[0]||(e[0]=[Or('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none" data-v-96a976e4><path d="M14.3594 13.6406L22.9756 16.5127L14.3594 19.3848L11.4873 28L8.61621 19.3848L0 16.5127L8.61621 13.6406L11.4873 5.02539L14.3594 13.6406ZM22.6152 5.38477L28 7.17969L22.6152 8.97461L20.8203 14.3594L19.0254 8.97461L13.6406 7.17969L19.0254 5.38477L20.8203 0L22.6152 5.38477Z" fill="url(#paint0_linear_1_4156)" data-v-96a976e4></path><defs data-v-96a976e4><linearGradient id="paint0_linear_1_4156" x1="17.2308" y1="20.8205" x2="7.17949" y2="4.30769" gradientUnits="userSpaceOnUse" data-v-96a976e4><stop stop-color="#303FC8" data-v-96a976e4></stop><stop offset="1" stop-color="#0F1864" data-v-96a976e4></stop></linearGradient></defs></svg><h1 class="mi-header-title" data-v-96a976e4>Investopedia Answers</h1>',2)])])}const wp=vt(mp,[["render",bp],["__scopeId","data-v-96a976e4"]]),yp=["onDesktopSponsoredPlaceholderReady","onMobileSponsoredPlaceholderReady"],xa={...{onDesktopSponsoredPlaceholderReady:(t,e,s)=>{},onMobileSponsoredPlaceholderReady:(t,e)=>{}}},Ep=t=>{!t||typeof t!="object"||yp.forEach(e=>{t[e]&&typeof t[e]=="function"&&(xa[e]=t[e])})},Ra=()=>xa;function ka(t,e){return function(){return t.apply(e,arguments)}}const{toString:Sp}=Object.prototype,{getPrototypeOf:$r}=Object,{iterator:ai,toStringTag:La}=Symbol,li=(t=>e=>{const s=Sp.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ze=t=>(t=t.toLowerCase(),e=>li(e)===t),ui=t=>e=>typeof e===t,{isArray:ps}=Array,ms=ui("undefined");function en(t){return t!==null&&!ms(t)&&t.constructor!==null&&!ms(t.constructor)&&Pe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const $a=Ze("ArrayBuffer");function Tp(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&$a(t.buffer),e}const Ap=ui("string"),Pe=ui("function"),Pa=ui("number"),tn=t=>t!==null&&typeof t=="object",vp=t=>t===!0||t===!1,fi=t=>{if(li(t)!=="object")return!1;const e=$r(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(La in t)&&!(ai in t)},Op=t=>{if(!tn(t)||en(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Cp=Ze("Date"),Ip=Ze("File"),xp=Ze("Blob"),Rp=Ze("FileList"),kp=t=>tn(t)&&Pe(t.pipe),Lp=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Pe(t.append)&&((e=li(t))==="formdata"||e==="object"&&Pe(t.toString)&&t.toString()==="[object FormData]"))},$p=Ze("URLSearchParams"),[Pp,Np,Up,Dp]=["ReadableStream","Request","Response","Headers"].map(Ze),Fp=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sn(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ps(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{if(en(t))return;const r=s?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let c;for(n=0;n<o;n++)c=r[n],e.call(null,t[c],c,t)}}function Na(t,e){if(en(t))return null;e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const Zt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ua=t=>!ms(t)&&t!==Zt;function Pr(){const{caseless:t,skipUndefined:e}=Ua(this)&&this||{},s={},n=(i,r)=>{const o=t&&Na(s,r)||r;fi(s[o])&&fi(i)?s[o]=Pr(s[o],i):fi(i)?s[o]=Pr({},i):ps(i)?s[o]=i.slice():(!e||!ms(i))&&(s[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&sn(arguments[i],n);return s}const Mp=(t,e,s,{allOwnKeys:n}={})=>(sn(e,(i,r)=>{s&&Pe(i)?t[r]=ka(i,s):t[r]=i},{allOwnKeys:n}),t),jp=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qp=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},Bp=(t,e,s,n)=>{let i,r,o;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],(!n||n(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=s!==!1&&$r(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},zp=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},Hp=t=>{if(!t)return null;if(ps(t))return t;let e=t.length;if(!Pa(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Vp=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&$r(Uint8Array)),Qp=(t,e)=>{const n=(t&&t[ai]).call(t);let i;for(;(i=n.next())&&!i.done;){const r=i.value;e.call(t,r[0],r[1])}},Wp=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},Gp=Ze("HTMLFormElement"),Kp=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),Da=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Yp=Ze("RegExp"),Fa=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};sn(s,(i,r)=>{let o;(o=e(i,r,t))!==!1&&(n[r]=o||i)}),Object.defineProperties(t,n)},Zp=t=>{Fa(t,(e,s)=>{if(Pe(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Pe(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Jp=(t,e)=>{const s={},n=i=>{i.forEach(r=>{s[r]=!0})};return ps(t)?n(t):n(String(t).split(e)),s},Xp=()=>{},em=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function tm(t){return!!(t&&Pe(t.append)&&t[La]==="FormData"&&t[ai])}const sm=t=>{const e=new Array(10),s=(n,i)=>{if(tn(n)){if(e.indexOf(n)>=0)return;if(en(n))return n;if(!("toJSON"in n)){e[i]=n;const r=ps(n)?[]:{};return sn(n,(o,c)=>{const a=s(o,i+1);!ms(a)&&(r[c]=a)}),e[i]=void 0,r}}return n};return s(t,0)},nm=Ze("AsyncFunction"),im=t=>t&&(tn(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),Ma=((t,e)=>t?setImmediate:e?((s,n)=>(Zt.addEventListener("message",({source:i,data:r})=>{i===Zt&&r===s&&n.length&&n.shift()()},!1),i=>{n.push(i),Zt.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Pe(Zt.postMessage)),rm=typeof queueMicrotask<"u"?queueMicrotask.bind(Zt):typeof process<"u"&&process.nextTick||Ma,p={isArray:ps,isArrayBuffer:$a,isBuffer:en,isFormData:Lp,isArrayBufferView:Tp,isString:Ap,isNumber:Pa,isBoolean:vp,isObject:tn,isPlainObject:fi,isEmptyObject:Op,isReadableStream:Pp,isRequest:Np,isResponse:Up,isHeaders:Dp,isUndefined:ms,isDate:Cp,isFile:Ip,isBlob:xp,isRegExp:Yp,isFunction:Pe,isStream:kp,isURLSearchParams:$p,isTypedArray:Vp,isFileList:Rp,forEach:sn,merge:Pr,extend:Mp,trim:Fp,stripBOM:jp,inherits:qp,toFlatObject:Bp,kindOf:li,kindOfTest:Ze,endsWith:zp,toArray:Hp,forEachEntry:Qp,matchAll:Wp,isHTMLForm:Gp,hasOwnProperty:Da,hasOwnProp:Da,reduceDescriptors:Fa,freezeMethods:Zp,toObjectSet:Jp,toCamelCase:Kp,noop:Xp,toFiniteNumber:em,findKey:Na,global:Zt,isContextDefined:Ua,isSpecCompliantForm:tm,toJSONObject:sm,isAsyncFn:nm,isThenable:im,setImmediate:Ma,asap:rm,isIterable:t=>t!=null&&Pe(t[ai])};function j(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}p.inherits(j,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const ja=j.prototype,qa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qa[t]={value:t}}),Object.defineProperties(j,qa),Object.defineProperty(ja,"isAxiosError",{value:!0}),j.from=(t,e,s,n,i,r)=>{const o=Object.create(ja);p.toFlatObject(t,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const c=t&&t.message?t.message:"Error",a=e==null&&t?t.code:e;return j.call(o,c,a,s,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",r&&Object.assign(o,r),o};const om=null;function Nr(t){return p.isPlainObject(t)||p.isArray(t)}function Ba(t){return p.endsWith(t,"[]")?t.slice(0,-2):t}function za(t,e,s){return t?t.concat(e).map(function(i,r){return i=Ba(i),!s&&r?"["+i+"]":i}).join(s?".":""):e}function cm(t){return p.isArray(t)&&!t.some(Nr)}const am=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function di(t,e,s){if(!p.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=p.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!p.isUndefined(v[y])});const n=s.metaTokens,i=s.visitor||l,r=s.dots,o=s.indexes,a=(s.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(i))throw new TypeError("visitor must be a function");function u(_){if(_===null)return"";if(p.isDate(_))return _.toISOString();if(p.isBoolean(_))return _.toString();if(!a&&p.isBlob(_))throw new j("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(_)||p.isTypedArray(_)?a&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function l(_,y,v){let L=_;if(_&&!v&&typeof _=="object"){if(p.endsWith(y,"{}"))y=n?y:y.slice(0,-2),_=JSON.stringify(_);else if(p.isArray(_)&&cm(_)||(p.isFileList(_)||p.endsWith(y,"[]"))&&(L=p.toArray(_)))return y=Ba(y),L.forEach(function(M,k){!(p.isUndefined(M)||M===null)&&e.append(o===!0?za([y],k,r):o===null?y:y+"[]",u(M))}),!1}return Nr(_)?!0:(e.append(za(v,y,r),u(_)),!1)}const d=[],m=Object.assign(am,{defaultVisitor:l,convertValue:u,isVisitable:Nr});function w(_,y){if(!p.isUndefined(_)){if(d.indexOf(_)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(_),p.forEach(_,function(L,q){(!(p.isUndefined(L)||L===null)&&i.call(e,L,p.isString(q)?q.trim():q,y,m))===!0&&w(L,y?y.concat(q):[q])}),d.pop()}}if(!p.isObject(t))throw new TypeError("data must be an object");return w(t),e}function Ha(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Ur(t,e){this._pairs=[],t&&di(t,this,e)}const Va=Ur.prototype;Va.append=function(e,s){this._pairs.push([e,s])},Va.toString=function(e){const s=e?function(n){return e.call(this,n,Ha)}:Ha;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function lm(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Qa(t,e,s){if(!e)return t;const n=s&&s.encode||lm;p.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let r;if(i?r=i(e,s):r=p.isURLSearchParams(e)?e.toString():new Ur(e,s).toString(n),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Wa{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Ga={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},um={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Ur,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Dr=typeof window<"u"&&typeof document<"u",Fr=typeof navigator=="object"&&navigator||void 0,fm=Dr&&(!Fr||["ReactNative","NativeScript","NS"].indexOf(Fr.product)<0),dm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hm=Dr&&window.location.href||"http://localhost",Ee={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dr,hasStandardBrowserEnv:fm,hasStandardBrowserWebWorkerEnv:dm,navigator:Fr,origin:hm},Symbol.toStringTag,{value:"Module"})),...um};function _m(t,e){return di(t,new Ee.classes.URLSearchParams,{visitor:function(s,n,i,r){return Ee.isNode&&p.isBuffer(s)?(this.append(n,s.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function pm(t){return p.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function mm(t){const e={},s=Object.keys(t);let n;const i=s.length;let r;for(n=0;n<i;n++)r=s[n],e[r]=t[r];return e}function Ka(t){function e(s,n,i,r){let o=s[r++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),a=r>=s.length;return o=!o&&p.isArray(i)?i.length:o,a?(p.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!c):((!i[o]||!p.isObject(i[o]))&&(i[o]=[]),e(s,n,i[o],r)&&p.isArray(i[o])&&(i[o]=mm(i[o])),!c)}if(p.isFormData(t)&&p.isFunction(t.entries)){const s={};return p.forEachEntry(t,(n,i)=>{e(pm(n),i,s,0)}),s}return null}function gm(t,e,s){if(p.isString(t))try{return(e||JSON.parse)(t),p.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const nn={transitional:Ga,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,r=p.isObject(e);if(r&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return i?JSON.stringify(Ka(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e)||p.isReadableStream(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return _m(e,this.formSerializer).toString();if((c=p.isFileList(e))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return di(c?{"files[]":e}:e,a&&new a,this.formSerializer)}}return r||i?(s.setContentType("application/json",!1),gm(e)):e}],transformResponse:[function(e){const s=this.transitional||nn.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(p.isResponse(e)||p.isReadableStream(e))return e;if(e&&p.isString(e)&&(n&&!this.responseType||i)){const o=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?j.from(c,j.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ee.classes.FormData,Blob:Ee.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],t=>{nn.headers[t]={}});const bm=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wm=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),s=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!s||e[s]&&bm[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},Ya=Symbol("internals");function rn(t){return t&&String(t).trim().toLowerCase()}function hi(t){return t===!1||t==null?t:p.isArray(t)?t.map(hi):String(t)}function ym(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const Em=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Mr(t,e,s,n,i){if(p.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!p.isString(e)){if(p.isString(n))return e.indexOf(n)!==-1;if(p.isRegExp(n))return n.test(e)}}function Sm(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function Tm(t,e){const s=p.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,r,o){return this[n].call(this,e,i,r,o)},configurable:!0})})}let Ne=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function r(c,a,u){const l=rn(a);if(!l)throw new Error("header name must be a non-empty string");const d=p.findKey(i,l);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||a]=hi(c))}const o=(c,a)=>p.forEach(c,(u,l)=>r(u,l,a));if(p.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(p.isString(e)&&(e=e.trim())&&!Em(e))o(wm(e),s);else if(p.isObject(e)&&p.isIterable(e)){let c={},a,u;for(const l of e){if(!p.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(a=c[u])?p.isArray(a)?[...a,l[1]]:[a,l[1]]:l[1]}o(c,s)}else e!=null&&r(s,e,n);return this}get(e,s){if(e=rn(e),e){const n=p.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return ym(i);if(p.isFunction(s))return s.call(this,i,n);if(p.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=rn(e),e){const n=p.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||Mr(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function r(o){if(o=rn(o),o){const c=p.findKey(n,o);c&&(!s||Mr(n,n[c],c,s))&&(delete n[c],i=!0)}}return p.isArray(e)?e.forEach(r):r(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const r=s[n];(!e||Mr(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const s=this,n={};return p.forEach(this,(i,r)=>{const o=p.findKey(n,r);if(o){s[o]=hi(i),delete s[r];return}const c=e?Sm(r):String(r).trim();c!==r&&delete s[r],s[c]=hi(i),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return p.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&p.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Ya]=this[Ya]={accessors:{}}).accessors,i=this.prototype;function r(o){const c=rn(o);n[c]||(Tm(i,o),n[c]=!0)}return p.isArray(e)?e.forEach(r):r(e),this}};Ne.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),p.reduceDescriptors(Ne.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}}),p.freezeMethods(Ne);function jr(t,e){const s=this||nn,n=e||s,i=Ne.from(n.headers);let r=n.data;return p.forEach(t,function(c){r=c.call(s,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function Za(t){return!!(t&&t.__CANCEL__)}function gs(t,e,s){j.call(this,t??"canceled",j.ERR_CANCELED,e,s),this.name="CanceledError"}p.inherits(gs,j,{__CANCEL__:!0});function Ja(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new j("Request failed with status code "+s.status,[j.ERR_BAD_REQUEST,j.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Am(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vm(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(a){const u=Date.now(),l=n[r];o||(o=u),s[i]=a,n[i]=u;let d=r,m=0;for(;d!==i;)m+=s[d++],d=d%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),u-o<e)return;const w=l&&u-l;return w?Math.round(m*1e3/w):void 0}}function Om(t,e){let s=0,n=1e3/e,i,r;const o=(u,l=Date.now())=>{s=l,i=null,r&&(clearTimeout(r),r=null),t(...u)};return[(...u)=>{const l=Date.now(),d=l-s;d>=n?o(u,l):(i=u,r||(r=setTimeout(()=>{r=null,o(i)},n-d)))},()=>i&&o(i)]}const _i=(t,e,s=3)=>{let n=0;const i=vm(50,250);return Om(r=>{const o=r.loaded,c=r.lengthComputable?r.total:void 0,a=o-n,u=i(a),l=o<=c;n=o;const d={loaded:o,total:c,progress:c?o/c:void 0,bytes:a,rate:u||void 0,estimated:u&&c&&l?(c-o)/u:void 0,event:r,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(d)},s)},Xa=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},el=t=>(...e)=>p.asap(()=>t(...e)),Cm=Ee.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ee.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ee.origin),Ee.navigator&&/(msie|trident)/i.test(Ee.navigator.userAgent)):()=>!0,Im=Ee.hasStandardBrowserEnv?{write(t,e,s,n,i,r,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(e)}`];p.isNumber(s)&&c.push(`expires=${new Date(s).toUTCString()}`),p.isString(n)&&c.push(`path=${n}`),p.isString(i)&&c.push(`domain=${i}`),r===!0&&c.push("secure"),p.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function xm(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Rm(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function tl(t,e,s){let n=!xm(e);return t&&(n||s==!1)?Rm(t,e):e}const sl=t=>t instanceof Ne?{...t}:t;function Jt(t,e){e=e||{};const s={};function n(u,l,d,m){return p.isPlainObject(u)&&p.isPlainObject(l)?p.merge.call({caseless:m},u,l):p.isPlainObject(l)?p.merge({},l):p.isArray(l)?l.slice():l}function i(u,l,d,m){if(p.isUndefined(l)){if(!p.isUndefined(u))return n(void 0,u,d,m)}else return n(u,l,d,m)}function r(u,l){if(!p.isUndefined(l))return n(void 0,l)}function o(u,l){if(p.isUndefined(l)){if(!p.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function c(u,l,d){if(d in e)return n(u,l);if(d in t)return n(void 0,u)}const a={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,l,d)=>i(sl(u),sl(l),d,!0)};return p.forEach(Object.keys({...t,...e}),function(l){const d=a[l]||i,m=d(t[l],e[l],l);p.isUndefined(m)&&d!==c||(s[l]=m)}),s}const nl=t=>{const e=Jt({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:c}=e;if(e.headers=o=Ne.from(o),e.url=Qa(tl(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),p.isFormData(s)){if(Ee.hasStandardBrowserEnv||Ee.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(p.isFunction(s.getHeaders)){const a=s.getHeaders(),u=["content-type","content-length"];Object.entries(a).forEach(([l,d])=>{u.includes(l.toLowerCase())&&o.set(l,d)})}}if(Ee.hasStandardBrowserEnv&&(n&&p.isFunction(n)&&(n=n(e)),n||n!==!1&&Cm(e.url))){const a=i&&r&&Im.read(r);a&&o.set(i,a)}return e},km=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(s,n){const i=nl(t);let r=i.data;const o=Ne.from(i.headers).normalize();let{responseType:c,onUploadProgress:a,onDownloadProgress:u}=i,l,d,m,w,_;function y(){w&&w(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function L(){if(!v)return;const M=Ne.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),B={data:!c||c==="text"||c==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:M,config:t,request:v};Ja(function(G){s(G),y()},function(G){n(G),y()},B),v=null}"onloadend"in v?v.onloadend=L:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(L)},v.onabort=function(){v&&(n(new j("Request aborted",j.ECONNABORTED,t,v)),v=null)},v.onerror=function(k){const B=k&&k.message?k.message:"Network Error",re=new j(B,j.ERR_NETWORK,t,v);re.event=k||null,n(re),v=null},v.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const B=i.transitional||Ga;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),n(new j(k,B.clarifyTimeoutError?j.ETIMEDOUT:j.ECONNABORTED,t,v)),v=null},r===void 0&&o.setContentType(null),"setRequestHeader"in v&&p.forEach(o.toJSON(),function(k,B){v.setRequestHeader(B,k)}),p.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),c&&c!=="json"&&(v.responseType=i.responseType),u&&([m,_]=_i(u,!0),v.addEventListener("progress",m)),a&&v.upload&&([d,w]=_i(a),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(l=M=>{v&&(n(!M||M.type?new gs(null,t,v):M),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const q=Am(i.url);if(q&&Ee.protocols.indexOf(q)===-1){n(new j("Unsupported protocol "+q+":",j.ERR_BAD_REQUEST,t));return}v.send(r||null)})},Lm=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const r=function(u){if(!i){i=!0,c();const l=u instanceof Error?u:this.reason;n.abort(l instanceof j?l:new gs(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,r(new j(`timeout ${e} of ms exceeded`,j.ETIMEDOUT))},e);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),t=null)};t.forEach(u=>u.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=()=>p.asap(c),a}},$m=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},Pm=async function*(t,e){for await(const s of Nm(t))yield*$m(s,e)},Nm=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},il=(t,e,s,n)=>{const i=Pm(t,e);let r=0,o,c=a=>{o||(o=!0,n&&n(a))};return new ReadableStream({async pull(a){try{const{done:u,value:l}=await i.next();if(u){c(),a.close();return}let d=l.byteLength;if(s){let m=r+=d;s(m)}a.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(a){return c(a),i.return()}},{highWaterMark:2})},rl=64*1024,{isFunction:pi}=p,Um=(({Request:t,Response:e})=>({Request:t,Response:e}))(p.global),{ReadableStream:ol,TextEncoder:cl}=p.global,al=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Dm=t=>{t=p.merge.call({skipUndefined:!0},Um,t);const{fetch:e,Request:s,Response:n}=t,i=e?pi(e):typeof fetch=="function",r=pi(s),o=pi(n);if(!i)return!1;const c=i&&pi(ol),a=i&&(typeof cl=="function"?(_=>y=>_.encode(y))(new cl):async _=>new Uint8Array(await new s(_).arrayBuffer())),u=r&&c&&al(()=>{let _=!1;const y=new s(Ee.origin,{body:new ol,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!y}),l=o&&c&&al(()=>p.isReadableStream(new n("").body)),d={stream:l&&(_=>_.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!d[_]&&(d[_]=(y,v)=>{let L=y&&y[_];if(L)return L.call(y);throw new j(`Response type '${_}' is not supported`,j.ERR_NOT_SUPPORT,v)})});const m=async _=>{if(_==null)return 0;if(p.isBlob(_))return _.size;if(p.isSpecCompliantForm(_))return(await new s(Ee.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(p.isArrayBufferView(_)||p.isArrayBuffer(_))return _.byteLength;if(p.isURLSearchParams(_)&&(_=_+""),p.isString(_))return(await a(_)).byteLength},w=async(_,y)=>{const v=p.toFiniteNumber(_.getContentLength());return v??m(y)};return async _=>{let{url:y,method:v,data:L,signal:q,cancelToken:M,timeout:k,onDownloadProgress:B,onUploadProgress:re,responseType:G,headers:de,withCredentials:ue="same-origin",fetchOptions:Ae}=nl(_),tt=e||fetch;G=G?(G+"").toLowerCase():"text";let Lt=Lm([q,M&&M.toAbortSignal()],k),_t=null;const st=Lt&&Lt.unsubscribe&&(()=>{Lt.unsubscribe()});let An;try{if(re&&u&&v!=="get"&&v!=="head"&&(An=await w(de,L))!==0){let ve=new s(y,{method:"POST",body:L,duplex:"half"}),we;if(p.isFormData(L)&&(we=ve.headers.get("content-type"))&&de.setContentType(we),ve.body){const[ks,Ls]=Xa(An,_i(el(re)));L=il(ve.body,rl,ks,Ls)}}p.isString(ue)||(ue=ue?"include":"omit");const X=r&&"credentials"in s.prototype,ee={...Ae,signal:Lt,method:v.toUpperCase(),headers:de.normalize().toJSON(),body:L,duplex:"half",credentials:X?ue:void 0};_t=r&&new s(y,ee);let z=await(r?tt(_t,Ae):tt(y,ee));const pt=l&&(G==="stream"||G==="response");if(l&&(B||pt&&st)){const ve={};["status","statusText","headers"].forEach(Bi=>{ve[Bi]=z[Bi]});const we=p.toFiniteNumber(z.headers.get("content-length")),[ks,Ls]=B&&Xa(we,_i(el(B),!0))||[];z=new n(il(z.body,rl,ks,()=>{Ls&&Ls(),st&&st()}),ve)}G=G||"text";let Rs=await d[p.findKey(d,G)||"text"](z,_);return!pt&&st&&st(),await new Promise((ve,we)=>{Ja(ve,we,{data:Rs,headers:Ne.from(z.headers),status:z.status,statusText:z.statusText,config:_,request:_t})})}catch(X){throw st&&st(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new j("Network Error",j.ERR_NETWORK,_,_t),{cause:X.cause||X}):j.from(X,X&&X.code,_,_t)}}},Fm=new Map,ll=t=>{let e=t&&t.env||{};const{fetch:s,Request:n,Response:i}=e,r=[n,i,s];let o=r.length,c=o,a,u,l=Fm;for(;c--;)a=r[c],u=l.get(a),u===void 0&&l.set(a,u=c?new Map:Dm(e)),l=u;return u};ll();const qr={http:om,xhr:km,fetch:{get:ll}};p.forEach(qr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ul=t=>`- ${t}`,Mm=t=>p.isFunction(t)||t===null||t===!1;function jm(t,e){t=p.isArray(t)?t:[t];const{length:s}=t;let n,i;const r={};for(let o=0;o<s;o++){n=t[o];let c;if(i=n,!Mm(n)&&(i=qr[(c=String(n)).toLowerCase()],i===void 0))throw new j(`Unknown adapter '${c}'`);if(i&&(p.isFunction(i)||(i=i.get(e))))break;r[c||"#"+o]=i}if(!i){const o=Object.entries(r).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=s?o.length>1?`since :
`+o.map(ul).join(`
`):" "+ul(o[0]):"as no adapter specified";throw new j("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const fl={getAdapter:jm,adapters:qr};function Br(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gs(null,t)}function dl(t){return Br(t),t.headers=Ne.from(t.headers),t.data=jr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),fl.getAdapter(t.adapter||nn.adapter,t)(t).then(function(n){return Br(t),n.data=jr.call(t,t.transformResponse,n),n.headers=Ne.from(n.headers),n},function(n){return Za(n)||(Br(t),n&&n.response&&(n.response.data=jr.call(t,t.transformResponse,n.response),n.response.headers=Ne.from(n.response.headers))),Promise.reject(n)})}const hl="1.13.2",mi={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{mi[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const _l={};mi.transitional=function(e,s,n){function i(r,o){return"[Axios v"+hl+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,c)=>{if(e===!1)throw new j(i(o," has been removed"+(s?" in "+s:"")),j.ERR_DEPRECATED);return s&&!_l[o]&&(_l[o]=!0,console.warn(i(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(r,o,c):!0}},mi.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function qm(t,e,s){if(typeof t!="object")throw new j("options must be an object",j.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const r=n[i],o=e[r];if(o){const c=t[r],a=c===void 0||o(c,r,t);if(a!==!0)throw new j("option "+r+" must be "+a,j.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new j("Unknown option "+r,j.ERR_BAD_OPTION)}}const gi={assertOptions:qm,validators:mi},dt=gi.validators;let Xt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Wa,response:new Wa}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Jt(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:r}=s;n!==void 0&&gi.assertOptions(n,{silentJSONParsing:dt.transitional(dt.boolean),forcedJSONParsing:dt.transitional(dt.boolean),clarifyTimeoutError:dt.transitional(dt.boolean)},!1),i!=null&&(p.isFunction(i)?s.paramsSerializer={serialize:i}:gi.assertOptions(i,{encode:dt.function,serialize:dt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),gi.assertOptions(s,{baseUrl:dt.spelling("baseURL"),withXsrfToken:dt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=r&&p.merge(r.common,r[s.method]);r&&p.forEach(["delete","get","head","post","put","patch","common"],_=>{delete r[_]}),s.headers=Ne.concat(o,r);const c=[];let a=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(a=a&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let l,d=0,m;if(!a){const _=[dl.bind(this),void 0];for(_.unshift(...c),_.push(...u),m=_.length,l=Promise.resolve(s);d<m;)l=l.then(_[d++],_[d++]);return l}m=c.length;let w=s;for(;d<m;){const _=c[d++],y=c[d++];try{w=_(w)}catch(v){y.call(this,v);break}}try{l=dl.call(this,w)}catch(_){return Promise.reject(_)}for(d=0,m=u.length;d<m;)l=l.then(u[d++],u[d++]);return l}getUri(e){e=Jt(this.defaults,e);const s=tl(e.baseURL,e.url,e.allowAbsoluteUrls);return Qa(s,e.params,e.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(e){Xt.prototype[e]=function(s,n){return this.request(Jt(n||{},{method:e,url:s,data:(n||{}).data}))}}),p.forEach(["post","put","patch"],function(e){function s(n){return function(r,o,c){return this.request(Jt(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Xt.prototype[e]=s(),Xt.prototype[e+"Form"]=s(!0)});let Bm=class Dd{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(r){s=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(c=>{n.subscribe(c),r=c}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,c){n.reason||(n.reason=new gs(r,o,c),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Dd(function(i){e=i}),cancel:e}}};function zm(t){return function(s){return t.apply(null,s)}}function Hm(t){return p.isObject(t)&&t.isAxiosError===!0}const zr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(zr).forEach(([t,e])=>{zr[e]=t});function pl(t){const e=new Xt(t),s=ka(Xt.prototype.request,e);return p.extend(s,Xt.prototype,e,{allOwnKeys:!0}),p.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return pl(Jt(t,i))},s}const ae=pl(nn);ae.Axios=Xt,ae.CanceledError=gs,ae.CancelToken=Bm,ae.isCancel=Za,ae.VERSION=hl,ae.toFormData=di,ae.AxiosError=j,ae.Cancel=ae.CanceledError,ae.all=function(e){return Promise.all(e)},ae.spread=zm,ae.isAxiosError=Hm,ae.mergeConfig=Jt,ae.AxiosHeaders=Ne,ae.formToJSON=t=>Ka(p.isHTMLForm(t)?new FormData(t):t),ae.getAdapter=fl.getAdapter,ae.HttpStatusCode=zr,ae.default=ae;const{Axios:Av,AxiosError:vv,CanceledError:Ov,isCancel:Cv,CancelToken:Iv,VERSION:xv,all:Rv,Cancel:kv,isAxiosError:Lv,spread:$v,toFormData:Pv,AxiosHeaders:Nv,HttpStatusCode:Uv,formToJSON:Dv,getAdapter:Fv,mergeConfig:Mv}=ae,ml="oB6D6G5TNRmMlOatuPHxKAsWXatp5YBm32dJ2Oy6",Vm="MisoCustomScript",Hr="miso-answer-page",gl=ae.create({baseURL:"https://api-edge.askmiso.com/v1",headers:{"Content-Type":"application/json"},params:{api_key:ml}}),Qm=async t=>(await gl.post("/ask/questions",t)).data,Wm=async t=>(await gl.get(`/ask/questions/${t}/answer`)).data,bl="1.12.7";function Gm(){return new AbortController().signal}function Km(...t){const e=t.length;if(e===0)return Gm();if(e===1)return t[0];const s=new AbortController;for(const n of t)if(!(!n||!n.addEventListener)){if(n.aborted)return AbortSignal.abort(n.reason);n.addEventListener("abort",()=>s.abort(n.reason))}return s.signal}const ge=Object.freeze({ASK:"ask",SEARCH:"search",RECOMMENDATION:"recommendation",INTERACTIONS:"interactions"}),He=Object.freeze({QUESTIONS:"questions",RELATED_QUESTIONS:"related_questions",TRENDING_QUESTIONS:"trending_questions",SEARCH:"search",AUTOCOMPLETE:"autocomplete",SEARCH_AUTOCOMPLETE:"search_autocomplete",MGET:"mget",USER_TO_PRODUCTS:"user_to_products",USER_TO_CATEGORIES:"user_to_categories",USER_TO_ATTRIBUTES:"user_to_attributes",USER_TO_TRENDING:"user_to_trending",USER_TO_HISTORY:"user_to_history",PRODUCT_TO_PRODUCTS:"product_to_products",UPLOAD:"upload"}),on=Object.freeze(Object.defineProperty({__proto__:null,GROUP:ge,NAME:He},Symbol.toStringTag,{value:"Module"}));function Vr(t,e){if(!t)return;const s=t.indexOf(e);s>-1&&t.splice(s,1)}function Ym(t,e){if(!t)return;const s=t.findIndex(e);s>-1&&t.splice(s,1)}function es(t){return Array.isArray(t)?t:t===void 0?[]:[t]}function H(t){if(typeof t!="object")return t;const e={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s]!==void 0&&(e[s]=t[s]);return e}function bi(t){return t==null}function Zm(t,e,s){if(t.has(e))return t.get(e);const n=s(e);return t.set(e,n),n}function qt(t,e,s){s=typeof s=="string"?[s]:s,Object.defineProperties(t,s.reduce((n,i)=>(n[i]={get:()=>{const r=e[i];return typeof r=="function"?r.bind(e):r}},n),{}))}function Jm(t,e,s){s=typeof s=="string"?[s]:s,Object.defineProperties(t,s.reduce((n,i)=>(n[i]={get:()=>e[i],set:r=>{e[i]=r}},n),{}))}function ne(t,e){for(const s in e)e.hasOwnProperty(s)&&Object.defineProperty(t,s,{value:e[s]})}function Xm(t,e){const s=Symbol.for(e);Object.defineProperty(t,s,{value:!0}),Object.defineProperty(t,"isTypeOf",{value:n=>n&&n instanceof t||typeof n.constructor=="function"&&n.constructor[s]===!0})}function wl(t){return t.replace(/-([a-z])/g,e=>e[1].toUpperCase())}function yl(t){return t.replace(/[-_][a-z]/g,e=>e[1].toUpperCase())}function El(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function eg(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function tg(t){return t.replaceAll("-","_")}function sg(t){return t.replace(/[-_]([a-zA-Z])/g,(e,s)=>` ${s}`)}class Sl{constructor(e,{duration:s=0,onDuration:n,offDuration:i,state:r}={}){if(typeof e!="function")throw new Error(`Callback must be a function: ${e}`);this._callback=e,Object.defineProperty(this,"durations",{value:Object.freeze({on:n!==void 0?n:s,off:i!==void 0?i:s})}),this._value=this._state=!!r,this._active=!0}get active(){return this._active}get state(){return this._state}get value(){return this._value}set value(e){if(e=!!e,this._value===e)return;ng(this);const s=this.durations[e?"on":"off"];s?this._timeout=setTimeout(()=>Tl(this,e),s):Tl(this,e),this._value=e}disconnect(){this._active=!1}}function ng(t){t._timeout&&(clearTimeout(t._timeout),t._timeout=void 0)}function Tl(t,e){t._state!==e&&(t._state=e,t._active&&t._callback(e))}function ig(t){return typeof t=="string"?document.querySelector(t):t}function Qr(t,e,{root:s=t.ownerDocument}={}){for(;t&&t!==s;t=t.parentElement){const n=e(t);if(n!==void 0)return n}}function rg(t){const{tagName:e}=t;customElements.define(e,t);for(const s of document.querySelectorAll(e))customElements.upgrade(s)}async function wi(t){return new Promise((e,s)=>{window.requestAnimationFrame(async n=>{try{await t(n),e()}catch(i){s(i)}})})}async function Wr(t,{area:e=.5,duration:s=1e3,signal:n}={}){return t=ig(t),new Promise((i,r)=>{const o=new Sl(a=>{a&&(o.disconnect(),c.disconnect(),i())},{onDuration:s}),c=new IntersectionObserver(a=>{o.value=a[0].isIntersecting},{threshold:e});c.observe(t),n&&n.addEventListener&&n.addEventListener("abort",()=>{o.disconnect(),c.disconnect(),r(new DOMException("Aborted","AbortError"))})})}async function og(){document.readyState==="loading"&&await new Promise(t=>{document.addEventListener("DOMContentLoaded",t,{once:!0})})}function Je(t){return t=`${t}`,t&&t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function cn(){return cg()||ag()||lg()}function cg(){return crypto&&crypto.randomUUID?crypto.randomUUID():void 0}function ag(){if(!URL||!URL.createObjectURL||URL.revokeObjectURL||!Blob)return;const t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substring(e.lastIndexOf("/")+1)}function lg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}function ug(t,e){const s=yi(()=>window.localStorage.getItem(t)),n=yi(()=>fg(t)),i=s||n||`${e()}`;return i&&!s&&yi(()=>window.localStorage.setItem(t,i)),i&&!n&&yi(()=>dg(t,i)),i}function fg(t){const e=`; ${document.cookie}`,s=`; ${encodeURIComponent(t)}=`,n=e.indexOf(s);if(n<0)return;const i=n+s.length,r=e.indexOf(";",i);return decodeURIComponent(r<0?e.substring(i):e.substring(i,r))}function dg(t,e){document.cookie=`${encodeURIComponent(t)}=${encodeURIComponent(e)}; max-age=31536000; path=/`}function yi(t){try{return t()}catch(e){if(!hg(e))throw e}}function hg(t){return t.name==="SecurityError"}function _g(t,e,s){return t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(e)+"="+encodeURIComponent(`${s}`)}function Ei(t){return new pg(t)}class pg{constructor(e){this._value=e;const s=n=>{this._value=n};ne(this,{set:s,args:(...n)=>s(n),t:()=>s(!0),f:()=>s(!1),merge:n=>s({...this._value,...n})})}get value(){return this._value}}class Ot{constructor(){const e=this;e.promise=new Promise((s,n)=>{e.resolve=s,e.reject=n}),Object.freeze(this)}}class mg{constructor(){this._index=-1,this._done=!1,this._aborted=!1,this._abortReason=void 0,this._error=void 0}get aborted(){return this._aborted}get abortReason(){return this._abortReason}get done(){return this._done}update(e,s=!1){this._done||(this._value=e,this._done=s,this._index++,this._resolution&&(this._resolution.resolve(),this._resolution=void 0))}error(e){this._error=e,this._resolution&&(this._resolution.reject(e),this._resolution=void 0)}abort(e){this._aborted=!0,this._abortReason=e,this._resolution&&(e instanceof Error?this._resolution.reject(e):this._resolution.resolve(),this._resolution=void 0)}async*[Symbol.asyncIterator](){let e=0;for(;;){if(this._error)throw this._error;if(this._aborted||(e>this._index&&(this._resolution||(this._resolution=new Ot),await this._resolution.promise),this._aborted))break;const s=this._done,n=this._index+1;if(yield this._value,this._aborted||s)break;e=n}}}function gg(t,{interval:e=1e3,errorLimit:s=10,onError:n,onResponse:i,signal:r}={}){if(r&&r.aborted)return[];let o=0,c,a=!1,u;function l(){c&&clearInterval(c),a=!0}const d=new mg;return c=setInterval(async()=>{let m,w,_;try{if([m,w,_]=await t(r?{signal:r}:{}),a||!bi(u)&&_<=u)return;bi(_)||(u=_),i&&i(m,w,_),o=0}catch(y){n&&n(y),o++,o>s&&(l(),d.error(y));return}d.update(m,w),w&&l()},e),r&&r.addEventListener&&r.addEventListener("abort",()=>{l(),d.abort(r.reason)}),d}function bg(t,{onError:e=n=>console.error(n),transform:s=n=>n}={}){try{s(t)()}catch(n){e(n)}}function Al(t,e){const s=window[t]||(window[t]=[]);if(s._processed)return;s._processed=!0;const n=i=>bg(i,e);Object.defineProperty(s,"push",{value:n});for(const i of s)n(i)}const wg="1.12.7";let yg;try{yg=document.currentScript}catch{}async function vl(t){try{let e=Eg(t);return e||(e=document.createElement("link"),e.rel="stylesheet",e.href=t,document.head.appendChild(e)),Sg(e)}catch(e){console.error(e)}}function Ol(t){return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${wg}/dist/css/${t}.css`}function Eg(t){return document.head.querySelector(`link[href="${t}"]`)}async function Sg(t){await Tg(t),await Ag(t)}async function Tg(t){if(!t.sheet)return new Promise((e,s)=>{let n;t.onerror=()=>{n&&clearInterval(n),s()},n=setInterval(()=>{t.sheet&&(n&&clearInterval(n),e())},100)})}async function Ag(t){if(!Cl(t))return new Promise(e=>{let s;s=setInterval(()=>{Cl(t)&&(s&&clearInterval(s),e())},100)})}function Cl(t){for(const e of document.styleSheets)if(e.ownerNode===t)return!0;return!1}function Il(t){let e;return s=>{e&&clearTimeout(e),e=setTimeout(()=>{e=void 0,s()},t)}}function xl(t,{depth:e=5,...s}={}){return Gr(t,e)}function Gr(t,e,s){if(e<=0)return"(...)";switch(typeof t){case"object":if(t)return t.length!==void 0?Array.prototype.map.call(t,n=>Gr(n,e-1)):t instanceof Node?Og(t):vg(t,e);default:return t}}function vg(t,e,s){const n={};if(e<=0)return n;for(const i in t){const r=t[i];typeof r!="function"&&(i.startsWith("_")&&typeof r=="object"&&r.constructor.name!=="Object"||(n[i]=Gr(r,e-1)))}return n}function Og(t){return t instanceof Element?`<${t.tagName.toLowerCase()}${t.id?` id="${t.id}"`:""}${t.className?` class="${t.className}"`:""}>`:`[TextNode](${t.length})`}function an(t,e){const s=Object.getOwnPropertyDescriptors(e),n=Object.getOwnPropertyDescriptors(t);for(const[i,r]of Object.entries(s))i!=="constructor"&&n[i]===void 0&&Object.defineProperty(t,i,r)}function Si(t){const e={},s=new Set;for(let n=t;n!==Object.prototype;n=Object.getPrototypeOf(n)){const i=Object.getOwnPropertyDescriptors(n);for(const r in i){if(r==="constructor"||r.startsWith("_")||s.has(r))continue;s.add(r);const{value:o}=i[r];o&&(e[r]=typeof o=="function"?o.bind(t):o)}}return Object.freeze(e)}function Ti(t={},e={}){const s=t.metadata||e.metadata?H({...t.metadata,...e.metadata}):void 0,n=t._meta||e._meta?H({...t._meta,...e._meta}):void 0;return H({...t,...e,metadata:s,_meta:n})}function Ve(t={},e={}){const s=t.context&&t.context.custom_context||e.context&&e.context.custom_context?H({...t.context&&t.context.custom_context,...e.context&&e.context.custom_context}):void 0,n=t.context||e.context?H({...t.context,...e.context,custom_context:s}):void 0;return H({...t,...e,context:n})}const Cg=100,Ig=4;function xg(t){const e=Rg(t);return(s,n,i,r)=>{const o=e(i,n);return s+Math.max(r-i,0)*o/1e3}}function Rg({speed:t=Cg,acceleration:e=Ig}={}){if(typeof t=="function")return t;if(typeof t!="number")throw new Error(`Invalid speed: ${t}`);if(typeof e!="number")throw new Error(`Invalid acceleration: ${e}`);return(s,n)=>{let i=t*(Math.random()+.5);return e>0&&n!==void 0&&s>n&&(i*=1+(s-n)*e/1e3),i}}const Kr=Symbol.for("miso:resources");class kg{constructor(){this._resources=new Map;const e=window[Kr]||[];for(const s of e)try{const[n,i]=s;this.push([n,i])}catch{}}push([e,s]){Rl(this._resources,e).resolve(s)}async get(e){return Rl(this._resources,e).promise}}function Rl(t,e){if(t.has(e))return t.get(e);const s=new Ot;return t.set(e,s),s}function Lg(){return window[Kr]||(window[Kr]=new kg)}class $g{constructor(e,s){this._dispatchRequested=!1,this._requests=[],this._run=e,this._error=s||(n=>console.error(n)),this._bulkId=0,this._dispatch=this._dispatch.bind(this)}get info(){return{bulkId:this._bulkId,index:this._requests.length}}async run(e){const s=new Ot;return this._requests.push({action:e,resolution:s}),this._requestDispatch(),s.promise}_requestDispatch(){this._dispatchRequested||(this._dispatchRequested=!0,setTimeout(this._dispatch))}_dispatch(){if(!this._dispatchRequested)return;this._dispatchRequested=!1;const e=this._requests,s=this._bulkId++;this._requests=[];try{this._run(e,{bulkId:s})}catch(n){this._error(n)}}}class bs{constructor({target:e,error:s,replays:n=[]}={}){if(this._error=s||(i=>console.error(i)),!Array.isArray(n))throw new Error(`Replays option must be an array of strings: ${n}`);this._replays=new Set(n),this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={},e&&this._injectSubscribeInterface(e)}emit(e,s){const n={data:s,meta:{name:e,ts:Date.now()}},i=this._namedCallbacks[e];if(i)for(const r of i)r(n);for(const r of this._unnamedCallbacks)r(n);this._shallStoreForReplay(e)&&(this._pastEvents[e]||(this._pastEvents[e]=[])).push(n)}on(e,s){return this._checkName(e),this._checkCallback(s),this._on(e,this._wrapCallback(s))}once(e){this._checkName(e);const s=this;return new Promise((n,i)=>{const r=s._on(e,o=>{setTimeout(()=>r());try{n(o)}catch(c){i(c)}})})}clear(){this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={}}_checkName(e){if(typeof e!="string")throw new Error(`Event name should be a string: ${e}`)}_checkCallback(e){if(typeof e!="function")throw new Error(`Event callback should be a function: ${e}`)}_shallStoreForReplay(e){return this._replays.has(e)}_wrapCallback(e){const s=this;return({data:n,meta:i})=>{try{e(n,i)}catch(r){s._error(r)}}}_on(e,s){if(e==="*"?this._unnamedCallbacks.push(s):(this._namedCallbacks[e]||(this._namedCallbacks[e]=[])).push(s),e==="*")for(const n in this._pastEvents)this._pastEvents[n].forEach(s);else this._pastEvents[e]&&this._pastEvents[e].forEach(s);return()=>this._off(e,s)}_off(e,s){if(e==="*")Vr(this._unnamedCallbacks,s);else{const n=this._namedCallbacks[e];n&&Vr(n,s)}}_injectSubscribeInterface(e){qt(e,this,["on","once"])}}function Pg(t,e){if(t!==void 0&&typeof t!="string"&&e===void 0&&(e=t,t=void 0),t!==void 0&&(typeof t!="string"||!t))throw new Error(`Invalid Component name: "${t}"`);return Object.freeze({name:t,parent:e,path:Ng(t,e),uuid:cn()})}function Ng(t,e){return Object.freeze([...e&&e.meta&&e.meta.path||[],...t?[t]:[]])}class Ue{constructor(e,s){const n=Pg(e,s);ne(this,{meta:n});const i=this._error=this._error.bind(this);this._events=new bs({target:this,error:i,replays:["child"]}),this._warn=this._warn.bind(this),s=n.parent,s&&s._events&&s._events.emit("child",this)}_warn(...e){const s=this.meta.parent;(s&&s._warn||console.warn)(...e)}_error(...e){const s=this.meta.parent;(s&&s._error||console.error)(...e)}}Xm(Ue,"miso:component");class kl extends Ue{constructor(e,s,{libName:n,keyName:i}={}){switch(super(e,s),this._events._replays.add("register"),this._libraries={},this._libResolutions={},this._libName=n,typeof i){case"string":this._keyFn=(r=>r[i]);break;case"function":this._keyFn=i;break;default:throw new Error(`Expect keyName to be a string or a function: ${i}`)}}isRegistered(e){return this._checkKey(e),!!this._libraries[e]}get registered(){return Object.values(this._libraries)}async whenRegistered(e){if(this.isRegistered(e))return this._libraries[e];const{promise:s}=this._libResolutions[e]||(this._libResolutions[e]=new Ot);return s}register(...e){for(const s of e)this._register(s)}_checkKey(e){if(typeof e!="string"||!e)throw new Error(`Expect key to be a non-empty string: ${e}`)}_checkLib(e){if(typeof e!="function")throw new Error(`Expect lib to be a class or function: ${e}`)}_register(e){this._checkLib(e);const s=this._keyFn(e);this._checkKey(s);const n=this._libraries||(this._libraries={});n[s],n[s]=e,this._libResolutions[s]&&this._libResolutions[s].resolve(e),this._events.emit("register",e)}}class Ug{constructor(e,s){this._callback=e,this._options=s||{},s!==!1&&(this._intersection=new IntersectionObserver(this._handleIntersection.bind(this),{threshold:s.area||.5}),this._continuity=new Sl(this._handleContinuity.bind(this),{onDuration:s.duration||1e3})),this._displayed=void 0,this._intersecting=!1,this._triggered=new Set}observe(e){this._options!==!1&&this._intersection.observe(e)}unobserve(e){this._options!==!1&&this._intersection.unobserve(e)}display(e){this._options!==!1&&(this._triggered.has(e)&&(e=void 0),this._displayed!==e&&(this._displayed=e,this._continuity.value=!1,this._syncContinuity()))}disconnect(){this._options!==!1&&(this._continuity.disconnect(),this._intersection.disconnect())}get triggeredCount(){return this._triggered.size}get triggered(){return new Set(this._triggered)}_syncContinuity(){this._continuity.value=this._intersecting&&this._displayed!==void 0}_handleIntersection(e){this._intersecting=e[0].isIntersecting,this._syncContinuity()}_handleContinuity(e){const s=this._displayed;if(e&&s!==void 0){if(this._triggered.has(s))return;this._triggered.add(s),this._displayed=void 0,this._callback(s)}}}class Dg{constructor(e){this._ac=new AbortController,this._timeout=e,this.touch()}clear(){this._timeoutId!==void 0&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}touch(){this.clear(),this._timeoutId=setTimeout(()=>this.abort(),this._timeout)}get signal(){return this._ac.signal}abort(e){this.clear(),this._ac.abort(e||new Error(`Stall timeout: data stay unchanged for ${this._timeout/1e3} seconds.`))}}const Ll=Object.freeze({DATA_ENDPOINT:"https://api-edge.askmiso.com/v1",EVENT_ENDPOINT:"https://api.askmiso.com/v1"});class $l{constructor(e,s){this._client=e,this._root=s,this._bulk=new $g(this._runBulkFetch.bind(this),e._error.bind(e))}async fetch(e,s,{method:n="POST",headers:i,timeout:r}={}){const{apiKey:o,request:c={}}=this._client.options;r=r||c.timeout;const a=n!=="GET"&&s!=null?JSON.stringify(s):void 0,u=r?AbortSignal.timeout(r):void 0,l=await(this._root._customFetch||window.fetch)(e,H({method:n,headers:i,body:a,cache:"no-cache",mode:"cors",signal:u})),d=await l.json();if(l.status>=400||d.errors){var m=new Error(d.message);throw m.data=d,m.status=l.status,m}return d}get bulkInfo(){return this._bulk.info}async fetchForBulk(e,s,n,{method:i}={}){if(i&&i!=="POST")throw new Error(`Non-POST API is not supported in bulk mode: ${url}`);return this._bulk.run({apiGroup:e,apiName:s,payload:n})}async _runBulkFetch(e){const s=this.url(["bulk"]),n={requests:e.map(({action:{apiGroup:r,apiName:o,payload:c}})=>({api_name:`${r}/${o}`,body:c}))},{data:i}=await this.fetch(s,n);for(let r=0,o=e.length;r<o;r++){const{resolution:c}=e[r],{error:a,status_code:u,body:l}=i[r];u>=400||a?c.reject({status_code:u,body:l}):c.resolve(l)}}sendBeacon(e,s,{method:n}={}){if(n&&n!=="POST")throw new Error(`Non-POST API is not supported in useBeacon mode: ${e}`);if(!(this._root._customSendBeacon?this._root._customSendBeacon(e,JSON.stringify(s)):window.navigator.sendBeacon(e,JSON.stringify(s))))throw new Error(`Send beacon unsuccessful: ${e}`)}url(e){const{apiKey:s}=this._client.options,n=e.filter(r=>r).join("/");return`${`${this.getApiEndpoint(n)}/${n}`}?api_key=${window.encodeURIComponent(s)}`}getApiEndpoint(e){const{dataEndpoint:s=Ll.DATA_ENDPOINT,eventEndpoint:n=Ll.EVENT_ENDPOINT}=this._client.options;return e==="interactions"?n:s}applyUrlPasses(e,{apiGroup:s,apiName:n,url:i}){const r=this._client;for(const o of this._root._urlPasses)try{i=o({client:r,apiGroup:s,apiName:n,url:i})||i}catch(c){(e._error||console.error)(c)}return i}applyPayloadPasses(e,{apiGroup:s,apiName:n,payload:i}){const r=this._client;for(const o of this._root._payloadPasses)try{i=o({client:r,apiGroup:s,apiName:n,payload:i})||i}catch(c){(e._error||console.error)(c)}return i}applyHeaderPasses(e,{apiGroup:s,apiName:n,payload:i,headers:r,options:o}){const c=this._client;for(const a of this._root._headersPasses)try{r=a({client:c,apiGroup:s,apiName:n,payload:i,headers:r,options:o})||r}catch(u){(e._error||console.error)(u)}return r}}class ln extends Ue{constructor(e,s){super(s,e),this._apiPath=s,this.helpers=e.helpers,this.clientOptions=e._client.options,this.context=e._client.context}async _run(e,s,n={}){const{bulk:i}=n,r=i?{bulk:this.helpers.bulkInfo}:void 0,o=this._apiPath,c=this._url({apiGroup:o,apiName:e,payload:s,options:n}),a=this._headers({apiGroup:o,apiName:e,payload:s,options:n});s=this._preprocess({apiGroup:o,apiName:e,payload:s,options:n});const u={apiGroup:o,apiName:e,payload:s,url:c,headers:a,options:n};this._events.emit("request",{...u,...r});const l=await this._send(u),d={...u,response:l};return this._events.emit("response",{...d,...r}),this._postprocess(d)}_headers({apiGroup:e,apiName:s,payload:n,options:i}){return this.helpers.applyHeaderPasses(this,{apiGroup:e,apiName:s,payload:n,headers:{},options:i})}_preprocess({apiGroup:e,apiName:s,payload:n,options:i}){return this.helpers.applyPayloadPasses(this,{apiGroup:e,apiName:s,payload:n,options:i})}_url({apiGroup:e,apiName:s,options:n}){const i=this.helpers.url([e,s],n);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:s,url:i,options:n})}async _send({apiGroup:e,apiName:s,url:n,headers:i,payload:r,options:{bulk:o,...c}={}}){return o?this.helpers.fetchForBulk(e,s,r):this.helpers.fetch(n,r,{...c,headers:i})}_postprocess({response:e}){return e.data}}const{GROUP:Fg,NAME:Pl}=on;class Nl extends ln{constructor(e){super(e,Fg.INTERACTIONS)}async upload(e,s){try{return await this._run(Pl.UPLOAD,e,s)}catch(n){if(n.status===400&&n.message&&n.message.toLowerCase().indexOf("playground")>-1)this._warn("Ignore interactions uploaded to playground app.");else throw n}}_url({apiGroup:e,apiName:s,options:n}){const i=this.helpers.url([this._apiPath],n);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:s,url:i,options:n})}_preprocess({apiGroup:e,apiName:s,payload:n}){return s===Pl.UPLOAD&&(n=this._normalizeUploadPayload(n)),super._preprocess({apiGroup:e,apiName:s,payload:n})}_normalizeUploadPayload(e){if(typeof e!="object")throw new Error(`Interactions payload has to be either an object or an array of objects: ${e}`);return Array.isArray(e)||(e=[e]),{data:e}}async _send({options:{useBeacon:e=!0,...s}={},...n}){if(e){const{url:i,payload:r}=n;return this.helpers.sendBeacon(i,r,s),{}}else return super._send({...n,options:s})}}class Mg{constructor(e={}){this._ac=new AbortController,this._options=e}async get(e){return this._get({...this._options,...e})}_get(e){throw new Error("Not implemented")}abort(e){this._ac.abort(e)}[Symbol.asyncIterator](){const e=async({signal:u}={})=>{const l=await this.get();return[l,this._isFinished(l),this._revisionOf(l)]};let{pollingInterval:s,signal:n,stallTimeout:i=12e4,...r}=this._options;const o=new Dg(i);n=Km(this._ac.signal,o.signal,n);let c;return gg(e,{interval:s,signal:n,onResponse:(u,l)=>{l?o.clear():this._isUpdated(c,u)&&o.touch(),c=u},...r})[Symbol.asyncIterator]()}_isFinished(e){return!!(e&&e.finished)}_isUpdated(e,s){return!e||e.answer_stage!==s.answer_stage||Ai(e.answer)!==Ai(s.answer)||Ai(e.reasoning)!==Ai(s.reasoning)}_revisionOf(e){return e&&e.revision}}class Ul extends Mg{constructor(e,s,n,i){super(i),this._api=e,this._method=s,this._id=n}async _get(e){return this._api[this._method](this._id,e)}}function Ai(t=""){return t.length}const{GROUP:jg,NAME:Ct}=on;let Dl=class extends ln{constructor(e){super(e,jg.ASK)}async questions(e,s={}){if(jl(e)&&(e={question_id:e}),e.question_id)return new Fl(this,e,s);const n=await this._run(Ct.QUESTIONS,e,s);return new Fl(this,n,s)}async _questions(e,s){return this._run(Ct.QUESTIONS,e,s)}async _questionGet(e,s){return this._run(`${Ct.QUESTIONS}/${e}/answer`,void 0,{...s,method:"GET"})}async relatedQuestions(e,s={}){return this._run(Ct.RELATED_QUESTIONS,e,s)}async trendingQuestions(e,s={}){return this._run(Ct.TRENDING_QUESTIONS,e,s)}async search(e,s={}){if(jl(e)&&(e={question_id:e}),e.question_id)return new Ml(this,e,s);const n=await this._run(Ct.SEARCH,e,s);return n.question_id?new Ml(this,n,s):n}async _searchGet(e,s){return this._run(`${Ct.QUESTIONS}/${e}/answer`,void 0,{...s,method:"GET"})}async autocomplete(e,s){return this._run(Ct.AUTOCOMPLETE,e,s)}async searchAutocomplete(e,s){return this._run(Ct.SEARCH_AUTOCOMPLETE,e,s)}};class Fl extends Ul{constructor(e,s,n={}){super(e,"_questionGet",s.question_id,n),this._response=s}get questionId(){return this._id}}class Ml extends Ul{constructor(e,s,n={}){super(e,"_searchGet",s.question_id,n),ne(this,s),this._response=s}get questionId(){return this._id}}function jl(t){return typeof t=="string"&&t.charAt(0)!=="{"}const{GROUP:qg,NAME:Yr}=on;let ql=class extends ln{constructor(e){super(e,qg.SEARCH)}async search(e,s){return this._run(Yr.SEARCH,e,s)}async autocomplete(e,s){return this._run(Yr.AUTOCOMPLETE,e,s)}async multipleGet(e,s){return this._run(Yr.MGET,e,s)}};const{GROUP:Bg,NAME:ws}=on;let Bl=class extends ln{constructor(e){super(e,Bg.RECOMMENDATION)}async userToProducts(e,s){return this._run(ws.USER_TO_PRODUCTS,e,s)}async userToCategories(e,s){return this._run(ws.USER_TO_CATEGORIES,e,s)}async userToAttributes(e,s){return this._run(ws.USER_TO_ATTRIBUTES,e,s)}async userToTrending(e,s){return this._run(ws.USER_TO_TRENDING,e,s)}async userToHistory(e,s){return this._run(ws.USER_TO_HISTORY,e,s)}async productToProducts(e,s){return this._run(ws.PRODUCT_TO_PRODUCTS,e,s)}};class zl extends Ue{constructor(e,s){super("api",e),this._client=e,this.helpers=new $l(e,s),this.interactions=new Nl(this),this.ask=new Dl(this),this.search=new ql(this),this.recommendation=new Bl(this)}}const zg=Object.freeze(Object.defineProperty({__proto__:null,Api:zl,ApiBase:ln,ApiHelpers:$l,Ask:Dl,Interactions:Nl,Recommendation:Bl,Search:ql},Symbol.toStringTag,{value:"Module"}));let Hl=class extends Ue{constructor(e){super("context",e),this._client=e}};const Hg={api:zg,context:{Context:Hl}};class Vg{constructor(e){ne(this,{install:e})}}function Qg(t,e,s){const n=t.slice(4);if(e==="dev"){const i=s.src,r=i.indexOf("?"),o=r<0?i.length:r,c=i.lastIndexOf("/",o)+1,a=i.indexOf(".",c),u=a<0?"":i.slice(a,o);return`${i.slice(0,c)}plugins/${n}${u}`}else return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${e}/dist/umd/plugins/${n}.min.js`}class Wg extends kl{constructor(e){super("plugins",e,{libName:"plugin class",keyName:"id"}),this._root=e,this._currentScript=document.currentScript,this._events._replays.add("install").add("subtree"),this._installed={},this._installedResolutions={},this._useRequests={},this._subtrees=[],this.context=new Gg(this,Hg),this.plugins=new Kg(this)}isInstalled(e){return this._checkKey(e),!!this._installed[e]}get installed(){return Object.values(this._installed)}get(e){return this._installed[e]}getPluginClass(e){return this._libraries[e]}use(e,s){if(typeof e=="function"&&e.id&&typeof e.id=="string"){this.register(e),this.use(e.id,s);return}let n;if(typeof e=="string"&&this.isInstalled(e)){n=this.get(e),this._tryConfig(n,s);return}if(typeof e=="string"&&!this.isRegistered(e)){(this._useRequests[e]||(this._useRequests[e]=[])).push(s);return}n=this._instantiate(e,s),this._install(n)}async install(e,s){return this.use(e,s),typeof e=="string"&&!this.isRegistered(e)&&await this._tryRegisterRemotely(e),this.whenInstalled(e)}async whenInstalled(e){if(typeof e=="function"&&e.id&&typeof e.id=="string"&&(e=e.id),this.isInstalled(e))return this.get(e);const{promise:s}=this._installedResolutions[e]||(this._installedResolutions[e]=new Ot);return s}addSubtree(e){this._subtrees.push(e),this._events.emit("subtree",e)}addPayloadPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._payloadPasses.push(e)}addHeadersPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._headersPasses.push(e)}addUrlPass(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._urlPasses.push(e)}setCustomFetch(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._customFetch=e}setCustomSendBeacon(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._customSendBeacon=e}onHubUpdate(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubUpdateCallbacks.push(e)}onHubEmit(e){if(typeof e!="function")throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubEmitCallbacks.push(e)}_tryConfig(e,s){s!==void 0&&(typeof e.config=="function"?(e.config(s),this._events.emit("config",[e,s])):this._warn(`Attempt to pass options to plugin "${e.id}", which offers no config() method.`))}_instantiate(e,s){switch(typeof e){case"string":this._checkKey(e);const n=this._libraries[e];if(!n)throw new Error(`Plugin class not found: ${e}`);const i=new n;return ne(i,{id:e}),this._tryConfig(i,s),i;case"function":return new Vg(e)}throw new Error(`Unexpected parameters: ${e}`)}_install(e){if(typeof e.install!="function")throw new Error(`Expect plugin.install to be a function: ${e}`);try{e.installed=!1,e.install(this.MisoClient,this.context),e.installed=!0}catch(s){throw s}e.id&&(this._installed[e.id]=e,this._installedResolutions[e.id]&&(this._installedResolutions[e.id].resolve(e),delete this._installedResolutions[e.id])),this._events.emit("install",e)}_register(e){super._register(e),this._fulfillUseRequests(e.id)}_fulfillUseRequests(e){const s=this._useRequests[e];if(s){for(const n of s)try{this.use(e,n)}catch(i){this._error(i)}delete this._useRequests[e]}}async _tryRegisterRemotely(e){if(e.startsWith("std:"))try{await this._registerStdRemotely(e);return}catch(s){console.error(s)}throw new Error(`Cannot register plugin remotely: ${e}`)}async _registerStdRemotely(e){const{version:s}=this._root,n=s==="dev"?`plugin:${e}@dev:${this.MisoClient.uuid}`:`plugin:${e}@${s}`;if(!document.querySelector(`script[data-request="${n}"]`)){const r=document.createElement("script");r.async=!0,r.src=Qg(e,s,this._currentScript),r.setAttribute("data-request",n),document.head.appendChild(r)}const i=await new Lg().get(n);!this.isRegistered(e)&&this.register(i)}}class Gg{constructor(e,s){qt(this,e,["getPluginClass","addSubtree","addPayloadPass","addHeadersPass","addUrlPass","setCustomFetch","setCustomSendBeacon","onHubUpdate","onHubEmit","whenInstalled","whenRegistered"]),ne(this,{classes:s})}}class Kg{constructor(e){qt(this,e,["installed","registered","isInstalled","isRegistered","whenInstalled","whenRegistered","get","register","use","install"])}}class Yg extends Ue{constructor(){super(),this._events._replays.add("create"),this._pluginRoot=new Wg(this),this._clients=[],this._payloadPasses=[],this._headersPasses=[],this._urlPasses=[],this._customFetch=void 0,this._customSendBeacon=void 0,this._hubUpdateCallbacks=[],this._hubEmitCallbacks=[],this.version=bl,this._cmdRes=new Ot}get instances(){return[...this._clients]}async any(){return this._clients[0]||this._any||(this._any=(await this._events.once("create")).data)}get cmdDone(){return this._cmdRes.promise}}const Bt=new Yg;function Zg(t){const e=Bt._pluginRoot;return Bt.MisoClient=e.MisoClient=t,qt(t,Bt,["version","instances","any","meta","on","once","cmdDone"]),qt(t,e,["plugins"]),t}function Jg(t){Bt._clients.push(t),Bt._events.emit("create",t)}function Xg(){Bt._cmdRes.resolve()}const eb=Object.freeze(Object.defineProperty({__proto__:null,debounce:Il,viewable:Wr},Symbol.toStringTag,{value:"Module"})),{currentScript:Vl}=document;let Zr=class In extends Ue{static attach(){if((window.MisoClients||(window.MisoClients=[])).push(In),window.MisoClient){window.MisoClient!==In&&console.warn(`window.MisoClient already exists: (${window.MisoClient.version}).`);return}window.MisoClient=In}static debug(){}constructor(e){super("client",Bt),this._config(e),this.context=new Hl(this),this.api=new zl(this,Bt),Jg(this)}get version(){return In.version}_config(e){this.options=Object.freeze(this._normalizeOptions(e))}_normalizeOptions(e={}){if(typeof e=="string"&&(e={apiKey:e}),e.readConfigFromScriptUrl&&(e={...this._readConfigFromScriptUrl(),...e}),!e.apiKey)throw new Error("Require API key to initialize miso client.");return e.request&&e.request.sendApiKeyByHeader&&console.warn('`sendApiKeyByHeader` option is deprecated. Please call `MisoClient.plugins.use("std:header-api-key");` instead.'),e.dataEndpoint=e.dataEndpoint||e.apiHost,e.eventEndpoint=e.eventEndpoint||e.apiHost,delete e.apiHost,H(e)}_readConfigFromScriptUrl(){const e=Vl.src||Vl.href,s=new URL(new Request(e).url).searchParams;return H({apiKey:s.get("api_key")||void 0})}};Zr.helpers=eb,ne(Zr,{uuid:cn()});const It=Zg(Zr),{GROUP:tb,NAME:sb}=on,nb="std:context";class ib extends Ue{static get id(){return nb}constructor(){super("context")}install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this)),s.addHeadersPass(this._modifyHeaders.bind(this)),s.addPayloadPass(this._modifyPayload.bind(this))}_injectClient(e){const s=new ob(this);Jm(e.context,s,["anonymous_id","user_id","user_hash","user_type","site","auth"])}_modifyHeaders({client:e,headers:s}){const{auth:n}=e.context;return n&&(s={...s,Authorization:n}),s}_modifyPayload({client:e,apiGroup:s,apiName:n,payload:i}){if(!i)return i;switch(s){case tb.INTERACTIONS:return n===sb.UPLOAD?this._modifyPayloadForInteractions(e,i):i;default:return this._modifyPayloadForQueries(e,i)}}_modifyPayloadForQueries(e,s){const{user_id:n,user_hash:i,user_type:r,anonymous_id:o,site:c}=e.context;return Ti(s,{...n?{user_id:n,user_type:r,user_hash:i}:{anonymous_id:o},metadata:c?{site:c}:void 0})}_modifyPayloadForInteractions(e,{data:s}){const{anonymous_id:n,user_id:i,site:r}=e.context,o={anonymous_id:n,user_id:i},c=r?{site:r}:void 0,a=c?{custom_context:c}:void 0;return s=s.map(u=>Ve(u,{...o,context:a})),{data:s}}}let Ql;function rb(){return Ql||(Ql=ug("miso_anonymous_id",cn))}class ob{constructor(e){this._plugin=e,this._props={}}get anonymous_id(){return this._props.anonymous_id||rb()}set anonymous_id(e){this._requireString("anonymous_id",e),this._set("anonymous_id",e)}get user_id(){return this._props.user_id}set user_id(e){this._requireString("user_id",e),this._set("user_id",e)}get user_hash(){return this._props.user_hash}set user_hash(e){this._requireString("user_hash",e),this._set("user_hash",e)}get user_type(){return this._props.user_type}set user_type(e){this._requireString("user_type",e),this._set("user_type",e)}get site(){return this._props.site}set site(e){this._requireString("site",e),this._set("site",e)}get auth(){return this._props.auth}set auth(e){this._requireString("auth",e),this._set("auth",e)}_set(e,s){this._props[e]=s,this._plugin._events.emit("set",`${e} = '${s}'`)}_requireString(e,s){if(typeof s!="string"&&typeof s<"u")throw new Error(`${e} must be a string`);return s}}const cb="std:page-info";class ab{static get id(){return cb}constructor(){}install(e,{addPayloadPass:s}){s(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:s,payload:n}){return e==="interactions"&&s==="upload"?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:e}){return e=e.map(s=>({...s,context:{...lb(),...s.context}})),{data:e}}}function lb(){return H({page:ub(),campaign:fb()})}function ub(){return H({url:window.location.href,referrer:document.referrer||void 0,title:document.title})}function fb(){const t=new URLSearchParams(window.location.search);let e=H({source:t.get("utm_source")||void 0,medium:t.get("utm_medium")||void 0,name:t.get("utm_campaign")||void 0,term:t.get("utm_term")||void 0,content:t.get("utm_content")||void 0});return Object.keys(e).length===0?void 0:e}const db="std:auto-events";class hb extends Ue{static get id(){return db}constructor(){super("auto-events"),this._contexts=new WeakMap}install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this)),s.addPayloadPass(this._captureApiRequest.bind(this))}_injectClient(e){const s=new _b(this);this._contexts.set(e,s),e.autoEvents=s.interface}_captureApiRequest({client:e,apiGroup:s,apiName:n,payload:i}){switch(s){case ge.SEARCH:switch(n){case He.SEARCH:this._captureSearchApiRequest(e,i);break}break}}_captureSearchApiRequest(e,{q:s}){if(!s||s==="*")return;const n=this._contexts.get(e);!n||!n._config.search||e.api.interactions.upload({type:"search",search:{keywords:s},context:{custom_context:{channel:"miso_api"}}})}}class _b{constructor(e){this._plugin=e,this._config={search:!0},this.interface=Object.freeze({config:this.config.bind(this)})}config(e={}){if(typeof e!="object")throw new Error(`Config options must be an object or undefined: ${e}`);for(const s of e){if(!this._config.hasOwnProperty(s))continue;const n=this._config[s],i=e[s];i!==n&&(this._config[s]=n,this._plugin._events.emit("config",`${s}: ${n} -> ${i}`))}return Object.freeze({...this._config})}}const pb="std:interactions";class mb{static get id(){return pb}constructor(){}install(e,{addPayloadPass:s}){s(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:s,payload:n}){return e==="interactions"&&s==="upload"?this._modifyPayloadForInteractions(n):n}_modifyPayloadForInteractions({data:e}){return{data:e.map(gb)}}}function gb(t){const{context:e={}}=t,s={...e.custom_context,sdk_version:bl};return s.uuid||(s.uuid=cn()),{...t,context:{...e,custom_context:s}}}const Jr="std:native-fetch";function bb(t){return t.toString().indexOf("[native code]")>-1}let Xr,Wl;const Gl=(()=>{if(bb(window.fetch))return Xr="original",window.fetch;try{const t=document.createElement("iframe");return t.style.display="none",document.head.appendChild(t),Xr="borrowed",t.contentWindow.fetch}catch(t){Wl=t}})();class wb{static get id(){return Jr}install(e,s){if(!Gl){e.debug(`<plugin:${Jr}>`,"[error]",`Failed to obtain native fetch: ${Wl.message}`);return}s.setCustomFetch(Gl),e.debug(`<plugin:${Jr}>`,"[info]",`Using ${Xr} native fetch`)}}const yb="std:api-patch";class Eb extends Ue{static get id(){return yb}constructor(){super("api-patch")}install(e,s){s.addSubtree(this),s.addPayloadPass(this._patchApiPayload.bind(this))}_patchApiPayload(e){let{payload:s,...n}=e;return s&&(s=this._copyMetadataToMeta(s,n),s=this._suppressMetadata(s,n),s=this._suppressUserType(s,n),s)}_copyMetadataToMeta(e,{apiGroup:s}){switch(s){case ge.ASK:return e.metadata?{...e,_meta:e.metadata}:e;default:return e}}_suppressMetadata(e,{apiGroup:s}){switch(s){case ge.SEARCH:case ge.RECOMMENDATION:const{_meta:n,metadata:i,...r}=e;return r;default:return e}}_suppressUserType(e,{apiGroup:s}){switch(s){case ge.SEARCH:case ge.RECOMMENDATION:const{user_type:n,...i}=e;return i;default:return e}}}const Kl="std:header-api-key";class Sb{static get id(){return Kl}install(e,s){s.addUrlPass(this._modifyUrl.bind(this)),s.addHeadersPass(this._modifyHeaders.bind(this)),e.debug(`<plugin:${Kl}>`,"[info]","Send API key in header")}_modifyUrl({url:e}){return e.replace(/[?&]api_key=[^&]*/g,"")}_modifyHeaders({client:e,headers:s}){const{apiKey:n}=e.options;return n?{...s,"X-API-KEY":n}:s}}const vi="miso-logdump",Yl="miso-logdump",Zl=`${Yl}__download-btn`,Jl="Miso Log";class Tb{constructor(e={}){this._options=e,this._logs=[]}config(e={}){this._options={...this._options,...e}}async showDownloadButton(){await Ib();let e=document.getElementById(vi);if(!e){const s=document.createElement("div");s.textContent=this._options.logDownloadButtonText||Jl,s.classList.add(Zl),s.addEventListener("click",()=>this.download()),e=document.createElement("div"),e.id=vi,e.classList.add(Yl),e.appendChild(s),document.body.appendChild(e)}e.style.display="block"}_syncUi(){const e=document.getElementById(vi),s=e&&e.querySelector(`.${Zl}`);s&&(s.textContent=this._options.logDownloadButtonText||Jl)}hideDownloadButton(){const e=document.getElementById(vi);e&&(e.style.display="none")}download(){const e=this._logs,s=new Blob([vb(e)],{type:"application/json"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download=this._filename(),i.click()}_filename(){let{logFilename:e}=this._options;if(typeof e=="function"){const s=Xl();e=e({timestamp:s})}return e&&typeof e=="string"?e:Ab()}clear(){this._logs=[]}}function Ab(){return`miso-log.${Xl()}.jsonl`}function Xl(){return new Date().toISOString().replaceAll(/[\:\.]/g,"-")}function vb(t){return t.map(e=>JSON.stringify(xl(Ob(e),{depth:10}))).join(`
`)}function Ob(t){if(t[0]==="<progressive-markdown>"){const e=t.length;return[...t.slice(0,e-1),Cb(t[e-1])]}return t}function Cb(t){return t&&xl(t,{depth:2})}let eu;async function Ib(){return eu||(eu=vl(Ol("logdump")))}const tu="std:debug";class xb{constructor(e={}){this._options=e,this._logs=new Tb(e)}static get id(){return tu}install(e){this._injectComponents(e),e.debug=(...s)=>this._logr(...s),e.logs=this._logs}config(e={}){this._options={...this._options,...e},this._logs.config(e),e.preserveLog&&this._log(tu,"ua",window.navigator.userAgent)}_injectComponents(e,s=[]){e.on("child",n=>this._injectComponents(n,s)),e.on("subtree",n=>this._injectComponents(n,s.concat(e.meta.path))),e.on("*",(n,i)=>this._handleEvent(e,i,n,s))}_handleEvent(e,{name:s},n,i=[]){if(s==="child"||s==="subtree")return;const r=i.concat(e.meta.path);if(!r.length)switch(s){case"create":this._handleCreateClient(s,n);return}switch(r[0]){case"client":switch(r[1]){case"api":this._handleApiEvent(s,{...n,groupName:r[2]});return}break;case"plugins":r.length===1?this._handlePluginsEvent(s,n):this._handlePluginSpecificEvent(r[1],r.slice(2),s,n);return}this._logw(r.join("."),s,n)}_handleCreateClient(e,s){this._logw("client",e,s)}_handleApiEvent(e,{groupName:s,apiName:n,url:i,bulk:r,...o}){const c=new URL(i).pathname,a=["api",e];if(r&&a.push(`(bulk ${r.bulkId})`),a.push(`POST ${c}`),s==="interactions"){const u=o.payload.data[0],{type:l,custom_action_name:d,context:{custom_context:{property:m}={}}={}}=u,w=l==="custom"&&d?`${l}:${d}`:l;a.push(m?`${w} (${m})`:`${w}`)}a.push([{...o,url:i}]),this._log(...a)}_handlePluginsEvent(e,s){let n=[];Array.isArray(s)&&(n=s.slice(1),s=s[0]),this._log("plugins",e,`${s.id||"(anonymous)"}`,[s,...n])}_handlePluginSpecificEvent(e,s,n,i){this._logw([e,s.join(".")],n,i)}_getPath(e){const s=[];for(let n=e;n;n=n.meta.parent)n.meta.name&&s.push(n.meta.name);return s.reverse()}_logw(e,s,n){n===void 0?this._log(e,s):Array.isArray(n)?this._log(e,s,...n.map(su)):this._log(e,s,su(n))}_log(e,s,...n){this._logr(Lb(e),$b(s),...n)}_logr(...e){const s=this._options.console||{};this._options.preserveLog&&this._logs._logs.push(e),console.log(Rb(s),kb(s),...e)}}function Rb({text:t="Miso"}={}){return`%c${t}`}function kb({color:t="#fff",background:e="#334cbb"}={}){return`color: ${t}; background-color: ${e}; padding: 2px 2px 1px 4px;`}function Lb(t){return`<${typeof t=="string"?t:t.filter(e=>e).join("/")}>`}function $b(t){return`[${t}]`}function su(t){const e=typeof t;return e==="function"||e==="object"&&!Array.isArray(t)?[t]:t}const Pb="std:dry-run";class Nb{constructor(e={}){this._options=e,this.id="std:dry-run",this.name="dry-run"}static get id(){return Pb}install(e,{addUrlPass:s}){s(this._modifyUrl.bind(this))}_modifyUrl({apiGroup:e,apiName:s,url:n}){return e==="interactions"&&s==="upload"?_g(n,"dry_run","1"):n}}function nu(t,e){return e==null||e<=t?t:t+Math.floor(Math.random()*(e-t+1))}const Ub={"code-span":()=>["`","`"],"emphasis-1":()=>to(eo(1),2),"emphasis-2":()=>to(eo(2),2),"emphasis-3":()=>to(eo(3),2),strikethrough:()=>["~","~"],link:({url:t="https://miso.ai"}={})=>["[",`](${t})`]};function eo(t=[1,3]){return t=typeof t=="number"?t:nu(...t),"_*".charAt(nu(0,1)).repeat(t)}const Db=Object.keys(Ub);new Set(Db);function to(t,e){const s=[];for(let n=0;n<e;n++)s.push(typeof t=="function"?t():t);return s}It.plugins.register(xb,Nb,wb,Sb),It.plugins.use(ib),It.plugins.use(ab),It.plugins.use(hb),It.plugins.use(mb),It.plugins.use(Eb);const Fb="data-miso-product-id",so="default",g=Object.freeze({CONTAINER:"container",BANNER:"banner",QUERY:"query",FEEDBACK:"feedback",PRODUCTS:"products",CATEGORIES:"categories",ATTRIBUTES:"attributes",RESULTS:"results",ITEMS:"items",QUESTION:"question",ANSWER:"answer",REASONING:"reasoning",IMAGES:"images",SOURCES:"sources",RELATED_RESOURCES:"related_resources",FOLLOW_UP_QUESTIONS:"follow_up_questions",QUERY_SUGGESTIONS:"query_suggestions",RELATED_QUESTIONS:"related_questions",AFFILIATION:"affiliation",KEYWORDS:"keywords",FACETS:"facets",TOTAL:"total",MORE:"more",SORT:"sort",ERROR:"error"}),Mb=new Set([g.PRODUCTS,g.CATEGORIES,g.ATTRIBUTES,g.RESULTS,g.ITEMS,g.QUESTION,g.ANSWER,g.REASONING,g.IMAGES,g.SOURCES,g.RELATED_RESOURCES,g.FOLLOW_UP_QUESTIONS,g.QUERY_SUGGESTIONS,g.RELATED_QUESTIONS,g.AFFILIATION,g.FACETS,g.TOTAL]);function jb(t){return Mb.has(t)}const qb=new Set([g.PRODUCTS,g.IMAGES,g.SOURCES,g.RELATED_RESOURCES]);function Bb(t){return qb.has(t)}const ke=Object.freeze({IMPRESSION:"impression",VIEWABLE:"viewable",CLICK:"click",SUBMIT:"submit",FEEDBACK:"feedback"}),iu=[ke.IMPRESSION,ke.VIEWABLE,ke.CLICK,ke.SUBMIT,ke.FEEDBACK],ru=[ke.IMPRESSION,ke.VIEWABLE,ke.CLICK],zb=new Set(ru);function Hb(t){return zb.has(t)}const un=Object.freeze({UNTRACKED:"untracked",TRACKING:"tracking",TRIGGERED:"triggered"}),N=Object.freeze({INITIAL:"initial",LOADING:"loading",ERRONEOUS:"erroneous",READY:"ready",ONGOING:"ongoing",DONE:"done",EMPTY:"empty",NONEMPTY:"nonempty",UNANSWERABLE:"unanswerable"}),ts=Object.freeze({ORGANIC:"_organic",SUGGESTED_QUESTIONS:"_suggested_questions",INLINE_QUESTION_LINK:"_inline_question_link"});function ou(t){if(iu.indexOf(t)<0)throw new Error(`Unrecognized event type: ${t}`)}function Vb(t){if(t!==un.UNTRACKED&&t!==un.TRACKING&&t!==un.TRIGGERED)throw new Error(`Unrecognized tracking status: ${t}`)}const _e=Object.freeze({API:"api",LAYOUTS:"layouts",DATA_PROCESSOR:"dataProcessor",TRACKERS:"trackers",INTERACTIONS:"interactions",FILTERS:"filters",PAGINATION:"pagination",TEMPLATES:"templates"}),zt=Object.freeze({QUERY:"query",REFINE:"refine",MORE:"more"});function fn(t,e){return Object.freeze({...t,...e,members:Qb(t.members,e.members),mappings:Object.freeze({...t.mappings,...e.mappings})})}function Qb(t=[],e=[]){return[...new Set([...t,...e])]}function Wb(t,e){return t&&t.length?e&&e.length?[...t,...e]:t:e}function ss(t,e){let s={};for(const n of t)n&&(s=e(s,n));return H(s)}function Oi(t){if(t===void 0)throw new Error(`Expect options to be an object or a boolean value: ${t}`);return typeof t=="boolean"&&(t={active:t}),t}function Gb([t,e]=[]){if(t===!1)return{actor:!1};typeof t=="object"&&e===void 0&&(e=t,t=void 0);let s;if(t&&t.indexOf("/")!==-1&&([s,t]=t.split("/")),t&&typeof t!="string"||e!==void 0&&typeof e!="object")throw new Error(`Invalid arguments for useApi(): ${t}, ${e}`);return H({group:s,name:t,payload:e})}function cu(...t){return t[t.length-1]===!1?!1:ss(t,(e,s)=>Object.assign(e,{...s,payload:Ti(e.payload,s.payload)}))}function Kb(t={}){if(t===!1)return!1;const{results:e,...s}=t;e!==void 0&&(console.warn(`useLayouts({ results: ... }) is deprecated, use useLayouts({ ${g.PRODUCTS}: ... }) instead`),t={...s,[g.PRODUCTS]:e});const n={};for(const[i,r]of Object.entries(t))n[Yb(i)]=au(r);return n}function Yb(t){return t=eg(t),t=tg(t),t}function au(t){if(t===void 0)return;let[e,s]=es(t);return typeof e=="object"&&(s=e,e=void 0),[e,s]}function Zb(...t){return t[t.length-1]===!1?!1:ss(t,(e,s)=>{for(const[n,i]of Object.entries(s))e[n]=Jb(e[n],i);return e})}function Jb(t,e){return e=au(e),e[0]===!1?e:t&&e?[e[0]||t[0],Xb(t[1],e[1])]:e||t}function Xb(t,e){return{...t,...e,link:{...t&&t.link,...e&&e.link},templates:{...t&&t.templates,...e&&e.templates}}}function ew(t){t=es(t);for(const e of t)if(typeof e!="function")throw new Error(`Expect data processor options to be a function: ${e}`);return t}function tw(...t){return t.flat().filter(Boolean)}const Qe=Object.freeze({active:!0,impression:Object.freeze({active:!0}),viewable:Object.freeze({active:!0,area:.5,duration:1e3}),click:Object.freeze({active:!0,lenient:!1})});function sw(t={}){t=Oi(t);const{active:e,...s}=t,n={};for(const[i,r]of Object.entries(s))n[i]=nw(r);return{active:e,...n}}function nw(t={}){t=Oi(t);const{active:e,...s}=t;for(const[n,i]of Object.entries(s))iw(i);return t}function iw(t={}){return t=Oi(t),t}function rw(...t){return t[t.length-1]===!1?!1:ss(t,(e,s)=>{for(const[n,i]of Object.entries(s))i!==void 0&&(e[n]=n==="active"?i:ow(e[n],i));return e})}function ow(t={},e={}){const s={...t};for(const[n,i]of Object.entries(e))i!==void 0&&(s[n]=iu.includes(n)?cw(t[n],i):i);return s}function cw(t={},e={}){return{...t,...e}}function aw(t){if(t===void 0)return;if(t===!1)return{handle:()=>{}};const e=es(t.preprocess);for(const s of e)if(typeof s!="function")throw new Error(`Expect preprocess options to be a function: ${s}`);if(t.handle&&typeof t.handle!="function")throw new Error(`Expect handle options to be a function: ${t.handle}`);return{...t,preprocess:e}}function lw(...t){return t[t.length-1]===!1?!1:ss(t,(e,s)=>Object.assign(e,{...s,preprocess:Wb(e.preprocess,s.preprocess)}))}const uw=Oi;function fw(...t){return t[t.length-1]===!1?!1:ss(t,(e,s)=>Object.assign(e,s))}function dw(t){if(t===void 0)throw new Error(`Expect pagination options to be an object or a boolean value: ${t}`);return typeof t=="boolean"&&(t={active:t}),t}function hw(...t){return t[t.length-1]===!1?!1:ss(t,(e,s)=>Object.assign(e,s))}function _w(t={}){const e={};for(const[s,n]of Object.entries(t))e[s]=lu(n);return e}function lu(t){return t===void 0?void 0:typeof t!="function"?()=>t:t}function pw(...t){return ss(t,(e,s)=>{for(const[n,i]of Object.entries(s))e[n]=mw(e[n],i);return e})}function mw(t,e){return lu(e)||t}const gw=[{key:_e.API,normalize:Gb,merge:cu},{key:_e.LAYOUTS,normalize:Kb,merge:Zb},{key:_e.DATA_PROCESSOR,normalize:ew,merge:tw},{key:_e.TRACKERS,normalize:sw,merge:rw},{key:_e.INTERACTIONS,normalize:aw,merge:lw},{key:_e.FILTERS,normalize:uw,merge:fw},{key:_e.PAGINATION,normalize:dw,merge:hw},{key:_e.TEMPLATES,normalize:_w,merge:pw}];class uu{constructor(){this._events=new bs({target:this}),this._globals={}}_notify(e){this._events.emit(e),this._events.emit("_update",e)}}class fu{constructor(e={},s={}){this._events=new bs({target:this}),this._defaults=s,this._context=e||{},this._locals={},ne(this,{resolved:new du(this),defaults:s}),e&&e.on&&(this._unsubscribes=[e.on("_update",n=>this._notify(n))])}_notify(e){this.resolved._invalidate(e),this._events.emit(e)}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}}class du{constructor(e){this._options=e,this._cache={}}_invalidate(e){this._cache[e]=void 0}_get({key:e,merge:s}){if(this._cache[e]===void 0){const n=this._options,i=n._context[e];this._cache[e]=s(n._defaults[e],i&&i.get(),n._locals[e])}return this._cache[e]}}class hu{constructor(e,s,n,i,r){this._options=e,this._store=s,this._key=n,this._normalize=o=>o!==void 0?i(o):void 0,this._merge=r}get(){return this._store[this._key]}set(e){this._set(this._normalize(e))}merge(e){this._set(this._merge(this.get(),this._normalize(e)))}_set(e){this._store[this._key]=e,this._options._notify(this._key)}}for(const t of gw){const{key:e,normalize:s,merge:n}=t;Object.defineProperty(uu.prototype,e,{get:function(){const i=`_${e}`;return this[i]||(this[i]=new hu(this,this._globals,e,s,n))}}),Object.defineProperty(fu.prototype,e,{get:function(){const i=`_${e}`;return this[i]||(this[i]=new hu(this,this._locals,e,s,n))}}),Object.defineProperty(du.prototype,e,{get:function(){return this._get(t)}})}const bw=[_e.API,_e.LAYOUTS,_e.DATA_PROCESSOR,_e.TRACKERS,_e.INTERACTIONS];function dn(t,e=bw){for(const s of e)ww(t,s)}function ww(t,e){if(e==="api")Object.assign(t,{useApi(...s){return this._options.api.merge(s),this},clearApi(){return this._options.api.set(),this}});else{const s=yw(e);Object.assign(t,{[`use${s}`](n){return this._options[e].merge(n),this},[`clear${s}`](){return this._options[e].set(),this}})}}function yw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _u="q",Ew="qs";function Sw({setValue:t=!0,focus:e=!0,updateUrl:s=!0,param:n=_u,sourceParam:i=Ew,...r}={}){return{setValue:t,focus:e,updateUrl:s,param:n,sourceParam:i,...r}}function pu(t={}){const{setValue:e,focus:s,param:n,sourceParam:i}=this._autoQuery=Sw(t),r=new URLSearchParams(window.location.search),o=r.get(n),c=r.get(i)||void 0,{layout:a}=this._views.get(g.QUERY);a&&(o&&e&&(a.value=o),!o&&s&&a.focus()),o&&this.query(H({q:o,qs:c}))}function mu({value:t,request:e}){if(!this._autoQuery||!this._autoQuery.updateUrl)return;const{param:s,sourceParam:n}=this._autoQuery,i=t&&(t.question||t.keyword)||e&&e.payload&&(e.payload.question||e.payload.q),r=e&&e.payload&&e.payload.metadata&&e.payload.metadata.question_source;if(!i)return;const o=new URL(window.location),c=o.searchParams.get(s),a=o.searchParams.get(n)||ts.ORGANIC;i===c&&r===a||(o.searchParams.set(s,i),r===ts.ORGANIC?o.searchParams.delete(n):o.searchParams.set(n,r),window.history.replaceState({},"",o))}class no extends Ue{constructor(e,s,n){super(e,s),this._name=e,this._plugin=s,this._client=n,this._options=new uu}}dn(no.prototype);function Ci(){return"session"}function io(){return"completions"}function ys(){return"filters"}function Ht(){return"query"}function ro(){return"request"}function gu(){return"response"}function Se(){return"data"}function xt(t){return t?`view:${t}`:"view"}function oo(){return"tracker"}function bu(){return"interaction"}function wu(){return"feedback"}function yu(){return"input"}function co(){return"more"}class Tw{constructor(e={}){(this._events=new bs)._injectSubscribeInterface(this),this._options=e,this._states={},ne(this,{states:new Proxy(this._states,{set(){}})})}update(e,s,n={}){this._states[e]=Object.freeze(s);const i=Object.freeze({action:"update",name:e,state:s,...n});typeof this._options.onUpdate=="function"&&this._options.onUpdate(i),n.silent||this._events.emit(e,s),typeof this._options.onEmit=="function"&&this._options.onEmit(i)}trigger(e,s){const n=Object.freeze({action:"trigger",name:e,state:s});typeof this._options.onUpdate=="function"&&this._options.onUpdate(n),this._events.emit(e,s),typeof this._options.onEmit=="function"&&this._options.onEmit(n)}}class Aw{constructor(e){this._hub=e,this._sessionIndex=0}restart(){const e=Object.freeze({uuid:cn(),index:this._sessionIndex++,meta:{}});this._hub.update(Ci(),e)}}function Eu(t,e){if(!e)return!1;const{session:s}=t.states;return s&&s.index===e.index}class vw{constructor(e,{source:s,options:n,polling:i=!0}){this._hub=e,this._source=s,this._options=n,this._polling=i,this._unsubscribes=[e.on(Ci(),r=>this._handleSession(r)),e.on(ro(),r=>this._handleRequest(r))]}get active(){return this._options.resolved.api.actor!==!1}get source(){return this._source}_handleSession(e){(!this._session||e.index!==this._session.index)&&(this._ac&&this._ac.abort({type:"new-session",message:"A new session is created, discarding the old one."}),this._ac=new AbortController),this._session=e}async _handleRequest(e){if(!this.active)return;const{session:s,...n}=e;try{const{signal:i}=this._ac||{},r={...e.options,signal:i},o=await this._source({session:s,...n,options:r});if(o&&o[Symbol.asyncIterator]){if(o._response&&this._emitResponseWithSessionCheck({session:s,request:n,value:o._response}),this._polling){let c;for await(c of o){if(!Eu(this._hub,s))break;this._emitResponse({session:s,request:n,value:c})}}}else this._emitResponseWithSessionCheck({session:s,request:n,value:o})}catch(i){this._error(i),this._emitResponseWithSessionCheck({session:s,request:n,error:i})}}_emitResponseWithSessionCheck(e){Eu(this._hub,e.session)&&this._emitResponse(e)}_emitResponse(e){this._hub.update(gu(),e)}_error(e){console.error(e)}_destroy(){this._ac&&this._ac.abort({type:"data-actor-destroy",message:"Data actor is destroyed."});for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class Ow{constructor(e){this._get=typeof e=="function"?e:()=>e,this._handlers=[],this._elementUpdatedHandlers=[],this.sync()}get current(){return this._element}on(e,s){if(e==="element")return this._onElementUpdated(s);const n=this._get();return n&&n.addEventListener(e,s),this._handlers.push({event:e,handler:s}),()=>this._off(e,s)}_off(e,s){const n=this._get();n&&n.removeEventListener(e,s),Ym(this._handlers,i=>i.handler===s)}_onElementUpdated(e){return this._elementUpdatedHandlers.push(e),()=>{Vr(this._elementUpdatedHandlers,e)}}sync({silent:e=!1}={}){const s=this._get();if(this._element===s)return;if(this._offAllFromCurrentElement(),s)for(const{event:i,handler:r}of this._handlers)s.addEventListener(i,r);const n=this._element;if(this._element=s,!e)for(const i of this._elementUpdatedHandlers)try{i(s,n)}catch(r){console.error(r)}}_offAllFromCurrentElement(){if(this._element)for(const{event:e,handler:s}of this._handlers)this._element.removeEventListener(e,s)}destroy(){this._offAllFromCurrentElement()}}const{IMPRESSION:Cw,VIEWABLE:Iw,CLICK:xw}=ke,{UNTRACKED:Ii,TRIGGERED:Rw}=un,Su=Object.freeze({[Cw]:Ii,[Iw]:Ii,[xw]:Ii});class Tu{constructor(e){this.sessionId=e,this._states=new Map}getFullState(e){const s=this._states.get(this._getKey(e));return s?{...s}:Su}get(e,s){const n=this._states.get(this._getKey(e));return n&&n[s]||Ii}set(e,s,n){ou(s),Vb(n);for(const i of es(e))this._setOne(i,s,n)}untriggered(e,s){return e.filter(n=>this.get(n,s)!==Rw)}_getKey(e){return e.product_id||e.text||e.id||e}_setOne(e,s,n){Zm(this._states,this._getKey(e),()=>({...Su}))[s]=n}}const kw=[Symbol("itemless")];class ao{constructor({hub:e,role:s,options:n}){this._hub=e,this._role=s,this._options=n,this._states=new Tu(this._getSessionId())}get options(){return typeof this._options=="function"?this._options():this._options}getState(e){return this._states.getFullState(e)}_trigger(e,s,n){ou(e);const{options:i}=this;if(!i||i.active===!1)return;this._syncSession();const{deduplicated:r=!0,itemless:o=!1}=i;if(r){if(o&&(s=kw),s=this._states.untriggered(es(s),e),s.length===0)return;this._states.set(s,e,un.TRIGGERED)}this._sendToHub({type:e,items:o?void 0:s,...n})}submit({value:e}){this._syncSession(),this._sendToHub({type:ke.SUBMIT,value:e})}_sendToHub(e){this._hub.trigger(oo(),Object.freeze(H({role:this._role,...e})))}_syncSession(){const e=this._getSessionId();e&&(!this._states||e!==this._states.sessionId)&&(this._states=new Tu(e))}_getSessionId(){const{session:e}=this._getViewState()||{};return e&&e.uuid}_getMisoId(){const e=this._getViewState();return e&&e.meta&&e.meta.miso_id||void 0}_getRequestPayload(){const{request:e}=this._getViewState()||{};return e&&e.payload}_getViewState(){return this._hub.states[xt(this._role)]}}for(const t of ru)ao.prototype[t]=function(e,s){this._trigger(t,e,s)};function Lw(t,e){return t===e||t&&e&&t.status===e.status&&t.error===e.error&&t.value===e.value&&t.ongoing===e.ongoing&&Au(t)===Au(e)&&$w(t.session,e.session)}function $w(t,e){return t===e||t&&e&&t.uuid===e.uuid}function Au(t){return t&&t.meta&&t.meta.empty}class vu{constructor(e,s){this._events=new bs({target:this}),this._views=e,this._mapping=Ou((e._roles.mappings||{})[s]||s),ne(this,{role:s,interface:new Pw(this)})}get hub(){return this._views._hub}get element(){return this._element}set element(e){e!==this._element&&(this._element&&this._safeApplyOnLayout("unrender",this._element),this._element=e,this._proxyElement&&this._proxyElement.sync(),this._events.emit("element",e),this.refresh({force:!0}))}get proxyElement(){return this._proxyElement||(this._proxyElement=new Ow(()=>this.element)),this._proxyElement}get layout(){return this._layout}set layout(e){if(e===this._layout)return;if(e&&typeof e.render!="function")throw new Error("Render function is mandatory in a layout.");const{element:s}=this;s&&this._safeApplyOnLayout("unrender",s),this._safeApplyOnLayout("destroy"),this._layout=e,e&&(e._view=this,typeof e.initialize=="function"&&e.initialize(this)),this.refresh({force:!0})}get tracker(){const{role:e}=this;if(e===g.CONTAINER)return this._views._getContainerTracker();if(!this._tracker){const{hub:s}=this;this._tracker=new ao({hub:s,role:e,options:()=>this.trackerOptions})}return this._tracker}get workflow(){return this._views._workflow}get workflowOptions(){return this._views._options.resolved}get trackerOptions(){return this._views._getTrackerOptions(this.role)}get filters(){return this._views.filters}async refresh({force:e=!1,data:s}={}){if(!this._layout)return;const{element:n}=this;if(!n)return;const i=this._data;if(this._data=s=this._sliceData(s||this._views._getData()),!e&&Lw(s,i))return;const{session:r,status:o,ongoing:c,request:a,meta:u,value:l}=s,d={session:r,status:o,ongoing:c,request:a,meta:u,data:l,...Nw(this.role,s)},m=(w={},_)=>{w!==!1&&this.updateState({...d,...w},_)};try{await this._layout.render(n,s,{notifyUpdate:m})}catch(w){this._error(w),m({error:w})}}updateState(e,{silent:s=!1}={}){const n=e.error?N.ERRONEOUS:e.status;e=this._state=Object.freeze(H({...e,status:n}));const{role:i}=this;this.hub.update(xt(i),e,{silent:s})}_sliceData(e){const{value:s,error:n,status:i,meta:r,...o}=e,c={value:this._mapping(e,this),status:i,data:s,meta:r,...o};return this.role===g.CONTAINER&&(c.meta={...r,empty:this._isContainerEmpty(e)}),H(c)}_isContainerEmpty(e){const{element:s}=this;if(!s)return!1;for(const{role:n}of s.components){if(!jb(n))continue;const r=Ou((this._views._roles.mappings||{})[n]||n)(e,this);if(!Cu(n,r))return!1}return!0}_syncSize(){this._element&&this._safeApplyOnLayout("syncSize",this._element)}_safeApplyOnLayout(e,...s){if(!(!this._layout||typeof this._layout[e]!="function"))try{this._layout[e](...s)}catch(n){this._error(n)}}_error(e){this._views._error(e)}_destroy(){this._safeApplyOnLayout("destroy"),this._proxyElement&&this._proxyElement.destroy()}}class Pw{constructor(e){qt(this,e,["role","layout","element","proxyElement","refresh","on","tracker"])}}function Ou(t){switch(typeof t){case"function":return t;case"string":return e=>e.value&&e.value[t];default:throw new Error(`Invalid mapping function: ${t}`)}}function Nw(t,e){return Uw(e)?{empty:!!Cu(t,e&&e.value)}:{}}function Uw(t){return t.status===N.READY&&!t.ongoing}function Cu(t,e){switch(t){case g.ANSWER:case g.REASONING:return!e||!e.value;default:return e===void 0||(Array.isArray(e)||typeof e=="string")&&!e.length}}function Dw(t={},e={}){return Object.freeze(H({...t,...e,facets:Object.freeze(H({...t.facets,...e.facets}))}))}function Fw({sort:t}={}){return H({facets:Object.freeze({}),sort:Mw(t)})}function Mw(t){if(!t)return;const{options:e=[]}=t;for(const s of e)if(s.default)return Object.freeze(s);return Object.freeze(e[0])}class jw{constructor(e,{facets:s}={}){this._views=e,this._hub=e._hub;const n=this._error=this._error.bind(this);this._events=new bs({target:this,error:n}),ne(this,{facets:new qw(this,s)}),this._unsubscribes=[e._options.on("filters",()=>this._syncOptions())],this._syncOptions(),this._states=void 0}_syncOptions(){const e=this._views._options.resolved.filters;this._initialStates=Fw(e),this.apply({silent:!0})}_getStates(){return this._states||this._initialStates}update(e){const s=this._getStates();this._states=Dw({...s,...e});const n=this._getStates();this._events.emit("update",{updates:e,states:n,oldStates:s})}reset({silent:e=!1}={}){const s=this._states;this._states=void 0;const n=this._getStates();this._hub.update(ys(),n,{silent:e}),this._events.emit("reset",{states:n,oldStates:s})}apply({silent:e=!1}={}){const s=this._getStates();this._hub.update(ys(),s,{silent:e}),!e&&this._events.emit("apply")}_error(e){this._views._error(e)}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class qw{constructor(e,s={}){this._filters=e,this._options=s}isSelected(e,s){return this._getFieldValues(e).includes(s)}select(e,s){this.isSelected(e,s)||this._select(e,s)}unselect(e,s){this.isSelected(e,s)&&this._unselect(e,s)}toggle(e,s){this.isSelected(e,s)?this._unselect(e,s):this._select(e,s)}_getFieldValues(e){return this._filters._getStates().facets[e]||[]}_select(e,s){const n=this._options.multivalued?[...this._getFieldValues(e),s]:[s];n.sort(),this._filters.update({facets:{[e]:n}})}_unselect(e,s){let n=this._getFieldValues(e).filter(i=>i!==s);n.length===0&&(n=void 0),this._filters.update({facets:{[e]:n}})}}const Iu=Symbol.for("miso:tracked");function lo(t){return!!t[Iu]}function uo(t){t[Iu]=!0}const xi=Object.freeze({impression:Object.freeze({}),viewable:Object.freeze({area:.5,duration:1e3}),click:Object.freeze({lenient:!1})});function fo(t,e){return!!e&&{...t,...e}}function Bw(t){if(t===!1)return!1;if(t===!0&&(t={}),typeof t!="object")throw new Error(`Invalid options: ${t}`);const{impression:e={},viewable:s={},click:n={},...i}=t;return H({...xi,...i,impression:fo(xi.impression,e),viewable:fo(xi.viewable,s),click:fo(xi.click,n)})}function zw(t={},e){return t?typeof t.validate=="function"?t.validate(e):t.lenient?!0:!(lo(e)||e.button!==0||e.defaultPrevented||!Qr(e.target,s=>s.tagName==="A"&&s.href||void 0)):!1}class Hw{constructor(e,{workflow:s,extensions:n,layouts:i,roles:r,options:o}){this._hub=e,this._workflow=s,this._workflowName=s._name,this._extensions=n,this._layoutFactory=i,this._options=o,this._roles=r,this._containers=new Map,this._containerTracker=void 0,this._views={},this._filters=new jw(this);for(const a of r.members)a!==g.CONTAINER&&(this._views[a]=new vu(this,a));ne(this,{interface:new Vw(this),trackers:new Qw(this,r.members)});const c=()=>this.syncSize();window.addEventListener("resize",c),this._unsubscribes=[()=>window.removeEventListener("resize",c),e.on(Se(),a=>this.refresh({data:a})),o.on("layouts",()=>this._syncLayouts())],this._syncLayouts()}get filters(){return this._filters}addContainer(e){if(this._containers.has(e))return;const s=new vu(this,g.CONTAINER);s.layout=this._createLayout(g.CONTAINER),s.element=e,this._containers.set(e,s);const{components:n}=e;for(const i of n)this.addComponent(i)}removeContainer(e){const s=this._containers.get(e);if(!s)return;const{components:n}=e;for(const i of n)this.removeComponent(i);s._destroy(),this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e}removeComponent(e){this._getViewByElement(e).element=void 0}updateComponentRole(e,s,n){}containsElement(e){return this._containers.has(e)||this._views[e.role]}refreshElement(e){const s=e.isContainer?this._containers.get(e):this._getViewByElement(e);s&&s.refresh({force:!0})}_getViewByElement(e){let{role:s}=e;if(!s)throw new Error("Component must have a role");return this.get(s)}_syncLayouts(){const{layouts:e}=this._options.resolved;if(e===!1){for(const s of this._containers.values())s.layout=void 0;for(const s of Object.values(this._views))s.layout=void 0}else for(let[s,[n,i]]of Object.entries(e)){const r=()=>this._layoutFactory.create(n,{...i,role:s,workflow:this._workflowName});if(s===g.CONTAINER)for(const o of this._containers.values())o.layout=r();else{const o=this.get(s);o&&(o.layout=r())}}}_createLayout(e){const s=this._options.resolved.layouts[e];if(!s)return;const[n,i]=s;return this._layoutFactory.create(n,{...i,role:e,workflow:this._workflowName})}get(e){return this._views[e]}get views(){return this._getViews(!0)}_getViews(e=!0){return e?[...this._containers.values(),...Object.values(this._views)]:[...Object.values(this._views),...this._containers.values()]}syncSize(){for(const e of Object.values(this._views))e._syncSize()}async refresh({force:e,data:s}={}){s=this._getData(s);let n=this._getViews(!0);await Promise.all(n.map(i=>i.refresh({force:e,data:s})))}_getData(e){return e||this._hub.states[Se()]}_getTrackerOptions(e){const s=this._options.resolved.trackers;return Bw(s&&s[e]||!1)}_getContainerTracker(){if(!this._containerTracker){const e=this._hub,s=g.CONTAINER;this._containerTracker=new ao({hub:e,role:s,itemless:!0,options:()=>this._getTrackerOptions(s)})}return this._containerTracker}_error(e){console.error(e)}_destroy({dom:e}={}){for(const s of this._getViews(!1))s._destroy();for(const s of this._unsubscribes)s();this._unsubscribes=[],this._filters._destroy()}}class Vw{constructor(e){this._actor=e,qt(this,e,["syncSize","refresh","trackers","filters"])}get(e){return this._actor.get(e).interface}get all(){return this._actor.views.map(e=>e.interface)}}class Qw{constructor(e,s){this._views=e;for(const n of s)n!==g.CONTAINER&&Object.defineProperty(this,n,{get:()=>e.get(n).tracker});Object.defineProperty(this,g.CONTAINER,{get:()=>e._getContainerTracker()})}}class Ww{constructor(e){this._hub=e,this._unsubscribes=[e.on(wu(),s=>this._trigger(s))]}_trigger(e){this._hub.trigger(oo(),{type:ke.FEEDBACK,result_type:"answer",value:e.unselected?"unselected":e.value})}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class Gw{constructor(e,{client:s,options:n}){this._client=s,this._options=n,this._unsubscribes=[e.on(bu(),i=>this._handle(i))]}_handle(e){e=es(e),e.length!==0&&this._client.api.interactions.upload(e,{merge:!0})}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}function xu(t){return async({group:e,name:s,payload:n,options:i})=>{if(e===ge.ASK)switch(s){case He.QUESTIONS:return t.api.ask.questions(n,i);case He.SEARCH:return t.api.ask.search(n,i)}return t.api[e]._run(s,n,i)}}class ho{constructor({role:e,workflow:s,...n}={}){ne(this,{role:e,workflow:s,options:n}),this._unsubscribes=[],this._rendered=new WeakMap,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}async render(e,s,n={}){this._syncElement(e);const i=this._rendered.get(e),r=Ei(!1);s=this._preprocess({state:s,rendered:i},{skip:r.t})||s,this._updatePending(s,n),r.value||this._handleInput({state:s,rendered:i},n)}_syncElement(e){this._element!==e&&this._rendered.delete(this._element),this._element=e}_preprocess({state:e}){return e}_updatePending(e,s){this._pending=[Object.freeze(e),s]}_takePending(){const e=this._pending;return this._pending=void 0,e}_handleInput(){this._requestRaf()}_requestRaf(){this._requested||(this._requested=!0,wi(e=>this._doRaf(e)))}_doRaf(e){this._requested&&(this._requested=!1,this._applyRender(e))}_applyRender(e,s={}){if(!this._pending)return;let[n,{notifyUpdate:i}]=this._takePending();n=Object.freeze({...n,timestamp:e});const r=this._rendered.get(this._element),o=Ei([]),c=Ei({});this._render(this._element,{state:n,rendered:r,timestamp:e},{notifyUpdate:o.args,writeToState:c.merge,...s}),n=Object.freeze({...n,...c.value}),this._rendered.set(this._element,n),i&&i(...o.value),this._afterRender(this._element,n)}_render(){throw new Error("Unimplemented")}_afterRender(){}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[],this._view=void 0,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}}function Ru(...t){return t.reduce((e,s)=>(e[s]=Kw(s),e),{})}function Kw(t){return()=>{throw new Error(`Template '${t}' is not implemented.`)}}function Yw(t,e,s,n){const{templates:i}=t,[r,o]=Vt(t,s);return[r,(i.imageBlock||Ss)(t,s,n),(i.infoBlock||i.productInfoBlock||_o)(t,s,n),o].join("")}function Zw(t,e,s){const[n,i]=Vt(t,s);return`${n}${s.value||s.text||s}${i}`}function Jw(t,e,s,n){const{templates:i}=t,[r,o]=Vt(t,s);return[r,(i.imageBlock||Ss)(t,s,n),(i.infoBlock||i.articleInfoBlock||Lu)(t,s,n),(i.indexBlock||bo)(t,s,n),o].join("")}function ku(t,e,s,n){const{templates:i}=t,[r,o]=Vt(t,s);return[r,(i.indexBlock||bo)(t,s,n),(i.infoBlock||i.articleInfoBlock||po)(t,s,n),o].join("")}function Xw(t,e,s,n){const{templates:i}=t,[r,o]=Vt(t,s);return[r,(i.imageBlock||Ss)(t,s,n),(i.infoBlock||i.imageInfoBlock||$u)(t,s,n),o].join("")}function ey(t,e,s,n){const{templates:i}=t,[r,o]=Vt(t,s,{link:!1});return[r,(i.infoBlock||i.affiliationInfoBlock||ty)(t,s,n),(i.imageBlock||Ss)(t,s,{brand:!0,...n}),o].join("")}function ty(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||Es)(t,e,s),(i.descriptionBlock||Ri)(t,e,s),(i.priceBlock||go)(t,e,s),(i.ctaBlock||wo)(t,e,s)].join("")}</div>`}function _o(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||Es)(t,e,s),(i.descriptionBlock||Ri)(t,e,s),(i.priceBlock||go)(t,e,s)].join("")}</div>`}function Lu(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||Es)(t,e,s),(i.dateBlock||mo)(t,e,s),(i.descriptionBlock||Ri)(t,e,s),(i.ctaBlock||wo)(t,e,s)].join("")}</div>`}function po(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||Es)(t,e,s),(i.authorsAndDateBlock||Uu)(t,e,s)].join("")}</div>`}function $u(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-info-container">${[(i.titleBlock||Es)(t,e,s)].join("")}</div>`}function Es({className:t},{title:e,_title_with_markups:s}){const n=yo(s)||Je(e);return n?`<div class="${t}__item-title">${n}</div>`:""}function Pu({className:t},{brand:e,brand_logo:s}){if(!e&&!s)return"";const n=s?`<img class="${t}__item-brand-logo" src="${s}"${e?` alt="${e}"`:""}>`:`<div class="${t}__item-brand">${e}</div>`;return`<div class="${t}__item-brand-container">${n}</div>`}function Ri({className:t},{snippet:e,description:s}){return e?`<div class="${t}__item-snippet">${yo(e)}</div>`:s?`<div class="${t}__item-desc">${Je(s)}</div>`:""}function mo({className:t,templates:e},{created_at:s,updated_at:n,published_at:i}){const r=i||s||n;return r?`<div class="${t}__item-date">${ju(r,e.date)}</div>`:""}function Nu({className:t},{authors:e}){return e&&Array.isArray(e)&&e.length?`<div class="${t}__item-authors">${e.join(", ")}</div>`:""}function Uu(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__item-authors-and-date-container">${[(i.authorsBlock||Nu)(t,e,s),(i.dateBlock||mo)(t,e,s)].join("")}</div>`}function go(t,e){const{className:s,templates:n}=t,{sale_price:i,original_price:r,currency:o="USD"}=e,c=i||r;if(!c)return"";const a=r!==void 0&&i!==void 0&&i<r,u=e.discount_rate_percent||(a?Math.floor((1-i/r)*100):void 0);let l="";if(a&&(l+=`<span class="${s}__item-original-price miso-price" data-currency="${o}">${r}</span><br>`),l+=`<span class="${s}__item-price miso-price" data-currency="${o}">${c}</span>`,u){const d=(n.discountRateText||Du)(t,{...e,discount_rate_percent:u});l+=` <span class="${s}__item-discount-rate">${d}</span>`}return`<div class="${s}__item-price-container">${l}</div>`}function Du(t,{discount_rate_percent:e}){return`(${e}% off)`}function Ss(t,e,s={}){const{className:n,templates:i}=t,{cover_image:r,image_src:o,image_alt:c}=e;if(!r&&!o)return"";const a=o?"image":"cover-image",u=a==="image"?`<img class="${n}__item-${a}" src="${o}"${c?` alt="${c}"`:""}>`:`<img class="${n}__item-${a}" src="${r}">`,l=a==="cover-image"&&s.brand?(i.brandBlock||Pu)(t,e,s):"";return`<div class="${n}__item-${a}-container">${u}${l}</div>`}function bo({className:t},e,{index:s}){return`<div class="${t}__item-index-container"><span class="${t}__item-index miso-citation-index" data-index="${s+1}"></span></div>`}function wo(t,e,s){const{className:n,templates:i}=t,r=Rt.asFunction(i.cta)(t,e,s);return r?`<div class="${n}__item-cta-container">${r}</div>`:""}function sy(t,e,s){const{templates:n}=t,{url:i}=e;if(!i)return"";const[r,o]=Vt(t,{url:i},{classSuffix:"item-cta",role:"cta"}),c=Rt.asFunction(n.ctaText)(t,e,s);return c?`${r}${c}${o}`:""}function Vt({className:t,options:e={}},{product_id:s,url:n},{classSuffix:i="item-body",role:r="item",...o}={}){const c=o.link!==!1&&n?"a":"div",a=o.link!==!1&&n?`href="${n}" ${ny(e.link)}`:"",u=s?`${Fb}="${s}"`:"",l=r?`data-role="${r}"`:"";return[`<${c} class="${t}__${i}" ${l} ${u} ${a}>`,`</${c}>`]}function ny(t={}){const{target:e="_blank",rel:s="noopener",open:n=!0}=t;let i="";return n&&(e&&(i+=` target="${e}"`),s&&(i+=` rel="${s}"`)),i}const Fu=Object.freeze({locale:"en-US",year:"numeric",month:"short",day:"numeric"}),Mu="en-US";function ju(t,e=Fu){switch(typeof e){case"function":return e(t);case"string":return new Date(t).toLocaleDateString(e);case"object":return new Date(t).toLocaleDateString(e.locale||Fu.locale,e);default:throw new Error(`Invalid date format: ${e}`)}}function iy(t,e=Mu){switch(typeof e){case"function":return e(t);case"string":return new Intl.NumberFormat(e).format(t);case"object":return new Intl.NumberFormat(e.locale||Mu.locale,e).format(t);default:throw new Error(`Invalid number format: ${e}`)}}function yo(t){return t&&t.replace(/<\/mark>\s+<mark>/g,"</mark>&nbsp;<mark>")}function ry(t=""){return typeof t=="function"?t:()=>t}const Rt=Object.freeze({tagPair:Vt,formatDate:ju,formatNumber:iy,formatHtmlWithMarkup:yo,escapeHtml:Je,asFunction:ry});class Xe extends ho{constructor({className:e,templates:s,...n}={}){super(n),ne(this,{className:e,templates:{...Ru("root"),...s,helpers:Rt}})}_preprocess({state:e}){const s=this.templates.root(this,e);return{...e,html:s}}_render(e,{state:s}){e.innerHTML=s.html}}const oy="miso-banner";class ki extends HTMLElement{static get tagName(){return oy}async connectedCallback(){ki.MisoClient.ui.layouts.create("banner").render(this)}}class qu{constructor(){this._entries=new WeakMap}isTracked(e){return this._entries.has(e)}async track(e,s={}){if(!s||this._entries.get(e))return!1;const i=new AbortController,{signal:r}=i;this._entries.set(e,{ac:i});let o=!1;try{await Wr(e,{...s,signal:r}),o=!0}catch(c){if(c.name!=="AbortError")throw c}finally{this._entries.delete(e)}return o}untrack(e){const s=this._entries.get(e);s&&(s.ac.abort(),this._entries.delete(e))}}const cy="container";class Bu extends ho{static get type(){return cy}constructor({logo:e="auto",...s}={}){super({logo:e,...s}),this._impression=!1,this._viewables=new qu}_syncElement(e){this._element!==e&&this._viewables.untrack(this._element),super._syncElement(e)}_render(e,s){this._syncBanner(e),this._syncStatus(e,s),this._trackInteractions(e,s)}_afterRender(e,s){this._trackInteractions(e,s)}_syncBanner(e){const s=ki.tagName,n=this._shallRenderBanner(e),i=e.querySelector(s);n&&!i?e.insertAdjacentHTML("beforeend",`<${s} visible-when="ready"></${s}>`):!n&&i&&i.remove()}_shallRenderBanner(e){const{logo:s}=this.options,{logo:n}=e,i=n!==void 0&&n!=="auto"?n:s;return i==="auto"?e.components.some(({role:r})=>ay(r)):!!i}_syncStatus(e,{state:s}){if(!e)return;const{status:n,ongoing:i,meta:{miso_id:r,empty:o=!1,unanswerable:c=!1}={}}=s,a=[n,o?N.EMPTY:N.NONEMPTY];n===N.READY&&a.push(i?N.ONGOING:N.DONE),c&&a.push(N.UNANSWERABLE),e.setAttribute("status",a.join(" ")),r?e.setAttribute("miso-id",r):e.removeAttribute("miso-id")}_trackInteractions(e,s){const{status:n}=s;n===N.READY&&(this._trackImpression(),this._trackViewable(e))}_trackImpression(){const{impression:e}=this._view.tracker.options||{};e&&(this._impression||(this._impression=!0,this._view.tracker.impression()))}async _trackViewable(e){const{viewable:s}=this._view.tracker.options||{};s&&await this._viewables.track(e,s)&&this._view.tracker.viewable()}}function ay(t){return t===g.PRODUCTS||t===g.ANSWER}const ly="error",uy="miso-error";function fy(t,e){const{className:s,templates:n}=t,{status:i,value:r}=e;return i!=="erroneous"?"":`<div class="${s}"><div class="${s}__message">${n.message(t,r)}</div></div>`}function dy(t,e){return`Error: ${e.message||e}`}const zu=Object.freeze({root:fy,message:dy});class Hu extends Xe{static get type(){return ly}static get defaultTemplates(){return zu}constructor({className:e=uy,templates:s,...n}={}){super({className:e,templates:{...zu,...s},...n})}}const hy='<svg viewBox="0 0 500 200"><path d="M131.1,39.4 C144.3,39.4 155,43.8 163.2,52.7 C171.3,61.3 175.2,72.9 175.2,87.6 L175.2,159.1 L140.4,159.1 L140.4,90.6 C140.4,78.7 134.6,71.5 123.7,71.5 C112.3,71.5 105.5,79.7 105.5,93.4 L105.5,159.1 L70.7,159.1 L70.7,90.6 C70.7,78.7 64.9,71.5 54,71.5 C42.6,71.5 35.8,79.7 35.8,93.4 L35.8,159.1 L1,159.1 L1,42.7 L35.8,42.7 L35.8,53.4 C42.1,44.1 52.6,39.4 67,39.4 C80.5,39.4 90.7,44.5 97.4,54.8 C104.6,44.5 115.8,39.4 131.1,39.4 Z M202,42.4 L238.4,42.4 L238.4,159.1 L202,159.1 Z M202,0 L238.4,0 L202,36.4 Z M302.6,76.6 C302.6,81.2 311.7,83.8 323,86.8 C339.2,90.3 360.5,98.7 360.3,124 C360.3,136.6 355.6,146.1 346.2,152.6 C336.8,158.9 325.3,162.1 311.5,162.1 C286.9,162.1 270,152.8 261.1,134.5 L291.6,117.3 C294.6,126.3 301.4,131 311.5,131 C319.9,131 324.2,128.7 324.2,123.8 C324.2,119.1 315,116.3 303.8,113.5 C287.6,109.1 266.5,101.2 266.5,77.5 C266.5,65.4 270.9,56.1 279.6,49.4 C288.5,42.6 299.5,39.4 312.4,39.4 C331.9,39.4 348.6,48.2 358.2,64.3 L328.2,80.3 C324.4,73.6 319.2,70.1 312.4,70.1 C305.9,70.1 302.6,72.2 302.6,76.6 Z M480.4,144.5 C468.4,156.3 453.7,162.1 436.3,162.1 C419,162.1 404.2,156.3 392.2,144.5 C380.3,132.6 374.2,118 374.2,100.8 C374.2,83.6 380.3,69.1 392.2,57.3 C404.2,45.4 419,39.4 436.3,39.4 C453.7,39.4 468.4,45.4 480.4,57.3 C492.4,69.1 498.5,83.6 498.5,100.8 C498.5,118 492.4,132.6 480.4,144.5 Z M417.1,120.5 C422.2,125.6 428.6,128.2 436.3,128.2 C444.1,128.2 450.4,125.6 455.5,120.5 C460.7,115.4 463.3,108.9 463.3,100.8 C463.3,92.6 460.7,86.1 455.5,81 C450.4,75.9 444.1,73.3 436.3,73.3 C428.6,73.3 422.2,75.9 417.1,81 C411.9,86.1 409.3,92.6 409.3,100.8 C409.3,108.9 411.9,115.4 417.1,120.5 Z" /></svg>',_y='<svg viewBox="0 0 16 16"><path d="M8.342 3.652 4.979 5.708a1 1 0 0 0-.479.852v5.561a1 1 0 0 0 .87.992l6.029.79a1 1 0 0 0 1.042-.583l2.534-5.65a1 1 0 0 0-.74-1.394l-3.543-.623.9-3.1A2.097 2.097 0 0 0 10.297 0L8.719 3.237a1 1 0 0 1-.377.415ZM1 6.5a1.5 1.5 0 0 1 3 0v6a1.5 1.5 0 0 1-3 0Z"/></svg>',py="banner",my="miso-banner";function gy(t){const{className:e,templates:s}=t;return`<div class="${e}"><div class="${e}__logo">${s.logo(t)}</div></div>`}const Vu=Object.freeze({root:gy,logo:()=>hy});class by extends Xe{static get type(){return py}static get defaultTemplates(){return Vu}constructor({className:e=my,templates:s,...n}={}){super({className:e,templates:{...Vu,...s},...n})}}function wy(t,e,s){const n=new Map,i=new Map,r=[];for(let o=0;o<t.length;o++){const c=t[o],a=s[o],u=e[o],l=Object.freeze({index:o,key:c,value:u,element:a});n.set(c,l),i.set(a,l),r.push(l)}return{k2b:n,e2b:i,entries:r}}function Qu(t,e){const s=[];for(const n of e.entries){const i=t.e2b.get(n.element);(!i||i.key!==n.key)&&s.push(n)}return s}class Wu{constructor(){this._k2b=new Map,this._e2b=new Map,this._entries=[]}get entries(){return[...this._entries]}get(e){return this._e2b.get(e)||void 0}find(e){return this._k2b.get(e)||void 0}update(e,s,n){const i=wy(e,s,n),r={k2b:this._k2b,e2b:this._e2b,entries:this._entries},o=Qu(r,i),c=Qu(i,r);return this._k2b=i.k2b,this._e2b=i.e2b,this._entries=i.entries,{bounds:o,unbounds:c}}clear(){const e=this._entries;return this._k2b=new Map,this._e2b=new Map,this._entries=[],{bounds:[],unbounds:e}}}function Eo(t){an(t,yy.prototype)}class yy{_initTrackable(){this._bindings=new Wu,this._viewables=new qu}_syncBindings(e,s){const n=this._getItems(s)||[],i=n.map(a=>this._getItemKey(a)),r=this._getItemElements(e),{bounds:o,unbounds:c}=this._bindings.update(i,n,r);this._onBindingsUpdate(o,c)}_clearBindings(){const{bounds:e,unbounds:s}=this._bindings.clear();this._onBindingsUpdate(e,s)}_getItemKey(e){return e.product_id||e.text||e.id||e}_getItems(e){throw new Error("Not implemented.")}_getItemElements(e){throw new Error("Not implemented.")}_onBindingsUpdate(e,s){this._trackImpressions(e),this._untrackViewables(s),this._trackViewables(e)}_trackImpressions(e){if(e.length===0)return;const{impression:s}=this._view.tracker.options||{};s&&this._view.tracker.impression(e.map(({value:n})=>n))}_untrackViewables(e){for(const{element:s}of e)this._viewables.untrack(s)}_trackViewables(e){if(e.length===0)return;const{viewable:s}=this._view.tracker.options||{};if(s)for(const{value:n,element:i}of e)(async()=>await this._viewables.track(i,s)&&this._view.tracker.viewable([n]))()}_trackClick(e,s){const{click:n}=this._view.tracker.options||{};zw(n,e)&&(uo(e),this._view.tracker.click([s.value]))}_destroyTrackable(){const{unbounds:e}=this._bindings.clear();this._untrackViewables(e)}}function Ey(t){an(t,Sy.prototype)}class Sy{_initTriggerable(){this._trigger=void 0}_syncTrigger(e,s){if(!this.options.infiniteScroll)return;const n=this._view.workflowOptions.pagination;!n.active||n.mode!=="infiniteScroll"||(s.status===N.READY?this._trackTrigger(e):this._untrackTrigger())}async _trackTrigger(e){if(this._trigger)return;const s=e.querySelector('[data-role="trigger"]');if(!s)return;const n=new AbortController;this._trigger=Object.freeze({element:s,ac:n});let i=!1;try{await Wr(s,{area:1,duration:0,signal:n.signal}),i=!0}catch(r){if(r.name!=="AbortError")throw r}finally{this._trigger=void 0}i&&this._onTrigger()}_onTrigger(){this._view.hub.trigger(co())}_untrackTrigger(){this._trigger&&(this._trigger.ac&&this._trigger.ac.abort(),this._trigger=void 0)}_destroyTriggerable(){this._untrackTrigger()}}function Ty(t,e){const{className:s,role:n,templates:i,options:r}=t,{status:o}=e,c=n?` data-role="${n}"`:"",a=r.itemType?` data-item-type="${r.itemType}"`:"";return`<div class="${s} ${o}"${c}${a}>${o===N.READY?i[o](t,e):""}${i.trigger(t,e)}${i.loading(t,e)}</div>`}function Ay(t,e){const{templates:s}=t,n=t._getItems(e)||[];return n.length>0||e.ongoing?s.body(t,e,n):s.empty(t,e)}function vy(t,e,s){return t.templates.list(t,e,s)}function Oy(t,e,s){const{className:n,templates:i,options:r}=t,o=i.ordered?"ol":"ul",c=r.itemType?` data-item-type="${r.itemType}"`:"";return`<${o} class="${n}__list" data-role="list"${c}>${i.items(t,e,s)}</${o}>`}function Cy(t,e,s,{offset:n=0}={}){const{templates:i}=t;let r=n;return s.map(o=>i.item(t,e,o,r++)).join("")}function Iy(t,e,s,n){const{className:i,templates:r,options:o}=t,{itemType:c}=o,a=r[c](t,e,s,{index:n});return`<li class="${i}__item">${a}</li>`}function xy(t,e){const{className:s}=t;return`<div class="${s}__trigger" data-role="trigger"></div>`}function Ry(){return'<div class="miso-loading" aria-label="Loading" data-role="loading"></div>'}const Gu=Object.freeze({product:Yw,article:Jw,compactArticle:ku,image:Xw,question:Zw,root:Ty,[N.READY]:Ay,empty:()=>"",body:vy,list:Oy,ordered:!1,items:Cy,item:Iy,productInfoBlock:_o,articleInfoBlock:Lu,compactArticleInfoBlock:po,imageInfoBlock:$u,brandBlock:Pu,titleBlock:Es,descriptionBlock:Ri,dateBlock:mo,authorsBlock:Nu,authorsAndDateBlock:Uu,priceBlock:go,discountRateText:Du,ctaBlock:wo,cta:sy,imageBlock:Ss,indexBlock:bo,trigger:xy,loading:Ry});class We extends Xe{static get defaultTemplates(){return Gu}constructor({templates:e,itemType:s="product",...n}){super({templates:{...Gu,...e},itemType:s,...n}),this._initTrackable(),this._initTriggerable()}initialize(e){this._unsubscribes.push(e.proxyElement.on("click",this._onClick.bind(this)))}_preprocess({state:e,rendered:s}){const n=this._shallRenderIncrementally(e,s),i=this._html(e,s,n);return{...e,incremental:n,html:i}}_shallRenderIncrementally(e,s){return this.options.incremental&&s&&s.value&&s.value.length>0&&e.value&&e.value.length>=s.value.length&&e.session&&s.session&&e.session.id===s.session.id}_html(e,s,n){if(n){const i=s.value.length,r=(this._getItems(e)||[]).slice(i);return r.length>0?this.templates.items(this,e,r,{offset:i}):""}else return this.templates.root(this,e)}_render(e,{state:s},{notifyUpdate:n}){const{incremental:i,html:r}=s;i?r?this._getListElement(e).insertAdjacentHTML("beforeend",r):n(!1):e.innerHTML=r}_afterRender(e,s){this._syncBindings(e,s),this._syncTrigger(e,s)}_unrender(){this._clearBindings(),this._untrackTrigger()}_getItems(e){return e.value&&(e.value.products||e.value)}_getListElement(e){return e.querySelector('[data-role="list"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="item"]')):[]}_onClick(e){const s=e.target.closest('[data-role="item"]');if(!s)return;const n=this._bindings.get(s);n&&(this._trackClick(e,n),this._emitClickEvent(e,n))}_emitClickEvent(e,s){const{session:n}=this._view._state,{value:i,element:r}=s;this._view._events.emit("click",{session:n,value:i,element:r,domEvent:e})}destroy(){this._destroyTrackable(),this._destroyTriggerable(),this._view=void 0,super.destroy()}}Eo(We.prototype),Ey(We.prototype);const ky="list",Ku="miso-list";class Ts extends We{static get type(){return ky}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Ku}constructor({className:e=Ku,...s}={}){super({className:e,...s})}}const Ly="horizontal",Yu="miso-horizontal";class Zu extends We{static get type(){return Ly}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Yu}constructor({className:e=Yu,...s}={}){super({className:e,...s})}}const $y="cards",Ju="miso-cards";class Py extends We{static get type(){return $y}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return Ju}constructor({className:e=Ju,...s}={}){super({className:e,...s})}}function Xu(t,e,s){s===void 0?t.removeAttribute(e):t.setAttribute(e,s)}function As(t,e,s){s?t.classList.add(e):t.classList.remove(e)}function Ny(t){if(typeof t=="number")return t;const[e,s]=Uy(t);switch(s){case"":case"px":return e;case"rem":return Dy(e);default:throw new Error(`Unsupported unit: ${s}`)}}function Uy(t){const e=t.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*)$/);if(!e)throw new Error(`Invalid length: ${t}`);const s=parseFloat(e[1]),n=e[2]||"";return[s,n]}function Dy(t=1){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function So(t){return t===void 0||t instanceof ef?t:new ef(t)}class ef{constructor(e){switch(this._width=NaN,this._height=NaN,typeof e){case"number":this._width=e,this._height=1;break;case"object":Array.isArray(e)&&(this._width=parseFloat(e[0]),this._height=parseFloat(e[1]));break;case"string":const s=e.indexOf("/");s<0?(this._width=parseFloat(e),this._height=1):(this._width=parseFloat(e.slice(0,s).trim()),this._height=parseFloat(e.slice(s+1).trim()));break}if(this._width===NaN||this._height===NaN)throw new Error(`Invalid aspect ratio value: ${e}`)}get width(){return this._width}get height(){return this._height}get floatValue(){return this._width/this._height}scaleBy(e){return e=So(e),So([e._width*this._width,e._height*this._height])}toString(){return this._height===1?`${this._width}`:`${this._width} / ${this._height}`}}function Fy(t){an(t,My.prototype)}class My{_initSwipeable(){this._swipeableContext={itemCount:void 0,itemIndex:void 0,displayedCount:void 0,displayedIndex:void 0,displayEventIndex:void 0}}get itemIndex(){return this._swipeableContext.itemIndex}set itemIndex(e){const s=this._swipeableContext;s.itemCount!==void 0&&(e<0?e=s.itemCount-1:e>=s.itemCount&&(e=0),s.itemIndex=e,wi(()=>this._syncDisplayedSwipeableItemIndex()))}next(){this._swipeableContext.itemCount!==void 0&&this.itemIndex++}previous(){this._swipeableContext.itemCount!==void 0&&this.itemIndex--}_renderSwipeable(e,s,n){this._syncSwipeableItemCount(s),this._syncDisplayedSwipeableItemCount(),this._syncDisplayedSwipeableItemIndex()}_afterRenderSwipeable(){this._emitSwipeableDisplayEvent()}_syncSwipeableItemCount({state:e}={}){const s=this._swipeableContext,n=this._getItems(e),i=s.itemCount,r=s.itemCount=n?n.length:void 0;r!==i&&(r===void 0?s.itemIndex=void 0:i===void 0&&(s.itemIndex=0))}_syncDisplayedSwipeableItemCount(){const e=this._swipeableContext,{itemCount:s}=e;if(s===e.displayedCount)return;let{element:n}=this._view;n=n.firstElementChild,n&&(Xu(n,"data-item-count",s),e.displayedCount=s)}_syncDisplayedSwipeableItemIndex(){const e=this._swipeableContext,{itemIndex:s}=e;s!==e.displayedIndex&&(e.displayedIndex=s,this._syncSwipeableListIndex(s),this._syncSwipeableIndicatorIndex(s))}_syncSwipeableListIndex(e){const{element:s}=this._view,n=s&&this._getListElement(s);n&&(n.style.left=`${-e*100}%`)}_syncSwipeableIndicatorIndex(e){const{element:s}=this._view,n=s&&this._getSwipeableIndicatorElement(s);if(!n)return;let i=0;for(const r of n.children)As(r,"active",i===e),i++}_getSwipeableIndicatorElement(e){return e.querySelector('[data-role="index-indicator"]')}_emitSwipeableDisplayEvent(){const e=this._swipeableContext,s=e.displayedIndex;e.displayEventIndex!==s&&(e.displayEventIndex=s,this._view._events.emit("display",{index:s}))}_onClickSwipeable(e){const{target:s}=e;s.closest('[data-role="previous"]')&&(e.preventDefault(),this.previous()),s.closest('[data-role="next"]')&&(e.preventDefault(),this.next())}}const jy="1.12.7";function qy(t){const s=t*Math.tan(3*Math.PI/8),n=s*Math.sin(Math.PI/4);return`M${t} 0L${100-s} 0A${t} ${t} 0 0 1 ${100-n} ${n}L${n} ${100-n}A${t} ${t} 0 0 1 0 ${100-s}L0 ${t}Z`}const kt="miso-ui-icon",tf=`${kt}-svg-${jy.replaceAll(".","_")}`,Ge={SEND:"send",SEARCH:"search",TRIANGLE:"triangle",TRIANGLE_EQ:"triangle-eq",CHEVRON:"chevron",CHEVRON_NEGATIVE:"chevron-negative",BULB:"bulb"},By=`<symbol id="${kt}-${Ge.SEND}" viewBox="0 0 32 32"><path fill="currentColor" d="M11.499,19.173l5.801,-5.849c0.389,-0.392 1.022,-0.394 1.414,-0.006c0.392,0.389 0.395,1.022 0.006,1.414l-5.798,5.847l5.306,8.002c0.207,0.313 0.572,0.483 0.945,0.441c0.373,-0.042 0.691,-0.289 0.824,-0.64l9.024,-23.904c0.138,-0.366 0.05,-0.78 -0.226,-1.058c-0.276,-0.278 -0.689,-0.369 -1.057,-0.233l-24.004,8.892c-0.353,0.13 -0.602,0.448 -0.646,0.821c-0.044,0.373 0.125,0.74 0.438,0.948l7.973,5.325Z"/></symbol>`,zy=`<symbol id="${kt}-${Ge.SEARCH}" viewBox="0 0 24 24"><path fill="currentColor" d="M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"/></symbol>`,Hy=`<symbol id="${kt}-${Ge.TRIANGLE}" viewBox="-5 -5 105 105"><path d="${qy(5)}"/></symbol>`,Vy=`<symbol id="${kt}-${Ge.TRIANGLE_EQ}" viewBox="-100 -100 200 200"><path d="M12.99 -77.5A15 15,0,0,0,-12.99 -77.5L-73.61 27.5A15 15,0,0,0,-60.62 50L60.62 50A15 15,0,0,0,73.61 27.5L12.99 -77.5Z"/></symbol>`,Qy=`<symbol id="${kt}-${Ge.CHEVRON}" viewBox="-100 -100 200 200"><path d="M10.61 -43.94A15 15,0,0,0,-10.61 -43.94L-60.61 6.06A15 15,0,0,0,-39.39 27.27L0 -12.12L39.39 27.27A15 15,0,0,0,60.61 6.06L10.61 -43.94Z"/></symbol>`,Wy=`<symbol id="${kt}-${Ge.CHEVRON_NEGATIVE}" viewBox="-100 -100 200 200"><path d="M100 100V-200H-200V200H200ZM-10.61 -43.94A15 15,0,0,1,10.61 -43.94L60.61 6.06A15 15,0,0,1,39.39 27.27L0 -12.12L-39.39 27.27A15 15,0,0,1,-60.61 6.06L-10.61 -43.94Z"/></symbol>`,Gy=`<symbol id="${kt}-${Ge.BULB}" viewBox="0 0 16 16"><path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a2 2 0 0 0-.453-.618A5.98 5.98 0 0 1 2 6m6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1"/></symbol>`,Ky=`<svg id="${tf}" style="display:none;">${[By,zy,Hy,Vy,Qy,Wy,Gy].join("")}</svg>`;let sf=!1;function Yy(){sf||document.head.querySelector(`#${tf}`)||(sf=!0,document.head.insertAdjacentHTML("beforeend",Ky))}Yy();function hn(t){return`<svg class="miso-ui-icon miso-ui-icon-${t}"><use href="#${kt}-${t}"></use></svg>`}const Zy=new Set(Object.values(Ge));function Jy(t){return Zy.has(t)?hn(t):""}const Xy=hn(Ge.TRIANGLE),nf=hn(Ge.CHEVRON),e1=hn(Ge.CHEVRON_NEGATIVE),t1=hn(Ge.BULB),s1="carousel",rf="miso-carousel",of=Object.freeze({body:i1,controls:r1,controlContainer:o1,control:c1,controlIcon:a1,indexIndicator:l1,indexIndicatorItem:()=>"",trigger:()=>""}),n1=Object.freeze({...We.defaultTemplates,...of});function i1(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__viewport"><div class="${n}__viewport-inner">${i.list(t,e,s)}</div></div>${i.controls(t,e,s)}`}function r1(t,e,s){const{templates:n}=t;return`${n.controlContainer(t,e,"previous")}${n.controlContainer(t,e,"next")}${n.indexIndicator(t,e,s)}`}function o1(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-container-${s}">${i.control(t,e,s)}</div>`}function c1(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-${s}" data-role="${s}">${i.controlIcon(t,e,s)}</div>`}function a1(t){return t.options.itemType==="image"?e1:nf}function l1(t,e,s){const{className:n,templates:i}=t;return`<ul class="${n}__index-indicator" data-role="index-indicator">${s.map(r=>`<li class="${n}__index-indicator-item">${i.indexIndicatorItem(t,e,r)}</li>`).join("")}</ul>`}class cf extends We{static get type(){return s1}static get defaultTemplates(){return n1}static get defaultClassName(){return rf}constructor({className:e=rf,templates:s,...n}={}){super({className:e,templates:{...of,...s},...n}),this._initSwipeable()}_render(e,s,n){super._render(e,s,n),this._renderSwipeable(e,s,n)}_afterRender(e,s){super._afterRender(e,s),this._afterRenderSwipeable(e,s)}_onClick(e){this._onClickSwipeable(e),super._onClick(e)}}Fy(cf.prototype);function u1(t,e){const s=e*2;let n=Math.max(s-t,0),i=t;const r=Math.min(Math.floor(n/3),i);i-=r,n-=r*3;const o=Math.min(n,i);return i-=o,n-=o,[r,o,i]}function f1(t,e,s,n){const{className:i,templates:r,options:o}=t,{itemType:c}=o,a=r[c](t,e,s,{index:n}),u=s._size?` ${i}__item-${s._size}`:"";return`<li class="${i}__item${u}">${a}</li>`}const d1="16rem",af=Object.freeze({...We.defaultTemplates,item:f1}),h1="gallery",lf="miso-gallery";class uf extends We{static get type(){return h1}static get defaultTemplates(){return af}static get defaultClassName(){return lf}constructor({className:e=lf,templates:s,...n}={}){super({className:e,templates:{...af,...s},...n}),this._galleryContext={itemAspectRatio:void 0,itemCount:void 0,columnCount:void 0}}syncSize(){const{element:e}=this._view,s=e&&this._getListElement(e);s&&(this._syncListAspectRatio(s),this._syncItemSizes(s))}_preprocess({state:e,rendered:s}){const n=this._shallRenderIncrementally(e,s),i=n?void 0:this._bodyHtml(e),r=this._itemsHtml(e,s);return{...e,...H({incremental:n,bodyHtml:i,itemsHtml:r})}}_bodyHtml(e){return this.templates.root(this,{...e,value:[]})}_itemsHtml(e,s){const n=s&&s.value&&s.value.length||0,i=(this._getItems(e)||[]).slice(n);return i.length>0?this.templates.items(this,e,i,{offset:n}):""}_render(e,s,n){this._syncItemCount(s),this._syncCssVariables();const i=this._renderListElement(e,s,n);i&&(this._syncListAspectRatio(i),this._renderItems(i,s,n))}_renderListElement(e,{state:s}){const{incremental:n,bodyHtml:i}=s;return n||(e.innerHTML=i),this._getListElement(e)}_renderItems(e,s){s.state.incremental?this._appendItems(e,s):this._updateItems(e,s)}_updateItems(e,{state:s}){const{itemSizes:n}=this._galleryContext,i=this._writeItemSizes(this._getItems(s)||[],n);e.innerHTML=this.templates.items(this,s,i)}_appendItems(e,{state:s}){const{itemSizes:n}=this._galleryContext;this._syncItemSizes(e);const i=e.children.length,r=this._writeItemSizes((this._getItems(s)||[]).slice(i),n,i);e.insertAdjacentHTML("beforeend",this.templates.items(this,s,r,{offset:i}))}_writeItemSizes(e,[s=0,n=0]=[],i=0){let r=0;i>0&&(r=Math.min(i,s),i-=r,s-=r),i>0&&(r=Math.min(i,n),i-=r,n-=r);const o=[];for(const c of e){let a="small";s>0?(a="large",s--):n>0&&(a="medium",n--),o.push({...c,_size:a})}return o}_syncCssVariables(){const e=this._galleryContext;let{itemAspectRatio:s=1}=this.options;s=e.itemAspectRatio=So(s);const{element:n}=this._view;n&&(n.style.setProperty("--miso-gallery-item-1x1-aspect-ratio",`${s}`),n.style.setProperty("--miso-gallery-item-1x2-aspect-ratio",`${s.scaleBy([1,2])}`))}_syncListAspectRatio(e){const s=this._galleryContext,{itemCount:n,itemAspectRatio:i}=s,{height:r=d1}=this.options,o=Ny(r),c=e.clientWidth;if(c===0){s.columnCount=void 0,s.itemSizes=void 0;return}const a=s.columnCount=Math.round(c*i.width*2/(o*i.height));s.itemSizes=u1(n,a),e.style.aspectRatio=`${a} / 2`,e.style.height=n>0?"auto":"0"}_syncItemCount({state:e}={}){const s=this._getItems(e);this._galleryContext.itemCount=s?s.length:void 0}_syncItemSizes(e){const{itemSizes:s=[]}=this._galleryContext;let[n=0,i=0]=s;const{className:r}=this;for(const o of e.children){let c=!1,a=!1;n>0?(c=!0,n--):i>0&&(a=!0,i--),As(o,`${r}__item-large`,c),As(o,`${r}__item-medium`,a),As(o,`${r}__item-small`,!c&&!a)}}}const _1="search-box",ff="miso-search-box",p1="miso-autocomplete";function m1(t){const{className:e,templates:s,role:n,options:i,autocomplete:r}=t,{placeholder:o}=i,c=n?`data-role="${n}"`:"";return`
<div class="${e}" ${c}>
  <div class="${e}__input-group">
    <input class="${e}__input" type="text" data-role="input" ${o?`placeholder="${o}"`:""}>
    <button class="${e}__button" type="submit" data-role="submit">${s.buttonContent(t)}</button>
  </div>
  <div class="${r.className}" data-role="autocomplete"></div>
</div>`.trim()}function g1(t){const{templates:e,options:s}=t;if(s.buttonText)return s.buttonText;const{buttonText:n,buttonIcon:i}=e,r=typeof n=="function"?n(t):`${n}`,o=typeof i=="function"?i(t):Jy(i)||`${i}`;return r+o}function b1(t,e){const{templates:s,workflow:n,autocomplete:i}=t;t={templates:s,workflow:n,...i};const r=[],o=[];for(const c of e)(c.product?r:o).push(c);return s.queries(t,o)+(o.length>0&&r.length>0?"<hr>":"")+s.products(t,r)}function w1(t,e){const{templates:s}=t;return s.completionList(t,"query",e)}function y1(t,e){const{templates:s}=t;return s.completionList(t,"product",e)}function E1(t,{text:e,text_with_inverted_markups:s}={}){return s||Je(e)}function S1(t,{product:e}){const{templates:s}=t,[n,i]=s.helpers.tagPair(t,e,{role:!1});return[n,s.imageBlock(t,e),s.productInfoBlock(t,e),i].join("")}function T1(t,e,s){const{className:n,templates:i}=t;return`<ul class="${n}__${e}-list" data-role="${e}-list">${s.map(r=>i.completionItem(t,e,r)).join("")}</ul>`}function A1(t,e,s){const{className:n,templates:i}=t;return`
<li class="${n}__${e}-item" data-role="${e}-item" data-index="${s._index}" tabindex="0">
  ${i[e](t,s)}
</li>`.trim()}const df=Object.freeze({root:m1,buttonContent:g1,buttonText:"",buttonIcon:"search",completions:b1,completionList:T1,completionItem:A1,queries:w1,products:y1,query:E1,product:S1,imageBlock:Ss,productInfoBlock:_o}),v1=Object.freeze({className:p1,debounce:300});class vs extends Xe{static get type(){return _1}static get defaultTemplates(){return df}static get defaultClassName(){return ff}constructor({className:e=ff,templates:s,autocomplete:n,...i}={}){super({className:e,templates:{...df,...s},...i}),ne(this,{autocomplete:{...v1,...n}}),this._contexts=new WeakMap,this._prevInput=void 0,this._debounce=Il(this.autocomplete.debounce)}initialize(e){const{proxyElement:s,hub:n}=e;this._unsubscribes=[...this._unsubscribes,s.on("input",i=>this._syncInput(i)),s.on("keydown",i=>this._handleKeyDown(i)),s.on("click",i=>this._handleClick(i)),s.on("focusin",i=>this._handleFocusIn(i)),s.on("focusout",i=>this._handleFocusOut(i)),n.on(io(),()=>e.refresh({force:!0}))]}focus(){this._element?this._context().focus():this._focusRequested=!0}open(){this._element.classList.add("open")}close(){this._element.classList.remove("open")}set value(e){this._element?this._context().value=e:this._valueRequested=e}_preprocess({state:e}){return e=super._preprocess({state:e}),{...e,completions:this._view.hub.states[io()]}}_render(e,s,n){e.childElementCount===0&&super._render(e,s,n),this._updateCompletions(e,s,n)}_afterRender(e,s){this._fullfillFocusRequest(e),this._fullfillValueRequest(e)}_updateCompletions(e,{state:s,rendered:n},{writeToState:i}){if(!s.completions)return;const{status:r=N.INITIAL,session:o,value:c}=s.completions,{index:a}=o;if(n&&n.completions.index===a&&n.completions.status===r)return;const u=this._context(e),{autocompleteElement:l}=u;if(!l)return;const d=u.trackItems(c);As(e,"nonempty",d.length>0),l.setAttribute("data-status",r),l.innerHTML=this.templates.completions(this,d),i({completions:{index:a,status:r}})}_fullfillFocusRequest(e){!e||!this._focusRequested||(this._focusRequested=!1,this._context(e).focus())}_fullfillValueRequest(e){!e||!this._valueRequested||(this._context(e).value=this._valueRequested,this._valueRequested=void 0)}_context(e){if(e=e||this._view.element,!e)return Os.empty();let s=this._contexts.get(e);return s||this._contexts.set(e,s=new Os(e)),s}_syncInput(){const{inputElement:e}=this._context();if(!e)return;const s=e.value.trim();if(this._prevInput===s)return;this._prevInput=s;const n=this;this._debounce(()=>n._view.hub.update(yu(),{value:s}))}_handleFocusIn({target:e}){this._element&&e.matches('[data-role="input"]')&&(this._syncInput(),this.open())}_handleFocusOut({relatedTarget:e}){this._element&&(!e||!Qr(e,s=>s===this._element||void 0))&&this.close()}_handleKeyDown({key:e,target:s,isComposing:n}){!n&&e==="Enter"&&s.matches('[data-role="input"]')&&(this._submit(s.value),s.blur())}_handleClick(e){const{target:s}=e,{inputElement:n}=this._context();for(let i=s;i&&i!==this._element;i=i.parentElement){if(i.matches('[data-role="submit"]')||i.matches('[data-role="button"]')||i.matches('[type="submit"]')){n&&(n.blur(),this._submit(n.value));return}if(i.matches('[data-role="query-item"]')){const r=i.getAttribute("data-index"),o=this._context().data.get(parseInt(r)),c=o&&o.text;c&&(n&&(n.value=c),this._view._events.emit("select",Object.freeze({value:o,index:r,domEvent:e})),e.defaultPrevented||this._submit(c)),this.close();return}if(i.matches('[data-role="product-item"]')){this._view._events.emit("select",Object.freeze({value:item,index,domEvent:e}));return}}}async _submit(e){!e||!e.trim()||(this.close(),this._view.hub.update(Ht(),{q:e}),this._trackSubmit(e))}_trackSubmit(e){const{[ke.SUBMIT]:s}=this._view.tracker.options||{};s&&this._view.tracker.submit({value:e})}}class Os{static empty(){return Os._empty||(Os._empty=new Os)}constructor(e){this._element=e,this._cache={},this._data=new Map}get inputElement(){return this._get("input")}get autocompleteElement(){return this._get("autocomplete")}get data(){return this._data}trackItems(e){let s=0;const n=this._data=new Map,i=[];for(const r in e)for(const o of e[r])o.product&&!o.product.url||(o._index=s,o._field=r,n.set(s,o),i.push(o),s++);return i}focus(){if(!this._element)return;const{inputElement:e}=this;e&&e.focus()}set value(e){if(!this._element)return;const{inputElement:s}=this;s&&(s.value=e)}_get(e){return this._element?this._cache[e]||(this._cache[e]=this._element.querySelector(`[data-role="${e}"]`)):void 0}}const O1="option-list",hf="miso-option-list";function C1(t,e){const{className:s,role:n,templates:i}=t,r=n?`data-role="${n}"`:"";return`
<div class="${s}" ${r}>
  ${i.options(t,e)}
</div>
`}function I1(t,e){const{className:s,templates:n}=t,i=e.value||[];return`
<ol class="${s}__options" data-role="options">
  ${i.map((r,o)=>n.option(t,r,{index:o})).join("")}
</ol>
`}function x1(t,e){const{className:s}=t,n=Je(e.text||e);return`<li class="${s}__option" data-role="option" tabindex="0">${n}</li>`}const _f=Object.freeze({root:C1,options:I1,option:x1});class Li extends Xe{static get type(){return O1}static get defaultTemplates(){return _f}static get defaultClassName(){return hf}constructor({className:e=hf,templates:s,...n}={}){super({className:e,templates:{..._f,...s},...n}),this._initTrackable()}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",n=>this._handleClick(n))]}_render(e,s,n){super._render(e,s,n);const{state:i}=s;this._syncOptionValues(e,i)}_afterRender(e,s){this._syncBindings(e,s)}_unrender(){this._clearBindings()}_syncOptionValues(e,s){const n=e&&this._getOptionsElement(e);if(!n)return;const i=this._getItems(s)||[];As(n,"empty",i.length===0)}_getItems(e){return e.value}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){const s=e.target.closest('[data-role="option"]');if(!s)return;const n=this._bindings.get(s),i=n&&n.value;i&&(this._trackClick(e,n),this._select(i.text))}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}Eo(Li.prototype);function R1(t){const{className:e,role:s,templates:n}=t,i=s?`data-role="${s}"`:"";return`
<div class="${e}" ${i}>
  ${n.options(t)}
</div>
`}function k1(t,e){const{className:s,templates:n}=t;return`
<div role="button" class="${s}__option" data-value="${e.value}">
  ${n.content(t,e)}
</div>
`}const pf=Object.freeze({...Ru("options"),root:R1,option:k1});class L1 extends Xe{static get defaultTemplates(){return pf}constructor({className:e,templates:s,field:n,defaultValue:i,...r}={}){super({className:e,templates:{...pf,...s},...r}),this._field=n,this._defaultValue=i}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,e.hub.on(this._field,()=>this._refresh()),s.on("click",n=>this._handleClick(n))],this._defaultValue?this._select(this._defaultValue,{silent:!0}):this._clear({silent:!0})}_preprocess(e,s){return e.rendered&&s.skip(),super._preprocess(e,s)}_handleClick({target:e}){const s=Qr(e,o=>o.hasAttribute("data-value")?o:void 0);if(!s)return;let{unselected:n,value:i}=this._view.hub.states[this._field];n=n||i===void 0;const r=s.getAttribute("data-value");n||i===void 0||i!==r?this._select(r):this._clear()}_refresh(){this._state=this._view.hub.states[this._field],wi(()=>this._syncValueAttribute())}_syncValueAttribute(){if(!this._state||!this._view)return;const{element:e}=this._view,s=e&&e.children[0];if(!s)return;let{unselected:n,value:i}=this._state;n?s.removeAttribute("data-selected"):s.setAttribute("data-selected",i),this._state=void 0}_select(e,s){this._submit({value:e},s)}_clear(e){this._submit({unselected:!0},e)}async _submit(e,s){this._view.hub.update(this._field,e,s)}}const $1="feedback",mf="miso-feedback",P1=["helpful","unhelpful"];function N1(t){const{templates:e}=t;return P1.map(s=>e.option(t,{value:s})).join("")}function U1(t,{value:e}){const{className:s,templates:n,options:i={}}=t;return`
${i.icon!==!1?`<i class="${s}__icon">${n.icon(t,e)}</i>`:""}
${i.text!==!1?`<span class="${s}__text">${n.text(t,e)}</span>`:""}
`}function D1(t,e){switch(e){case"helpful":case"unhelpful":return _y;default:return""}}function F1(t,e){switch(e){case"helpful":return"Helpful";case"unhelpful":return"Not helpful";default:return""}}const gf=Object.freeze({options:N1,content:U1,icon:D1,text:F1});class bf extends L1{static get type(){return $1}static get defaultTemplates(){return gf}static get defaultClassName(){return mf}constructor({className:e=mf,templates:s,...n}={}){if(super({className:e,templates:{...gf,...s},field:wu(),...n}),n.text===!1&&n.icon===!1)throw new Error("At least one of options.text or options.icon must be enabled")}}const M1="text",wf="miso-text";function j1(t,{value:e}){const{className:s,role:n,options:{raw:i=!1,tag:r}}=t,o=n?`data-role="${n}"`:"",c=e!==void 0?Je(q1(t)(e)):"";return i?c:`<${r} class="${s}" ${o}>${c}</${r}>`}function q1(t){let{format:e}=t.options;const{formatDate:s,formatNumber:n}=t.templates.helpers;if(!e)return o=>`${o}`;switch(typeof e){case"function":return e;case"string":e=[e];break}let[i,r]=e;switch(i){case"date":return o=>s(o,r);case"number":return o=>n(o,r);default:return o=>`${o}`}}const yf=Object.freeze({root:j1});class _n extends Xe{static get type(){return M1}static get defaultTemplates(){return yf}static get defaultClassName(){return wf}constructor({className:e=wf,templates:s,tag:n="p",...i}={}){super({className:e,templates:{...yf,...s},tag:n,...i})}}class B1 extends ho{constructor(e){super(e)}_takePending(){return this._pending}_applyRender(e,s={}){const n=Ei(!1);super._applyRender(e,{...s,loop:n.t}),n.value&&this._requestRaf()}}class z1{clear(e){return e.innerText="",{cursor:0,done:!1}}update(e,{value:s,cursor:n},{value:i,cursor:r,done:o}){const c=i.length;r=Math.min(r,c);const a=!!o&&r===c,u=s.substring(0,n),l=!i.startsWith(u);return a||l?e.innerText=i:e.insertAdjacentText("beforeend",i.substring(n,r)),a&&e.classList.add("done"),{cursor:r,done:a}}}function H1(t,e,{status:s}){if(!e)return;e.children.length===0&&(e.innerHTML=V1(t));const n=e.children[0];return n.setAttribute("data-status",s||N.INITIAL),n}function V1(t){let{className:e,role:s,options:{tag:n,format:i,builtInStyles:r=!0}}=t;n==="auto"&&(n=i==="markdown"?"div":"p");const o=s?`data-role="${s}"`:"",c=[e,Ef(e)];return r&&i==="markdown"&&c.push("miso-markdown"),`<${n} class="${c.join(" ")}" ${o} data-format="${i}"></${n}>`}function Ef(t){return`${t}__cursor`}function Q1(t,e){return t&&e&&t.session&&e.session&&t.session.uuid===e.session.uuid}function W1(t){if(t===!0)return G1();if(t){if(typeof t=="function")return t;throw new Error("onDebug must be a function or a boolean")}}function G1(t=performance.now()){return function({summary:e,timestamp:s,elapsed:n,ref:i,operation:r,conflict:o}){MisoClient.debug("<progressive-markdown>",`[${K1(s-t)}](${Sf(n[0])}, ${Sf(n[1])})`,e,`${r}`,i,o)}}function K1(t){return`${Math.floor(t)/1e3}s`}function Sf(t){return`${Math.floor(t*100)/100}ms`}const Y1="typewriter",Tf="miso-typewriter";class pn extends B1{static get type(){return Y1}static get defaultClassName(){return Tf}constructor({className:e=Tf,tag:s="auto",format:n="markdown",tooltip:i=!1,speed:r,acceleration:o,nextCursorFn:c,...a}={}){super({tag:s,format:n,tooltip:i,...a}),ne(this,{className:e}),this._prevState=void 0,this._getNextCursor=typeof c=="function"?c:xg({speed:r,acceleration:o}),this._readiness=new Ot,n==="markdown"&&pn.MisoClient.plugins.install("std:ui-markdown")}initialize(){this._setup()}async _setup(){try{switch(this.options.format){case"plaintext":await this._setupForPlaintext();break;default:await this._setupForMarkdown()}this._readiness.resolve()}catch(e){this._readiness.reject(e)}}async _setupForMarkdown(){const e=await this._view._views._extensions.require("markdown");if(!this._view)return;const s=Ef(this.className),{onDebug:n,onCitationLink:i,variant:r}=this.options;this._renderer=e.createRenderer({cursorClass:s,getSource:o=>this._getSource(o),onCitationLink:i,onDebug:W1(n),variant:r}),this._unsubscribes.push(this._view.proxyElement.on("click",o=>this._onClick(o)))}_getSource(e){const{data:s={}}=this._view._data,{sources:n=[]}=s;return n[e]}async _setupForPlaintext(){this._renderer=new z1}async _ready(){return this._readiness.promise}async render(...e){await this._ready(),await super.render(...e)}_preprocess({state:e}){const s=this._prevState,{value:{value:n="",stage:i,finished:r}={},session:o,status:c}=e,a=Q1(s,e),u=a&&i===s.stage,l=s?u?s.streak:s.streak+1:0,d=a&&s&&s.doneAt||(c===N.READY&&r?performance.now():void 0),m=d!==void 0;return this._prevState=Object.freeze(H({session:o,status:c,value:n,stage:i,streak:l,doneAt:d,done:m}))}_render(e,{state:s,rendered:n},{notifyUpdate:i,writeToState:r,loop:o}){const c=H1(this,e,s);let a;const u=!n||s.streak!==n.streak;if(u)a=this._renderer.clear(c,n);else{const m=this._getNextCursor(n.cursor,s.doneAt,n.timestamp,s.timestamp);a=this._renderer.update(c,n,{...s,cursor:m})}r(a);const l=s.status===N.READY&&!a.done,d=l&&(!n||n.status===N.READY)&&!u;i({ongoing:l},{silent:d}),l&&o()}_onClick(e){const{target:s}=e,n=s.closest('[data-role="citation-link"]');if(n){const o=parseInt(n.dataset.index);Number.isNaN(o)||this._view._events.emit("citation-click",{event:e,index:o});return}const i=s.closest('[data-role="follow-up-link"]');if(i){let{q:o}=i.dataset;o=o?o.trim():void 0,o&&this._view._events.emit("follow-up-click",{event:e,q:o});return}const r=s.closest("a");if(r){if(!e.defaultPrevented){const{href:o,innerText:c,className:a}=r;o&&this._view._events.emit("link-click",H({event:e,url:o,text:c?c.trim():"",className:a||"",attributes:Z1(r)}))}return}}}function Z1(t){const{attributes:e}=t,s={};for(const{name:n,value:i}of e)n.startsWith("data-")&&(s[n]=i);try{return JSON.stringify(s)}catch{return"{}"}}const J1="affiliation",Af="miso-affiliation";function X1(t,e){const{className:s,role:n,templates:i,options:r}=t,{status:o}=e,c=n?` data-role="${n}"`:"",a=e.value||{},u=a.channel?` data-channel="${a.channel}"`:"",l=t._getItems(e),d=l?l.length:void 0,m=d!==void 0?` data-item-count="${d}"`:"",w=r.itemType?` data-item-type="${r.itemType}"`:"";return`<div class="${s} ${o}"${c}${u}${w}${m}>${o===N.READY?i[o](t,e):""}</div>`}function eE(t,e){const{templates:s}=t,n=t._getItems(e);return n&&n.length>0?s.controlContainer(t,e,"previous")+s.body(t,e)+s.controlContainer(t,e,"next"):s.empty(t,e)}function tE(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-${s}-container">${i.control(t,e,s)}</div>`}function sE(t,e,s){const{className:n,templates:i}=t;return`<div class="${n}__control-${s}" data-role="${s}">${i.controlIcon(t,e,s)}</div>`}function nE(t,e,s){return Xy}function iE(t,e){const{className:s,templates:n}=t,i=t._getItems(e);return`<div class="${s}__body">${n.list(t,e,i)}</div>`}function rE(t,e,s,n){const{className:i,templates:r,options:o}=t,{itemType:c}=o,a=r.itemHeader(t,e,s,{index:n}),u=r[c](t,e,s,{index:n});return`<li class="${i}__item"><div class="${i}__item-inner">${a}${u}</div></li>`}function oE(t,e,s,n){const{className:i,templates:r}=t;let{itemHeaderLeftText:o,itemHeaderRightText:c}=r;return o=Rt.asFunction(o)(t,e,s,n),c=Rt.asFunction(c)(t,e,s,n),`<div class="${i}__item-header">
  <div class="${i}__item-header-left">${o}</div>
  <div class="${i}__item-header-right">${c}</div>
</div>`}function cE(t,e,s,n){const{className:i,templates:r}=t,o=Rt.asFunction(r.logoText)(t,e,s,n)||"",c=Rt.asFunction(r.logoImg)(t,e,s,n);return c?`<span class="${i}__item-header-logo-text">${o}</span>${c}`:""}function aE(t,e,s,n){const{className:i,templates:r}=t,o=Rt.asFunction(r.logoUrl)(t,e,s,n);if(!o)return"";const c=Rt.asFunction(r.logoAltText)(t,e,s,n),a=c?` alt="${c}"`:"";return`<img class="${i}__item-header-logo" src="${o}"${a}>`}const vf=Object.freeze({root:X1,[N.READY]:eE,controlContainer:tE,control:sE,controlIcon:nE,body:iE,item:rE,itemHeader:oE,affiliation:ey,ctaText:"View deal",itemHeaderLeftText:"Today's best deals",itemHeaderRightText:cE,logoImg:aE,logoText:"Selected by"}),lE=Object.freeze({...We.defaultTemplates,...vf});class Of extends We{static get type(){return J1}static get defaultTemplates(){return lE}static get defaultClassName(){return Af}constructor({className:e=Af,templates:s,autoplay:n,...i}={}){super({className:e,itemType:"affiliation",templates:{...vf,...s},...i}),this._itemCount=void 0,this._itemIndex=0,this._displayedCount=void 0,this._displayedIndex=void 0,this._viewable=void 0}initialize(e){super.initialize(e);const{viewable:s}=this._view.tracker.options||{};this._viewable=new Ug(this._onViewable.bind(this),s)}get itemIndex(){return this._itemIndex}set itemIndex(e){this._itemCount!==void 0&&(e<0?e=this._itemCount-1:e>=this._itemCount&&(e=0),this._itemIndex=e,wi(()=>this._syncItemIndex()))}next(){this._itemCount!==void 0&&this.itemIndex++}previous(){this._itemCount!==void 0&&this.itemIndex--}_render(e,s,n){super._render(e,s,n),this._syncItemCount(s),this._syncItemIndex()}_syncElement(e){const s=this._element;super._syncElement(e),this._syncViewableElement(s,e)}_syncViewableElement(e,s){e!==s&&(e&&this._viewable.unobserve(e),s&&this._viewable.observe(s))}_syncItemCount({state:e}={}){const s=this._getItems(e),n=this._itemCount=s?s.length:void 0;if(n===this._displayedCount)return;let{element:i}=this._view;i=i.firstElementChild,i&&(Xu(i,"data-item-count",n),this._displayedCount=n)}_syncItemIndex(){const e=this._itemIndex;if(e===this._displayedIndex)return;const{element:s}=this._view,n=s&&this._getListElement(s);n&&(this._displayedIndex=e,n.style.left=`${-e*100}%`,this._viewable.display(e),this._view._events.emit("display",{index:e}))}_onViewable(e){const s=this._getRenderedItemData(e);s&&this._view.tracker.viewable([s])}_getRenderedItemData(e){const{value:s}=this._rendered.get(this._element)||{};if(!s)return;const{products:n=[]}=s;return n[e]}_trackViewables(){}_onClick(e){const s=e.target;if(s.closest('[data-role="previous"]')){this.previous();return}if(s.closest('[data-role="next"]')){this.next();return}super._onClick(e)}}const uE="facets",Cf="miso-facets",$i="miso-facet",If="custom_attributes.";function fE(t,e){const{className:s,role:n,templates:i}=t,r=n?`data-role="${n}"`:"";return`<div class="${s}" ${r}>${i.facets(t,e)}</div>`}function dE(t,e){const{templates:s}=t,{facet_fields:n={}}=e.value||{};return Object.keys(n).map(i=>s.facet(t,{field:i,entries:n[i]},e))}function hE(t,e,s){const{facetClassName:n=$i,templates:i}=t,{field:r}=e;return`<div class="${n}" data-role="facet" data-field="${Je(r)}">${i.header(t,e,s)}${i.options(t,e,s)}</div>`}function _E(t,e,s){const{facetClassName:n=$i,templates:i}=t;return`<div class="${n}__header">${i.title(t,e,s)}</div>`}function pE(t,{field:e}){return e.startsWith(If)&&(e=e.substring(If.length)),Je(e)}function mE(t,{field:e,entries:s},n){const{facetClassName:i=$i,templates:r}=t;return`<ul class="${i}__options" data-role="options">${s.map(([o,c])=>r.option(t,{field:e,value:o,count:c},n)).join("")}</ul>`}function gE(t,e,s){const{facetClassName:n=$i,templates:i}=t;return`
<li class="${n}__option" data-role="option" tabindex="0">
  <span class="${n}__value">${i.value(t,e,s)}</span>
  <span class="${n}__count">${i.count(t,e,s)}</span>
</li>`}function bE(t,{value:e},s){return Je(e)}function wE(t,{count:e},s){return t.templates.helpers.formatNumber(e)}const xf=Object.freeze({root:fE,facets:dE,facet:hE,header:_E,title:pE,options:mE,option:gE,value:bE,count:wE});function yE(t,e){return`${t}:::${e}`}function Rf(t){const e={};for(const s in t)e[s]=new Set(t[s]);return e}class kf extends Xe{static get type(){return uE}static get defaultTemplates(){return xf}static get defaultClassName(){return Cf}constructor({className:e=Cf,templates:s,...n}={}){super({className:e,templates:{...xf,...s},...n}),this._bindings=new Wu}initialize(e){const{proxyElement:s,filters:n}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",i=>this._handleClick(i)),n.on("update",i=>this._updateSelections(i)),n.on("reset",()=>this._syncSelections())]}_render(e,s,n){super._render(e,s,n)}_afterRender(e,s){this._syncBindings(e,s),this._syncSelections()}_unrender(){this._clearBindings()}_syncSelections(){const e=Rf(this._view.hub.states[ys()].facets);for(const{value:{field:s,value:n},element:i}of this._bindings.entries)this._setSelected(i,e[s]&&e[s].has(n))}_updateSelections({updates:e}){const s=Rf(e.facets);for(const{value:{field:n,value:i},element:r}of this._bindings.entries)s[n]&&this._setSelected(r,s[n].has(i))}_setSelected(e,s){e&&(s?e.classList.add("selected"):e.classList.remove("selected"))}_syncBindings(e,s){if(!e||!s.value)return;const n=this._getItems(s),i=[],r=[],o=[];for(const c of this._getFacetElements(e)){const a=c.getAttribute("data-field"),u=n[a];if(!u)continue;const l=this._getItemElements(c);for(let d=0;d<l.length;d++){const m=l[d],w=u[d];if(!w)break;i.push(yE(a,w)),r.push({field:a,value:w}),o.push(m)}}this._bindings.update(i,r,o)}_clearBindings(){this._bindings.clear()}_getItems({value:e}={}){const{facet_fields:s={}}=e||{},n={};for(const i in s)n[Je(i)]=s[i].map(([r])=>r);return n}_getFacetElements(e){return Array.from(e.querySelectorAll('[data-role="facet"]'))}_getFacetElement(e,s){return e.querySelector(`[data-role="facet"][data-field="${s}"]`)}_getItemElements(e){return Array.from(e.querySelectorAll('[data-role="option"]'))}_handleClick(e){if(e.button!==0)return;const s=e.target.closest('[data-role="option"]');if(!s)return;const n=this._bindings.get(s),i=n&&n.value;if(!i)return;const{field:r,value:o}=i;this._view.filters.facets.toggle(r,o),this._view.filters.apply()}destroy(){this._bindings.clear(),super.destroy()}}const EE="select",Lf="miso-select";function SE(t,e){const{className:s,role:n,templates:i}=t,r=n?`data-role="${n}"`:"",o=t._getItems(e),c=o.find(a=>a.selected)||o[0];return`
<div class="${s}" ${r}>
  ${i.button(t,c)}
  ${i.options(t,e)}
</div>`}function TE(t,e){const{className:s,templates:n}=t;return`<button class="${s}__button" data-role="button" tabindex="0">${n.text(t,e)}</button>`}function AE(t,e){const{className:s,templates:n}=t,i=t._getItems(e);return`<ul class="${s}__options">${i.map((r,o)=>n.option(t,r,{index:o})).join("")}</ul>`}function vE(t,e){const{className:s,templates:n}=t,i=e.selected?"selected":"";return`<li class="${s}__option ${i}" data-role="option" tabindex="0">${n.text(t,e)}</li>`}function OE(t,e){return Je(e&&e.text&&sg(e.text)||e||"")}const $f=Object.freeze({root:SE,button:TE,options:AE,option:vE,text:OE});class To extends Xe{static get type(){return EE}static get defaultTemplates(){return $f}static get defaultClassName(){return Lf}constructor({className:e=Lf,templates:s,...n}={}){super({className:e,templates:{...$f,...s},...n}),this._initTrackable()}initialize(e){const{proxyElement:s}=e;this._unsubscribes=[...this._unsubscribes,s.on("click",n=>this._handleClick(n))]}_afterRender(e,s){this._syncBindings(e,s)}_unrender(){this._clearBindings()}_getItems(e){return e.value||[]}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){if(this._element)for(let s=e.target;s&&s!==this._element;s=s.parentElement){const{role:n}=s.dataset;switch(n){case"button":this._toggle();break;case"option":const i=this._bindings.get(s);this._select(i&&i.value);break}}}_toggle(){if(!this._element)return;const e=this._element.children[0];e&&e.classList.toggle("open")}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}Eo(To.prototype);const CE="more-button",Pf="miso-more-button";function IE(t,e){const{className:s,role:n,templates:i}=t,r=n?` data-role="${n}"`:"",o=e.status!==N.READY?" disabled":"";return`
<div class="${s}"${r}${o}>
  ${i.text(t)}
</div>
`}const Nf=Object.freeze({root:IE,text:xE});function xE(t){return"More"}class Uf extends Xe{static get type(){return CE}static get defaultTemplates(){return Nf}static get defaultClassName(){return Pf}constructor({className:e=Pf,templates:s,...n}={}){super({className:e,templates:{...Nf,...s},...n})}initialize(e){this._unsubscribes=[...this._unsubscribes,e.proxyElement.on("click",s=>this._handleClick(s))]}_handleClick(e){if(e.button!==0)return;const s=e.target.closest('[data-role="more"]');!s||s.disabled||this._view.hub.trigger(co())}}const RE=Object.freeze(Object.defineProperty({__proto__:null,AffiliationLayout:Of,BannerLayout:by,CardsLayout:Py,CarouselLayout:cf,CollectionLayout:We,ContainerLayout:Bu,ErrorLayout:Hu,FacetsLayout:kf,FeedbackLayout:bf,GalleryLayout:uf,HorizontalLayout:Zu,ListLayout:Ts,MoreButtonLayout:Uf,OptionListLayout:Li,SearchBoxLayout:vs,SelectLayout:To,TemplateBasedLayout:Xe,TextLayout:_n,TypewriterLayout:pn},Symbol.toStringTag,{value:"Module"}));function kE(t,{hub:e,workflowOptions:s={}}={}){const{sort:{options:n=[]}={}}=s.filters||{};if(!n.length)return[];const{sort:i}=e.states[ys()]||{},r=i&&i.field||LE(n).field;return r?n.map(o=>({...o,selected:o.field===r})):n}function LE(t){for(const e of t)if(e.default)return e;return t[0]}function $E(t){if(!t||!t.value)return;const{answer:e="",answer_stage:s,finished:n}=t.value;return Object.freeze({value:e,stage:s,finished:!!n})}function PE(t){if(!t||!t.value)return;const{reasoning:e="",reasoning_finished:s}=t.value;return Object.freeze({value:e,stage:"reasoning",finished:!!s})}function NE(t,{workflow:e}={}){const s=e.previous,n=s&&s.states[Se()].value,i=n&&(n.suggested_followup_questions||n.followup_questions||[]);return i&&i.map(r=>({text:r}))}function UE(t){if(!(!t||!t.value))return(t.value.followup_questions||[]).map(e=>({text:e}))}function Df({qs:t,...e}={}){return Ti(e,{metadata:{question_source:t||ts.ORGANIC}})}function DE(t,e){return e===zt.QUERY?t:{...t,answer:!1}}function Ff(t){return t&&t.value&&t.value.revision}function FE(t,e){if(!t||!t.value||t.request||!e||!e.request)return t;const{request:s}=e;return{...t,request:s}}function ME(t){const e=jE(t),s=e===N.READY?t.ongoing:void 0;return H({status:e,ongoing:s,...t})}function jE(t){if(!t)return N.INITIAL;const{request:e,error:s,value:n}=t;return s?N.ERRONEOUS:n?N.READY:e?N.LOADING:N.INITIAL}function qE(t){const{value:e}=t;if(!e)return t;const{miso_id:s}=e;return s?{...t,meta:{...t.meta,miso_id:s}}:t}function Mf(t){const{session:e,value:s}=t;if(!e||!s)return;const{miso_id:n}=s;n&&(e.meta.miso_id=n)}function BE(t){const{session:e,value:s}=t;if(!e||!s)return t;const{meta:{miso_id:n}={}}=e;return n?{...t,meta:{...t.meta,miso_id:n}}:t}function jf(t){const{request:e,value:s}=t;if(!e)return t;const{payload:n}=e||{},{q:i}=n||{};return i?{...t,value:{...s,keywords:i}}:t}function zE(t){const{value:e}=t;if(!e)return t;const{answer_stage:s}=e;return s?{...t,ongoing:!e.finished,meta:{...t.meta,answer_stage:s}}:t}function HE(t,e){if(!e)return t;const{status:s,value:n}=t;switch(s){case N.INITIAL:case N.LOADING:break;default:return t}return n&&n.facet_counts?t:{...t,value:{...n,facet_counts:e}}}function VE(t){const{value:e}=t;if(!e)return t;const{miso_id:s}=e;return s?{...t,value:{...e,root_miso_id:s}}:t}function QE(t,e,{role:s=g.PRODUCTS}={}){if(!e.value)return t;const{[s]:n=[],facet_counts:i,total:r,root_miso_id:o}=t.value,{[s]:c=[]}=e.value;return{...e,value:{...e.value,facet_counts:i,total:r,root_miso_id:o,[s]:[...n,...c]}}}function WE(t,{role:e=g.PRODUCTS}={}){const{status:s,request:n,value:i}=t;if(s!==N.READY||!n||!i)return t;const{[e]:r}=i;if(!r)return t;const{rows:o}=n.payload,{length:c}=r;return c<o?{...t,meta:{...t.meta,exhausted:!0}}:t}function GE(t,e){const{question_id:s}=e&&e.value||{};return s?{...t,value:{...t.value,question_id:s}}:t}function KE(t){const{role:e,type:s,items:n}=t,i={type:s==="viewable"?"viewable_impression":s,context:{custom_context:H({property:e})}};switch(Hb(s)&&(YE(e,n)?i.product_ids=(n||[]).map(r=>typeof r=="string"?r:r.product_id).filter(r=>r):(i.product_ids=[],i.context.custom_context.items=(n||[]).map(r=>r.text||r.id||r))),s){case ke.SUBMIT:i.context.custom_context.value=t.value;break;case ke.FEEDBACK:i.context.custom_context.value=i.value=t.value,i.context.custom_context.result_type=i.result_type=t.result_type;break}return H(i)}function YE(t,e=[]){return Bb(t)||e.length>0&&typeof e[0]=="object"&&e[0].product_id}function ZE(t,e){const{data:s}=e;if(!s)return t;const n=s.request&&s.request.payload&&s.request.payload.metadata;return n?Ve(t,{context:{custom_context:n}}):t}function JE(t,e){const{data:s}=e;if(!s)return t;const n=s.request&&s.request.payload;if(!n)return t;const{question:i,q:r,fq:o}=n;return Ve(t,{context:{custom_context:{question:i,q:r,fq:o}}})}function XE(t,e){if(e.role!==g.AFFILIATION)return t;const{items:s}=e,n=s[0]&&s[0].channel||void 0,i=s.map(r=>r.position);return Ve(t,{context:{custom_context:{channel:n,positions:i}}})}function qf(t,e){return t=e0(t,e),t=t0(t,e),t=s0(t,e),t}function e0(t={},{data:e}={}){if(!e)return t;const{request:s={},value:n={}}=e,{question_source:i}=s.payload&&s.payload.metadata||{},{question_id:r}=n;return Ve(t,{context:{custom_context:{question_source:i,question_id:r}}})}function t0(t,e){if(e.role!==g.ANSWER)return t;const{items:s=[]}=e;return Ve(t,{context:{custom_context:{urls:s.map(n=>n.url),texts:s.map(n=>n.text),class_names:s.map(n=>n.className),attributes:s.map(n=>n.attributes)}}})}function s0(t,{event_target:e}={}){return e?Ve(t,{context:{custom_context:{event_target:e}}}):t}function n0(t){const{value:e}=t;return!e||!e.finished||e.finish_reason!=="success"||e.sources&&e.sources.length>0?t:{...t,meta:{...t.meta,unanswerable:!0}}}const Bf=Object.freeze({}),zf=Object.freeze({[g.CONTAINER]:Bu.type,[g.ERROR]:Hu.type}),Hf=Object.freeze({}),i0=Object.freeze({api:Bf,layouts:zf,trackers:Hf}),r0=Object.freeze({mappings:{[g.ERROR]:t=>t.error}});class oe extends Ue{constructor(e){super(e.name||"workflow",e.plugin);let{context:s,plugin:n,client:i,defaults:r,options:o,extraOptions:c}=e;this._context=s,this._plugin=n=n||s._plugin,this._client=i=i||s._client,e=Object.freeze({...e,plugin:n,client:i}),this._name=e.name,this._roles=e.roles,this._extensions=n._getExtensions(i),this._defaults=r,this._options=o||new fu(s&&s._options,r),this._extraOptions=c||{},this._hub=new Tw({onUpdate:a=>this._onHubUpdate(a),onEmit:a=>this._onHubEmit(a)}),this._sessionContext=new WeakMap,i._events.emit("workflow",this),this._initProperties(e),this._initActors(e),this._initSubscriptions(e),this._initSession(e)}_initProperties(){}_initActors({roles:e}){const s=this._hub,n=this._client,i=this._options,r=this._extensions,o=this._plugin.layouts;this._sessions=new Aw(s),this._data=new vw(s,{source:xu(n),options:i,...this._extraOptions.api}),this._views=new Hw(s,{extensions:r,layouts:o,roles:e,options:i,workflow:this}),this._interactions=new Gw(s,{client:n,options:i})}_initSubscriptions({roles:e}){this._unsubscribes=[this._hub.on(Ci(),s=>this._onSession(s)),this._hub.on(gu(),s=>this.updateData(s)),this._hub.on(oo(),s=>this._onTracker(s))],e.main&&this._unsubscribes.push(this._hub.on(xt(e.main),s=>this._onMainViewUpdate(s)))}_initSession(){this.restart()}_getSessionContext(e){let s=this._sessionContext.get(e);return s||this._sessionContext.set(e,s={}),s}_onHubUpdate(e){this._runCallbacks(this._client.meta.parent._hubUpdateCallbacks,e)}_onHubEmit(e){this._runCallbacks(this._client.meta.parent._hubEmitCallbacks,e),this._emitAsWorkflowEvent(e)}_emitAsWorkflowEvent({action:e,name:s,state:n,silent:i}){i||this._emit(s,{_action:e,...n})}get uuid(){return this.session&&this.session.uuid}get session(){return this._hub.states[Ci()]}get states(){return this._hub.states}get status(){const e=this._hub.states[Se()];return e&&e.status}get views(){return this._views.interface}restart(){return this._emitInterruptEventIfNecessary(),this._sessions.restart(),this}_emitInterruptEventIfNecessary(){const{main:e}=this._roles;if(!e)return;const s=this._hub.states[xt(e)]||{};s.session&&s.status===N.LOADING&&(this._emitLifecycleEvent("interrupt",s),this._emitLifecycleEvent("finally",s))}_onSession(e){this.updateData({session:e})}_onMainViewUpdate(e){const{status:s}=e,n=s===N.READY,i=s===N.ERRONEOUS,r=i?"error":s;this._emitLifecycleEvent(r,e),n&&this._emitLifecycleEvent("done",e),(n||i)&&this._emitLifecycleEvent("finally",e)}_shallEmitLifecycleEvent(e,{session:s}){const n=this._getSessionContext(s),i=n.lifecycleEvents||(n.lifecycleEvents=new Set),r=i.has(e);return i.add(e),!r}_emitLifecycleEvent(e,s){this._shallEmitLifecycleEvent(e,s)&&this._emit(e,s)}_request(e={}){const{session:s}=this,n=cu(this._options.resolved.api,e);this.updateData({session:s,request:n}),this._hub.update(ro(),{...n,session:s})}updateData(e){if(!e)throw new Error("Data is required.");const{session:s}=e;if(!s)throw new Error("Session is required to update data.");if(!this.session)throw new Error("No session is created yet. Call workflow.restart() to start a new session.");if(s.uuid!==this.session.uuid)return;const n=Ff(e);if(!bi(n)){const i=Ff(this._hub.states[Se()]);if(!bi(i)&&n<=i)return}return this._updateData(e),this}_updateData(e){const s=this._hub.states[Se()];e=this._defaultProcessData(e,s);for(const n of this._options.resolved.dataProcessor)e=n(e,s);this._updateDataInHub(e,s)}_defaultProcessData(e,s){return e=FE(e,s),e=ME(e),e=qE(e),e}_updateDataInHub(e){this._hub.update(Se(),e)}notifyViewUpdate(e,s){return s={status:N.READY,session:this.session,...s},this._hub.update(xt(e),s),this}get trackers(){return this._views.trackers}_onTracker(e){const s=this,n=this._hub.states[Se()],i=this._buildInteraction({...e,data:n,workflow:s});this._sendInteraction(i)}_buildInteraction(e){let s=KE(e);s=this._defaultProcessInteraction(s,e);const{preprocess:n=[]}=this._options.resolved.interactions;for(const i of n)s=i(s,e);return s}_defaultProcessInteraction(e,s){return e=this._writeApiInfoToInteraction(e,s),e=this._writeMisoIdToInteraction(e,s),e=JE(e,s),e=ZE(e,s),e=XE(e,s),e}_writeApiInfoToInteraction(e){const{group:s,name:n}=this._options.resolved.api;return Ve(e,{context:{custom_context:{api_group:s,api_name:n}}})}_writeMisoIdToInteraction(e,s){const n=this._hub.states[xt(s.role)]||{},i=n.meta&&n.meta.miso_id||void 0;return i?Ve(e,{miso_id:i}):e}_sendInteraction(e){const{handle:s}=this._options.resolved.interactions;typeof s=="function"?s(e):this._hub.trigger(bu(),e)}destroy(e){this._emit("destroy"),this._destroy(e)}get destroyed(){return!!this._destroyed}_destroy({dom:e}={}){for(const s of this._unsubscribes||[])s();this._unsubscribes=[],this._views._destroy({dom:e}),this._data._destroy(),this._destroyed=!0}_runCallbacks(e,s){for(const n of e)try{n({workflow:this,...s})}catch(i){this._error(i)}}_emit(e,s){this._events.emit(e,{_event:e,...s}),this._context&&this._context._events.emit(e,{workflow:this,_event:e,...s})}}dn(oe.prototype),Object.assign(oe,{DEFAULT_API_OPTIONS:Bf,DEFAULT_LAYOUTS:zf,DEFAULT_TRACKERS:Hf,DEFAULT_OPTIONS:i0,ROLES_OPTIONS:r0});function o0(t){if(!t||!t.value)return t;const{value:e}=t;return{...t,value:c0(e)}}function c0(t){if(t.affiliation_products){const{affiliation_products:e,...s}=t;t={...s,affiliation:l0(e)}}else if(t.sovrn_aff){const{sovrn_aff:e,...s}=t;t={...s,affiliation:u0(e)}}return a0(t)}function a0(t){const{affiliation:e}=t;if(!e)return t;let{channel:s,products:n}=e;if(!n)return t;n=n.map(r=>({...r}));let i=0;for(const r of n)s&&(r.channel=s),r.position=i++;return{...t,affiliation:{...e,products:n}}}function l0(t){return{channel:"miso",products:t}}function u0({products:t,...e}){return{channel:"sovrn",...e,products:t.map(f0)}}function f0({id:t,deeplink:e,headline:s,description:n,currency:i,retailPrice:r,salePrice:o,discountRate:c,image:a,thumbnail:u,merchant:l,...d}){const m=l&&l.name,w=l&&l.logo;return H({id:`sovrn-${t}`,title:s,description:n,cover_image:a,url:e,currency:i,original_price:r,sale_price:o,discount_rate_percent:c,brand:m,brand_logo:w,custom_attributes:Vf({sovrn_id:t,thumbnail:u,merchant:l,...d})})}function Vf(t,e=""){return Object.keys(t).reduce((s,n)=>{const i=t[n];if(i===void 0)return s;const r=e?`${e}_${n}`:n;return typeof i=="object"?{...s,...Vf(i,r)}:{...s,[r]:i}},{})}function Ao(t){an(t,vo.prototype)}class vo{useLink(e,s={}){if(typeof e!="function"&&e!==!1)throw new Error("useLink(fn) expects fn to be a function or false");return this._linkFn=e?[e,s]:!1,this}_submitToPage(e={}){if(!this._linkFn)return;const s=this._getSubmitUrl(e),[n,i={}]=this._linkFn;if(i.open===!1)window.location.href=s;else{const r=i.target||"_blank",o=i.windowFeatures||"";window.open(s,r,o)}}_getSubmitUrl({q:e,...s}={}){if(!this._linkFn)throw new Error("useLink(fn) must be called before _getSubmitUrl()");return this._linkFn[0](e,s)}}const Qf=Object.freeze({...oe.DEFAULT_API_OPTIONS,group:ge.ASK,payload:{...oe.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at"],cite_link:1,cite_start:"[",cite_end:"]"}}),Wf=Object.freeze({actor:!1,api:{group:ge.ASK,name:He.AUTOCOMPLETE}}),Oo=Object.freeze({...oe.DEFAULT_LAYOUTS,[g.QUERY]:[vs.type,{placeholder:"Ask a question"}],[g.QUESTION]:[_n.type,{tag:"h2"}],[g.ANSWER]:pn.type,[g.FEEDBACK]:bf.type,[g.IMAGES]:[uf.type,{incremental:!0,itemType:"image"}],[g.SOURCES]:[Ts.type,{incremental:!0,itemType:"article",templates:{ordered:!0}}],[g.AFFILIATION]:[Of.type,{incremental:!0,itemType:"affiliation",link:{rel:"noopener nofollow"}}]}),Gf=Object.freeze({...oe.DEFAULT_TRACKERS,[g.ANSWER]:{active:!0,itemless:!0,deduplicated:!1,click:Qe.click},[g.IMAGES]:Qe,[g.SOURCES]:Qe,[g.AFFILIATION]:Qe,[g.PRODUCTS]:Qe}),d0=Object.freeze({...oe.DEFAULT_OPTIONS,api:Qf,autocomplete:Wf,layouts:Oo,trackers:Gf}),h0=fn(oe.ROLES_OPTIONS,{main:g.ANSWER,members:Object.keys(Oo),mappings:{[g.ANSWER]:$E,[g.REASONING]:PE}});class be extends oe{_initProperties(e){super._initProperties(e),this._questionId=void 0,this._autoQuery=!1}_initActors(e){super._initActors(e),this._feedback=new Ww(this._hub)}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(Ht(),s=>this._query(s)),this._views.get(g.ANSWER).on("citation-click",s=>this._onCitationClick(s)),this._views.get(g.ANSWER).on("link-click",s=>this._onAnswerLinkClick(s))]}restart(){this._questionId&&(this._questionId=void 0),super.restart()}_shallEmitLifecycleEvent(e,s){return e==="answer-stage"||super._shallEmitLifecycleEvent(e,s)}_emitInterruptEventIfNecessary(){const e=this._hub.states[xt(this._roles.main)]||{};e.session&&e.status!==N.INITIAL&&(e.status!==N.READY||e.ongoing)&&(this._emitLifecycleEvent("interrupt",e),this._emitLifecycleEvent("finally",e))}_onMainViewUpdate(e){const{status:s,session:n}=e,i=s===N.READY&&!e.ongoing,r=s===N.ERRONEOUS,o=i?"done":r?"error":s,c=this._getSessionContext(n),a=c.answerStage,u=e.meta&&e.meta.answer_stage;u&&u!==a&&(this._emitLifecycleEvent("answer-stage",Object.freeze({...e,answer_stage:u})),c.answerStage=u),this._emitLifecycleEvent(o,e),(i||r)&&this._emitLifecycleEvent("finally",e)}get questionId(){return this._questionId}autoQuery(e={}){pu.call(this,e)}query(e){if(!e.q&&!e.questionId)throw new Error("q is required in query() call");this._hub.update(Ht(),e)}_query(e={}){if(this._linkFn){this._submitToPage(e);return}this.restart(),this._writeQuestionSourceToSession(e);const s=this._buildPayload(e);this._request({payload:s})}_writeQuestionSourceToSession(e){this.session.meta.question_source=e.qs||ts.ORGANIC}_buildPayload(){throw new Error("Not implemented")}_writeWikiLinkTemplateToPayload(e){return!this._autoQuery||!this._autoQuery.param||this._autoQuery.param===_u?e:{...e,wiki_link_template:`?${this._autoQuery.param}=%s`}}_updateData(e){if(this._writeQuestionIdFromData(e),e.value&&!e.value.answer_stage){this._handleHeadResponse(e);return}super._updateData(e),mu.call(this,e)}_handleHeadResponse(e){}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=o0(e),e=zE(e),e}_writeQuestionIdFromData({value:e}){e&&this._writeQuestionId(e.question_id)}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=qf(e,s),e}_getQuestionSourceFromViewState(e){const{request:s}=this._hub.states[xt(e.role)]||{},{payload:n}=s||{};return n&&n.metadata&&n.metadata.question_source||void 0}_onCitationClick({index:e,event:s}){if(s.button!==0||lo(s))return;const{value:n}=this._hub.states[Se()]||{},{sources:i}=n||{},r=i&&i[e-1];!r||!r.product_id||(uo(s),this._views.trackers.sources.click([r.product_id],{event_target:"citation-link"}))}_onAnswerLinkClick({event:e,...s}){e.button===0&&(lo(e)||(uo(e),this._views.trackers.answer.click([],{items:[s]})))}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e)}_clearQuestionId(){this._questionId=void 0}_destroy(e){this._feedback._destroy(),super._destroy(e)}}Ao(be.prototype),Object.assign(be,{DEFAULT_API_OPTIONS:Qf,DEFAULT_AUTOCOMPLETE_OPTIONS:Wf,DEFAULT_LAYOUTS:Oo,DEFAULT_TRACKERS:Gf,DEFAULT_OPTIONS:d0,ROLES_OPTIONS:h0});const Kf=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:"miso-ask-combo",CONAINER_TAG:"miso-ask"},Symbol.toStringTag,{value:"Module"})),Yf=Object.freeze(Object.defineProperty({__proto__:null,followUpQuestions:"Related questions you can explore",question:"You asked...",relatedResources:"Go beyond, and learn more about this topic",sources:"This reply is based on the following articles",thoughts:"Thoughts"},Symbol.toStringTag,{value:"Module"}));let Zf=class{constructor({helpers:e}){this._helpers=e}errorSection(e){const{section:s,container:n}=this._helpers;return s(e,{name:"error"},[n(e,{name:"error",visibleWhen:"erroneous"},"<miso-error></miso-error>")])}answerGroup(e){return[this.answer(e),this.affiliation(e),this.sources(e)]}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}question(e){const{phrase:s}=this._helpers;return[s(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"]}sources(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"sources",visibleWhen:"nonempty"},[n(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}affiliation(e){const{container:s}=this._helpers,{affiliation:n=!0}=e||{};return n?s(e,{name:"affiliation",visibleWhen:"nonempty"},["<miso-affiliation></miso-affiliation>"]):""}};class Jf{constructor(e){this._context=e,ne(this,{lowerCamelToKebab:El,kebabToLowerCamel:wl,kebabOrSnakeToLowerCamel:yl})}normalizeOptions({classPrefix:e,circledCitationIndex:s=!0,phrases:n,...i}={}){return e=e||this._context.CLASS_PREFIX,n=this.normalizePhraseOptions(n),{classPrefix:e,circledCitationIndex:s,phrases:n,...i}}normalizePhraseOptions(e={}){if(!e)return{};const s={};for(const n in e)s[this.normalizePhraseOptionKey(n)]=e[n];return s}normalizePhraseOptionKey(e){return e=yl(e),e==="relatedQuestions"||e==="querySuggestions"?"followUpQuestions":e}phrase(e,{name:s,extraNames:n=[],tag:i="div",inline:r=!1}){const{classPrefix:o}=e,c=r?`${o}__phrase-inline`:`${o}__phrase`;return`<${i} class="${c} ${[s,...n].map(a=>`${o}__${a}-phrase`).join(" ")}">${this.phraseText(e,wl(s))}</${i}>`}phraseText(e,s){const{phrases:n={}}=e,i=n[s]||this._context.DEFAULT_PHRASES[s];switch(typeof i){case"function":return i(e);case"string":return i;default:return""}}section({classPrefix:e},{name:s},n){return this.element("section",{classes:[`${e}__section`,`${e}__${s}`]},n)}container({classPrefix:e,circledCitationIndex:s,parentQuestionId:n,workflow:i},{name:r,extraNames:o=[],visibleWhen:c,trait:a,logo:u=!1},l){const d=[r,...o].map(m=>`${e}__${m}-container`);return s&&d.push("miso-circled-citation-index"),this.element(this._context.CONAINER_TAG,{classes:d,visibleWhen:c,trait:a,logo:u,parentQuestionId:n,workflow:i},l)}element(e,s={},n=""){return`<${e}${this.attrs(s)}>${Array.isArray(n)?n.join(""):n}</${e}>`}attrs({classes:e=[],...s}={}){let n="";e.length&&(n+=` class="${e.join(" ")}"`);for(const i in s){const r=s[i];r!==void 0&&(n+=` ${El(i)}="${r}"`)}return n}}let _0=class extends Zf{constructor(){super({helpers:mn})}answerGroup(e){const{container:s}=this._helpers;return[this.question(e),this.reasoning(e),this.answer(e),this.affiliation(e),this.sources(e),this.followUpQuestions(e),s(e,{name:"bottom-spacing",visibleWhen:"ongoing"})]}question(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"question",visibleWhen:"ready"},[e.parentQuestionId?"<hr>":"",n(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"])}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready"},["<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}reasoning(e={}){const{phrases:s,reasoning:n={}}=e,{container:i,element:r,phraseText:o}=this._helpers,c=[];return n.expand&&c.push("expanded"),i(e,{name:"reasoning",visibleWhen:"nonempty"},[r("miso-stub",{classes:c,trait:"collapsible","data-role":"reasoning-box"},[r("div",{classes:["miso-collapsible__header"],"data-role":"toggle-expand"},[`<div class="miso-collapsible__icon">${n.icon||t1}</div>`,`<div class="miso-collapsible__title" data-role="title">${o(s,"thoughts")}</div>`,`<div class="miso-collapsible__toggle">${nf}</div>`]),r("div",{classes:["miso-collapsible__body"]},["<miso-reasoning></miso-reasoning>"])])])}sources(e){const{container:s,phrase:n}=this._helpers;return s(e,{name:"sources",visibleWhen:"nonempty"},["<hr>",n(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}followUpQuestions(e){const{container:s,phrase:n}=this._helpers,i="follow-up-questions",r=["query-suggestions"];return s(e,{name:i,extraNames:r,visibleWhen:"nonempty"},[n(e,{name:i,extraNames:r,tag:"h3"}),"<miso-follow-up-questions></miso-follow-up-questions>"])}followUps(e){const{features:s={}}=e;return s.followUpQuestions===!1?"":'<miso-follow-ups id="miso-ask-combo__follow-ups" class="miso-ask-combo__follow-ups"></miso-follow-ups>'}relatedResourcesSection(e){const{container:s,phrase:n,section:i}=this._helpers,{features:r={},logo:o=!0}=e,c=r.relatedResources===!1?"":s({...e,workflow:"active"},{name:"related-resources",visibleWhen:"nonempty",logo:o},[n(e,{name:"related-resources",tag:"h2"}),"<miso-related-resources></miso-related-resources>"]);return i(e,{name:"related-resources"},c)}};const mn=Si(new Jf({...Kf,DEFAULT_PHRASES:Yf})),Co=Si(new _0({helpers:mn}));function p0(t={}){const{normalizeOptions:e,section:s,container:n}=mn,{followUps:i,relatedResourcesSection:r,answerGroup:o}=Co;return t=e(t),[s(t,{name:"question"},[n(t,{name:"query"},"<miso-query></miso-query>")]),s(t,{name:"answer"},o(t)),i(t),r(t)].join("")}function Pi(t={}){const{normalizeOptions:e,section:s,container:n}=mn,{answerGroup:i}=Co;return t=e(t),s(t,{name:"follow-up"},[n(t,{name:"query",visibleWhen:"initial loading"},"<miso-query></miso-query>"),...i(t)])}const m0=Object.freeze(Object.defineProperty({__proto__:null,followUp:Pi,helpers:mn,root:p0,sections:Co},Symbol.toStringTag,{value:"Module"})),g0=Object.freeze({...be.DEFAULT_API_OPTIONS,name:He.QUESTIONS,payload:{...be.DEFAULT_API_OPTIONS.payload,related_resource_fl:["cover_image","url","created_at","updated_at","published_at"]}}),Xf=Object.freeze({...be.DEFAULT_LAYOUTS,[g.QUERY]:[vs.type,{templates:{buttonIcon:"send"}}],[g.REASONING]:pn.type,[g.RELATED_RESOURCES]:[Ts.type,{incremental:!0,itemType:"article"}],[g.QUERY_SUGGESTIONS]:Li.type,[g.FOLLOW_UP_QUESTIONS]:Li.type}),b0=Object.freeze({...be.DEFAULT_TRACKERS,[g.RELATED_RESOURCES]:Qe,[g.QUERY_SUGGESTIONS]:{...Qe,click:{...Qe.click,validate:t=>t.button===0}}}),w0=Object.freeze({followUp:Pi}),y0=Object.freeze({...be.DEFAULT_OPTIONS,api:g0,layouts:Xf,trackers:b0,templates:w0}),E0=fn(be.ROLES_OPTIONS,{members:Object.keys(Xf),mappings:{[g.QUERY_SUGGESTIONS]:NE,[g.FOLLOW_UP_QUESTIONS]:UE}});class ed extends be{constructor(e,s){super({name:"ask",context:e,roles:E0,defaults:y0,parentQuestionId:s})}_initProperties(e){super._initProperties(e);const{parentQuestionId:s}=e;ne(this,{parentQuestionId:s})}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(xt(g.REASONING),s=>this._onReasoningViewUpdate(s)),this._views.get(g.ANSWER).on("follow-up-click",s=>this._onFollowUpClick(s)),this._views.get(g.FOLLOW_UP_QUESTIONS).on("select",s=>this._onFollowUpQuestionSelect(s)),this._views.get(g.QUERY_SUGGESTIONS).on("select",s=>this._onQuerySuggestionSelect(s))]}_initSession(e){e.parentQuestionId&&this._context._byPqid.set(e.parentQuestionId,this),this._context._events.emit("create",this),super._initSession(e)}restart(){const{next:e}=this;e&&e.destroy(),this._questionId&&this._context._byQid.delete(this._questionId),super.restart()}get rootQuestionId(){return this._context.root.questionId}get previous(){const{parentQuestionId:e}=this;return e?this._context.getByQuestionId(e):void 0}get next(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e):void 0}getOrCreateNext(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e,{autoCreate:!0}):void 0}_buildPayload({q:e,qs:s,questionId:n,...i}={}){if(n)return H({...i,question_id:n});const{parentQuestionId:r}=this;let o=H({...i,question:e,parent_question_id:r});return o=Df({...o,qs:s}),o=this._writeWikiLinkTemplateToPayload(o),o}_updateData(e){super._updateData(e),this._triggerSuggestionsRefreshIfNecessary()}_triggerSuggestionsRefreshIfNecessary(){const{next:e}=this;if(!e)return;const s=e._views.get(g.QUERY_SUGGESTIONS);s&&s.refresh()}_onReasoningViewUpdate({status:e,ongoing:s}){if(e!==N.READY||s)return;const n=this._getReasoningBoxElement();n&&n.classList.add("done")}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeAdditionalAskPropertiesToInteraction(e,s),e}_writeAdditionalAskPropertiesToInteraction(e,s){const n=this.rootQuestionId;let{property:i}=e.context&&e.context.custom_context||{},r,o,c;return(s.role===g.FOLLOW_UP_QUESTIONS||s.role===g.QUERY_SUGGESTIONS)&&(i="suggested_followup_questions"),s.role===g.QUERY_SUGGESTIONS?(o=this.previous&&this.previous.parentQuestionId,r=this.parentQuestionId,c=this.previous&&this.previous.session.meta.question_source):o=this.parentQuestionId,Ve(e,{context:{custom_context:H({property:i,root_question_id:n,parent_question_id:o,question_id:r,question_source:c})}})}_onFollowUpClick({q:e,event:s}={}){s.button===0&&this._submitFollowUpQuestion({q:e,qs:ts.INLINE_QUESTION_LINK})}_onFollowUpQuestionSelect({value:e}){this._submitFollowUpQuestion({q:e,qs:ts.SUGGESTED_QUESTIONS})}_submitFollowUpQuestion({q:e="",qs:s}={}){if(e=e.trim(),!e)return;this.getOrCreateNext().query({q:e,qs:s})}_onQuerySuggestionSelect({value:e}){e&&this.query({q:e,qs:ts.SUGGESTED_QUESTIONS})}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e,this._context._byQid.set(e,this))}_clearQuestionId(){this._questionId&&(this._context._byQid.delete(this._questionId),this._questionId=void 0)}_getReasoningBoxElement(){const e=this._views.get(g.REASONING),s=e&&e.element;return s&&s.closest('[data-role="reasoning-box"]')}_destroy(e){const{next:s,parentQuestionId:n,questionId:i}=this;s&&s.destroy(e),n&&this._context._byPqid.delete(n),i&&this._context._byQid.delete(i),super._destroy(e)}}const td={event:"done"};function S0(t=td){switch(t===!0&&(t=td),typeof t=="string"&&(t={event:t}),typeof t){case"object":return e=>e&&t.event===e._event;case"function":return t;default:return()=>!1}}class sd extends no{constructor(e,s){super("asks",e,s),this._byQid=new Map,this._byPqid=new Map,this._root=new ed(this),this._events.on("*",n=>this._createNextIfNecessary(n)),this._events.on("loading",n=>this._setActive(n.workflow)),this._events.on("destroy",()=>this._requestEmitAfterDestroy()),this._events.on("after-destroy",()=>this._syncActiveOnAfterDestroy()),this._autoNextFn=void 0,this._active=this._root}get root(){return this._root}get workflows(){return[this._root,...this._byPqid.values()]}get active(){return this._active}getByQuestionId(e){if(typeof e!="string")throw new Error(`Required ID to be a string: ${e}`);return this._byQid.get(e)}getByParentQuestionId(e,{autoCreate:s=!1}={}){if(e===void 0)return this._root;if(typeof e!="string")throw new Error(`Required ID to be a string: ${e}`);let n=this._byPqid.get(e);return!n&&s&&(n=new ed(this,e)),n}reset({root:e=!0,events:s,...n}={}){s===void 0&&(s=!!e),s&&this._events.clear();for(const i of this._byPqid.values())i.destroy(n);e&&this._root.restart()}autoNext(e){this._autoNextFn=S0(e)}_createNextIfNecessary(e){if(!this._autoNextFn||!this._autoNextFn(e))return;const{workflow:s}=e;s&&s.getOrCreateNext()}_requestEmitAfterDestroy(){this._emitAfterDestroyRequested||(this._emitAfterDestroyRequested=!0,setTimeout(()=>{this._emitAfterDestroyRequested=!1,this._events.emit("after-destroy",{})},0))}_syncActiveOnAfterDestroy(){if(!this._active.destroyed)return;let e=this._root;for(;e.next&&e.next.status!==N.INITIAL;e=e.next);this._setActive(e)}_setActive(e){e!==this._active&&(this._active=e,this._events.emit("active",{workflow:e}))}}dn(sd.prototype,[_e.TEMPLATES]);const T0=10,A0=10,nd=Object.freeze({...oe.DEFAULT_API_OPTIONS,group:ge.SEARCH,payload:{...oe.DEFAULT_API_OPTIONS.payload,fl:["cover_image","url","created_at","updated_at","published_at","title"],rows:T0}}),Io=Object.freeze({...oe.DEFAULT_LAYOUTS,[g.QUERY]:[vs.type],[g.PRODUCTS]:[Ts.type,{incremental:!0,infiniteScroll:!0}],[g.KEYWORDS]:[_n.type,{raw:!0}],[g.TOTAL]:[_n.type,{raw:!0,format:"number"}],[g.FACETS]:[kf.type],[g.SORT]:[To.type],[g.MORE]:[Uf.type]}),id=Object.freeze({...oe.DEFAULT_TRACKERS,[g.PRODUCTS]:Qe}),rd=Object.freeze({active:!1,mode:"infiniteScroll",pageLimit:10}),v0=Object.freeze({...oe.DEFAULT_OPTIONS,api:nd,layouts:Io,trackers:id,pagination:rd}),O0=fn(oe.ROLES_OPTIONS,{main:g.PRODUCTS,members:Object.keys(Io),mappings:{[g.FACETS]:"facet_counts",[g.SORT]:kE}});class Te extends oe{_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on(Ht(),s=>this._query(s)),this._hub.on(ys(),()=>this._refine()),this._hub.on(co(),()=>this._more()),this._views.get(g.SORT).on("select",s=>this._handleSortSelect(s))]}restart(){super.restart(),this._page=0}get exhausted(){const e=this._hub.states[Se()];return!!(e&&e.meta&&e.meta.exhausted)}get page(){return this._page}autoQuery(e={}){pu.call(this,e)}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update(Ht(),e)}_query(e){if(this._linkFn){this._submitToPage(e);return}const s=zt.QUERY;this._views.filters.reset({silent:!0}),this.restart({type:s});const n=this._buildPayload(e,s);this._request({payload:n,type:s})}_refine(){const e=zt.REFINE,{facet_counts:s}=this._hub.states[Se()].value||{};this._currentFacetCounts=s,this.restart({type:e});const n=this._getQuery(),i=this._buildPayload(n,e);this._request({payload:i,type:e})}_more(){if(this.status!==N.READY)throw new Error("Can not call more() while loading.");if(this.exhausted||this._page>=A0-1)return;this._page++;const e=zt.MORE,s=this._getQuery(),n=this._buildPayload(s,e);this._request({payload:n,type:e})}_getQuery(){return this._hub.states[Ht()]}_getPageSize(){return this._options.resolved.api.payload.rows}_buildPayload(e,s){return e=this._writeFiltersToPayload(e),e=this._writePageInfoToPayload(e),s===zt.MORE&&(e=this._processPayloadForMoreRequest(e)),e}_writeFiltersToPayload(e){const s=this._hub.states[ys()],{facets:n,sort:i}=s||{};return H({...e,facet_filters:this._buildFacetFilters(n),order_by:this._buildOrderBy(i)})}_buildFacetFilters(e){if(!e)return;const s={};for(const n in e){const i=e[n];!i||!i.length||(s[n]={terms:i})}return Object.keys(s).length?s:void 0}_buildOrderBy(e){if(e)return es(e)}_writePageInfoToPayload(e){return{...e,metadata:{...e.metadata,page:this._page}}}_processPayloadForMoreRequest(e={}){const s=this._hub.states[Se()],{[this._roles.main]:n=[]}=s&&s.value||{},i=n.map(o=>o.product_id).filter(o=>o),r=[...e.exclude||[],...i];return r.length===0?e:{...e,exclude:r}}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=jf(e),e=HE(e,this._currentFacetCounts),e=WE(e,{role:this._roles.main}),e}_updateData(e){super._updateData(e),mu.call(this,e)}_updateDataInHub(e,s){e=this._appendResultsFromMoreRequest(e),super._updateDataInHub(e,s)}_appendResultsFromMoreRequest(e){const{request:s}=e;if(!s)return e;const{metadata:n}=s.payload;if(!n||!n.page)return VE(e);const i=this._hub.states[Se()];return QE(i,e,{role:this._roles.main})}_handleSortSelect({value:e}={}){e&&(this._views.filters.update({sort:e}),this._views.filters.apply())}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeRootMisoIdToInteraction(e),e}_writeRootMisoIdToInteraction(e){const s=this._hub.states[Se()],{root_miso_id:n}=s&&s.value||{};return n?Ve(e,{context:{custom_context:{root_miso_id:n}}}):e}}dn(Te.prototype,[_e.PAGINATION,_e.FILTERS]),Ao(Te.prototype),Object.assign(Te,{DEFAULT_API_OPTIONS:nd,DEFAULT_LAYOUTS:Io,DEFAULT_TRACKERS:id,DEFAULT_PAGINATION:rd,DEFAULT_OPTIONS:v0,ROLES_OPTIONS:O0});const C0=be.ROLES_OPTIONS;class I0 extends be{constructor(e){super({name:"hybrid-search/answer",plugin:e._plugin,client:e._client,options:e._options,defaults:e._defaults,roles:C0,superworkflow:e})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow}_initSession(){}_doLoading(e){const{session:s}=this;this.updateData({...e,session:s})}_queryWithQuestionId(e){const{session:s}=this,{request:n,value:i}=e;this.updateData({...e,session:s});const{question_id:r}=i;if(!r)return;const o={...n.payload,question_id:r};o.metadata.page!==void 0&&delete o.metadata.page,this._hub.update(ro(),{...n,payload:o,session:s})}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=jf(e),e=BE(e),e=n0(e),e}_handleHeadResponse(e){super._handleHeadResponse(e),Mf(e)}_onTracker(e){this._superworkflow._onTracker(e)}}const x0=Te.ROLES_OPTIONS.members;function R0(t){return x0.includes(t)?"results":"answer"}class k0{constructor(e){this._subviews=e,this._containers=new Set}get filters(){return this._subviews.results.filters}get(e){return this._getSubviews(e).get(e)}addContainer(e){if(this._containers.has(e))return;this._containers.add(e);const{components:s}=e;for(const n of s)this.addComponent(n)}removeContainer(e){for(const s of this._getAllSubviews())s.removeContainer(e);this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e,this._addContainerToSubviews(e._container,e)}removeComponent(e){this._getViewByElement(e).element=void 0,this._removeContainerFromSubviewsIfNecessary(e._container)}updateComponentRole(e,s,n){}refreshElement(e){const s=e.isContainer?this._containers.get(e):this._getViewByElement(e);s&&s.refresh({force:!0})}_getAllSubviews(){return Object.values(this._subviews)}_getSubviews(e){return this._subviews[R0(e)]}_getViewByElement(e){let{role:s}=e;if(!s)throw new Error("Component must have a role");return this.get(s)}_addContainerToSubviews(e,s){if(!e)return;const{role:n}=s,i=this._getSubviews(n);if(!i._containers.has(e)){for(const r of this._getAllSubviews())if(r!==i&&r._containers.has(e)){for(const o of e.components)if(r.containsElement(o))throw new Error(`<${e.tagName.toLowerCase()}> cannot contain both <${o.tagName.toLowerCase()}> and <${s.tagName.toLowerCase()}>, for they don't share the same data lifecycle.`);throw new Error(`Failed to add container <${e.tagName.toLowerCase()}> with child component <${s.tagName.toLowerCase()}>.`)}i.addContainer(e)}}_removeContainerFromSubviewsIfNecessary(e){if(!(!e||e.components.length>0))for(const s of this._getAllSubviews())s.removeContainer(e)}}const L0=Object.freeze({members:[]});function $0({layouts:t,trackers:e,...s}={}){return{active:!1,...s,layouts:{},trackers:{}}}function P0(t,e){return Ni(t)===Ni(e)}function Ni(t){return t&&t.value&&t.value.trim()||void 0}class N0 extends oe{constructor(e,{defaults:s,...n}={}){super({name:"autocomplete",plugin:e._plugin,client:e._client,defaults:$0(s),roles:L0,superworkflow:e,...n})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow,this._active=e.defaults.active}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,e.superworkflow._hub.on(yu(),s=>this._query(s))]}get enabled(){return this._active}enable(){this._active=!0}disable(){this._active=!1}_query(e){if(!this._active||P0(e,this._args))return;this._args=e,this.restart();const{session:s}=this;if(s.meta.input=e,!Ni(e)){this._updateCompletions({session:s,status:N.INITIAL});return}const n=this._buildPayload(e);this._request({payload:n})}_buildPayload(e){return{q:Ni(e)}}_updateDataInHub(e){e.value&&(e={...e,value:e.value.completions}),this._updateCompletions(e)}_updateCompletions(e){this._superworkflow.updateCompletions(e)}}function od(t){an(t,U0.prototype)}class U0{_initAutocomplete(e){this._autocomplete=new N0(this,{defaults:e.defaults.autocomplete})}get autocomplete(){return this._autocomplete}updateCompletions(e){return this._hub.update(io(),e),this}_destroyAutocomplete(){this._autocomplete&&this._autocomplete._destroy(),this._autocomplete=void 0}}const D0=Object.freeze({group:ge.ASK,name:He.SEARCH,payload:{...be.DEFAULT_API_OPTIONS.payload,...Te.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at","title","authors"]}}),cd=Object.freeze({...be.DEFAULT_LAYOUTS,...Te.DEFAULT_LAYOUTS,[g.QUERY]:[vs.type,{placeholder:""}],[g.QUESTION]:[_n.type,{raw:!0}],[g.SOURCES]:[Zu.type,{incremental:!0,itemType:"article",templates:{ordered:!0,article:ku,articleInfoBlock:po}}]}),F0=Object.freeze({...be.DEFAULT_TRACKERS,...Te.DEFAULT_TRACKERS}),M0=Object.freeze({...Te.DEFAULT_PAGINATION,active:!0}),j0=Object.freeze({api:{group:ge.ASK,name:He.SEARCH_AUTOCOMPLETE,payload:{completion_fields:["suggested_queries"]}}}),q0=Object.freeze({sort:{options:[{field:"relevance",text:"Relevance",default:!0},{field:"published_at",text:"Date"}]}}),B0=Object.freeze({...be.DEFAULT_OPTIONS,...Te.DEFAULT_OPTIONS,api:D0,layouts:cd,trackers:F0,autocomplete:j0,pagination:M0,filters:q0}),z0=Object.freeze({main:g.PRODUCTS,members:Object.keys(cd),mappings:Object.freeze({...be.ROLES_OPTIONS.mappings,...Te.ROLES_OPTIONS.mappings})}),H0=Object.freeze({api:Object.freeze({polling:!1})});class xo extends Te{constructor(e,s){super({name:"hybrid-search",plugin:e,client:s,roles:z0,defaults:B0,extraOptions:H0})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e),this._answer=new I0(this)}_initActors(e){super._initActors(e),this._views=new k0({results:this._views,answer:this._answer._views})}restart({type:e}={}){super.restart(),(!e||e===zt.QUERY)&&this._answer.restart()}get answer(){return this._answer}get questionId(){return this._answer.questionId}_buildPayload(e,s){return e=super._buildPayload(e,s),e=DE(e,s),e=Df(e),e=this._writeQuestionIdToPayload(e,s),e.answer!==!1&&(e=be.prototype._writeWikiLinkTemplateToPayload.call(this,e)),e}_buildOrderBy(e){if(e)return e.field}_writeQuestionIdToPayload(e,s){if(s===zt.QUERY)return e;const n=this._answer.questionId;return n?Ti(e,{metadata:{question_id:n}}):e}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),Mf(e),e}_updateDataInHub(e,s){this._dispatchDataToAnswerWorkflow(e),e=GE(e,s),super._updateDataInHub(e,s)}_dispatchDataToAnswerWorkflow(e){const{request:s}=e;if(!s)return;const{type:n,payload:i}=s;if(!(n!==zt.QUERY||!i||i.answer===!1))switch(e.status){case N.LOADING:this._answer._doLoading(e);break;case N.READY:this._answer._queryWithQuestionId(e);break}}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=qf(e,s),e}_destroy(){this._answer.destroy(),super._destroy()}}dn(xo.prototype,[_e.PAGINATION,_e.FILTERS]),od(xo.prototype);const V0=Object.freeze({group:ge.SEARCH,name:He.SEARCH,payload:{fl:["*"]}}),Q0=Object.freeze({api:{group:ge.SEARCH,name:He.AUTOCOMPLETE,payload:{completion_fields:["suggested_queries","title"],fl:["title","url","cover_image"]}}}),W0=Object.freeze({...Te.DEFAULT_LAYOUTS}),G0=Object.freeze({...Te.DEFAULT_TRACKERS}),K0=Object.freeze({...Te.DEFAULT_OPTIONS,api:V0,autocomplete:Q0,layouts:W0,trackers:G0}),Y0=Te.ROLES_OPTIONS;class ad extends Te{constructor(e,s){super({name:"search",plugin:e,client:s,roles:Y0,defaults:K0})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e)}notifyViewUpdate(e=g.PRODUCTS,...s){return super.notifyViewUpdate(e,...s),this}_destroy(e){this._destroyAutocomplete(),super._destroy(e)}}od(ad.prototype);class ld extends no{constructor(e,s,n){super(e,s,n),this._members=new Map}workflows(){return[...this._members.values()]}create(e=so){if(this._members.has(e))throw new Error(`Unit already exists: ${e}`);return this._create(e)}has(e=so){return this._members.has(e)}get(e=so){if(typeof e!="string")throw new Error(`Required unit ID to be a string: ${e}`);return this._members.get(e)||this._create(e)}_create(e){throw new Error("Not implemented")}}class De extends oe{_initProperties(e){super._initProperties(e);const{id:s}=e;ne(this,{id:s})}_initSession(e){this._context._members.set(e.id,this),super._initSession(e)}_defaultProcessInteraction(e,s){return e=super._defaultProcessInteraction(e,s),e=this._writeUnitIdToInteraction(e,s),e}_writeUnitIdToInteraction(e){const s=this.id,n=this.uuid;return Ve(e,{context:{custom_context:{unit_id:s,unit_instance_uuid:n}}})}_destroy(e){this._context._members.delete(this.id),super._destroy(e)}}Object.assign(De,{DEFAULT_API_OPTIONS:oe.DEFAULT_API_OPTIONS,DEFAULT_LAYOUTS:oe.DEFAULT_LAYOUTS,DEFAULT_TRACKERS:oe.DEFAULT_TRACKERS,DEFAULT_OPTIONS:oe.DEFAULT_OPTIONS,ROLES_OPTIONS:oe.ROLES_OPTIONS});const Z0=Object.freeze({...De.DEFAULT_API_OPTIONS,group:ge.RECOMMENDATION,name:He.USER_TO_PRODUCTS,payload:{...De.DEFAULT_API_OPTIONS.payload,fl:["*"]}}),ud=Object.freeze({...De.DEFAULT_LAYOUTS,[g.PRODUCTS]:Ts.type}),J0=Object.freeze({...De.DEFAULT_TRACKERS,[g.PRODUCTS]:Qe}),X0=Object.freeze({...De.DEFAULT_OPTIONS,api:Z0,layouts:ud,trackers:J0}),eS=fn(De.ROLES_OPTIONS,{main:g.PRODUCTS,members:Object.keys(ud)});class tS extends De{constructor(e,s){super({name:"recommendation",context:e,roles:eS,defaults:X0,id:s})}start(){return this._request(),this}notifyViewUpdate(e=g.PRODUCTS,...s){return super.notifyViewUpdate(e,...s),this}}class sS extends ld{constructor(e,s){super("recommendations",e,s)}_create(e){return new tS(this,e)}}const nS=Object.freeze({...De.DEFAULT_API_OPTIONS,group:ge.ASK,name:He.RELATED_QUESTIONS}),fd=Object.freeze({...De.DEFAULT_LAYOUTS,[g.RELATED_QUESTIONS]:[Ts.type,{itemType:"question",link:{rel:"noopener nofollow"}}],[g.QUERY]:[vs.type,{placeholder:"Ask a question"}]}),iS=Object.freeze({...De.DEFAULT_TRACKERS,[g.RELATED_QUESTIONS]:Qe,[g.CONTAINER]:{...Qe,itemless:!0},[g.QUERY]:{[ke.SUBMIT]:{active:!0}}}),rS=Object.freeze({...De.DEFAULT_OPTIONS,api:nS,layouts:fd,trackers:iS}),oS=fn(De.ROLES_OPTIONS,{main:g.RELATED_QUESTIONS,members:Object.keys(fd)});class dd extends De{constructor(e,s){super({name:"explore",context:e,roles:oS,defaults:rS,id:s})}_initProperties(e){super._initProperties(e),this._productId=void 0,this._linkFn=void 0}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._views.get(g.RELATED_QUESTIONS).on("click",s=>this._handleRelatedQuestionClick(s)),this._hub.on(Ht(),s=>this._query(s))]}set productId(e){console.warning("DEPRECATED: use useApi() instead"),this.useApi({product_id:e})}useApi(...e){const s=(typeof e[0]=="object"?e[0]:e[1])||{},{product_id:n}=s;return n&&(this._productId=n),super.useApi(...e)}useLink(e,s){return vo.prototype.useLink.call(this,e,s),s&&this.useLayouts({[g.RELATED_QUESTIONS]:{link:s}}),this}start({relatedQuestions:e=!0}={}){if(this._linkFn===void 0)throw new Error("Must define link mapping function with useLink(fn) before calling start()");if(e)this._request();else{const{session:s}=this;this.updateData({session:s,request:{},value:{related_questions:[]}})}return this}notifyViewUpdate(e=g.RELATED_QUESTIONS,...s){return super.notifyViewUpdate(e,...s),this}_defaultProcessData(e,s){return e=super._defaultProcessData(e,s),e=this._addUrlToRelatedQuestions(e),e}_addUrlToRelatedQuestions(e){const{value:s}=e;if(!s||!s.related_questions)return e;const n=this._linkFn&&this._linkFn[0],i=s.related_questions.map(n?(r=>({text:r,url:this._getSubmitUrl({q:r,generated:!0})})):(r=>({text:r})));return{...e,value:{...s,related_questions:i}}}_handleRelatedQuestionClick({value:e,...s}){this._events.emit("select",Object.freeze({...s,question:e}))}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update(Ht(),e)}_query(e){this._submitToPage({...e,generated:!1})}_getSubmitUrl(e){let s=vo.prototype._getSubmitUrl.call(this,e);return!e.generated||!this._productId?s:`${s}&qs=${encodeURIComponent(this._productId)}`}}Ao(dd.prototype);class cS extends ld{constructor(e,s){super("explores",e,s)}_create(e){return new dd(this,e)}}let aS=class extends Ue{constructor({name:e,plugin:s,MisoClient:n,...i}){super(e||"combo",s),this._name=e,this._plugin=s,this._MisoClient=n,this._options=i}get MisoClient(){return this._MisoClient}get element(){return this._element}async waitForElement(){return this._element||(this._elementRes||(this._elementRes=new Ot)).promise}set element(e){this._element=e,this._elementRes&&this._elementRes.resolve(e)}start(e){this._started||(this._started=!0,e&&this.config(e),this._start())}_start(){throw new Error("Unimplemented")}};function lS(t,e,s){if(!t)throw new Error("client is required");uS(t,s),fS(e)}function uS(t,{template:e=Pi,...s}={}){if(typeof e!="function")throw new Error("template must be a function or undefined");const n=Object.keys(s).length>0;e===Pi&&!n||t.ui.asks.useTemplates({followUp:n?i=>e({...s,...i}):e})}function fS(t){if(!t||t.tagName.toLowerCase()==="miso-follow-ups")return;const e=document.createElement("miso-follow-ups");for(const{name:s,value:n}of t.attributes)e.setAttribute(s,n);t.parentNode.replaceChild(e,t)}function dS(t,e){if(!t)throw new Error("client is required");if(e)for(const s of e.querySelectorAll("miso-ask"))s.setAttribute("workflow","active")}const hd=Object.freeze(Kf),hS=Object.freeze(Yf),_d=Object.freeze(m0),_S=Object.freeze(Object.defineProperty({__proto__:null,constants:hd,phrases:hS,templates:_d,wireFollowUps:lS,wireRelatedResources:dS},Symbol.toStringTag,{value:"Module"})),{currentScript:Ro}=document,pS=Object.freeze({templates:_d,autostart:!0}),mS=["templates","phrases","features"];class gS{constructor(){this._defaults=pS,this._scriptSrc=yS(),this._pageUrl=ES()}resolve(e){return wS(pd(this._defaults,this._scriptSrc,e,this._pageUrl))}}function pd(...t){let e={};for(const s of t)s&&(e=bS(e,s));return e}function bS(t,e){if(!e)return t;Object.assign(t,e);for(const s of mS)s in e&&(t[s]={...t[s],...e[s]});return t}function wS({api_key:t,api_host:e,templates:s,phrases:n,...i}={}){return H({apiKey:t,apiHost:e,templates:ko(s),phrases:n,...i})}function yS(){if(!Ro||!Ro.src)return{};const t=document.createElement("a");t.href=Ro.src;const e={};for(const[s,n]of new URLSearchParams(t.search))s!=="q"&&(e[s]=md(n));return e}function ES(){const t={};for(const[e,s]of new URLSearchParams(window.location.search))e.startsWith("miso_")&&e.length>5&&e!=="miso_api_key"?t[e.substring(5)]=md(s):e==="q"&&(t.q=s);return t}function md(t){return t===""?!0:t==="false"?!1:t}function ko(t){if(t==null)return t;switch(typeof t){case"function":return t;case"string":case"number":return()=>t;case"object":return Array.isArray(t)?t.map(ko):SS(t,ko);default:throw new Error(`Unsupported template type: ${t}`)}}function SS(t,e){const s={};for(const[n,i]of Object.entries(t))s[n]=e(i);return s}class TS{constructor(e,{classPrefix:s=hd.CLASS_PREFIX}={}){if(!e)throw new Error("Root element is required");ne(this,{root:e,followUpsSection:e.querySelector(`.${s}__follow-ups`),relatedResourcesSection:e.querySelector(`.${s}__related-resources`),relatedResourcesContainer:e.querySelector(`.${s}__related-resources miso-ask`)})}}class AS extends aS{constructor(e,s){super({name:"ask-combo",plugin:e,MisoClient:s}),this._options=new gS,this._localOptions={}}config(e={}){e=pd(this._localOptions,e);const s=this._options.resolve(e);return this._localOptions=e,this._resolvedOptions=s,this}get resolvedOptions(){return this._resolvedOptions||(this._resolvedOptions=this._options.resolve(this._localOptions))}get client(){return this._client}get elements(){return this._elements}autoStart(){this.resolvedOptions.autostart&&this.start()}async _start(){await og(),await this.waitForElement(),await this._setupMisoClient(),this._renderRootContent(),this._createClientInstance(),this._setupWorkflows()}async _setupMisoClient(){const{MisoClient:e,resolvedOptions:s}=this,{version:n}=e;ne(e,{name:"miso-ask-combo"}),(n==="dev"||n.indexOf("beta")>0||s.debug)&&e.plugins.use("std:debug"),s.dry_run&&e.plugins.use("std:dry-run"),s.lorem&&await e.plugins.install("std:lorem")}_renderRootContent(){const{element:e,resolvedOptions:s}=this,{templates:n={}}=s;e.innerHTML=n.root(s),this._elements=new TS(e,s)}async _createClientInstance(){this._client=new MisoClient(this.resolvedOptions)}async _setupWorkflows(){const{MisoClient:e,client:s,elements:n,resolvedOptions:i}=this,{wireFollowUps:r,wireRelatedResources:o}=e.ui.defaults.ask,{templates:c={},features:a={},api:u}=i,l=s.ui.asks,d=s.ui.ask;u&&l.useApi(u),a.followUpQuestions!==!1&&r(s,n.followUpsSection,{...i,template:c.followUp}),a.relatedResources!==!1&&a.followUpQuestions!==!1&&o(s,n.relatedResourcesSection),d.autoQuery()}}class vS extends kl{constructor(e){super("layouts",e,{libName:"layout",keyName:s=>s.type}),this._plugin=e}get(e){return this._libraries[e]}create(e,s){if(e!==!1)switch(typeof e){case"function":return{render:e};case"string":const n=this.get(e);if(!n)throw new Error(`Layout of name '${e}' not found.`);return new n(s);default:throw new Error(`Expect a string, a render function, or boolean value false: ${e}`)}}}const OS="miso-stub",Lo="trait",CS=Object.freeze([Lo]);class ns extends HTMLElement{static get tagName(){return OS}static get observedAttributes(){return CS}constructor(){super(),this._traits=[]}connectedCallback(){this._syncTraits()}disconnectedCallback(){for(const e of this._traits)this._destroyTrait(e);this._traits=[]}attributeChangedCallback(e){switch(e){case Lo:this._syncTraits();break}}_syncTraits(){const e=(this.getAttribute(Lo)||"").split(/\s+/).filter(Boolean),s=[];for(const n of this._traits)e.includes(n.constructor.traitName)?s.push(n):this._destroyTrait(n);if(e.length>0){const n=IS(ns.MisoClient);for(const i of e){if(this._traits.find(c=>c.constructor.traitName===i))continue;const r=n[i];if(!r){console.warn(`Unknown trait: ${i}`);continue}const o=new r(this);s.push(o)}}this._traits=s}_destroyTrait(e){try{e._destroy&&e._destroy()}catch(s){console.error(s)}}}function IS(t){const e=t.ui&&t.ui.traits||{};return Object.values(e).reduce((s,n)=>(s[n.traitName]=n,s),{})}let gd,$o,Ui;async function bd(t){const e=await xS(t);return $o=$o||e.any(),Ui=Ui||await $o,Ui.ui||await LS(0),Ui}async function xS(t){return t.MisoClient||window.MisoClient||gd||(gd=RS())}async function RS(){return new Promise(t=>{(window.misocmd||(window.misocmd=[])).push(()=>t(window.MisoClient))})}function kS(t){for(let e=t;e;e=e.parentNode)if(e.isContainer)return e;throw new Error(`${t.tagName} needs to be placed under a workflow container element.`)}function LS(t){return new Promise(e=>setTimeout(e,t))}const gn="logo",wd="auto",$S=Object.freeze([...ns.observedAttributes,gn]);function Po(t){if(!t)return wd;switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Invalid logo attribute value: ${t}.`)}}function PS(t){switch(t){case wd:return;case!0:return"true";case!1:return"false";default:throw new Error(`Invalid logo property value: ${t}.`)}}class et extends ns{static get observedAttributes(){return $S}constructor(){super(),this._workflow=void 0,this._components=new Set}get isContainer(){return!0}get workflow(){return this._workflow}set workflow(e){this._setWorkflow(e)}get logo(){return Po(this.getAttribute(gn))}set logo(e){if(this.logo===e)return;const s=PS(e);s?this.setAttribute(gn,s):this.removeAttribute(gn)}async connectedCallback(){super.connectedCallback();const e=this._client=await bd(et);document.body.contains(this)&&(this._setWorkflow(this._getWorkflow(e)),this._onConnected(e))}disconnectedCallback(){this._setWorkflow(void 0),super.disconnectedCallback()}_onConnected(e){}_getWorkflow(e){throw new Error("Unimplemented")}_setWorkflow(e){this._workflow!==e&&(this._workflow&&this._workflow._views.removeContainer(this),e&&e._views.addContainer(this),this._workflow=e)}attributeChangedCallback(e,s,n){switch(e){case gn:this._handleLogoUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleLogoUpdate(e,s){const n=Po(e),i=Po(s);n===i||!this._workflow||this._workflow._views.refreshElement(this)}get components(){return[...this._components]}_addComponent(e){this._components.has(e)||(this._components.add(e),this._workflow&&this._workflow._views.addComponent(e))}_removeComponent(e){this._components.has(e)&&(this._workflow&&this._workflow._views.removeComponent(e),this._components.delete(e))}_updateComponentRole(e,s,n){this._workflow&&this._workflow._views.updateComponentRole(e,s,n)}}const NS="miso-ask",No="workflow",bn="parent-question-id",US=Object.freeze([...et.observedAttributes,No,bn]);class DS extends et{static get tagName(){return NS}static get observedAttributes(){return US}_getWorkflow(e){return this.boundToActiveWorkflow?e.ui.asks.active:this._getWorkflowByParentQuestionId(e,this.parentQuestionId)}_getWorkflowByParentQuestionId(e,s){return e.ui.asks.getByParentQuestionId(s,{autoCreate:!0})}get parentQuestionId(){return this.getAttribute(bn)||void 0}set parentQuestionId(e){e=e!==void 0?`${e}`:void 0,e!==this.parentQuestionId&&(e?this.setAttribute(bn,e):this.removeAttribute(bn))}get boundToActiveWorkflow(){return this.getAttribute(No)==="active"}_setWorkflow(e){this._workflow!==e&&(super._setWorkflow(e),e&&(this.parentQuestionId=e.parentQuestionId))}async connectedCallback(){if(await super.connectedCallback(),document.body.contains(this)){const e=this._client.ui.asks;this._unsubscribes=[...this._unsubscribes||[],e.on("active",s=>{this.boundToActiveWorkflow&&(this.workflow=s.workflow)})]}}disconnectedCallback(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],super.disconnectedCallback()}attributeChangedCallback(e,s,n){switch(e){case bn:this._handleParentQuestionIdUpdate(s,n);break;case No:this._handleQuestionUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleQuestionUpdate(e,s){e=e||void 0,s=s||void 0,!(e===s||!this._client)&&s===ATTR_VALUE_ACTIVE&&this._setWorkflow(this._getWorkflow(this._client))}_handleParentQuestionIdUpdate(e,s){e=e||void 0,s=s||void 0,!(e===s||!this._client)&&this._setWorkflow(this._getWorkflowByParentQuestionId(this._client,s))}}const wn="unit-id",FS=Object.freeze([...et.observedAttributes,wn]);class Di extends et{static get observedAttributes(){return FS}_getWorkflow(e){return this._getWorkflowByUnitId(e,this.unitId)}_getWorkflowByUnitId(e,s){throw new Error("Not implemented")}get unitId(){return this.getAttribute(wn)||void 0}set unitId(e){e=e&&`${e}`,e?this.setAttribute(wn,e):this.removeAttribute(wn)}attributeChangedCallback(e,s,n){switch(e){case wn:this._handleUnitIdUpdate(s,n);break;default:super.attributeChangedCallback(e,s,n)}}_handleUnitIdUpdate(e,s){e===s||!this._client||this._setWorkflow(this._getWorkflowByUnitId(this._client,s))}}const MS="miso-explore";class jS extends Di{static get tagName(){return MS}static get observedAttributes(){return Di.observedAttributes}_getWorkflowByUnitId(e,s){return e.ui.explores.get(s)}}const qS="miso-hybrid-search";class BS extends et{static get tagName(){return qS}static get observedAttributes(){return et.observedAttributes}_getWorkflow(e){return e.ui.hybridSearch}}const zS="miso-search";class HS extends et{static get tagName(){return zS}static get observedAttributes(){return et.observedAttributes}_getWorkflow(e){return e.ui.search}}const VS="miso-recommendation";class QS extends Di{static get tagName(){return VS}static get observedAttributes(){return Di.observedAttributes}_getWorkflowByUnitId(e,s){return e.ui.recommendations.get(s)}}const WS=Object.freeze(Object.defineProperty({__proto__:null,MisoAskElement:DS,MisoExploreElement:jS,MisoHybridSearchElement:BS,MisoRecommendationElement:QS,MisoSearchElement:HS},Symbol.toStringTag,{value:"Module"})),GS="miso-component",yn="role",KS=Object.freeze([yn]);class le extends HTMLElement{static get tagName(){return GS}static get observedAttributes(){return KS}constructor({role:e}={}){super(),e&&Object.defineProperty(this,"_role",{value:e,writable:!1})}get role(){return this._role}connectedCallback(){const e=kS(this);this._container&&this._container!==e&&this._container._removeComponent(this),this._syncRole(),e._addComponent(this),this._container=e,this._containerResolution&&this._containerResolution.resolve(e)}_syncRole(){const e=this.getAttribute(yn);if(e)this._role?console.warn(`Element <${this.tagName}>' already has a predefined role '${this._role}', so attribute '${yn}="${e}"' is ignored.`):this._role=e;else{if(!this._role)throw new Error(`An attribute '${yn}' is required for element <${this.tagName}>`);return}}disconnectedCallback(){this._container&&(this._container._removeComponent(this),this._container=void 0,this._containerResolution=void 0)}attributeChangedCallback(e,s,n){s!==n&&e===yn&&this._container&&this._container._updateComponentRole(this,s,n)}}class YS extends le{constructor(){super({role:g.QUERY})}static get tagName(){return"miso-query"}}class ZS extends le{constructor(){super({role:g.FOLLOW_UP_QUESTIONS})}static get tagName(){return"miso-follow-up-questions"}}class JS extends le{constructor(){super({role:g.QUERY_SUGGESTIONS})}static get tagName(){return"miso-query-suggestions"}}class XS extends le{constructor(){super({role:g.FEEDBACK})}static get tagName(){return"miso-feedback"}}class eT extends le{constructor(){super({role:g.PRODUCTS})}connectedCallback(){console.warn("Element <miso-results> is deprecated. Please use <miso-products> instead."),super.connectedCallback()}static get tagName(){return"miso-results"}}class tT extends le{constructor(){super({role:g.PRODUCTS})}static get tagName(){return"miso-products"}}class sT extends le{constructor(){super({role:g.QUESTION})}static get tagName(){return"miso-question"}}class nT extends le{constructor(){super({role:g.ANSWER})}static get tagName(){return"miso-answer"}}class iT extends le{constructor(){super({role:g.REASONING})}static get tagName(){return"miso-reasoning"}}class rT extends le{constructor(){super({role:g.SOURCES})}static get tagName(){return"miso-sources"}}class oT extends le{constructor(){super({role:g.IMAGES})}static get tagName(){return"miso-images"}}class cT extends le{constructor(){super({role:g.RELATED_RESOURCES})}static get tagName(){return"miso-related-resources"}}class aT extends le{constructor(){super({role:g.RELATED_QUESTIONS})}static get tagName(){return"miso-related-questions"}}class lT extends le{constructor(){super({role:g.AFFILIATION})}static get tagName(){return"miso-affiliation"}}class uT extends le{constructor(){super({role:g.KEYWORDS})}static get tagName(){return"miso-keywords"}}class fT extends le{constructor(){super({role:g.TOTAL})}static get tagName(){return"miso-total"}}class dT extends le{constructor(){super({role:g.FACETS})}static get tagName(){return"miso-facets"}}class hT extends le{constructor(){super({role:g.MORE})}static get tagName(){return"miso-more"}}class _T extends le{constructor(){super({role:g.SORT})}static get tagName(){return"miso-sort"}}class pT extends le{constructor(){super({role:g.ERROR})}static get tagName(){return"miso-error"}}const mT=Object.freeze(Object.defineProperty({__proto__:null,MisoAffiliationElement:lT,MisoAnswerElement:nT,MisoComponentElement:le,MisoErrorElement:pT,MisoFacetsElement:dT,MisoFeedbackElement:XS,MisoFollowUpQuestionsElement:ZS,MisoImagesElement:oT,MisoKeywordsElement:uT,MisoMoreElement:hT,MisoProductsElement:tT,MisoQueryElement:YS,MisoQuerySuggestionsElement:JS,MisoQuestionElement:sT,MisoReasoningElement:iT,MisoRelatedQuestionsElement:aT,MisoRelatedResourcesElement:cT,MisoResultsElement:eT,MisoSortElement:_T,MisoSourcesElement:rT,MisoTotalElement:fT},Symbol.toStringTag,{value:"Module"}));class En extends ns{static get observedAttributes(){return ns.observedAttributes}constructor(){super(),this._context=void 0}get context(){return this._context}set context(e){this._setContext(e)}async connectedCallback(){super.connectedCallback();const e=this._client=await bd(En);document.body.contains(this)&&this._setContext(this._getContext(e))}disconnectedCallback(){this._setContext(void 0),super.disconnectedCallback()}_getContext(e){throw new Error("Unimplemented")}_setContext(e){if(this._context===e)return;const s=this._context;this._context=e,this._onContext(e,s)}_onContext(){}}const gT="miso-follow-ups";class bT extends En{static get tagName(){return gT}static get observedAttributes(){return En.observedAttributes}constructor(){super(),this._elementToWorkflow=new WeakMap,this._unsubscribes=[]}_getContext(e){return e.ui.asks}_onContext(e,s){e!==s&&(this._unwire(),this._wire(e))}_unwire(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}_wire(e){e&&(e._autoNextFn||e.autoNext(),this._unsubscribes.push(e.on("create",s=>{const{parentQuestionId:n}=s,i=s._options.resolved.templates.followUp;if(!n||!i)return;const r=this.children.length;this.insertAdjacentHTML("beforeend",i({parentQuestionId:n}));const o=this.children.length;for(const c of Array.prototype.slice.call(this.children,r,o))this._elementToWorkflow.set(c,s)})),this._unsubscribes.push(e.on("loading",({workflow:s})=>{for(const n of this.children)if(this._elementToWorkflow.get(n)===s){n.scrollIntoView({behavior:"smooth",block:"start"});break}})),this._unsubscribes.push(e.on("destroy",({workflow:s})=>{for(const n of this.children)this._elementToWorkflow.get(n)===s&&(this._elementToWorkflow.delete(n),n.remove())})))}}const wT=Object.freeze(Object.defineProperty({__proto__:null,MisoFollowUpsElement:bT},Symbol.toStringTag,{value:"Module"}));class Fi extends HTMLElement{constructor(){super()}async connectedCallback(){document.body.contains(this)&&this._setCombo(this._getCombo(Fi.MisoClient))}disconnectedCallback(){}_getCombo(e){throw new Error("Unimplemented")}_setCombo(e){this._combo!==e&&(this._combo=e,e.element=this,e.autoStart())}}const yT="miso-ask-combo";class ET extends Fi{static get tagName(){return yT}constructor(){super()}_getCombo(e){return e.ui.combo.ask}}const ST=Object.freeze(Object.defineProperty({__proto__:null,MisoBannerElement:ki,MisoStubElement:ns,combos:Object.freeze(Object.defineProperty({__proto__:null,MisoAskComboElement:ET},Symbol.toStringTag,{value:"Module"})),containers:WS,contexts:wT,roles:mT},Symbol.toStringTag,{value:"Module"})),yd="miso-hybrid-search-combo",Ed=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:yd,CONAINER_TAG:"miso-hybrid-search"},Symbol.toStringTag,{value:"Module"})),TT="You asked ${value}",AT="Sources",vT="You searched for ${value}",OT="${value} Results",Sd="Show more",Td="Show less",Ad=Object.freeze(Object.defineProperty({__proto__:null,keywords:vT,question:TT,showLess:Td,showMore:Sd,sources:AT,total:OT},Symbol.toStringTag,{value:"Module"}));class CT extends Zf{constructor(){super({helpers:Mi})}answer(e){const{container:s}=this._helpers;return s(e,{name:"answer",visibleWhen:"ready !unanswerable"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}answerBox(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__answer-box`]},[s("div",{classes:[`${n}__answer-box-inner`]},this.answerGroup(e)),this.answerBoxToggle(e)])}question(e){const{phrase:s}=this._helpers;return s(e,{name:"question",tag:"div"}).replaceAll("${value}","<miso-question></miso-question>")}answerBoxToggle(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__answer-box-toggle-container`]},[s("div",{classes:[`${n}__answer-box-toggle`],"data-role":"answer-box-toggle"})])}searchResultsGroup(e){const{container:s}=this._helpers;return s(e,{name:"search-results",visibleWhen:"loading ready"},[this.searchResultsInfoGroup(e),this.searchResultsFilters(e),"<miso-products></miso-products>",this.more(e)])}searchResultsInfoGroup(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-info`]},[this.keywords(e),this.total(e)])}searchResultsFilters(e){const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-filters`]},["<miso-facets></miso-facets>","<miso-sort></miso-sort>"])}keywords(e){const{phrase:s}=this._helpers;return s(e,{name:"keywords",tag:"div",inline:!0}).replaceAll("${value}","<miso-keywords></miso-keywords>")}total(e){const{phrase:s}=this._helpers;return s(e,{name:"total",tag:"div",inline:!0}).replaceAll("${value}","<miso-total></miso-total>")}more(e){if(!e.moreButton)return"";const{element:s}=this._helpers,{classPrefix:n}=e;return s("div",{classes:[`${n}__search-results-more-container`]},["<miso-more></miso-more>"])}}const Mi=Si(new Jf({...Ed,DEFAULT_PHRASES:Ad})),vd=Si(new CT({helpers:Mi}));function IT(t={}){const{normalizeOptions:e,section:s,container:n}=Mi;t=e(t);const{answerBox:i,answerGroup:r,searchResultsGroup:o}=vd,{answerBox:c=!1}=t;return[s(t,{name:"question"},[n(t,{name:"query"},"<miso-query></miso-query>")]),s(t,{name:"answer"},c?[i(t)]:r(t)),s(t,{name:"search-results"},o(t))].join("")}const xT=Object.freeze(Object.defineProperty({__proto__:null,helpers:Mi,root:IT,sections:vd},Symbol.toStringTag,{value:"Module"})),Sn="answer-box-open",ji="answer-box-shown",Od='[data-role="answer-box-toggle"]';class Uo{constructor(e,s,{classPrefix:n=yd,phrases:i={},hideWhenUnanswerable:r=!0}={}){this._client=e,this._workflow=e.ui.hybridSearch,this._element=s,this._classPrefix=n,this._phrases=i,this._hideWhenUnanswerable=r,this._init()}_init(){const e=this._element,s=this._workflow;s.answerBox=this,s._unsubscribes.push(()=>{s.answerBox===this&&(this.destroy(),s.answerBox=void 0)});const n=i=>this._handleClick(i);e.addEventListener("click",n),this._syncWofkflowStatus(),this._syncButtonText(),this._unsubscribes=[()=>e.removeEventListener("click",n),s._answer._hub.on(Se(),()=>this._syncWofkflowStatus())]}_handleClick({target:e,button:s}){s===0&&e.closest(Od)&&this.toggleOpen()}_syncWofkflowStatus(){const{status:e}=this._workflow._answer,{meta:{unanswerable:s=!1}={}}=this._workflow._answer._hub.states[Se()];switch(e){case N.ERRONEOUS:case N.READY:s&&this._hideWhenUnanswerable?this.hide():this.show();break;default:this.hide()}}_updateBoxStatus(e,s){this._element.classList[e](`${this._classPrefix}__${s}`)}_syncButtonText(){const e=this.isOpen?this._phrases.showLess||Td:this._phrases.showMore||Sd;for(const s of this._element.querySelectorAll(Od))s.textContent=e}_syncScroll(){this.isOpen||this._element.scrollIntoView({behavior:"smooth"})}destroy(){for(const s of this._unsubscribes)s();const e=this._workflow;e&&e.answerBox===this&&delete e.answerBox}}const RT={isOpen:Sn,shown:ji},kT={toggleOpen:["toggle",Sn],open:["add",Sn],close:["remove",Sn],toggleHidden:["toggle",ji],show:["add",ji],hide:["remove",ji]};for(const[t,e]of Object.entries(RT))Object.defineProperty(Uo.prototype,t,{get(){return this._element.classList.contains(`${this._classPrefix}__${e}`)}});for(const[t,[e,s]]of Object.entries(kT))Uo.prototype[t]=function(){this._updateBoxStatus(e,s),s===Sn&&(this._syncButtonText(),this._syncScroll())};function LT(t,e,s={}){if(!t)throw new Error("client is required");e&&new Uo(t,e,s)}const $T=Object.freeze(Ed),PT=Object.freeze(Ad),NT=Object.freeze(xT),UT=Object.freeze(Object.defineProperty({__proto__:null,constants:$T,phrases:PT,templates:NT,wireAnswerBox:LT},Symbol.toStringTag,{value:"Module"})),DT=Object.freeze(_S),FT=Object.freeze(UT),MT=Object.freeze(Object.defineProperty({__proto__:null,ask:DT,hybridSearch:FT},Symbol.toStringTag,{value:"Module"}));function jT(t,e){for(const s of e)Object.defineProperty(t,s,{get(){return this._element&&this._element.classList.contains(s)}})}function qT(t,e){for(const{action:s,classAction:n,className:i}of e)t[s]=function(){this._element&&this._element.classList[n](i),this[`_${s}`]&&this[`_${s}`]()}}function BT(t,e){t._handleClick=function(s){const{target:n,button:i}=s;if(i===0){for(let{role:r,selector:o,action:c}of e)if(o=o||`[data-role="${r}"]`,!!o&&n.closest(o)){this[c](),s.stopPropagation();return}}}}function zT(t){const e=t._element;if(!e)return()=>{};const s=n=>t._handleClick(n);return e.addEventListener("click",s),()=>e.removeEventListener("click",s)}const Cd="miso-collapsible",Do="expanded",HT=[{action:"expand",classAction:"add",className:Do},{action:"collapse",classAction:"remove",className:Do}],VT=[{role:"expand",action:"expand"},{role:"collapse",action:"collapse"},{role:"toggle-expand",action:"toggle"}];class qi{static get traitName(){return"collapsible"}constructor(e){this._element=e,e.collapsible=this,e.classList.add(Cd),this._unsubscribes=[zT(this)]}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],delete this._element.collapsible,this._element.classList.remove(Cd),this._element=void 0}toggle(){this.expanded?this.collapse():this.expand()}}jT(qi.prototype,[Do]),qT(qi.prototype,HT),BT(qi.prototype,VT);const QT=Object.freeze(Object.defineProperty({__proto__:null,CollapsibleTrait:qi},Symbol.toStringTag,{value:"Module"})),WT="ui";let Id,xd;async function GT(){return xd||(xd=vl(KT()))}function KT(){return Id||(Id=Ol(WT))}const YT="std:ui";class ZT extends Ue{static get id(){return YT}constructor(){super("ui"),this.layouts=new vS(this),this._recommendations=new WeakMap,this._explores=new WeakMap,this._asks=new WeakMap,this._extensions=new WeakMap,this._ready=new Ot}async install(e,s){s.addSubtree(this),e.on("create",this._injectClient.bind(this));const n={defaults:MT,traits:QT};qt(n,this,["layouts","combo","ready"]),ne(this,{MisoClient:e}),ne(e,{ui:n}),this.combo=new eA(this,e);const i=Object.values(RE).filter(m=>m.type);for(const m of i)m.MisoClient=e;for(const m of i)this.layouts.register(m);const{containers:r,roles:o,combos:c,contexts:a,...u}=ST,l=[...Object.values(c),...Object.values(a),...Object.values(r),...Object.values(o),...Object.values(u)],d=[et,En,Fi];for(const m of[...d,...l])m.MisoClient=e;await GT();for(const m of l)rg(m);this._ready.resolve()}async requireExtension(e){switch(e){case"markdown":return await this.MisoClient.plugins.install("std:ui-markdown");default:throw new Error(`Unknown extension: ${e}`)}}get ready(){return Promise.all([this._ready.promise,MisoClient.any()]).then(()=>{})}_injectClient(e){ne(e,{ui:new XT(this,e)})}_getExtensions(e){if(this._extensions.has(e))return this._extensions.get(e);const s=new JT(this,e);return this._extensions.set(e,s),s}_getRecommendations(e){let s=this._recommendations.get(e);return s||this._recommendations.set(e,s=new sS(this,e)),s}_getExplores(e){let s=this._explores.get(e);return s||this._explores.set(e,s=new cS(this,e)),s}_getAsks(e){let s=this._asks.get(e);return s||this._asks.set(e,s=new sd(this,e)),s}}class JT{constructor(e,s){this._plugin=e,this._client=s,this._contexts={}}async require(e){if(this._contexts[e])return this._contexts[e];const s=await this._plugin.requireExtension(e);return this._contexts[e]=s.getContext(this._client)}}class XT{constructor(e,s){this._plugin=e,this._client=s,ne(this,{sources:{api:xu(s)}})}get recommendations(){return this._recommendations||(this._recommendations=this._plugin._getRecommendations(this._client))}get recommendation(){return this.recommendations.get()}get search(){return this._search||(this._search=new ad(this._plugin,this._client))}get asks(){return this._asks||(this._asks=this._plugin._getAsks(this._client))}get ask(){return this.asks.root}get hybridSearch(){return this._hybridSearch||(this._hybridSearch=new xo(this._plugin,this._client))}get explores(){return this._explores||(this._explores=this._plugin._getExplores(this._client))}get explore(){return this.explores.get()}get ready(){return this._plugin._ready.promise}}class eA{constructor(e,s){this._plugin=e,this._MisoClient=s}get ask(){return this._ask||(this._ask=new AS(this._plugin,this._MisoClient))}}It.plugins.use(ZT);function tA(t){const e=[];function s(i){e.push(i)}Al("misodev",{transform:i=>()=>i({addCmdTransform:s})});const n=i=>{for(const r of e)i=r(i);return i};setTimeout(()=>{Al("misocmd",{transform:n}),t&&t()})}It.attach(),tA(Xg);const Tn=new It(ml);Tn.ui.asks.useApi({source_fl:["cover_image","url","created_at","updated_at","published_at","tags"],related_resource_fl:["cover_image","url","created_at","updated_at","published_at","tags"]}),Tn.ui.asks.useApi(!1);const Cs={setRequestListener:t=>{Tn.ui.asks.on("request",t)},query:t=>{Tn.ui.ask.query({q:t})},updateData:(t,e,s)=>{t.updateData({session:e,value:s})},askFollowUpQuestion:(t,e)=>{if(!t||!e)return;const s=t.getOrCreateNext();s&&s.query({q:e})},sendFeedbackInteraction:(t,e)=>{Tn.api.interactions.upload({type:"feedback",value:e,result_type:"answer",context:{custom_context:{value:e,result_type:"answer",api_group:"ask",api_name:"questions",root_question_id:t,question_id:t}}})}},sA=(t={})=>({parentQuestionId:null,questionId:null,query:null,data:null,pollingIntervalId:null,selectedFeedback:null,sdkSession:null,sdkWorkflow:null,...t}),ht=Fn({threadQuestions:[],showingSourcesQuestionId:null}),nA=async t=>{Cs.query(t)},iA=async t=>{if(ht.threadQuestions.length===0)return;const e=Fo().sdkWorkflow;Cs.askFollowUpQuestion(e,t)};Cs.setRequestListener(({workflow:t,session:e,payload:s})=>{const{parent_question_id:n=null,question:i}=s;ht.threadQuestions.push(sA({parentQuestionId:n,query:i,sdkWorkflow:fr(t),sdkSession:fr(e)})),rA(s)});const rA=async t=>{try{const e=await Qm(t),{question_id:s}=e.data;Fo().questionId=s,oA(s)}catch(e){console.error(e)}},oA=t=>{const e=Is(t);!e||e.pollingIntervalId||(kd(t),e.pollingIntervalId=setInterval(()=>{kd(t)},1e3))},Rd=t=>{const e=Is(t);!e||!e.pollingIntervalId||(clearInterval(e.pollingIntervalId),e.pollingIntervalId=null)},kd=async t=>{const e=Is(t);if(e)try{const s=await Wm(t),{data:n}=s,{finished:i}=n;e.data=n,Cs.updateData(e.sdkWorkflow,e.sdkSession,n),i&&Rd(t)}catch(s){Rd(t),console.error(s)}},Is=t=>ht.threadQuestions.find(e=>e.questionId===t),Fo=()=>ht.threadQuestions[ht.threadQuestions.length-1],cA=t=>ft(()=>Is(t)),aA=(t,e)=>{const s=Is(t);if(s.selectedFeedback===e){Cs.sendFeedbackInteraction(t,"unselected"),s.selectedFeedback=null;return}Cs.sendFeedbackInteraction(t,e),s.selectedFeedback=e},lA=t=>{ht.showingSourcesQuestionId=t},uA=()=>{ht.showingSourcesQuestionId=null},fA=ft(()=>ht.threadQuestions.filter(t=>!!t.questionId)),dA=ft(()=>Fo()),hA=ft(()=>ht.showingSourcesQuestionId&&Is(ht.showingSourcesQuestionId)?.data?.sources||null),Qt=()=>({query:nA,askFollowUpQuestion:iA,questions:fA,useQuestionById:cA,latestQuestion:dA,sendFeedback:aA,showSources:lA,hideSources:uA,showingSources:hA}),_A={class:"mi-answer-dialog"},pA={class:"mi-answer-dialog__question-container"},mA={class:"mi-answer-dialog__question"},gA={class:"mi-answer-dialog__answer-container"},bA={class:"mi-answer-dialog__answer"},wA=["parent-question-id"],yA={key:0,class:"mi-answer-dialog__feedback-block"},EA={class:"mi-answer-dialog__feedback-buttons-container"},SA={class:"mi-answer-dialog__sponsored-results-block"},TA=vt({__name:"AnswerDialog",props:{questionId:{type:String,required:!0}},setup(t){const e=t,{onMobileSponsoredPlaceholderReady:s}=Ra(),n=Et(null),{useQuestionById:i,sendFeedback:r,showSources:o}=Qt(),c=i(e.questionId);return Yn(()=>{s(n.value,[])}),(a,u)=>(Z(),se("div",_A,[C("div",pA,[u[3]||(u[3]=C("div",{class:"mi-answer-dialog__question-icon"},[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 15C0 23.28 6.72 30 15 30C23.28 30 30 23.28 30 15C30 6.72 23.28 0 15 0C6.72 0 0 6.72 0 15ZM15 4.5C17.49 4.5 19.5 6.51 19.5 9C19.5 11.49 17.49 13.5 15 13.5C12.51 13.5 10.5 11.49 10.5 9C10.5 6.51 12.51 4.5 15 4.5ZM15 25.8C11.25 25.8 7.935 23.88 6 20.97C6.045 17.985 12 16.35 15 16.35C17.985 16.35 23.955 17.985 24 20.97C22.065 23.88 18.75 25.8 15 25.8Z",fill:"#0053C0"})])],-1)),C("div",mA,it(fe(c).query),1)]),C("div",gA,[u[6]||(u[6]=Or('<div class="mi-answer-dialog__answer-icon" data-v-bfb47cca><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none" data-v-bfb47cca><path d="M13.9599 10.5273L16.5781 12.1834L15.5771 21.6525L29.6648 13.0529C29.4112 11.0257 28.7439 9.07228 27.7044 7.31403C26.6649 5.55578 25.2754 4.03022 23.6223 2.83208C21.9691 1.63395 20.0874 0.788819 18.0943 0.349181C16.1011 -0.0904579 14.0389 -0.11522 12.0357 0.276432C10.0326 0.668083 8.13128 1.46779 6.44985 2.62588C4.76842 3.78397 3.34278 5.27573 2.26146 7.00851C1.18015 8.7413 0.466243 10.6781 0.164082 12.6987C-0.138078 14.7192 -0.0220431 16.7804 0.504982 18.7542L13.9599 10.5273Z" fill="#323A56" data-v-bfb47cca></path><path d="M14.3898 26.4296L11.7717 24.7735L12.7726 15.3086L1.75391 22.0408C3.22578 24.837 5.54748 27.0925 8.38364 28.4814C11.2198 29.8703 14.4236 30.3208 17.5323 29.7679C20.641 29.2149 23.4936 27.6871 25.6781 25.405C27.8626 23.123 29.2659 20.205 29.6853 17.0724L14.3898 26.4296Z" fill="#323A56" data-v-bfb47cca></path><path d="M15.699 9.16412C16.8618 9.16412 17.8043 8.22058 17.8043 7.05667C17.8043 5.89276 16.8618 4.94922 15.699 4.94922C14.5363 4.94922 13.5938 5.89276 13.5938 7.05667C13.5938 8.22058 14.5363 9.16412 15.699 9.16412Z" fill="#F64E00" data-v-bfb47cca></path></svg></div>',1)),C("div",bA,[C("miso-ask",{class:"miso-circled-citation-index","visible-when":"ready",logo:!1,"parent-question-id":fe(c).parentQuestionId},[...u[4]||(u[4]=[C("miso-answer",null,null,-1)])],8,wA),fe(c)?.data?.sources&&fe(c).data.sources.length>0?(Z(),se("button",{key:0,class:"mi-answer-dialog__view-sources-button",onClick:u[0]||(u[0]=l=>fe(o)(t.questionId))},[...u[5]||(u[5]=[vr(" View all sources ",-1),C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.6798 0L4.7998 1.88L10.9065 8L4.7998 14.12L6.6798 16L14.6798 8L6.6798 0Z",fill:"#0053C0"})],-1)])])):Ye("",!0)])]),fe(c)?.data?.finished?(Z(),se("div",yA,[u[7]||(u[7]=vr(" Was this answer helpful? ",-1)),C("div",EA,[C("button",{class:Ps(["mi-answer-dialog__feedback-button",{"mi-answer-dialog__feedback-button--active":fe(c).selectedFeedback==="helpful"}]),onClick:u[1]||(u[1]=l=>fe(r)(t.questionId,"helpful"))}," Yes ",2),C("button",{class:Ps(["mi-answer-dialog__feedback-button",{"mi-answer-dialog__feedback-button--active":fe(c).selectedFeedback==="unhelpful"}]),onClick:u[2]||(u[2]=l=>fe(r)(t.questionId,"unhelpful"))}," No ",2)])])):Ye("",!0),C("div",SA,[u[8]||(u[8]=C("div",{class:"mi-answer-dialog__sponsored-results-block-title"},"Sponsored Results",-1)),C("div",{ref_key:"adContainerElement",ref:n,class:"mi-answer-dialog__sponsored-results-container"},null,512)])]))}},[["__scopeId","data-v-bfb47cca"]]),AA={class:"mi-answer-thread"},vA=vt({__name:"AnswerThread",setup(t){const{questions:e}=Qt();return(s,n)=>(Z(),se("div",AA,[(Z(!0),se($e,null,Zn(fe(e),i=>(Z(),se("div",{class:"mi-answer-thread__item",key:i.questionId},[he(TA,{"question-id":i.questionId},null,8,["question-id"])]))),128))]))}},[["__scopeId","data-v-67cc1278"]]),OA={class:"mi-sponsored-results-block"},CA={key:0,class:"mi-sponsored-results-block__title"},IA=vt({__name:"SponsoredResultsBlock",setup(t){const{onDesktopSponsoredPlaceholderReady:e}=Ra(),s=Et(null),n=Et(null),{latestQuestion:i}=Qt();return ds(i,r=>{r&&e(s.value,n.value,[])}),(r,o)=>(Z(),se("div",OA,[fe(i)?(Z(),se("div",CA,"Sponsored Results")):Ye("",!0),C("div",{ref_key:"containerElement",ref:s,class:"mi-sponsored-results-block__container"},null,512),C("div",{ref_key:"stickyContainerElement",ref:n,class:"mi-sponsored-results-block__sticky-container"},null,512)]))}},[["__scopeId","data-v-20ce34d2"]]),xA={key:0,class:"mi-related-questions-block"},RA={class:"mi-related-questions-block__list"},kA=["onClick"],LA={class:"mi-related-questions-block__question-text"},$A=vt({__name:"RelatedQuestionsBlock",setup(t){const{latestQuestion:e,askFollowUpQuestion:s}=Qt(),n=ft(()=>e.value?.data?.followup_questions||[]);return(i,r)=>n.value.length>0?(Z(),se("div",xA,[r[2]||(r[2]=C("div",{class:"mi-related-questions-block__title"},"Related Questions",-1)),C("div",RA,[(Z(!0),se($e,null,Zn(n.value,o=>(Z(),se("button",{key:o,class:"mi-related-questions-block__question",onClick:c=>fe(s)(o)},[r[0]||(r[0]=Or('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17" fill="none" data-v-e3bba5ef><mask id="path-1-outside-1_43036_900" maskUnits="userSpaceOnUse" x="5.53027" y="1.62976" width="15" height="15" fill="black" data-v-e3bba5ef><rect fill="white" x="5.53027" y="1.62976" width="15" height="15" data-v-e3bba5ef></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1066 10.1769H14.5646L14.3725 9.99168C15.0449 9.20952 15.4497 8.19408 15.4497 7.08945C15.4497 4.62633 13.4531 2.62976 10.99 2.62976C8.52684 2.62976 6.53027 4.62633 6.53027 7.08945C6.53027 9.55257 8.52684 11.5491 10.99 11.5491C12.0946 11.5491 13.11 11.1443 13.8922 10.472L14.0774 10.6641V11.2061L17.508 14.6298L18.5303 13.6075L15.1066 10.1769ZM10.9907 10.1771C9.28226 10.1771 7.90319 8.79804 7.90319 7.08964C7.90319 5.38123 9.28226 4.00216 10.9907 4.00216C12.6991 4.00216 14.0781 5.38123 14.0781 7.08964C14.0781 8.79804 12.6991 10.1771 10.9907 10.1771Z" data-v-e3bba5ef></path></mask><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1066 10.1769H14.5646L14.3725 9.99168C15.0449 9.20952 15.4497 8.19408 15.4497 7.08945C15.4497 4.62633 13.4531 2.62976 10.99 2.62976C8.52684 2.62976 6.53027 4.62633 6.53027 7.08945C6.53027 9.55257 8.52684 11.5491 10.99 11.5491C12.0946 11.5491 13.11 11.1443 13.8922 10.472L14.0774 10.6641V11.2061L17.508 14.6298L18.5303 13.6075L15.1066 10.1769ZM10.9907 10.1771C9.28226 10.1771 7.90319 8.79804 7.90319 7.08964C7.90319 5.38123 9.28226 4.00216 10.9907 4.00216C12.6991 4.00216 14.0781 5.38123 14.0781 7.08964C14.0781 8.79804 12.6991 10.1771 10.9907 10.1771Z" fill="url(#paint0_linear_43036_900)" data-v-e3bba5ef></path><path d="M14.5646 10.1769L13.8704 10.8968L14.161 11.1769H14.5646V10.1769ZM14.3725 9.99168L13.6142 9.3398L12.9985 10.056L13.6783 10.7115L14.3725 9.99168ZM13.8922 10.472L14.612 9.77782L13.9565 9.09798L13.2403 9.71364L13.8922 10.472ZM14.0774 10.6641H15.0774V10.2605L14.7973 9.96993L14.0774 10.6641ZM14.0774 11.2061H13.0774V11.6209L13.371 11.9139L14.0774 11.2061ZM17.508 14.6298L16.8016 15.3376L17.5087 16.0433L18.2151 15.3369L17.508 14.6298ZM18.5303 13.6075L19.2374 14.3146L19.9438 13.6082L19.2381 12.9011L18.5303 13.6075ZM15.1066 10.1769V9.17693H14.5646V10.1769V11.1769H15.1066V10.1769ZM14.5646 10.1769L15.2587 9.45709L15.0666 9.27184L14.3725 9.99168L13.6783 10.7115L13.8704 10.8968L14.5646 10.1769ZM14.3725 9.99168L15.1308 10.6436C15.9529 9.6872 16.4497 8.44261 16.4497 7.08945H15.4497H14.4497C14.4497 7.94556 14.1368 8.73184 13.6142 9.3398L14.3725 9.99168ZM15.4497 7.08945H16.4497C16.4497 4.07405 14.0054 1.62976 10.99 1.62976V2.62976V3.62976C12.9008 3.62976 14.4497 5.17862 14.4497 7.08945H15.4497ZM10.99 2.62976V1.62976C7.97456 1.62976 5.53027 4.07405 5.53027 7.08945H6.53027H7.53027C7.53027 5.17862 9.07913 3.62976 10.99 3.62976V2.62976ZM6.53027 7.08945H5.53027C5.53027 10.1049 7.97456 12.5491 10.99 12.5491V11.5491V10.5491C9.07913 10.5491 7.53027 9.00029 7.53027 7.08945H6.53027ZM10.99 11.5491V12.5491C12.3431 12.5491 13.5877 12.0524 14.5441 11.2303L13.8922 10.472L13.2403 9.71364C12.6323 10.2363 11.8461 10.5491 10.99 10.5491V11.5491ZM13.8922 10.472L13.1724 11.1661L13.3576 11.3582L14.0774 10.6641L14.7973 9.96993L14.612 9.77782L13.8922 10.472ZM14.0774 10.6641H13.0774V11.2061H14.0774H15.0774V10.6641H14.0774ZM14.0774 11.2061L13.371 11.9139L16.8016 15.3376L17.508 14.6298L18.2144 13.9219L14.7838 10.4983L14.0774 11.2061ZM17.508 14.6298L18.2151 15.3369L19.2374 14.3146L18.5303 13.6075L17.8232 12.9004L16.8009 13.9227L17.508 14.6298ZM18.5303 13.6075L19.2381 12.9011L15.8144 9.47053L15.1066 10.1769L14.3988 10.8833L17.8225 14.3139L18.5303 13.6075ZM10.9907 10.1771V9.17711C9.83455 9.17711 8.90319 8.24576 8.90319 7.08964H7.90319H6.90319C6.90319 9.35033 8.72998 11.1771 10.9907 11.1771V10.1771ZM7.90319 7.08964H8.90319C8.90319 5.93352 9.83455 5.00216 10.9907 5.00216V4.00216V3.00216C8.72998 3.00216 6.90319 4.82895 6.90319 7.08964H7.90319ZM10.9907 4.00216V5.00216C12.1468 5.00216 13.0781 5.93352 13.0781 7.08964H14.0781H15.0781C15.0781 4.82895 13.2514 3.00216 10.9907 3.00216V4.00216ZM14.0781 7.08964H13.0781C13.0781 8.24576 12.1468 9.17711 10.9907 9.17711V10.1771V11.1771C13.2514 11.1771 15.0781 9.35033 15.0781 7.08964H14.0781Z" fill="white" mask="url(#path-1-outside-1_43036_900)" data-v-e3bba5ef></path><path d="M7.41016 2.40283L8.47168 5.5874L11.6572 6.6499L12.7949 7.02979L11.6572 7.40967L8.47168 8.47119L7.41016 11.6567L7.03027 12.7944L6.65039 11.6567L5.58789 8.47119L2.40332 7.40967L1.26562 7.02979L2.40332 6.6499L5.58789 5.5874L6.65039 2.40283L7.03027 1.26514L7.41016 2.40283Z" fill="url(#paint1_linear_43036_900)" stroke="white" stroke-width="0.8" data-v-e3bba5ef></path><defs data-v-e3bba5ef><linearGradient id="paint0_linear_43036_900" x1="7.53027" y1="2.32312" x2="14.3461" y2="15.286" gradientUnits="userSpaceOnUse" data-v-e3bba5ef><stop stop-color="#0F1865" data-v-e3bba5ef></stop><stop offset="1" stop-color="#303FC8" data-v-e3bba5ef></stop></linearGradient><linearGradient id="paint1_linear_43036_900" x1="5.90527" y1="3.31723" x2="10.2576" y2="9.95246" gradientUnits="userSpaceOnUse" data-v-e3bba5ef><stop stop-color="#0F1865" data-v-e3bba5ef></stop><stop offset="1" stop-color="#303FC8" data-v-e3bba5ef></stop></linearGradient></defs></svg>',1)),C("span",LA,it(o),1),r[1]||(r[1]=C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.34039 0L2.40039 0.94L5.45372 4L2.40039 7.06L3.34039 8L7.34039 4L3.34039 0Z",fill:"#333E8B"})],-1))],8,kA))),128))])])):Ye("",!0)}},[["__scopeId","data-v-e3bba5ef"]]),PA={key:0,class:"mi-recommended-articles-block"},NA={class:"mi-recommended-articles-block__content-container"},UA=["href"],DA={class:"mi-recommended-articles-block__item"},FA={class:"mi-recommended-articles-block__item-image-container"},MA=["src","alt"],jA={class:"mi-recommended-articles-block__item-content-container"},qA={key:0,class:"mi-recommended-articles-block__item-tag"},BA={class:"mi-recommended-articles-block__item-title"},zA={key:1,class:"mi-recommended-articles-block__item-author"},HA=vt({__name:"RecommendedArticlesBlock",setup(t){const{latestQuestion:e}=Qt(),s=ft(()=>e.value?.data?.related_resources||[]),n=Et(window.innerWidth/100),i=ft(()=>n.value*10.2),r=ft(()=>(i.value+24)*3),o=ft(()=>Math.ceil(s.value.length/3)),c=Et(1),a=Et(null),u=()=>{n.value=window.innerWidth/100,c.value=1,a.value.style.transform="translate(0, 0)"},l=()=>{if(c.value>1&&a.value){c.value-=1;const m=r.value*(c.value-1);a.value.style.transform=`translate(-${m}px, 0)`}},d=()=>{if(c.value<o.value&&a.value){c.value+=1;const m=r.value*(c.value-1);a.value.style.transform=`translate(-${m}px, 0)`}};return Yn(()=>{window.addEventListener("resize",u)}),Vs(()=>{window.removeEventListener("resize",u)}),(m,w)=>s.value.length>0?(Z(),se("div",PA,[C("div",{class:"mi-recommended-articles-block__header"},[w[3]||(w[3]=C("div",{class:"mi-recommended-articles-block__title"},"Recommended Articles For You",-1)),C("div",{class:"mi-recommended-articles-block__control-buttons-container"},[C("button",{class:"mi-recommended-articles-block__control-button-previous",onClick:l},[...w[1]||(w[1]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 7H3.83L9.42 1.41L8 0L0 8L8 16L9.41 14.59L3.83 9H16V7V7Z",fill:"#0053C0"})],-1)])]),C("button",{class:"mi-recommended-articles-block__control-button-next",onClick:d},[...w[2]||(w[2]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 0L6.59 1.41L12.17 7H0V9H12.17L6.59 14.59L8 16L16 8L8 0Z",fill:"#0053C0"})],-1)])])])]),C("div",NA,[C("div",{ref_key:"listElement",ref:a,class:"mi-recommended-articles-block__list"},[(Z(!0),se($e,null,Zn(s.value,_=>(Z(),se("a",{key:_.product_id,href:_.url,target:"_blank"},[C("div",DA,[C("div",FA,[_.cover_image?(Z(),se("img",{key:0,src:_.cover_image,alt:_.title,onError:w[0]||(w[0]=y=>y.target.style.display="none"),class:"mi-recommended-articles-block__item-image"},null,40,MA)):Ye("",!0)]),C("div",jA,[_.tags&&Array.isArray(_.tags)&&_.tags.length>0?(Z(),se("div",qA,it(_.tags[0]),1)):Ye("",!0),C("div",BA,it(_.title),1),_.authors&&Array.isArray(_.authors)&&_.authors.length>0?(Z(),se("div",zA," By "+it(_.authors.join(", ")),1)):Ye("",!0)])])],8,UA))),128))],512)])])):Ye("",!0)}},[["__scopeId","data-v-2f66c087"]]),VA={class:"mi-ask-box-block"},QA={class:"mi-ask-box-block__ask-box"},WA={class:"mi-ask-box-block__input-group"},GA={class:"mi-disclaimers"},KA={class:"mi-disclaimers__text"},YA=vt({__name:"AskBoxBlock",setup(t){const{questions:e,query:s,askFollowUpQuestion:n}=Qt(),i=Et(""),r=Et(!1),o=Et(null),c=()=>{i.value.trim()!==""&&(e.value.length===0?s(i.value):n(i.value),i.value="")},a=u=>{r.value&&o.value&&!o.value.contains(u.target)&&(r.value=!1)};return ds(r,u=>{u?setTimeout(()=>{document.addEventListener("click",a)},0):document.removeEventListener("click",a)}),Vs(()=>{document.removeEventListener("click",a)}),(u,l)=>(Z(),se("div",VA,[C("div",QA,[C("div",WA,[l[3]||(l[3]=C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[C("path",{d:"M10 9.5L16 11.5L10 13.5L8 19.5L6 13.5L0 11.5L6 9.5L8 3.5L10 9.5ZM15.75 3.75L19.5 5L15.75 6.25L14.5 10L13.25 6.25L9.5 5L13.25 3.75L14.5 0L15.75 3.75Z",fill:"#333E8B"})],-1)),Tc(C("input",{class:"mi-ask-box-block__input",type:"text",placeholder:"Ask anything from Investopedia...","onUpdate:modelValue":l[0]||(l[0]=d=>i.value=d),onKeyup:up(c,["enter"])},null,544),[[rp,i.value]])]),C("button",{onClick:c,class:"mi-ask-box-block__button"},"Ask")]),C("div",GA,[l[10]||(l[10]=C("div",{class:"mi-disclaimers__text"},"Educational content only; not investment advice.",-1)),C("div",KA,[C("button",{class:"mi-disclaimers__button",onClick:l[1]||(l[1]=d=>r.value=!0)}," Advertisement disclosure "),l[4]||(l[4]=C("span",null,",",-1)),l[5]||(l[5]=C("a",{class:"mi-disclaimers__link",href:"https://www.people.inc/brands-privacy?_gl=1*5rwrd0*_ga*NjYwOTM5MTY4LjE3MTIyMjUyMzc.*_ga_DK3GDWHWJH*czE3NjQ4MzY5MjIkbzE2MyRnMCR0MTc2NDgzNjk1MiRqMzAkbDAkaDA.",target:"_blank"},"Privacy policy",-1)),l[6]||(l[6]=C("span",null,",",-1)),l[7]||(l[7]=C("a",{class:"mi-disclaimers__link",href:"https://www.investopedia.com/legal-4768893#toc-editorial-policy",target:"_blank"},"Editorial Policy",-1))]),Tc(C("div",{ref_key:"tooltipRef",ref:o,class:"mi-advertisement-disclosure-tooltip"},[C("button",{class:"mi-advertisement-disclosure-tooltip__close-button",onClick:l[2]||(l[2]=d=>r.value=!1)},[...l[8]||(l[8]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 2.01429L17.9857 0L10 7.98571L2.01429 0L0 2.01429L7.98571 10L0 17.9857L2.01429 20L10 12.0143L17.9857 20L20 17.9857L12.0143 10L20 2.01429Z",fill:"black","fill-opacity":"0.65"})],-1)])]),l[9]||(l[9]=C("p",null," The offers that appear in this table are from partnerships from which Investopedia receives compensation. This compensation may impact how and where listings appear. Investopedia does not include all offers available in the marketplace. ",-1))],512),[[H_,r.value]])])]))}},[["__scopeId","data-v-b3ffa6e5"]]),ZA={class:"mi-sources-overlay__header"},JA={class:"mi-sources-overlay__content"},XA={class:"mi-sources-overlay__source-index"},ev={class:"mi-sources-overlay__source-card"},tv=["href"],sv={key:0,class:"mi-sources-overlay__source-card-tag"},nv={class:"mi-sources-overlay__source-card-title"},iv={key:1,class:"mi-sources-overlay__source-card-author"},rv=vt({__name:"SourcesOverlay",setup(t){const{showingSources:e,hideSources:s}=Qt();return ds(e,n=>{n?document.body.style.overflow="hidden":document.body.style.overflow="auto"}),(n,i)=>(Z(),oa(Lh,{to:"body"},[fe(e)?(Z(),se("div",{key:0,class:"mi-sources-overlay",onClick:i[2]||(i[2]=(...r)=>fe(s)&&fe(s)(...r))},[C("div",{class:"mi-sources-overlay__container",onClick:i[1]||(i[1]=ap(()=>{},["stop"]))},[C("div",ZA,[i[4]||(i[4]=C("div",{class:"mi-sources-overlay__title"},"Sources",-1)),C("button",{class:"mi-sources-overlay__close-button",onClick:i[0]||(i[0]=(...r)=>fe(s)&&fe(s)(...r))},[...i[3]||(i[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[C("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 2.01429L17.9857 0L10 7.98571L2.01429 0L0 2.01429L7.98571 10L0 17.9857L2.01429 20L10 12.0143L17.9857 20L20 17.9857L12.0143 10L20 2.01429Z",fill:"black","fill-opacity":"0.65"})],-1)])])]),C("div",JA,[(Z(!0),se($e,null,Zn(fe(e),(r,o)=>(Z(),se("div",{class:"mi-sources-overlay__source",key:r.product_id},[C("div",XA,it(o+1)+".",1),C("div",ev,[C("a",{href:r.url,target:"_blank"},[r.tags&&Array.isArray(r.tags)&&r.tags.length>0?(Z(),se("div",sv,it(r.tags[0]),1)):Ye("",!0),C("div",nv,it(r.title),1),r.authors&&Array.isArray(r.authors)&&r.authors.length>0?(Z(),se("div",iv," By "+it(r.authors.join(", ")),1)):Ye("",!0)],8,tv)])]))),128))])])])):Ye("",!0)]))}},[["__scopeId","data-v-441a2e59"]]),ov={class:"mi-layout"},cv={class:"mi-layout__answer-thread"},av={class:"mi-layout__sponsored-results-block"},lv={class:"mi-layout__related-questions-block"},uv={class:"mi-layout__recommended-articles-block"},fv={class:"mi-layout__ask-box-block"},dv=vt({__name:"App",props:{query:{type:String,default:""}},setup(t){const e=t,s=Qt(),n=()=>{const i=document.getElementById(Hr),r=document.documentElement.clientWidth;i&&r&&i.style.setProperty("--mi-client-width",`${r}px`)};return Yn(()=>{e.query&&s.query(e.query),n(),window.addEventListener("resize",n)}),Vs(()=>{window.removeEventListener("resize",n)}),(i,r)=>(Z(),se($e,null,[r[0]||(r[0]=C("div",{class:"mi-answer-page__background"},null,-1)),he(wp),C("div",ov,[C("div",cv,[he(vA)]),C("div",av,[he(IA)]),C("div",lv,[he($A)]),C("div",uv,[he(HA)]),C("div",fv,[he(YA)])]),he(rv)],64))}},[["__scopeId","data-v-9c2cae42"]]);let xs=null;const Ld=(t="")=>{xs&&(xs.unmount(),xs=null);const e=document.getElementById(Hr);return e?(xs=hp(dv,{query:t}),xs.mount(e),xs):(console.error(`[miso-investopedia-script] Can't find answer page element with id: ${Hr}`),null)};typeof window<"u"&&(window[Vm]={init:Ld,setEventHooks:t=>{Ep(t)},renderAnswerPage:t=>{Ld(t)}})})();
