!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode('.mfa-ask-bar[data-v-f15576e4]{width:100%;display:flex;padding:.25rem .25rem .25rem 1.375rem;align-items:center;border:solid 1px #66707e;border-radius:1.375rem;box-sizing:border-box}.mfa-ask-bar__input[data-v-f15576e4]{flex:1;border:none;padding:.375rem;outline:none}.mfa-ask-bar__button[data-v-f15576e4]{flex:0;display:flex;justify-content:center;align-items:center;min-height:2.25rem;height:100%;padding:.25rem 1.5rem;border-radius:inherit;box-sizing:border-box;background-color:var(--mfa-primary-color);color:#fff;font-weight:600;border:none;outline:none;cursor:pointer}.mfa-dropdown__container[data-v-e913092d]{position:relative}.mfa-dropdown[data-v-e913092d]{display:flex;align-items:center;padding:.25rem .5rem .25rem .75rem;border:1px solid #bbbbbb;cursor:pointer;border-radius:1.25rem;letter-spacing:.02rem;height:2rem;box-sizing:border-box}.mfa-dropdown__label[data-v-e913092d]{margin-right:.125rem}.mfa-dropdown__value[data-v-e913092d]{margin-right:.5rem}.mfa-dropdown__options[data-v-e913092d]{position:absolute;top:100%;left:0;right:0;box-shadow:0 0 20px #0000001a;z-index:10;padding:.25rem}.mfa-dropdown__option[data-v-e913092d]{padding:.25rem;text-align:center;cursor:pointer}.mfa-dropdown__option[data-v-e913092d]:not(:last-child){border-bottom:1px solid #e5e7ea}.miso-loading[data-v-47950ebe]{display:flex!important}.mfa-load-more-button__container[data-v-b93d7ba6]{display:flex;justify-content:center;align-items:center}.mfa-load-more-button[data-v-b93d7ba6]{display:flex;align-items:center;justify-content:center;height:2rem;padding:.75rem;background:none;border:1px solid #bbbbbb;cursor:pointer;border-radius:1.25rem;letter-spacing:.02rem}.mfa-my-answers[data-v-ecba42ec]{display:flex;flex-direction:column;gap:3rem}.mfa-my-answers__main[data-v-ecba42ec]{padding:1.875rem;display:flex;flex-direction:column;align-items:center;gap:1.25rem}.mfa-my-answers__main-title[data-v-ecba42ec]{margin:0;color:#001129;font-size:1.875rem;font-weight:400}.mfa-my-answers__main-description[data-v-ecba42ec]{margin:0;color:#66707e;line-height:150%}.mfa-ask-bar[data-v-ecba42ec]{width:35.5rem;height:3.75rem;border-radius:1.875rem}.mfa-my-answers__example-questions[data-v-ecba42ec]{display:flex;flex-direction:column;gap:1.25rem;align-items:center;width:100%}.mfa-my-answers__example-questions-title[data-v-ecba42ec]{margin:0;font-size:1.25rem;font-weight:600;line-height:1.375rem}.mfa-my-answers__example-questions-list[data-v-ecba42ec]{display:flex;flex-wrap:wrap;gap:1.25rem .75rem}.mfa-example-question--sm[data-v-ecba42ec]{box-sizing:border-box;width:calc(50% - .375rem);display:flex;justify-content:center;align-items:center;text-align:center}.mfa-my-answers__history[data-v-ecba42ec]{display:flex;flex-direction:column;gap:1.25rem}.mfa-my-answers__history-header[data-v-ecba42ec]{display:flex;justify-content:end}.mfa-my-answers__history-list[data-v-ecba42ec]{display:flex;flex-direction:column;gap:1.25rem}.mfa-my-answers__history-item[data-v-ecba42ec]{padding:1.25rem 1.875rem;display:flex;gap:.625rem;align-items:center}.mfa-my-answers__history-item-info-block[data-v-ecba42ec]{flex:1;display:flex;flex-direction:column;gap:.625rem;cursor:pointer}.mfa-my-answers__history-item-info-block-question[data-v-ecba42ec]{font-size:1.125rem;font-weight:700}.mfa-my-answers__history-item-info-block-date[data-v-ecba42ec]{font-weight:700;line-height:1.25rem;color:#544f4f}.mfa-my-answers__history-item-info-block-date span[data-v-ecba42ec]{font-weight:400;color:#8c8c8c}.mfa-my-answers__history-item-actions-block[data-v-ecba42ec]{flex-shrink:0;display:flex;gap:1rem;align-items:center}.mfa-my-answers__history-item-actions-button[data-v-ecba42ec]{display:flex;align-items:center;gap:.375rem;padding:.125rem;background-color:transparent;color:var(--mfa-primary-color);cursor:pointer;border:none;outline:none}.mfa-powered-by-ai-tag[data-v-fd3ff256]{display:inline-flex;padding:.25rem .5rem;justify-content:center;align-items:center;border-radius:1.5rem;background:#e5eefa;cursor:default}.mfa-powered-by-ai-tag span[data-v-fd3ff256]{font-size:.625rem;font-weight:500;background:linear-gradient(90deg,var(--mfa-primary-color) 0%,#06aeb8 100%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.mfa-search-bar[data-v-043cd7a5]{position:relative;width:26.25rem;height:2.75rem;display:flex;gap:.5rem;align-items:center;border:1px solid #cccfd4;border-radius:1.375rem;padding:0 .625rem 0 1.125rem;box-sizing:border-box;background-color:#fafafb}.mfa-search-bar__input[data-v-043cd7a5]{flex:1;border:none;padding:.375rem;outline:none;background-color:transparent}.mfa-search-bar__clear-button[data-v-043cd7a5],.mfa-search-bar__search-button[data-v-043cd7a5]{flex-shrink:0;cursor:pointer;background-color:transparent;border:none;outline:none;padding:0}.mfa-search-bar__search-button svg[data-v-043cd7a5]{width:1.5rem}.mfa-autocomplete-panel[data-v-043cd7a5]{position:absolute;top:calc(100% + 1px);left:0;width:100%;box-sizing:border-box;min-height:2.25rem;background-color:#fff;border-radius:.25rem;box-shadow:0 0 20px #0000001a}.mfa-autocomplete-panel__block[data-v-043cd7a5]{display:flex;flex-direction:column;gap:1.5rem;padding:1.25rem}.mfa-autocomplete-panel__block[data-v-043cd7a5]:not(:first-child){border-top:1px solid #e5e7ea}.mfa-see-results-button[data-v-043cd7a5]{width:100%;height:2rem;display:flex;justify-content:center;align-items:center;border-radius:.125rem;border:none;outline:none;background-color:var(--mfa-primary-color);color:#fff;line-height:1.25rem;font-weight:600;cursor:pointer}.mfa-autocomplete-panel__suggestions-block[data-v-043cd7a5]{display:flex;flex-direction:column;gap:1.25rem}.mfa-autocomplete-panel__suggestions-block-title[data-v-043cd7a5]{font-size:1rem;font-weight:500;line-height:1.375rem;cursor:default}.mfa-autocomplete-panel__suggestions-block-content[data-v-043cd7a5]{display:flex;flex-direction:column;gap:.75rem}.mfa-autocomplete-panel__suggestion-option[data-v-043cd7a5]{line-height:130%;cursor:pointer}.mfa-autocomplete-panel__answer-block[data-v-043cd7a5]{border-radius:.25rem;border:1px solid #e5e7ea;background-color:#fafafb;display:flex;padding:.75rem;flex-direction:column;gap:.75rem}.mfa-autocomplete-panel__answer-block-header[data-v-043cd7a5]{display:flex;align-items:center;gap:.75rem;cursor:default}.mfa-autocomplete-panel__answer-block-header-title[data-v-043cd7a5]{font-size:1rem;font-weight:600;line-height:1.375rem}.mfa-autocomplete-panel__answer-block-list[data-v-043cd7a5]{display:flex;flex-direction:column;gap:.5rem}.mfa-autocomplete-panel__ask-button[data-v-043cd7a5]{display:flex;height:2rem;width:-moz-fit-content;width:fit-content;padding:.25rem .75rem;justify-content:center;align-items:center;border-radius:.125rem;background:linear-gradient(97deg,#05c -22.41%,#06aeb8 106.75%);color:#fff;font-weight:600;cursor:pointer;border:none;outline:none}.mfa-mini-answer-summary[data-v-a513bee3]{display:flex;flex-direction:column;gap:.875rem}.mfa-mini-answer-summary__title[data-v-a513bee3]{font-size:1rem;font-weight:700}.mfa-mini-answer-summary__actions[data-v-a513bee3]{display:flex;justify-content:space-between;align-items:center}.mfa-mini-answer-summary__learn-more-button[data-v-a513bee3]{display:flex;padding:.5rem 1.25rem;justify-content:center;align-items:center;gap:.625rem;border-radius:.375rem;border:1px solid #2e97cd;color:#2e97cd;font-size:.75rem;background-color:transparent;outline:none;cursor:pointer}.mfa-ask-the-book-button[data-v-16bcc783]{display:flex;align-items:center;justify-content:center;gap:.375rem;font-size:.75rem;color:var(--mfa-primary-color);padding:0;border:0;outline:none;background-color:transparent;cursor:pointer}.mfa-mini-answer-interaction[data-v-cf90d832]{display:flex;flex-direction:column;gap:1rem}.mfa-sources-card[data-v-cf90d832]{min-height:10rem}.mfa-related-questions-header[data-v-cf90d832]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.mfa-related-questions-header .mfa-card__title[data-v-cf90d832]{margin-bottom:0}.mfa-mini-answer-interaction__ask-description[data-v-cf90d832]{color:#66707e;margin-bottom:.75rem}.mfa-mini-answer-interaction__related-questions-title[data-v-cf90d832]{font-weight:600;margin-bottom:.5rem}.mfa-mini-answer-interaction__related-questions-list[data-v-cf90d832]{display:flex;flex-direction:column;gap:.75rem}.mfa-mini-answer-interaction__ask-button[data-v-cf90d832]{margin-top:1rem;display:flex;height:2rem;padding:.25rem .75rem;justify-content:center;align-items:center;border-radius:.125rem;background:linear-gradient(97deg,#05c -22.41%,#06aeb8 106.75%);color:#fff;font-weight:600;cursor:pointer;border:none;outline:none}.mfa-buy-this-book-link[data-v-85022879]{display:flex;align-items:center;justify-content:center;gap:.375rem;font-size:.875rem;color:var(--mfa-primary-color);padding:0;border:0;outline:none;background-color:transparent;cursor:pointer}.mfa-buy-this-book-link svg[data-v-85022879]{color:#001129;width:1.25rem}.mfa-see-free-chapter-link[data-v-a97cef07]{display:flex;align-items:center;justify-content:center;gap:.375rem;font-size:.875rem;color:var(--mfa-primary-color);padding:0;border:0;outline:none;background-color:transparent;cursor:pointer;text-decoration:none}.mfa-see-free-chapter-link svg[data-v-a97cef07]{color:#001129;width:1.25rem}.mfa-add-to-wishlist-button[data-v-75a613d7]{display:flex;align-items:center;justify-content:center;gap:.375rem;font-size:.875rem;color:var(--mfa-primary-color);padding:0;border:0;outline:none;background-color:transparent;cursor:pointer}.mfa-add-to-wishlist-button svg[data-v-75a613d7]{color:#001129;width:1.25rem}.right-top-tag[data-v-363e0a29]{position:absolute;top:.875rem;right:1rem}.mfa-answer-group[data-v-363e0a29]{display:flex;gap:3.75rem}.mfa-answer-group__main-block[data-v-363e0a29],.mfa-answer-group__info-block[data-v-363e0a29]{width:50%}.mfa-answer-group__info-block[data-v-363e0a29]{display:flex;flex-direction:column;gap:1.875rem}.mfa-query[data-v-363e0a29]{font-size:1.875rem;font-weight:400}.mfa-query strong[data-v-363e0a29]{font-weight:700}.mfa-ask-bar[data-v-363e0a29]{margin:1.75rem 0 .75rem}.mfa-answer-card[data-v-363e0a29]{min-height:20rem;height:100%}.mfa-sources-card[data-v-363e0a29]{min-height:10rem}.mfa-related-questions-header[data-v-363e0a29]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.mfa-related-questions-header .mfa-card__title[data-v-363e0a29]{margin-bottom:0}.mfa-answer-group:not(:first-child) .mfa-answer-card[data-v-363e0a29]{border-top-left-radius:0;border-top-right-radius:0;border-top:none}.mfa-answer-group:not(:first-child) .mfa-answer-card[data-v-363e0a29]:after{content:"";position:absolute;top:0;left:3.5%;width:93%;height:1px;background-color:#e5e7ea}.mfa-answer-group:not(:last-child) .mfa-answer-card[data-v-363e0a29]{border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none}.mfa-related-books[data-v-363e0a29]{margin-top:5rem}.mfa-related-books__title[data-v-363e0a29]{font-size:1.25rem;font-weight:700;margin-top:0;margin-bottom:1rem}.mfa-related-books__list[data-v-363e0a29]{display:flex;flex-direction:column;gap:1.25rem}.mfa-related-book[data-v-363e0a29]{display:flex;gap:1.6rem}.mfa-related-book__info-block[data-v-363e0a29]{flex:1;display:flex;flex-direction:column;gap:.625rem;line-height:1.25rem}.mfa-related-book__action-buttons[data-v-363e0a29]{width:10.4rem;flex-shrink:0;display:flex;flex-direction:column;align-items:start;gap:.625rem}.mfa-related-book__tags[data-v-363e0a29]{color:#fff;font-size:.625rem;text-transform:uppercase}.mfa-related-book__tags span[data-v-363e0a29]{background-color:var(--mfa-primary-color);padding:.125rem}.mfa-related-book__title[data-v-363e0a29]{font-size:1.25rem;font-weight:700;color:#333}.mfa-related-book__details-container[data-v-363e0a29]{font-weight:700;color:#544f4f}.mfa-related-book__details-container span[data-v-363e0a29]{font-weight:400;color:#8c8c8c}.mfa-previously-asked[data-v-12ea43a0]{display:flex;flex-direction:column;gap:2rem}.mfa-previously-asked__list[data-v-12ea43a0]{display:flex;flex-direction:column;gap:1.25rem}.mfa-previously-asked__item[data-v-12ea43a0]{display:flex;align-items:center;gap:.75rem}.mfa-previously-asked__question[data-v-12ea43a0]{flex:1}.mfa-previously-asked__remove-button[data-v-12ea43a0]{flex-shrink:0;width:1rem;height:1rem;background:none;border:none;cursor:pointer}.right-top-tag[data-v-b26b97a9]{position:absolute;top:.875rem;right:1rem}.mfa-answer-group[data-v-b26b97a9]{display:flex;gap:3.75rem}.mfa-answer-group__main-block[data-v-b26b97a9],.mfa-answer-group__info-block[data-v-b26b97a9]{width:50%}.mfa-answer-group__info-block[data-v-b26b97a9]{display:flex;flex-direction:column;gap:1.875rem}.mfa-query[data-v-b26b97a9]{font-size:1.875rem;font-weight:400}.mfa-query strong[data-v-b26b97a9]{font-weight:700}.mfa-ask-bar[data-v-b26b97a9]{margin:1.75rem 0 .75rem}.mfa-answer-card[data-v-b26b97a9]{min-height:20rem;height:100%}.mfa-sources-card[data-v-b26b97a9]{min-height:10rem}.mfa-related-questions-header[data-v-b26b97a9]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.mfa-related-questions-header .mfa-card__title[data-v-b26b97a9]{margin-bottom:0}.mfa-answer-group:not(:first-child) .mfa-answer-card[data-v-b26b97a9]{border-top-left-radius:0;border-top-right-radius:0;border-top:none}.mfa-answer-group:not(:first-child) .mfa-answer-card[data-v-b26b97a9]:after{content:"";position:absolute;top:0;left:3.5%;width:93%;height:1px;background-color:#e5e7ea}.mfa-answer-group:not(:last-child) .mfa-answer-card[data-v-b26b97a9]{border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:none}.mfa-related-books[data-v-b26b97a9]{margin-top:5rem}.mfa-related-books__title[data-v-b26b97a9]{font-size:1.25rem;font-weight:700;margin-top:0;margin-bottom:1rem}.mfa-related-books__list[data-v-b26b97a9]{display:flex;flex-direction:column;gap:1.25rem}.mfa-related-book[data-v-b26b97a9]{display:flex;gap:1.6rem}.mfa-related-book__info-block[data-v-b26b97a9]{flex:1;display:flex;flex-direction:column;gap:.625rem;line-height:1.25rem}.mfa-related-book__action-buttons[data-v-b26b97a9]{width:10.4rem;flex-shrink:0;display:flex;flex-direction:column;align-items:start;gap:.625rem}.mfa-related-book__tags[data-v-b26b97a9]{color:#fff;font-size:.625rem;text-transform:uppercase}.mfa-related-book__tags span[data-v-b26b97a9]{background-color:var(--mfa-primary-color);padding:.125rem}.mfa-related-book__title[data-v-b26b97a9]{font-size:1.25rem;font-weight:700;color:#333}.mfa-related-book__details-container[data-v-b26b97a9]{font-weight:700;color:#544f4f}.mfa-related-book__details-container span[data-v-b26b97a9]{font-weight:400;color:#8c8c8c}.mfa-ask-this-book__search-bar-container[data-v-741dc1a8]{margin-bottom:1.25rem}.mfa-ask-this-book__explore-questions[data-v-741dc1a8]{display:flex;flex-direction:column;gap:.75rem}.mfa-ask-this-book__description[data-v-741dc1a8]{text-align:right;font-size:.625rem;line-height:1.5rem}.mfa-ask-this-book__answer-group[data-v-741dc1a8]{display:flex;flex-direction:column;gap:1.25rem}.mfa-ask-this-book__answer-group[data-v-741dc1a8]:not(:first-child){margin-top:1.25rem}.mfa-ask-this-book__query[data-v-741dc1a8]{font-weight:700}.mfa-ask-this-book__sources[data-v-741dc1a8]{padding:1.5rem;border-radius:.25rem;border:1px solid #e5e7ea;background-color:#fafafb}.mfa-ask-this-book__sources [data-v-741dc1a8] .miso-list__item{background-color:transparent!important}.mfa-ask-this-book__sources-title[data-v-741dc1a8]{font-size:1.125rem;font-weight:600;margin-bottom:1rem}.mfa-ask-this-book__related-questions-header[data-v-741dc1a8]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.mfa-ask-this-book__related-questions-title[data-v-741dc1a8]{font-weight:600}.miso-my-answers,.miso-search-bar,.miso-mini-answer,.miso-ask-combo,.miso-previously-asked{font-family:Roboto,sans-serif;font-size:.875rem;--mfa-primary-color: #0055cc;--miso-ask-combo-content-padding: 0}.miso-my-answers .miso-markdown a,.miso-search-bar .miso-markdown a,.miso-mini-answer .miso-markdown a,.miso-ask-combo .miso-markdown a,.miso-previously-asked .miso-markdown a{color:var(--mfa-primary-color)}.miso-my-answers .miso-markdown p,.miso-my-answers .miso-markdown li,.miso-search-bar .miso-markdown p,.miso-search-bar .miso-markdown li,.miso-mini-answer .miso-markdown p,.miso-mini-answer .miso-markdown li,.miso-ask-combo .miso-markdown p,.miso-ask-combo .miso-markdown li,.miso-previously-asked .miso-markdown p,.miso-previously-asked .miso-markdown li{line-height:1.5rem}.miso-my-answers .miso-markdown li:not(:first-child),.miso-search-bar .miso-markdown li:not(:first-child),.miso-mini-answer .miso-markdown li:not(:first-child),.miso-ask-combo .miso-markdown li:not(:first-child),.miso-previously-asked .miso-markdown li:not(:first-child){margin-top:1rem}.miso-my-answers miso-sources .miso-list__item,.miso-search-bar miso-sources .miso-list__item,.miso-mini-answer miso-sources .miso-list__item,.miso-ask-combo miso-sources .miso-list__item,.miso-previously-asked miso-sources .miso-list__item{border:none!important;display:flex;flex-direction:column;gap:.75rem}.miso-my-answers miso-sources .miso-list__item:not(:first-child),.miso-search-bar miso-sources .miso-list__item:not(:first-child),.miso-mini-answer miso-sources .miso-list__item:not(:first-child),.miso-ask-combo miso-sources .miso-list__item:not(:first-child),.miso-previously-asked miso-sources .miso-list__item:not(:first-child){border-top:solid 1px #d9d9d9!important;padding-top:1.25rem;border-radius:0}.miso-my-answers miso-sources .miso-list__item .miso-list__item-body,.miso-search-bar miso-sources .miso-list__item .miso-list__item-body,.miso-mini-answer miso-sources .miso-list__item .miso-list__item-body,.miso-ask-combo miso-sources .miso-list__item .miso-list__item-body,.miso-previously-asked miso-sources .miso-list__item .miso-list__item-body{padding:0}.miso-my-answers miso-follow-up-questions .miso-option-list__option,.miso-search-bar miso-follow-up-questions .miso-option-list__option,.miso-mini-answer miso-follow-up-questions .miso-option-list__option,.miso-ask-combo miso-follow-up-questions .miso-option-list__option,.miso-previously-asked miso-follow-up-questions .miso-option-list__option{padding:.75rem;border-radius:.25rem;background-color:#e5eefa;color:#001129;border:none}.mfa-card{position:relative;padding:1.5rem;border-radius:.25rem;border:1px solid #e5e7ea;background:#fff}.mfa-card__title{font-size:1.125rem;font-weight:600;margin-top:0;margin-bottom:.75rem;line-height:1.375rem}.mfa-example-question{padding:.75rem;border-radius:.25rem;background-color:#e5eefa;color:#001129;cursor:pointer}.mfa-example-question--sm{padding:.5rem;border-radius:.25rem;background-color:#e5eefa;color:#001129;cursor:pointer}.mfa-source-item__main-block{display:flex;flex-direction:column;gap:.25rem;line-height:1.5;color:#001129}.mfa-source-item__main-block .mfa-source-item__title{font-weight:600}.mfa-source-item__main-block .mfa-source-item__date{color:#66707e}.mfa-source-item__main-block .mfa-source-item__snippet mark{font-weight:400;background-color:transparent}')),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}}();
!function(){"use strict";
/**
  * @vue/shared v3.5.22
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **/function e(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return e=>e in t}const t={},s=[],n=()=>{},o=()=>!1,i=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),r=e=>e.startsWith("onUpdate:"),a=Object.assign,l=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},c=Object.prototype.hasOwnProperty,u=(e,t)=>c.call(e,t),d=Array.isArray,h=e=>"[object Map]"===v(e),p=e=>"[object Set]"===v(e),f=e=>"function"==typeof e,_=e=>"string"==typeof e,m=e=>"symbol"==typeof e,g=e=>null!==e&&"object"==typeof e,y=e=>(g(e)||f(e))&&f(e.then)&&f(e.catch),b=Object.prototype.toString,v=e=>b.call(e),w=e=>"[object Object]"===v(e),k=e=>_(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,E=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),S=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},x=/-\w/g,C=S((e=>e.replace(x,(e=>e.slice(1).toUpperCase())))),O=/\B([A-Z])/g,A=S((e=>e.replace(O,"-$1").toLowerCase())),T=S((e=>e.charAt(0).toUpperCase()+e.slice(1))),I=S((e=>e?`on${T(e)}`:"")),R=(e,t)=>!Object.is(e,t),N=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},L=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},q=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let P;const U=()=>P||(P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function $(e){if(d(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],o=_(n)?F(n):$(n);if(o)for(const e in o)t[e]=o[e]}return t}if(_(e)||g(e))return e}const j=/;(?![^(]*\))/g,M=/:([^]+)/,D=/\/\*[^]*?\*\//g;function F(e){const t={};return e.replace(D,"").split(j).forEach((e=>{if(e){const s=e.split(M);s.length>1&&(t[s[0].trim()]=s[1].trim())}})),t}function B(e){let t="";if(_(e))t=e;else if(d(e))for(let s=0;s<e.length;s++){const n=B(e[s]);n&&(t+=n+" ")}else if(g(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const z=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Q(e){return!!e||""===e}const H=e=>!(!e||!0!==e.__v_isRef),V=e=>_(e)?e:null==e?"":d(e)||g(e)&&(e.toString===b||!f(e.toString))?H(e)?V(e.value):JSON.stringify(e,W,2):String(e),W=(e,t)=>H(t)?W(e,t.value):h(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,s],n)=>(e[G(t,n)+" =>"]=s,e)),{})}:p(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>G(e)))}:m(t)?G(t):!g(t)||d(t)||w(t)?t:String(t),G=(e,t="")=>{var s;return m(e)?`Symbol(${null!=(s=e.description)?s:t})`:e};
/**
  * @vue/reactivity v3.5.22
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **/
let K,Y;class Z{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=K,!e&&K&&(this.index=(K.scopes||(K.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=K;try{return K=this,e()}finally{K=t}}}on(){1==++this._on&&(this.prevScope=K,K=this)}off(){this._on>0&&0==--this._on&&(K=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,s;for(this._active=!1,t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}const J=new WeakSet;class X{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,K&&K.active&&K.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,J.has(this)&&(J.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||ne(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,me(this),re(this);const e=Y,t=he;Y=this,he=!0;try{return this.fn()}finally{ae(this),Y=e,he=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)ue(e);this.deps=this.depsTail=void 0,me(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?J.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){le(this)&&this.run()}get dirty(){return le(this)}}let ee,te,se=0;function ne(e,t=!1){if(e.flags|=8,t)return e.next=te,void(te=e);e.next=ee,ee=e}function oe(){se++}function ie(){if(--se>0)return;if(te){let e=te;for(te=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ee;){let s=ee;for(ee=void 0;s;){const n=s.next;if(s.next=void 0,s.flags&=-9,1&s.flags)try{s.trigger()}catch(t){e||(e=t)}s=n}}if(e)throw e}function re(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ae(e){let t,s=e.depsTail,n=s;for(;n;){const e=n.prevDep;-1===n.version?(n===s&&(s=e),ue(n),de(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=e}e.deps=t,e.depsTail=s}function le(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ce(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ce(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===ge)return;if(e.globalVersion=ge,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!le(e)))return;e.flags|=2;const t=e.dep,s=Y,n=he;Y=e,he=!0;try{re(e);const s=e.fn(e._value);(0===t.version||R(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(o){throw t.version++,o}finally{Y=s,he=n,ae(e),e.flags&=-3}}function ue(e,t=!1){const{dep:s,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let e=s.computed.deps;e;e=e.nextDep)ue(e,!0)}t||--s.sc||!s.map||s.map.delete(s.key)}function de(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let he=!0;const pe=[];function fe(){pe.push(he),he=!1}function _e(){const e=pe.pop();he=void 0===e||e}function me(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=Y;Y=void 0;try{t()}finally{Y=e}}}let ge=0;class ye{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class be{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Y||!he||Y===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==Y)t=this.activeLink=new ye(Y,this),Y.deps?(t.prevDep=Y.depsTail,Y.depsTail.nextDep=t,Y.depsTail=t):Y.deps=Y.depsTail=t,ve(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=Y.depsTail,t.nextDep=void 0,Y.depsTail.nextDep=t,Y.depsTail=t,Y.deps===t&&(Y.deps=e)}return t}trigger(e){this.version++,ge++,this.notify(e)}notify(e){oe();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{ie()}}}function ve(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)ve(e)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const we=new WeakMap,ke=Symbol(""),Ee=Symbol(""),Se=Symbol("");function xe(e,t,s){if(he&&Y){let t=we.get(e);t||we.set(e,t=new Map);let n=t.get(s);n||(t.set(s,n=new be),n.map=t,n.key=s),n.track()}}function Ce(e,t,s,n,o,i){const r=we.get(e);if(!r)return void ge++;const a=e=>{e&&e.trigger()};if(oe(),"clear"===t)r.forEach(a);else{const o=d(e),i=o&&k(s);if(o&&"length"===s){const e=Number(n);r.forEach(((t,s)=>{("length"===s||s===Se||!m(s)&&s>=e)&&a(t)}))}else switch((void 0!==s||r.has(void 0))&&a(r.get(s)),i&&a(r.get(Se)),t){case"add":o?i&&a(r.get("length")):(a(r.get(ke)),h(e)&&a(r.get(Ee)));break;case"delete":o||(a(r.get(ke)),h(e)&&a(r.get(Ee)));break;case"set":h(e)&&a(r.get(ke))}}ie()}function Oe(e){const t=dt(e);return t===e?t:(xe(t,0,Se),ct(e)?t:t.map(ht))}function Ae(e){return xe(e=dt(e),0,Se),e}const Te={__proto__:null,[Symbol.iterator](){return Ie(this,Symbol.iterator,ht)},concat(...e){return Oe(this).concat(...e.map((e=>d(e)?Oe(e):e)))},entries(){return Ie(this,"entries",(e=>(e[1]=ht(e[1]),e)))},every(e,t){return Ne(this,"every",e,t,void 0,arguments)},filter(e,t){return Ne(this,"filter",e,t,(e=>e.map(ht)),arguments)},find(e,t){return Ne(this,"find",e,t,ht,arguments)},findIndex(e,t){return Ne(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ne(this,"findLast",e,t,ht,arguments)},findLastIndex(e,t){return Ne(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ne(this,"forEach",e,t,void 0,arguments)},includes(...e){return qe(this,"includes",e)},indexOf(...e){return qe(this,"indexOf",e)},join(e){return Oe(this).join(e)},lastIndexOf(...e){return qe(this,"lastIndexOf",e)},map(e,t){return Ne(this,"map",e,t,void 0,arguments)},pop(){return Pe(this,"pop")},push(...e){return Pe(this,"push",e)},reduce(e,...t){return Le(this,"reduce",e,t)},reduceRight(e,...t){return Le(this,"reduceRight",e,t)},shift(){return Pe(this,"shift")},some(e,t){return Ne(this,"some",e,t,void 0,arguments)},splice(...e){return Pe(this,"splice",e)},toReversed(){return Oe(this).toReversed()},toSorted(e){return Oe(this).toSorted(e)},toSpliced(...e){return Oe(this).toSpliced(...e)},unshift(...e){return Pe(this,"unshift",e)},values(){return Ie(this,"values",ht)}};function Ie(e,t,s){const n=Ae(e),o=n[t]();return n===e||ct(e)||(o._next=o.next,o.next=()=>{const e=o._next();return e.done||(e.value=s(e.value)),e}),o}const Re=Array.prototype;function Ne(e,t,s,n,o,i){const r=Ae(e),a=r!==e&&!ct(e),l=r[t];if(l!==Re[t]){const t=l.apply(e,i);return a?ht(t):t}let c=s;r!==e&&(a?c=function(t,n){return s.call(this,ht(t),n,e)}:s.length>2&&(c=function(t,n){return s.call(this,t,n,e)}));const u=l.call(r,c,n);return a&&o?o(u):u}function Le(e,t,s,n){const o=Ae(e);let i=s;return o!==e&&(ct(e)?s.length>3&&(i=function(t,n,o){return s.call(this,t,n,o,e)}):i=function(t,n,o){return s.call(this,t,ht(n),o,e)}),o[t](i,...n)}function qe(e,t,s){const n=dt(e);xe(n,0,Se);const o=n[t](...s);return-1!==o&&!1!==o||!ut(s[0])?o:(s[0]=dt(s[0]),n[t](...s))}function Pe(e,t,s=[]){fe(),oe();const n=dt(e)[t].apply(e,s);return ie(),_e(),n}const Ue=e("__proto__,__v_isRef,__isVue"),$e=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(m));function je(e){m(e)||(e=String(e));const t=dt(this);return xe(t,0,e),t.hasOwnProperty(e)}class Me{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if("__v_skip"===t)return e.__v_skip;const n=this._isReadonly,o=this._isShallow;if("__v_isReactive"===t)return!n;if("__v_isReadonly"===t)return n;if("__v_isShallow"===t)return o;if("__v_raw"===t)return s===(n?o?st:tt:o?et:Xe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const i=d(e);if(!n){let e;if(i&&(e=Te[t]))return e;if("hasOwnProperty"===t)return je}const r=Reflect.get(e,t,ft(e)?e:s);if(m(t)?$e.has(t):Ue(t))return r;if(n||xe(e,0,t),o)return r;if(ft(r)){const e=i&&k(t)?r:r.value;return n&&g(e)?it(e):e}return g(r)?n?it(r):ot(r):r}}class De extends Me{constructor(e=!1){super(!1,e)}set(e,t,s,n){let o=e[t];if(!this._isShallow){const t=lt(o);if(ct(s)||lt(s)||(o=dt(o),s=dt(s)),!d(e)&&ft(o)&&!ft(s))return t||(o.value=s),!0}const i=d(e)&&k(t)?Number(t)<e.length:u(e,t),r=Reflect.set(e,t,s,ft(e)?e:n);return e===dt(n)&&(i?R(s,o)&&Ce(e,"set",t,s):Ce(e,"add",t,s)),r}deleteProperty(e,t){const s=u(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&Ce(e,"delete",t,void 0),n}has(e,t){const s=Reflect.has(e,t);return m(t)&&$e.has(t)||xe(e,0,t),s}ownKeys(e){return xe(e,0,d(e)?"length":ke),Reflect.ownKeys(e)}}class Fe extends Me{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Be=new De,ze=new Fe,Qe=new De(!0),He=e=>e,Ve=e=>Reflect.getPrototypeOf(e);function We(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function Ge(e,t){const s={get(s){const n=this.__v_raw,o=dt(n),i=dt(s);e||(R(s,i)&&xe(o,0,s),xe(o,0,i));const{has:r}=Ve(o),a=t?He:e?pt:ht;return r.call(o,s)?a(n.get(s)):r.call(o,i)?a(n.get(i)):void(n!==o&&n.get(s))},get size(){const t=this.__v_raw;return!e&&xe(dt(t),0,ke),t.size},has(t){const s=this.__v_raw,n=dt(s),o=dt(t);return e||(R(t,o)&&xe(n,0,t),xe(n,0,o)),t===o?s.has(t):s.has(t)||s.has(o)},forEach(s,n){const o=this,i=o.__v_raw,r=dt(i),a=t?He:e?pt:ht;return!e&&xe(r,0,ke),i.forEach(((e,t)=>s.call(n,a(e),a(t),o)))}};a(s,e?{add:We("add"),set:We("set"),delete:We("delete"),clear:We("clear")}:{add(e){t||ct(e)||lt(e)||(e=dt(e));const s=dt(this);return Ve(s).has.call(s,e)||(s.add(e),Ce(s,"add",e,e)),this},set(e,s){t||ct(s)||lt(s)||(s=dt(s));const n=dt(this),{has:o,get:i}=Ve(n);let r=o.call(n,e);r||(e=dt(e),r=o.call(n,e));const a=i.call(n,e);return n.set(e,s),r?R(s,a)&&Ce(n,"set",e,s):Ce(n,"add",e,s),this},delete(e){const t=dt(this),{has:s,get:n}=Ve(t);let o=s.call(t,e);o||(e=dt(e),o=s.call(t,e)),n&&n.call(t,e);const i=t.delete(e);return o&&Ce(t,"delete",e,void 0),i},clear(){const e=dt(this),t=0!==e.size,s=e.clear();return t&&Ce(e,"clear",void 0,void 0),s}});return["keys","values","entries",Symbol.iterator].forEach((n=>{s[n]=function(e,t,s){return function(...n){const o=this.__v_raw,i=dt(o),r=h(i),a="entries"===e||e===Symbol.iterator&&r,l="keys"===e&&r,c=o[e](...n),u=s?He:t?pt:ht;return!t&&xe(i,0,l?Ee:ke),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(n,e,t)})),s}function Ke(e,t){const s=Ge(e,t);return(t,n,o)=>"__v_isReactive"===n?!e:"__v_isReadonly"===n?e:"__v_raw"===n?t:Reflect.get(u(s,n)&&n in t?s:t,n,o)}const Ye={get:Ke(!1,!1)},Ze={get:Ke(!1,!0)},Je={get:Ke(!0,!1)},Xe=new WeakMap,et=new WeakMap,tt=new WeakMap,st=new WeakMap;function nt(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>v(e).slice(8,-1))(e))}function ot(e){return lt(e)?e:rt(e,!1,Be,Ye,Xe)}function it(e){return rt(e,!0,ze,Je,tt)}function rt(e,t,s,n,o){if(!g(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=nt(e);if(0===i)return e;const r=o.get(e);if(r)return r;const a=new Proxy(e,2===i?n:s);return o.set(e,a),a}function at(e){return lt(e)?at(e.__v_raw):!(!e||!e.__v_isReactive)}function lt(e){return!(!e||!e.__v_isReadonly)}function ct(e){return!(!e||!e.__v_isShallow)}function ut(e){return!!e&&!!e.__v_raw}function dt(e){const t=e&&e.__v_raw;return t?dt(t):e}const ht=e=>g(e)?ot(e):e,pt=e=>g(e)?it(e):e;function ft(e){return!!e&&!0===e.__v_isRef}function _t(e){return function(e,t){if(ft(e))return e;return new mt(e,t)}(e,!1)}class mt{constructor(e,t){this.dep=new be,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:dt(e),this._value=t?e:ht(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||ct(e)||lt(e);e=s?e:dt(e),R(e,t)&&(this._rawValue=e,this._value=s?e:ht(e),this.dep.trigger())}}function gt(e){return ft(e)?e.value:e}const yt={get:(e,t,s)=>"__v_raw"===t?e:gt(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const o=e[t];return ft(o)&&!ft(s)?(o.value=s,!0):Reflect.set(e,t,s,n)}};function bt(e){return at(e)?e:new Proxy(e,yt)}class vt{constructor(e,t,s){this._object=e,this._key=t,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const s=we.get(e);return s&&s.get(t)}(dt(this._object),this._key)}}class wt{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function kt(e,t,s){return ft(e)?e:f(e)?new wt(e):g(e)&&arguments.length>1?function(e,t,s){const n=e[t];return ft(n)?n:new vt(e,t,s)}(e,t,s):_t(e)}class Et{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new be(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ge-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(8&this.flags)&&Y!==this)return ne(this,!0),!0}get value(){const e=this.dep.track();return ce(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const St={},xt=new WeakMap;let Ct;function Ot(e,s,o=t){const{immediate:i,deep:r,once:a,scheduler:c,augmentJob:u,call:h}=o,p=e=>r?e:ct(e)||!1===r||0===r?At(e,1):At(e);let _,m,g,y,b=!1,v=!1;if(ft(e)?(m=()=>e.value,b=ct(e)):at(e)?(m=()=>p(e),b=!0):d(e)?(v=!0,b=e.some((e=>at(e)||ct(e))),m=()=>e.map((e=>ft(e)?e.value:at(e)?p(e):f(e)?h?h(e,2):e():void 0))):m=f(e)?s?h?()=>h(e,2):e:()=>{if(g){fe();try{g()}finally{_e()}}const t=Ct;Ct=_;try{return h?h(e,3,[y]):e(y)}finally{Ct=t}}:n,s&&r){const e=m,t=!0===r?1/0:r;m=()=>At(e(),t)}const w=K,k=()=>{_.stop(),w&&w.active&&l(w.effects,_)};if(a&&s){const e=s;s=(...t)=>{e(...t),k()}}let E=v?new Array(e.length).fill(St):St;const S=e=>{if(1&_.flags&&(_.dirty||e))if(s){const e=_.run();if(r||b||(v?e.some(((e,t)=>R(e,E[t]))):R(e,E))){g&&g();const t=Ct;Ct=_;try{const t=[e,E===St?void 0:v&&E[0]===St?[]:E,y];E=e,h?h(s,3,t):s(...t)}finally{Ct=t}}}else _.run()};return u&&u(S),_=new X(m),_.scheduler=c?()=>c(S,!1):S,y=e=>function(e,t=!1,s=Ct){if(s){let t=xt.get(s);t||xt.set(s,t=[]),t.push(e)}}(e,!1,_),g=_.onStop=()=>{const e=xt.get(_);if(e){if(h)h(e,4);else for(const t of e)t();xt.delete(_)}},s?i?S(!0):E=_.run():c?c(S.bind(null,!0),!0):_.run(),k.pause=_.pause.bind(_),k.resume=_.resume.bind(_),k.stop=k,k}function At(e,t=1/0,s){if(t<=0||!g(e)||e.__v_skip)return e;if(((s=s||new Map).get(e)||0)>=t)return e;if(s.set(e,t),t--,ft(e))At(e.value,t,s);else if(d(e))for(let n=0;n<e.length;n++)At(e[n],t,s);else if(p(e)||h(e))e.forEach((e=>{At(e,t,s)}));else if(w(e)){for(const n in e)At(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&At(e[n],t,s)}return e}
/**
  * @vue/runtime-core v3.5.22
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **/function Tt(e,t,s,n){try{return n?e(...n):e()}catch(o){Rt(o,t,s)}}function It(e,t,s,n){if(f(e)){const o=Tt(e,t,s,n);return o&&y(o)&&o.catch((e=>{Rt(e,t,s)})),o}if(d(e)){const o=[];for(let i=0;i<e.length;i++)o.push(It(e[i],t,s,n));return o}}function Rt(e,s,n,o=!0){s&&s.vnode;const{errorHandler:i,throwUnhandledErrorInProduction:r}=s&&s.appContext.config||t;if(s){let t=s.parent;const o=s.proxy,r=`https://vuejs.org/error-reference/#runtime-${n}`;for(;t;){const s=t.ec;if(s)for(let t=0;t<s.length;t++)if(!1===s[t](e,o,r))return;t=t.parent}if(i)return fe(),Tt(i,null,10,[e,o,r]),void _e()}!function(e,t,s,n=!0,o=!1){if(o)throw e;console.error(e)}(e,0,0,o,r)}const Nt=[];let Lt=-1;const qt=[];let Pt=null,Ut=0;const $t=Promise.resolve();let jt=null;function Mt(e){const t=jt||$t;return e?t.then(this?e.bind(this):e):t}function Dt(e){if(!(1&e.flags)){const t=Qt(e),s=Nt[Nt.length-1];!s||!(2&e.flags)&&t>=Qt(s)?Nt.push(e):Nt.splice(function(e){let t=Lt+1,s=Nt.length;for(;t<s;){const n=t+s>>>1,o=Nt[n],i=Qt(o);i<e||i===e&&2&o.flags?t=n+1:s=n}return t}(t),0,e),e.flags|=1,Ft()}}function Ft(){jt||(jt=$t.then(Ht))}function Bt(e,t,s=Lt+1){for(;s<Nt.length;s++){const t=Nt[s];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Nt.splice(s,1),s--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function zt(e){if(qt.length){const e=[...new Set(qt)].sort(((e,t)=>Qt(e)-Qt(t)));if(qt.length=0,Pt)return void Pt.push(...e);for(Pt=e,Ut=0;Ut<Pt.length;Ut++){const e=Pt[Ut];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Pt=null,Ut=0}}const Qt=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Ht(e){try{for(Lt=0;Lt<Nt.length;Lt++){const e=Nt[Lt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Tt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Lt<Nt.length;Lt++){const e=Nt[Lt];e&&(e.flags&=-2)}Lt=-1,Nt.length=0,zt(),jt=null,(Nt.length||qt.length)&&Ht()}}let Vt=null,Wt=null;function Gt(e){const t=Vt;return Vt=e,Wt=e&&e.type.__scopeId||null,t}function Kt(e,t=Vt,s){if(!t)return e;if(e._n)return e;const n=(...s)=>{n._d&&Jn(-1);const o=Gt(t);let i;try{i=e(...s)}finally{Gt(o),n._d&&Jn(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function Yt(e,s){if(null===Vt)return e;const n=To(Vt),o=e.dirs||(e.dirs=[]);for(let i=0;i<s.length;i++){let[e,r,a,l=t]=s[i];e&&(f(e)&&(e={mounted:e,updated:e}),e.deep&&At(r),o.push({dir:e,instance:n,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function Zt(e,t,s,n){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const a=o[r];i&&(a.oldValue=i[r].value);let l=a.dir[n];l&&(fe(),It(l,s,8,[e.el,a,e,t]),_e())}}const Jt=Symbol("_vte"),Xt=e=>e&&(e.disabled||""===e.disabled),es=e=>e&&(e.defer||""===e.defer),ts=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,ss=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,ns=(e,t)=>{const s=e&&e.to;if(_(s)){if(t){return t(s)}return null}return s},os={name:"Teleport",__isTeleport:!0,process(e,t,s,n,o,i,r,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:f,createText:_,createComment:m}}=c,g=Xt(t.props);let{shapeFlag:y,children:b,dynamicChildren:v}=t;if(null==e){const e=t.el=_(""),c=t.anchor=_("");p(e,s,n),p(c,s,n);const d=(e,t)=>{16&y&&u(b,e,t,o,i,r,a,l)},h=()=>{const e=t.target=ns(t.props,f),s=ls(e,t,_,p);e&&("svg"!==r&&ts(e)?r="svg":"mathml"!==r&&ss(e)&&(r="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(e),g||(d(e,s),as(t,!1)))};g&&(d(s,c),as(t,!0)),es(t.props)?(t.el.__isMounted=!1,wn((()=>{h(),delete t.el.__isMounted}),i)):h()}else{if(es(t.props)&&!1===e.el.__isMounted)return void wn((()=>{os.process(e,t,s,n,o,i,r,a,l,c)}),i);t.el=e.el,t.targetStart=e.targetStart;const u=t.anchor=e.anchor,p=t.target=e.target,_=t.targetAnchor=e.targetAnchor,m=Xt(e.props),y=m?s:p,b=m?u:_;if("svg"===r||ts(p)?r="svg":("mathml"===r||ss(p))&&(r="mathml"),v?(h(e.dynamicChildren,v,y,o,i,r,a),xn(e,t,!0)):l||d(e,t,y,b,o,i,r,a,!1),g)m?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):is(t,s,u,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=ns(t.props,f);e&&is(t,e,null,c,0)}else m&&is(t,p,_,c,1);as(t,g)}},remove(e,t,s,{um:n,o:{remove:o}},i){const{shapeFlag:r,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=e;if(d&&(o(c),o(u)),i&&o(l),16&r){const e=i||!Xt(h);for(let o=0;o<a.length;o++){const i=a[o];n(i,t,s,e,!!i.dynamicChildren)}}},move:is,hydrate:function(e,t,s,n,o,i,{o:{nextSibling:r,parentNode:a,querySelector:l,insert:c,createText:u}},d){function h(e,t,l,c){t.anchor=d(r(e),t,a(e),s,n,o,i),t.targetStart=l,t.targetAnchor=c}const p=t.target=ns(t.props,l),f=Xt(t.props);if(p){const a=p._lpa||p.firstChild;if(16&t.shapeFlag)if(f)h(e,t,a,a&&r(a));else{t.anchor=r(e);let l=a;for(;l;){if(l&&8===l.nodeType)if("teleport start anchor"===l.data)t.targetStart=l;else if("teleport anchor"===l.data){t.targetAnchor=l,p._lpa=t.targetAnchor&&r(t.targetAnchor);break}l=r(l)}t.targetAnchor||ls(p,t,u,c),d(a&&r(a),t,p,s,n,o,i)}as(t,f)}else f&&16&t.shapeFlag&&h(e,t,e,r(e));return t.anchor&&r(t.anchor)}};function is(e,t,s,{o:{insert:n},m:o},i=2){0===i&&n(e.targetAnchor,t,s);const{el:r,anchor:a,shapeFlag:l,children:c,props:u}=e,d=2===i;if(d&&n(r,t,s),(!d||Xt(u))&&16&l)for(let h=0;h<c.length;h++)o(c[h],t,s,2);d&&n(a,t,s)}const rs=os;function as(e,t){const s=e.ctx;if(s&&s.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)1===n.nodeType&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function ls(e,t,s,n){const o=t.targetStart=s(""),i=t.targetAnchor=s("");return o[Jt]=i,e&&(n(o,e),n(i,e)),i}const cs=Symbol("_leaveCb");function us(e,t){6&e.shapeFlag&&e.component?(e.transition=t,us(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ds(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const hs=new WeakMap;function ps(e,s,n,i,r=!1){if(d(e))return void e.forEach(((e,t)=>ps(e,s&&(d(s)?s[t]:s),n,i,r)));if(_s(i)&&!r)return void(512&i.shapeFlag&&i.type.__asyncResolved&&i.component.subTree.component&&ps(e,s,n,i.component.subTree));const a=4&i.shapeFlag?To(i.component):i.el,c=r?null:a,{i:h,r:p}=e,m=s&&s.r,g=h.refs===t?h.refs={}:h.refs,y=h.setupState,b=dt(y),v=y===t?o:e=>u(b,e);if(null!=m&&m!==p)if(fs(s),_(m))g[m]=null,v(m)&&(y[m]=null);else if(ft(m)){m.value=null;const e=s;e.k&&(g[e.k]=null)}if(f(p))Tt(p,h,12,[c,g]);else{const t=_(p),s=ft(p);if(t||s){const o=()=>{if(e.f){const s=t?v(p)?y[p]:g[p]:p.value;if(r)d(s)&&l(s,a);else if(d(s))s.includes(a)||s.push(a);else if(t)g[p]=[a],v(p)&&(y[p]=g[p]);else{const t=[a];p.value=t,e.k&&(g[e.k]=t)}}else t?(g[p]=c,v(p)&&(y[p]=c)):s&&(p.value=c,e.k&&(g[e.k]=c))};if(c){const t=()=>{o(),hs.delete(e)};t.id=-1,hs.set(e,t),wn(t,n)}else fs(e),o()}}}function fs(e){const t=hs.get(e);t&&(t.flags|=8,hs.delete(e))}U().requestIdleCallback,U().cancelIdleCallback;const _s=e=>!!e.type.__asyncLoader,ms=e=>e.type.__isKeepAlive;function gs(e,t){bs(e,"a",t)}function ys(e,t){bs(e,"da",t)}function bs(e,t,s=yo){const n=e.__wdc||(e.__wdc=()=>{let t=s;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(ws(t,n,s),s){let e=s.parent;for(;e&&e.parent;)ms(e.parent.vnode)&&vs(n,t,s,e),e=e.parent}}function vs(e,t,s,n){const o=ws(t,e,n,!0);As((()=>{l(n[t],o)}),s)}function ws(e,t,s=yo,n=!1){if(s){const o=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...n)=>{fe();const o=ko(s),i=It(t,s,e,n);return o(),_e(),i});return n?o.unshift(i):o.push(i),i}}const ks=e=>(t,s=yo)=>{xo&&"sp"!==e||ws(e,((...e)=>t(...e)),s)},Es=ks("bm"),Ss=ks("m"),xs=ks("bu"),Cs=ks("u"),Os=ks("bum"),As=ks("um"),Ts=ks("sp"),Is=ks("rtg"),Rs=ks("rtc");function Ns(e,t=yo){ws("ec",e,t)}function Ls(e,t){return function(e,t,s=!0,n=!1){const o=Vt||yo;if(o){const s=o.type;{const e=Io(s,!1);if(e&&(e===t||e===C(t)||e===T(C(t))))return s}const i=Ps(o[e]||s[e],t)||Ps(o.appContext[e],t);return!i&&n?s:i}}("components",e,!0,t)||e}const qs=Symbol.for("v-ndc");function Ps(e,t){return e&&(e[t]||e[C(t)]||e[T(C(t))])}function Us(e,t,s,n){let o;const i=s,r=d(e);if(r||_(e)){let s=!1,n=!1;r&&at(e)&&(s=!ct(e),n=lt(e),e=Ae(e)),o=new Array(e.length);for(let r=0,a=e.length;r<a;r++)o[r]=t(s?n?pt(ht(e[r])):ht(e[r]):e[r],r,void 0,i)}else if("number"==typeof e){o=new Array(e);for(let s=0;s<e;s++)o[s]=t(s+1,s,void 0,i)}else if(g(e))if(e[Symbol.iterator])o=Array.from(e,((e,s)=>t(e,s,void 0,i)));else{const s=Object.keys(e);o=new Array(s.length);for(let n=0,r=s.length;n<r;n++){const r=s[n];o[n]=t(e[r],r,n,i)}}else o=[];return o}const $s=e=>e?So(e)?To(e):$s(e.parent):null,js=a(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$s(e.parent),$root:e=>$s(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Vs(e),$forceUpdate:e=>e.f||(e.f=()=>{Dt(e.update)}),$nextTick:e=>e.n||(e.n=Mt.bind(e.proxy)),$watch:e=>Nn.bind(e)}),Ms=(e,s)=>e!==t&&!e.__isScriptSetup&&u(e,s),Ds={get({_:e},s){if("__v_skip"===s)return!0;const{ctx:n,setupState:o,data:i,props:r,accessCache:a,type:l,appContext:c}=e;let d;if("$"!==s[0]){const l=a[s];if(void 0!==l)switch(l){case 1:return o[s];case 2:return i[s];case 4:return n[s];case 3:return r[s]}else{if(Ms(o,s))return a[s]=1,o[s];if(i!==t&&u(i,s))return a[s]=2,i[s];if((d=e.propsOptions[0])&&u(d,s))return a[s]=3,r[s];if(n!==t&&u(n,s))return a[s]=4,n[s];Bs&&(a[s]=0)}}const h=js[s];let p,f;return h?("$attrs"===s&&xe(e.attrs,0,""),h(e)):(p=l.__cssModules)&&(p=p[s])?p:n!==t&&u(n,s)?(a[s]=4,n[s]):(f=c.config.globalProperties,u(f,s)?f[s]:void 0)},set({_:e},s,n){const{data:o,setupState:i,ctx:r}=e;return Ms(i,s)?(i[s]=n,!0):o!==t&&u(o,s)?(o[s]=n,!0):!u(e.props,s)&&(("$"!==s[0]||!(s.slice(1)in e))&&(r[s]=n,!0))},has({_:{data:e,setupState:s,accessCache:n,ctx:o,appContext:i,propsOptions:r,type:a}},l){let c,d;return!!(n[l]||e!==t&&"$"!==l[0]&&u(e,l)||Ms(s,l)||(c=r[0])&&u(c,l)||u(o,l)||u(js,l)||u(i.config.globalProperties,l)||(d=a.__cssModules)&&d[l])},defineProperty(e,t,s){return null!=s.get?e._.accessCache[t]=0:u(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Fs(e){return d(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let Bs=!0;function zs(e){const t=Vs(e),s=e.proxy,o=e.ctx;Bs=!1,t.beforeCreate&&Qs(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:a,watch:l,provide:c,inject:u,created:h,beforeMount:p,mounted:_,beforeUpdate:m,updated:y,activated:b,deactivated:v,beforeDestroy:w,beforeUnmount:k,destroyed:E,unmounted:S,render:x,renderTracked:C,renderTriggered:O,errorCaptured:A,serverPrefetch:T,expose:I,inheritAttrs:R,components:N,directives:L,filters:q}=t;if(u&&function(e,t){d(e)&&(e=Ys(e));for(const s in e){const n=e[s];let o;o=g(n)?"default"in n?on(n.from||s,n.default,!0):on(n.from||s):on(n),ft(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[s]=o}}(u,o,null),a)for(const n in a){const e=a[n];f(e)&&(o[n]=e.bind(s))}if(i){const t=i.call(s,s);g(t)&&(e.data=ot(t))}if(Bs=!0,r)for(const d in r){const e=r[d],t=f(e)?e.bind(s,s):f(e.get)?e.get.bind(s,s):n,i=!f(e)&&f(e.set)?e.set.bind(s):n,a=Ro({get:t,set:i});Object.defineProperty(o,d,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(l)for(const n in l)Hs(l[n],o,s,n);if(c){const e=f(c)?c.call(s):c;Reflect.ownKeys(e).forEach((t=>{!function(e,t){if(yo){let s=yo.provides;const n=yo.parent&&yo.parent.provides;n===s&&(s=yo.provides=Object.create(n)),s[e]=t}else;}(t,e[t])}))}function P(e,t){d(t)?t.forEach((t=>e(t.bind(s)))):t&&e(t.bind(s))}if(h&&Qs(h,e,"c"),P(Es,p),P(Ss,_),P(xs,m),P(Cs,y),P(gs,b),P(ys,v),P(Ns,A),P(Rs,C),P(Is,O),P(Os,k),P(As,S),P(Ts,T),d(I))if(I.length){const t=e.exposed||(e.exposed={});I.forEach((e=>{Object.defineProperty(t,e,{get:()=>s[e],set:t=>s[e]=t,enumerable:!0})}))}else e.exposed||(e.exposed={});x&&e.render===n&&(e.render=x),null!=R&&(e.inheritAttrs=R),N&&(e.components=N),L&&(e.directives=L),T&&ds(e)}function Qs(e,t,s){It(d(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,s)}function Hs(e,t,s,n){let o=n.includes(".")?Ln(s,n):()=>s[n];if(_(e)){const s=t[e];f(s)&&In(o,s)}else if(f(e))In(o,e.bind(s));else if(g(e))if(d(e))e.forEach((e=>Hs(e,t,s,n)));else{const n=f(e.handler)?e.handler.bind(s):t[e.handler];f(n)&&In(o,n,e)}}function Vs(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,a=i.get(t);let l;return a?l=a:o.length||s||n?(l={},o.length&&o.forEach((e=>Ws(l,e,r,!0))),Ws(l,t,r)):l=t,g(t)&&i.set(t,l),l}function Ws(e,t,s,n=!1){const{mixins:o,extends:i}=t;i&&Ws(e,i,s,!0),o&&o.forEach((t=>Ws(e,t,s,!0)));for(const r in t)if(n&&"expose"===r);else{const n=Gs[r]||s&&s[r];e[r]=n?n(e[r],t[r]):t[r]}return e}const Gs={data:Ks,props:Xs,emits:Xs,methods:Js,computed:Js,beforeCreate:Zs,created:Zs,beforeMount:Zs,mounted:Zs,beforeUpdate:Zs,updated:Zs,beforeDestroy:Zs,beforeUnmount:Zs,destroyed:Zs,unmounted:Zs,activated:Zs,deactivated:Zs,errorCaptured:Zs,serverPrefetch:Zs,components:Js,directives:Js,watch:function(e,t){if(!e)return t;if(!t)return e;const s=a(Object.create(null),e);for(const n in t)s[n]=Zs(e[n],t[n]);return s},provide:Ks,inject:function(e,t){return Js(Ys(e),Ys(t))}};function Ks(e,t){return t?e?function(){return a(f(e)?e.call(this,this):e,f(t)?t.call(this,this):t)}:t:e}function Ys(e){if(d(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Zs(e,t){return e?[...new Set([].concat(e,t))]:t}function Js(e,t){return e?a(Object.create(null),e,t):t}function Xs(e,t){return e?d(e)&&d(t)?[...new Set([...e,...t])]:a(Object.create(null),Fs(e),Fs(null!=t?t:{})):t}function en(){return{app:null,config:{isNativeTag:o,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tn=0;function sn(e,t){return function(t,s=null){f(t)||(t=a({},t)),null==s||g(s)||(s=null);const n=en(),o=new WeakSet,i=[];let r=!1;const l=n.app={_uid:tn++,_component:t,_props:s,_container:null,_context:n,_instance:null,version:No,get config(){return n.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&f(e.install)?(o.add(e),e.install(l,...t)):f(e)&&(o.add(e),e(l,...t))),l),mixin:e=>(n.mixins.includes(e)||n.mixins.push(e),l),component:(e,t)=>t?(n.components[e]=t,l):n.components[e],directive:(e,t)=>t?(n.directives[e]=t,l):n.directives[e],mount(o,i,a){if(!r){const i=l._ceVNode||ao(t,s);return i.appContext=n,!0===a?a="svg":!1===a&&(a=void 0),e(i,o,a),r=!0,l._container=o,o.__vue_app__=l,To(i.component)}},onUnmount(e){i.push(e)},unmount(){r&&(It(i,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide:(e,t)=>(n.provides[e]=t,l),runWithContext(e){const t=nn;nn=l;try{return e()}finally{nn=t}}};return l}}let nn=null;function on(e,t,s=!1){const n=bo();if(n||nn){let o=nn?nn._context.provides:n?null==n.parent||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return s&&f(t)?t.call(n&&n.proxy):t}}const rn={},an=()=>Object.create(rn),ln=e=>Object.getPrototypeOf(e)===rn;function cn(e,t,s,n=!1){const o={},i=an();e.propsDefaults=Object.create(null),un(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);s?e.props=n?o:rt(o,!1,Qe,Ze,et):e.type.props?e.props=o:e.props=i,e.attrs=i}function un(e,s,n,o){const[i,r]=e.propsOptions;let a,l=!1;if(s)for(let t in s){if(E(t))continue;const c=s[t];let d;i&&u(i,d=C(t))?r&&r.includes(d)?(a||(a={}))[d]=c:n[d]=c:jn(e.emitsOptions,t)||t in o&&c===o[t]||(o[t]=c,l=!0)}if(r){const s=dt(n),o=a||t;for(let t=0;t<r.length;t++){const a=r[t];n[a]=dn(i,s,a,o[a],e,!u(o,a))}}return l}function dn(e,t,s,n,o,i){const r=e[s];if(null!=r){const e=u(r,"default");if(e&&void 0===n){const e=r.default;if(r.type!==Function&&!r.skipFactory&&f(e)){const{propsDefaults:i}=o;if(s in i)n=i[s];else{const r=ko(o);n=i[s]=e.call(null,t),r()}}else n=e;o.ce&&o.ce._setProp(s,n)}r[0]&&(i&&!e?n=!1:!r[1]||""!==n&&n!==A(s)||(n=!0))}return n}const hn=new WeakMap;function pn(e,n,o=!1){const i=o?hn:n.propsCache,r=i.get(e);if(r)return r;const l=e.props,c={},h=[];let p=!1;if(!f(e)){const t=e=>{p=!0;const[t,s]=pn(e,n,!0);a(c,t),s&&h.push(...s)};!o&&n.mixins.length&&n.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!l&&!p)return g(e)&&i.set(e,s),s;if(d(l))for(let s=0;s<l.length;s++){const e=C(l[s]);fn(e)&&(c[e]=t)}else if(l)for(const t in l){const e=C(t);if(fn(e)){const s=l[t],n=c[e]=d(s)||f(s)?{type:s}:a({},s),o=n.type;let i=!1,r=!0;if(d(o))for(let e=0;e<o.length;++e){const t=o[e],s=f(t)&&t.name;if("Boolean"===s){i=!0;break}"String"===s&&(r=!1)}else i=f(o)&&"Boolean"===o.name;n[0]=i,n[1]=r,(i||u(n,"default"))&&h.push(e)}}const _=[c,h];return g(e)&&i.set(e,_),_}function fn(e){return"$"!==e[0]&&!E(e)}const _n=e=>"_"===e||"_ctx"===e||"$stable"===e,mn=e=>d(e)?e.map(ho):[ho(e)],gn=(e,t,s)=>{if(t._n)return t;const n=Kt(((...e)=>mn(t(...e))),s);return n._c=!1,n},yn=(e,t,s)=>{const n=e._ctx;for(const o in e){if(_n(o))continue;const s=e[o];if(f(s))t[o]=gn(0,s,n);else if(null!=s){const e=mn(s);t[o]=()=>e}}},bn=(e,t)=>{const s=mn(t);e.slots.default=()=>s},vn=(e,t,s)=>{for(const n in t)!s&&_n(n)||(e[n]=t[n])},wn=function(e,t){t&&t.pendingBranch?d(e)?t.effects.push(...e):t.effects.push(e):(d(s=e)?qt.push(...s):Pt&&-1===s.id?Pt.splice(Ut+1,0,s):1&s.flags||(qt.push(s),s.flags|=1),Ft());var s};function kn(e){return function(e){U().__VUE__=!0;const{insert:o,remove:i,patchProp:r,createElement:a,createText:l,createComment:c,setText:d,setElementText:h,parentNode:p,nextSibling:f,setScopeId:_=n,insertStaticContent:m}=e,g=(e,t,s,n=null,o=null,i=null,r=void 0,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!no(e,t)&&(n=ee(e),W(e,o,i,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case Hn:b(e,t,s,n);break;case Vn:v(e,t,s,n);break;case Wn:null==e&&w(t,s,n,r);break;case Qn:$(e,t,s,n,o,i,r,a,l);break;default:1&d?x(e,t,s,n,o,i,r,a,l):6&d?j(e,t,s,n,o,i,r,a,l):(64&d||128&d)&&c.process(e,t,s,n,o,i,r,a,l,ne)}null!=u&&o?ps(u,e&&e.ref,i,t||e,!t):null==u&&e&&null!=e.ref&&ps(e.ref,null,i,e,!0)},b=(e,t,s,n)=>{if(null==e)o(t.el=l(t.children),s,n);else{const s=t.el=e.el;t.children!==e.children&&d(s,t.children)}},v=(e,t,s,n)=>{null==e?o(t.el=c(t.children||""),s,n):t.el=e.el},w=(e,t,s,n)=>{[e.el,e.anchor]=m(e.children,t,s,n,e.el,e.anchor)},k=({el:e,anchor:t},s,n)=>{let i;for(;e&&e!==t;)i=f(e),o(e,s,n),e=i;o(t,s,n)},S=({el:e,anchor:t})=>{let s;for(;e&&e!==t;)s=f(e),i(e),e=s;i(t)},x=(e,t,s,n,o,i,r,a,l)=>{"svg"===t.type?r="svg":"math"===t.type&&(r="mathml"),null==e?O(t,s,n,o,i,r,a,l):R(e,t,o,i,r,a,l)},O=(e,t,s,n,i,l,c,u)=>{let d,p;const{props:f,shapeFlag:_,transition:m,dirs:g}=e;if(d=e.el=a(e.type,l,f&&f.is,f),8&_?h(d,e.children):16&_&&I(e.children,d,null,n,i,En(e,l),c,u),g&&Zt(e,null,n,"created"),T(d,e,e.scopeId,c,n),f){for(const e in f)"value"===e||E(e)||r(d,e,null,f[e],l,n);"value"in f&&r(d,"value",null,f.value,l),(p=f.onVnodeBeforeMount)&&_o(p,n,e)}g&&Zt(e,null,n,"beforeMount");const y=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(i,m);y&&m.beforeEnter(d),o(d,t,s),((p=f&&f.onVnodeMounted)||y||g)&&wn((()=>{p&&_o(p,n,e),y&&m.enter(d),g&&Zt(e,null,n,"mounted")}),i)},T=(e,t,s,n,o)=>{if(s&&_(e,s),n)for(let i=0;i<n.length;i++)_(e,n[i]);if(o){let s=o.subTree;if(t===s||zn(s.type)&&(s.ssContent===t||s.ssFallback===t)){const t=o.vnode;T(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},I=(e,t,s,n,o,i,r,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?po(e[c]):ho(e[c]);g(null,l,t,s,n,o,i,r,a)}},R=(e,s,n,o,i,a,l)=>{const c=s.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=s;u|=16&e.patchFlag;const f=e.props||t,_=s.props||t;let m;if(n&&Sn(n,!1),(m=_.onVnodeBeforeUpdate)&&_o(m,n,s,e),p&&Zt(s,e,n,"beforeUpdate"),n&&Sn(n,!0),(f.innerHTML&&null==_.innerHTML||f.textContent&&null==_.textContent)&&h(c,""),d?q(e.dynamicChildren,d,c,n,o,En(s,i),a):l||z(e,s,c,null,n,o,En(s,i),a,!1),u>0){if(16&u)P(c,f,_,n,i);else if(2&u&&f.class!==_.class&&r(c,"class",null,_.class,i),4&u&&r(c,"style",f.style,_.style,i),8&u){const e=s.dynamicProps;for(let t=0;t<e.length;t++){const s=e[t],o=f[s],a=_[s];a===o&&"value"!==s||r(c,s,o,a,i,n)}}1&u&&e.children!==s.children&&h(c,s.children)}else l||null!=d||P(c,f,_,n,i);((m=_.onVnodeUpdated)||p)&&wn((()=>{m&&_o(m,n,s,e),p&&Zt(s,e,n,"updated")}),o)},q=(e,t,s,n,o,i,r)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===Qn||!no(l,c)||198&l.shapeFlag)?p(l.el):s;g(l,c,u,null,n,o,i,r,!0)}},P=(e,s,n,o,i)=>{if(s!==n){if(s!==t)for(const t in s)E(t)||t in n||r(e,t,s[t],null,i,o);for(const t in n){if(E(t))continue;const a=n[t],l=s[t];a!==l&&"value"!==t&&r(e,t,l,a,i,o)}"value"in n&&r(e,"value",s.value,n.value,i)}},$=(e,t,s,n,i,r,a,c,u)=>{const d=t.el=e?e.el:l(""),h=t.anchor=e?e.anchor:l("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:_}=t;_&&(c=c?c.concat(_):_),null==e?(o(d,s,n),o(h,s,n),I(t.children||[],s,h,i,r,a,c,u)):p>0&&64&p&&f&&e.dynamicChildren?(q(e.dynamicChildren,f,s,i,r,a,c),(null!=t.key||i&&t===i.subTree)&&xn(e,t,!0)):z(e,t,s,h,i,r,a,c,u)},j=(e,t,s,n,o,i,r,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?o.ctx.activate(t,s,n,r,l):M(t,s,n,o,i,r,l):D(e,t,l)},M=(e,s,n,o,i,r,a)=>{const l=e.component=function(e,s,n){const o=e.type,i=(s?s.appContext:e.appContext)||mo,r={uid:go++,vnode:e,type:o,parent:s,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Z(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(i.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pn(o,i),emitsOptions:$n(o,i),emit:null,emitted:null,propsDefaults:t,inheritAttrs:o.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};r.ctx={_:r},r.root=s?s.root:r,r.emit=Pn.bind(null,r),e.ce&&e.ce(r);return r}(e,o,i);if(ms(e)&&(l.ctx.renderer=ne),function(e,t=!1,s=!1){t&&wo(t);const{props:n,children:o}=e.vnode,i=So(e);cn(e,n,i,t),((e,t,s)=>{const n=e.slots=an();if(32&e.vnode.shapeFlag){const e=t._;e?(vn(n,t,s),s&&L(n,"_",e,!0)):yn(t,n)}else t&&bn(e,t)})(e,o,s||t);const r=i?function(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ds);const{setup:n}=s;if(n){fe();const s=e.setupContext=n.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Ao),slots:e.slots,emit:e.emit,expose:t}}(e):null,o=ko(e),i=Tt(n,e,0,[e.props,s]),r=y(i);if(_e(),o(),!r&&!e.sp||_s(e)||ds(e),r){if(i.then(Eo,Eo),t)return i.then((t=>{Co(e,t)})).catch((t=>{Rt(t,e,0)}));e.asyncDep=i}else Co(e,i)}else Oo(e)}(e,t):void 0;t&&wo(!1)}(l,!1,a),l.asyncDep){if(i&&i.registerDep(l,F,a),!e.el){const t=l.subTree=ao(Vn);v(null,t,s,n),e.placeholder=t.el}}else F(l,e,s,n,i,r,a)},D=(e,t,s)=>{const n=t.component=e.component;if(function(e,t,s){const{props:n,children:o,component:i}=e,{props:r,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(s&&l>=0))return!(!o&&!a||a&&a.$stable)||n!==r&&(n?!r||Bn(n,r,c):!!r);if(1024&l)return!0;if(16&l)return n?Bn(n,r,c):!!r;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const s=e[t];if(r[s]!==n[s]&&!jn(c,s))return!0}}return!1}(e,t,s)){if(n.asyncDep&&!n.asyncResolved)return void B(n,t,s);n.next=t,n.update()}else t.el=e.el,n.vnode=t},F=(e,t,s,n,o,i,r)=>{const a=()=>{if(e.isMounted){let{next:t,bu:s,u:n,parent:l,vnode:c}=e;{const s=Cn(e);if(s)return t&&(t.el=c.el,B(e,t,r)),void s.asyncDep.then((()=>{e.isUnmounted||a()}))}let u,d=t;Sn(e,!1),t?(t.el=c.el,B(e,t,r)):t=c,s&&N(s),(u=t.props&&t.props.onVnodeBeforeUpdate)&&_o(u,l,t,c),Sn(e,!0);const h=Mn(e),f=e.subTree;e.subTree=h,g(f,h,p(f.el),ee(f),e,o,i),t.el=h.el,null===d&&function({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n!==e)break;(e=t.vnode).el=s,t=t.parent}}(e,h.el),n&&wn(n,o),(u=t.props&&t.props.onVnodeUpdated)&&wn((()=>_o(u,l,t,c)),o)}else{let r;const{el:a,props:l}=t,{bm:c,m:u,parent:d,root:h,type:p}=e,f=_s(t);Sn(e,!1),c&&N(c),!f&&(r=l&&l.onVnodeBeforeMount)&&_o(r,d,t),Sn(e,!0);{h.ce&&!1!==h.ce._def.shadowRoot&&h.ce._injectChildStyle(p);const r=e.subTree=Mn(e);g(null,r,s,n,e,o,i),t.el=r.el}if(u&&wn(u,o),!f&&(r=l&&l.onVnodeMounted)){const e=t;wn((()=>_o(r,d,e)),o)}(256&t.shapeFlag||d&&_s(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&wn(e.a,o),e.isMounted=!0,t=s=n=null}};e.scope.on();const l=e.effect=new X(a);e.scope.off();const c=e.update=l.run.bind(l),u=e.job=l.runIfDirty.bind(l);u.i=e,u.id=e.uid,l.scheduler=()=>Dt(u),Sn(e,!0),c()},B=(e,s,n)=>{s.component=e;const o=e.vnode.props;e.vnode=s,e.next=null,function(e,t,s,n){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,a=dt(o),[l]=e.propsOptions;let c=!1;if(!(n||r>0)||16&r){let n;un(e,t,o,i)&&(c=!0);for(const i in a)t&&(u(t,i)||(n=A(i))!==i&&u(t,n))||(l?!s||void 0===s[i]&&void 0===s[n]||(o[i]=dn(l,a,i,void 0,e,!0)):delete o[i]);if(i!==a)for(const e in i)t&&u(t,e)||(delete i[e],c=!0)}else if(8&r){const s=e.vnode.dynamicProps;for(let n=0;n<s.length;n++){let r=s[n];if(jn(e.emitsOptions,r))continue;const d=t[r];if(l)if(u(i,r))d!==i[r]&&(i[r]=d,c=!0);else{const t=C(r);o[t]=dn(l,a,t,d,e,!1)}else d!==i[r]&&(i[r]=d,c=!0)}}c&&Ce(e.attrs,"set","")}(e,s.props,o,n),((e,s,n)=>{const{vnode:o,slots:i}=e;let r=!0,a=t;if(32&o.shapeFlag){const e=s._;e?n&&1===e?r=!1:vn(i,s,n):(r=!s.$stable,yn(s,i)),a=s}else s&&(bn(e,s),a={default:1});if(r)for(const t in i)_n(t)||null!=a[t]||delete i[t]})(e,s.children,n),fe(),Bt(e),_e()},z=(e,t,s,n,o,i,r,a,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void H(c,d,s,n,o,i,r,a,l);if(256&p)return void Q(c,d,s,n,o,i,r,a,l)}8&f?(16&u&&J(c,o,i),d!==c&&h(s,d)):16&u?16&f?H(c,d,s,n,o,i,r,a,l):J(c,o,i,!0):(8&u&&h(s,""),16&f&&I(d,s,n,o,i,r,a,l))},Q=(e,t,n,o,i,r,a,l,c)=>{t=t||s;const u=(e=e||s).length,d=t.length,h=Math.min(u,d);let p;for(p=0;p<h;p++){const s=t[p]=c?po(t[p]):ho(t[p]);g(e[p],s,n,null,i,r,a,l,c)}u>d?J(e,i,r,!0,!1,h):I(t,n,o,i,r,a,l,c,h)},H=(e,t,n,o,i,r,a,l,c)=>{let u=0;const d=t.length;let h=e.length-1,p=d-1;for(;u<=h&&u<=p;){const s=e[u],o=t[u]=c?po(t[u]):ho(t[u]);if(!no(s,o))break;g(s,o,n,null,i,r,a,l,c),u++}for(;u<=h&&u<=p;){const s=e[h],o=t[p]=c?po(t[p]):ho(t[p]);if(!no(s,o))break;g(s,o,n,null,i,r,a,l,c),h--,p--}if(u>h){if(u<=p){const e=p+1,s=e<d?t[e].el:o;for(;u<=p;)g(null,t[u]=c?po(t[u]):ho(t[u]),n,s,i,r,a,l,c),u++}}else if(u>p)for(;u<=h;)W(e[u],i,r,!0),u++;else{const f=u,_=u,m=new Map;for(u=_;u<=p;u++){const e=t[u]=c?po(t[u]):ho(t[u]);null!=e.key&&m.set(e.key,u)}let y,b=0;const v=p-_+1;let w=!1,k=0;const E=new Array(v);for(u=0;u<v;u++)E[u]=0;for(u=f;u<=h;u++){const s=e[u];if(b>=v){W(s,i,r,!0);continue}let o;if(null!=s.key)o=m.get(s.key);else for(y=_;y<=p;y++)if(0===E[y-_]&&no(s,t[y])){o=y;break}void 0===o?W(s,i,r,!0):(E[o-_]=u+1,o>=k?k=o:w=!0,g(s,t[o],n,null,i,r,a,l,c),b++)}const S=w?function(e){const t=e.slice(),s=[0];let n,o,i,r,a;const l=e.length;for(n=0;n<l;n++){const l=e[n];if(0!==l){if(o=s[s.length-1],e[o]<l){t[n]=o,s.push(n);continue}for(i=0,r=s.length-1;i<r;)a=i+r>>1,e[s[a]]<l?i=a+1:r=a;l<e[s[i]]&&(i>0&&(t[n]=s[i-1]),s[i]=n)}}i=s.length,r=s[i-1];for(;i-- >0;)s[i]=r,r=t[r];return s}(E):s;for(y=S.length-1,u=v-1;u>=0;u--){const e=_+u,s=t[e],h=t[e+1],p=e+1<d?h.el||h.placeholder:o;0===E[u]?g(null,s,n,p,i,r,a,l,c):w&&(y<0||u!==S[y]?V(s,n,p,2):y--)}}},V=(e,t,s,n,r=null)=>{const{el:a,type:l,transition:c,children:u,shapeFlag:d}=e;if(6&d)return void V(e.component.subTree,t,s,n);if(128&d)return void e.suspense.move(t,s,n);if(64&d)return void l.move(e,t,s,ne);if(l===Qn){o(a,t,s);for(let e=0;e<u.length;e++)V(u[e],t,s,n);return void o(e.anchor,t,s)}if(l===Wn)return void k(e,t,s);if(2!==n&&1&d&&c)if(0===n)c.beforeEnter(a),o(a,t,s),wn((()=>c.enter(a)),r);else{const{leave:n,delayLeave:r,afterLeave:l}=c,u=()=>{e.ctx.isUnmounted?i(a):o(a,t,s)},d=()=>{a._isLeaving&&a[cs](!0),n(a,(()=>{u(),l&&l()}))};r?r(a,u,d):d()}else o(a,t,s)},W=(e,t,s,n=!1,o=!1)=>{const{type:i,props:r,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:h,cacheIndex:p}=e;if(-2===d&&(o=!1),null!=a&&(fe(),ps(a,null,s,e,!0),_e()),null!=p&&(t.renderCache[p]=void 0),256&u)return void t.ctx.deactivate(e);const f=1&u&&h,_=!_s(e);let m;if(_&&(m=r&&r.onVnodeBeforeUnmount)&&_o(m,t,e),6&u)Y(e.component,s,n);else{if(128&u)return void e.suspense.unmount(s,n);f&&Zt(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,s,ne,n):c&&!c.hasOnce&&(i!==Qn||d>0&&64&d)?J(c,t,s,!1,!0):(i===Qn&&384&d||!o&&16&u)&&J(l,t,s),n&&G(e)}(_&&(m=r&&r.onVnodeUnmounted)||f)&&wn((()=>{m&&_o(m,t,e),f&&Zt(e,null,t,"unmounted")}),s)},G=e=>{const{type:t,el:s,anchor:n,transition:o}=e;if(t===Qn)return void K(s,n);if(t===Wn)return void S(e);const r=()=>{i(s),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:n}=o,i=()=>t(s,r);n?n(e.el,r,i):i()}else r()},K=(e,t)=>{let s;for(;e!==t;)s=f(e),i(e),e=s;i(t)},Y=(e,t,s)=>{const{bum:n,scope:o,job:i,subTree:r,um:a,m:l,a:c}=e;On(l),On(c),n&&N(n),o.stop(),i&&(i.flags|=8,W(r,e,t,s)),a&&wn(a,t),wn((()=>{e.isUnmounted=!0}),t)},J=(e,t,s,n=!1,o=!1,i=0)=>{for(let r=i;r<e.length;r++)W(e[r],t,s,n,o)},ee=e=>{if(6&e.shapeFlag)return ee(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=f(e.anchor||e.el),s=t&&t[Jt];return s?f(s):t};let te=!1;const se=(e,t,s)=>{null==e?t._vnode&&W(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,s),t._vnode=e,te||(te=!0,Bt(),zt(),te=!1)},ne={p:g,um:W,m:V,r:G,mt:M,mc:I,pc:z,pbc:q,n:ee,o:e};let oe;return{render:se,hydrate:oe,createApp:sn(se)}}(e)}function En({type:e,props:t},s){return"svg"===s&&"foreignObject"===e||"mathml"===s&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Sn({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function xn(e,t,s=!1){const n=e.children,o=t.children;if(d(n)&&d(o))for(let i=0;i<n.length;i++){const e=n[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[i]=po(o[i]),t.el=e.el),s||-2===t.patchFlag||xn(e,t)),t.type===Hn&&-1!==t.patchFlag&&(t.el=e.el),t.type!==Vn||t.el||(t.el=e.el)}}function Cn(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Cn(t)}function On(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const An=Symbol.for("v-scx"),Tn=()=>on(An);function In(e,t,s){return Rn(e,t,s)}function Rn(e,s,o=t){const{immediate:i,deep:r,flush:l,once:c}=o,u=a({},o),d=s&&i||!s&&"post"!==l;let h;if(xo)if("sync"===l){const e=Tn();h=e.__watcherHandles||(e.__watcherHandles=[])}else if(!d){const e=()=>{};return e.stop=n,e.resume=n,e.pause=n,e}const p=yo;u.call=(e,t,s)=>It(e,p,t,s);let f=!1;"post"===l?u.scheduler=e=>{wn(e,p&&p.suspense)}:"sync"!==l&&(f=!0,u.scheduler=(e,t)=>{t?e():Dt(e)}),u.augmentJob=e=>{s&&(e.flags|=4),f&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};const _=Ot(e,s,u);return xo&&(h?h.push(_):d&&_()),_}function Nn(e,t,s){const n=this.proxy,o=_(e)?e.includes(".")?Ln(n,e):()=>n[e]:e.bind(n,n);let i;f(t)?i=t:(i=t.handler,s=t);const r=ko(this),a=Rn(o,i.bind(n),s);return r(),a}function Ln(e,t){const s=t.split(".");return()=>{let t=e;for(let e=0;e<s.length&&t;e++)t=t[s[e]];return t}}const qn=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${C(t)}Modifiers`]||e[`${A(t)}Modifiers`];function Pn(e,s,...n){if(e.isUnmounted)return;const o=e.vnode.props||t;let i=n;const r=s.startsWith("update:"),a=r&&qn(o,s.slice(7));let l;a&&(a.trim&&(i=n.map((e=>_(e)?e.trim():e))),a.number&&(i=n.map(q)));let c=o[l=I(s)]||o[l=I(C(s))];!c&&r&&(c=o[l=I(A(s))]),c&&It(c,e,6,i);const u=o[l+"Once"];if(u){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,It(u,e,6,i)}}const Un=new WeakMap;function $n(e,t,s=!1){const n=s?Un:t.emitsCache,o=n.get(e);if(void 0!==o)return o;const i=e.emits;let r={},l=!1;if(!f(e)){const n=e=>{const s=$n(e,t,!0);s&&(l=!0,a(r,s))};!s&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return i||l?(d(i)?i.forEach((e=>r[e]=null)):a(r,i),g(e)&&n.set(e,r),r):(g(e)&&n.set(e,null),null)}function jn(e,t){return!(!e||!i(t))&&(t=t.slice(2).replace(/Once$/,""),u(e,t[0].toLowerCase()+t.slice(1))||u(e,A(t))||u(e,t))}function Mn(e){const{type:t,vnode:s,proxy:n,withProxy:o,propsOptions:[i],slots:a,attrs:l,emit:c,render:u,renderCache:d,props:h,data:p,setupState:f,ctx:_,inheritAttrs:m}=e,g=Gt(e);let y,b;try{if(4&s.shapeFlag){const e=o||n,t=e;y=ho(u.call(t,e,d,h,f,p,_)),b=l}else{const e=t;0,y=ho(e.length>1?e(h,{attrs:l,slots:a,emit:c}):e(h,null)),b=t.props?l:Dn(l)}}catch(w){Gn.length=0,Rt(w,e,1),y=ao(Vn)}let v=y;if(b&&!1!==m){const e=Object.keys(b),{shapeFlag:t}=v;e.length&&7&t&&(i&&e.some(r)&&(b=Fn(b,i)),v=lo(v,b,!1,!0))}return s.dirs&&(v=lo(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(s.dirs):s.dirs),s.transition&&us(v,s.transition),y=v,Gt(g),y}const Dn=e=>{let t;for(const s in e)("class"===s||"style"===s||i(s))&&((t||(t={}))[s]=e[s]);return t},Fn=(e,t)=>{const s={};for(const n in e)r(n)&&n.slice(9)in t||(s[n]=e[n]);return s};function Bn(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const i=n[o];if(t[i]!==e[i]&&!jn(s,i))return!0}return!1}const zn=e=>e.__isSuspense;const Qn=Symbol.for("v-fgt"),Hn=Symbol.for("v-txt"),Vn=Symbol.for("v-cmt"),Wn=Symbol.for("v-stc"),Gn=[];let Kn=null;function Yn(e=!1){Gn.push(Kn=e?null:[])}let Zn=1;function Jn(e,t=!1){Zn+=e,e<0&&Kn&&t&&(Kn.hasOnce=!0)}function Xn(e){return e.dynamicChildren=Zn>0?Kn||s:null,Gn.pop(),Kn=Gn[Gn.length-1]||null,Zn>0&&Kn&&Kn.push(e),e}function eo(e,t,s,n,o,i){return Xn(ro(e,t,s,n,o,i,!0))}function to(e,t,s,n,o){return Xn(ao(e,t,s,n,o,!0))}function so(e){return!!e&&!0===e.__v_isVNode}function no(e,t){return e.type===t.type&&e.key===t.key}const oo=({key:e})=>null!=e?e:null,io=({ref:e,ref_key:t,ref_for:s})=>("number"==typeof e&&(e=""+e),null!=e?_(e)||ft(e)||f(e)?{i:Vt,r:e,k:t,f:!!s}:e:null);function ro(e,t=null,s=null,n=0,o=null,i=(e===Qn?0:1),r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&oo(t),ref:t&&io(t),scopeId:Wt,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Vt};return a?(fo(l,s),128&i&&e.normalize(l)):s&&(l.shapeFlag|=_(s)?8:16),Zn>0&&!r&&Kn&&(l.patchFlag>0||6&i)&&32!==l.patchFlag&&Kn.push(l),l}const ao=function(e,t=null,s=null,n=0,o=null,i=!1){e&&e!==qs||(e=Vn);if(so(e)){const n=lo(e,t,!0);return s&&fo(n,s),Zn>0&&!i&&Kn&&(6&n.shapeFlag?Kn[Kn.indexOf(e)]=n:Kn.push(n)),n.patchFlag=-2,n}r=e,f(r)&&"__vccOpts"in r&&(e=e.__vccOpts);var r;if(t){t=function(e){return e?ut(e)||ln(e)?a({},e):e:null}(t);let{class:e,style:s}=t;e&&!_(e)&&(t.class=B(e)),g(s)&&(ut(s)&&!d(s)&&(s=a({},s)),t.style=$(s))}const l=_(e)?1:zn(e)?128:(e=>e.__isTeleport)(e)?64:g(e)?4:f(e)?2:0;return ro(e,t,s,n,o,l,i,!0)};function lo(e,t,s=!1,n=!1){const{props:o,ref:r,patchFlag:a,children:l,transition:c}=e,u=t?function(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=B([t.class,n.class]));else if("style"===e)t.style=$([t.style,n.style]);else if(i(e)){const s=t[e],o=n[e];!o||s===o||d(s)&&s.includes(o)||(t[e]=s?[].concat(s,o):o)}else""!==e&&(t[e]=n[e])}return t}(o||{},t):o,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&oo(u),ref:t&&t.ref?s&&r?d(r)?r.concat(io(t)):[r,io(t)]:io(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Qn?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&lo(e.ssContent),ssFallback:e.ssFallback&&lo(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&us(h,c.clone(h)),h}function co(e=" ",t=0){return ao(Hn,null,e,t)}function uo(e="",t=!1){return t?(Yn(),to(Vn,null,e)):ao(Vn,null,e)}function ho(e){return null==e||"boolean"==typeof e?ao(Vn):d(e)?ao(Qn,null,e.slice()):so(e)?po(e):ao(Hn,null,String(e))}function po(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:lo(e)}function fo(e,t){let s=0;const{shapeFlag:n}=e;if(null==t)t=null;else if(d(t))s=16;else if("object"==typeof t){if(65&n){const s=t.default;return void(s&&(s._c&&(s._d=!1),fo(e,s()),s._c&&(s._d=!0)))}{s=32;const n=t._;n||ln(t)?3===n&&Vt&&(1===Vt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Vt}}else f(t)?(t={default:t,_ctx:Vt},s=32):(t=String(t),64&n?(s=16,t=[co(t)]):s=8);e.children=t,e.shapeFlag|=s}function _o(e,t,s,n=null){It(e,t,7,[s,n])}const mo=en();let go=0;let yo=null;const bo=()=>yo||Vt;let vo,wo;{const e=U(),t=(t,s)=>{let n;return(n=e[t])||(n=e[t]=[]),n.push(s),e=>{n.length>1?n.forEach((t=>t(e))):n[0](e)}};vo=t("__VUE_INSTANCE_SETTERS__",(e=>yo=e)),wo=t("__VUE_SSR_SETTERS__",(e=>xo=e))}const ko=e=>{const t=yo;return vo(e),e.scope.on(),()=>{e.scope.off(),vo(t)}},Eo=()=>{yo&&yo.scope.off(),vo(null)};function So(e){return 4&e.vnode.shapeFlag}let xo=!1;function Co(e,t,s){f(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:g(t)&&(e.setupState=bt(t)),Oo(e)}function Oo(e,t,s){const o=e.type;e.render||(e.render=o.render||n);{const t=ko(e);fe();try{zs(e)}finally{_e(),t()}}}const Ao={get:(e,t)=>(xe(e,0,""),e[t])};function To(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bt((t=e.exposed,!u(t,"__v_skip")&&Object.isExtensible(t)&&L(t,"__v_skip",!0),t)),{get:(t,s)=>s in t?t[s]:s in js?js[s](e):void 0,has:(e,t)=>t in e||t in js})):e.proxy;var t}function Io(e,t=!0){return f(e)?e.displayName||e.name:e.name||t&&e.__name}const Ro=(e,t)=>{const s=function(e,t,s=!1){let n,o;return f(e)?n=e:(n=e.get,o=e.set),new Et(n,o,s)}(e,0,xo);return s},No="3.5.22";
/**
  * @vue/runtime-dom v3.5.22
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **/
let Lo;const qo="undefined"!=typeof window&&window.trustedTypes;if(qo)try{Lo=qo.createPolicy("vue",{createHTML:e=>e})}catch(pv){}const Po=Lo?e=>Lo.createHTML(e):e=>e,Uo="undefined"!=typeof document?document:null,$o=Uo&&Uo.createElement("template"),jo={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const o="svg"===t?Uo.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Uo.createElementNS("http://www.w3.org/1998/Math/MathML",e):s?Uo.createElement(e,{is:s}):Uo.createElement(e);return"select"===e&&n&&null!=n.multiple&&o.setAttribute("multiple",n.multiple),o},createText:e=>Uo.createTextNode(e),createComment:e=>Uo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Uo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,o,i){const r=s?s.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),s),o!==i&&(o=o.nextSibling););else{$o.innerHTML=Po("svg"===n?`<svg>${e}</svg>`:"mathml"===n?`<math>${e}</math>`:e);const o=$o.content;if("svg"===n||"mathml"===n){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,s)}return[r?r.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Mo=Symbol("_vtc");const Do=Symbol("_vod"),Fo=Symbol("_vsh"),Bo={name:"show",beforeMount(e,{value:t},{transition:s}){e[Do]="none"===e.style.display?"":e.style.display,s&&t?s.beforeEnter(e):zo(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),zo(e,!0),n.enter(e)):n.leave(e,(()=>{zo(e,!1)})):zo(e,t))},beforeUnmount(e,{value:t}){zo(e,t)}};function zo(e,t){e.style.display=t?e[Do]:"none",e[Fo]=!t}const Qo=Symbol(""),Ho=/(?:^|;)\s*display\s*:/;const Vo=/\s*!important$/;function Wo(e,t,s){if(d(s))s.forEach((s=>Wo(e,t,s)));else if(null==s&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=function(e,t){const s=Ko[t];if(s)return s;let n=C(t);if("filter"!==n&&n in e)return Ko[t]=n;n=T(n);for(let o=0;o<Go.length;o++){const s=Go[o]+n;if(s in e)return Ko[t]=s}return t}(e,t);Vo.test(s)?e.setProperty(A(n),s.replace(Vo,""),"important"):e[n]=s}}const Go=["Webkit","Moz","ms"],Ko={};const Yo="http://www.w3.org/1999/xlink";function Zo(e,t,s,n,o,i=z(t)){n&&t.startsWith("xlink:")?null==s?e.removeAttributeNS(Yo,t.slice(6,t.length)):e.setAttributeNS(Yo,t,s):null==s||i&&!Q(s)?e.removeAttribute(t):e.setAttribute(t,i?"":m(s)?String(s):s)}function Jo(e,t,s,n,o){if("innerHTML"===t||"textContent"===t)return void(null!=s&&(e[t]="innerHTML"===t?Po(s):s));const i=e.tagName;if("value"===t&&"PROGRESS"!==i&&!i.includes("-")){const n="OPTION"===i?e.getAttribute("value")||"":e.value,o=null==s?"checkbox"===e.type?"on":"":String(s);return n===o&&"_value"in e||(e.value=o),null==s&&e.removeAttribute(t),void(e._value=s)}let r=!1;if(""===s||null==s){const n=typeof e[t];"boolean"===n?s=Q(s):null==s&&"string"===n?(s="",r=!0):"number"===n&&(s=0,r=!0)}try{e[t]=s}catch(pv){}r&&e.removeAttribute(o||t)}function Xo(e,t,s,n){e.addEventListener(t,s,n)}const ei=Symbol("_vei");function ti(e,t,s,n,o=null){const i=e[ei]||(e[ei]={}),r=i[t];if(n&&r)r.value=n;else{const[s,a]=function(e){let t;if(si.test(e)){let s;for(t={};s=e.match(si);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}const s=":"===e[2]?e.slice(3):A(e.slice(2));return[s,t]}(t);if(n){const r=i[t]=function(e,t){const s=e=>{if(e._vts){if(e._vts<=s.attached)return}else e._vts=Date.now();It(function(e,t){if(d(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,s.value),t,5,[e])};return s.value=e,s.attached=ii(),s}(n,o);Xo(e,s,r,a)}else r&&(!function(e,t,s,n){e.removeEventListener(t,s,n)}(e,s,r,a),i[t]=void 0)}}const si=/(?:Once|Passive|Capture)$/;let ni=0;const oi=Promise.resolve(),ii=()=>ni||(oi.then((()=>ni=0)),ni=Date.now());const ri=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const ai=e=>{const t=e.props["onUpdate:modelValue"]||!1;return d(t)?e=>N(t,e):t};function li(e){e.target.composing=!0}function ci(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ui=Symbol("_assign"),di={created(e,{modifiers:{lazy:t,trim:s,number:n}},o){e[ui]=ai(o);const i=n||o.props&&"number"===o.props.type;Xo(e,t?"change":"input",(t=>{if(t.target.composing)return;let n=e.value;s&&(n=n.trim()),i&&(n=q(n)),e[ui](n)})),s&&Xo(e,"change",(()=>{e.value=e.value.trim()})),t||(Xo(e,"compositionstart",li),Xo(e,"compositionend",ci),Xo(e,"change",ci))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:o,number:i}},r){if(e[ui]=ai(r),e.composing)return;const a=null==t?"":t;if((!i&&"number"!==e.type||/^0\d/.test(e.value)?e.value:q(e.value))!==a){if(document.activeElement===e&&"range"!==e.type){if(n&&t===s)return;if(o&&e.value.trim()===a)return}e.value=a}}},hi={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pi=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=s=>{if(!("key"in s))return;const n=A(s.key);return t.some((e=>e===n||hi[e]===n))?e(s):void 0})},fi=a({patchProp:(e,t,s,n,o,a)=>{const l="svg"===o;"class"===t?function(e,t,s){const n=e[Mo];n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}(e,n,l):"style"===t?function(e,t,s){const n=e.style,o=_(s);let i=!1;if(s&&!o){if(t)if(_(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==s[t]&&Wo(n,t,"")}else for(const e in t)null==s[e]&&Wo(n,e,"");for(const e in s)"display"===e&&(i=!0),Wo(n,e,s[e])}else if(o){if(t!==s){const e=n[Qo];e&&(s+=";"+e),n.cssText=s,i=Ho.test(s)}}else t&&e.removeAttribute("style");Do in e&&(e[Do]=i?n.display:"",e[Fo]&&(n.display="none"))}(e,s,n):i(t)?r(t)||ti(e,t,0,n,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,s,n){if(n)return"innerHTML"===t||"textContent"===t||!!(t in e&&ri(t)&&f(s));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(ri(t)&&_(s))return!1;return t in e}(e,t,n,l))?(Jo(e,t,n),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Zo(e,t,n,l,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&_(n)?("true-value"===t?e._trueValue=n:"false-value"===t&&(e._falseValue=n),Zo(e,t,n,l)):Jo(e,C(t),n,0,t)}},jo);let _i;const mi=(...e)=>{const t=(_i||(_i=kn(fi))).createApp(...e),{mount:s}=t;return t.mount=e=>{const n=function(e){if(_(e)){return document.querySelector(e)}return e}(e);if(!n)return;const o=t._component;f(o)||o.render||o.template||(o.template=n.innerHTML),1===n.nodeType&&(n.textContent="");const i=s(n,!1,function(e){if(e instanceof SVGElement)return"svg";if("function"==typeof MathMLElement&&e instanceof MathMLElement)return"mathml"}(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t};const gi=["onAsk","onSearch","onSelectHistoryQuestion","onAskTheBook","isInWishlist","addToWishlist","removeFromWishlist"],yi={onAsk:e=>{},onSearch:e=>{},onSelectHistoryQuestion:e=>{},onAskTheBook:e=>{},isInWishlist:async e=>({}),addToWishlist:async e=>{},removeFromWishlist:async e=>{}},bi=()=>yi;function vi(e,t){return function(){return e.apply(t,arguments)}}const{toString:wi}=Object.prototype,{getPrototypeOf:ki}=Object,{iterator:Ei,toStringTag:Si}=Symbol,xi=(e=>t=>{const s=wi.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ci=e=>(e=e.toLowerCase(),t=>xi(t)===e),Oi=e=>t=>typeof t===e,{isArray:Ai}=Array,Ti=Oi("undefined");function Ii(e){return null!==e&&!Ti(e)&&null!==e.constructor&&!Ti(e.constructor)&&Li(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ri=Ci("ArrayBuffer");const Ni=Oi("string"),Li=Oi("function"),qi=Oi("number"),Pi=e=>null!==e&&"object"==typeof e,Ui=e=>{if("object"!==xi(e))return!1;const t=ki(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Si in e||Ei in e)},$i=Ci("Date"),ji=Ci("File"),Mi=Ci("Blob"),Di=Ci("FileList"),Fi=Ci("URLSearchParams"),[Bi,zi,Qi,Hi]=["ReadableStream","Request","Response","Headers"].map(Ci);function Vi(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),Ai(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{if(Ii(e))return;const o=s?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let r;for(n=0;n<i;n++)r=o[n],t.call(null,e[r],r,e)}}function Wi(e,t){if(Ii(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n,o=s.length;for(;o-- >0;)if(n=s[o],t===n.toLowerCase())return n;return null}const Gi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Ki=e=>!Ti(e)&&e!==Gi;const Yi=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&ki(Uint8Array)),Zi=Ci("HTMLFormElement"),Ji=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Xi=Ci("RegExp"),er=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Vi(s,((s,o)=>{let i;!1!==(i=t(s,o,e))&&(n[o]=i||s)})),Object.defineProperties(e,n)};const tr=Ci("AsyncFunction"),sr=(nr="function"==typeof setImmediate,or=Li(Gi.postMessage),nr?setImmediate:or?(ir=`axios@${Math.random()}`,rr=[],Gi.addEventListener("message",(({source:e,data:t})=>{e===Gi&&t===ir&&rr.length&&rr.shift()()}),!1),e=>{rr.push(e),Gi.postMessage(ir,"*")}):e=>setTimeout(e));var nr,or,ir,rr;const ar="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Gi):"undefined"!=typeof process&&process.nextTick||sr,lr={isArray:Ai,isArrayBuffer:Ri,isBuffer:Ii,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Li(e.append)&&("formdata"===(t=xi(e))||"object"===t&&Li(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Ri(e.buffer),t},isString:Ni,isNumber:qi,isBoolean:e=>!0===e||!1===e,isObject:Pi,isPlainObject:Ui,isEmptyObject:e=>{if(!Pi(e)||Ii(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(pv){return!1}},isReadableStream:Bi,isRequest:zi,isResponse:Qi,isHeaders:Hi,isUndefined:Ti,isDate:$i,isFile:ji,isBlob:Mi,isRegExp:Xi,isFunction:Li,isStream:e=>Pi(e)&&Li(e.pipe),isURLSearchParams:Fi,isTypedArray:Yi,isFileList:Di,forEach:Vi,merge:function e(){const{caseless:t,skipUndefined:s}=Ki(this)&&this||{},n={},o=(o,i)=>{const r=t&&Wi(n,i)||i;Ui(n[r])&&Ui(o)?n[r]=e(n[r],o):Ui(o)?n[r]=e({},o):Ai(o)?n[r]=o.slice():s&&Ti(o)||(n[r]=o)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Vi(arguments[i],o);return n},extend:(e,t,s,{allOwnKeys:n}={})=>(Vi(t,((t,n)=>{s&&Li(t)?e[n]=vi(t,s):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,n)=>{let o,i,r;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)r=o[i],n&&!n(r,e,t)||a[r]||(t[r]=e[r],a[r]=!0);e=!1!==s&&ki(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:xi,kindOfTest:Ci,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return-1!==n&&n===s},toArray:e=>{if(!e)return null;if(Ai(e))return e;let t=e.length;if(!qi(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Ei]).call(e);let n;for(;(n=s.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const n=[];for(;null!==(s=e.exec(t));)n.push(s);return n},isHTMLForm:Zi,hasOwnProperty:Ji,hasOwnProp:Ji,reduceDescriptors:er,freezeMethods:e=>{er(e,((t,s)=>{if(Li(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const n=e[s];Li(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))}))},toObjectSet:(e,t)=>{const s={},n=e=>{e.forEach((e=>{s[e]=!0}))};return Ai(e)?n(e):n(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,s){return t.toUpperCase()+s})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Wi,global:Gi,isContextDefined:Ki,isSpecCompliantForm:function(e){return!!(e&&Li(e.append)&&"FormData"===e[Si]&&e[Ei])},toJSONObject:e=>{const t=new Array(10),s=(e,n)=>{if(Pi(e)){if(t.indexOf(e)>=0)return;if(Ii(e))return e;if(!("toJSON"in e)){t[n]=e;const o=Ai(e)?[]:{};return Vi(e,((e,t)=>{const i=s(e,n+1);!Ti(i)&&(o[t]=i)})),t[n]=void 0,o}}return e};return s(e,0)},isAsyncFn:tr,isThenable:e=>e&&(Pi(e)||Li(e))&&Li(e.then)&&Li(e.catch),setImmediate:sr,asap:ar,isIterable:e=>null!=e&&Li(e[Ei])};function cr(e,t,s,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}lr.inherits(cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lr.toJSONObject(this.config),code:this.code,status:this.status}}});const ur=cr.prototype,dr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{dr[e]={value:e}})),Object.defineProperties(cr,dr),Object.defineProperty(ur,"isAxiosError",{value:!0}),cr.from=(e,t,s,n,o,i)=>{const r=Object.create(ur);lr.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e));const a=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return cr.call(r,a,l,s,n,o),e&&null==r.cause&&Object.defineProperty(r,"cause",{value:e,configurable:!0}),r.name=e&&e.name||"Error",i&&Object.assign(r,i),r};function hr(e){return lr.isPlainObject(e)||lr.isArray(e)}function pr(e){return lr.endsWith(e,"[]")?e.slice(0,-2):e}function fr(e,t,s){return e?e.concat(t).map((function(e,t){return e=pr(e),!s&&t?"["+e+"]":e})).join(s?".":""):t}const _r=lr.toFlatObject(lr,{},null,(function(e){return/^is[A-Z]/.test(e)}));function mr(e,t,s){if(!lr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(s=lr.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!lr.isUndefined(t[e])}))).metaTokens,o=s.visitor||c,i=s.dots,r=s.indexes,a=(s.Blob||"undefined"!=typeof Blob&&Blob)&&lr.isSpecCompliantForm(t);if(!lr.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(lr.isDate(e))return e.toISOString();if(lr.isBoolean(e))return e.toString();if(!a&&lr.isBlob(e))throw new cr("Blob is not supported. Use a Buffer instead.");return lr.isArrayBuffer(e)||lr.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,o){let a=e;if(e&&!o&&"object"==typeof e)if(lr.endsWith(s,"{}"))s=n?s:s.slice(0,-2),e=JSON.stringify(e);else if(lr.isArray(e)&&function(e){return lr.isArray(e)&&!e.some(hr)}(e)||(lr.isFileList(e)||lr.endsWith(s,"[]"))&&(a=lr.toArray(e)))return s=pr(s),a.forEach((function(e,n){!lr.isUndefined(e)&&null!==e&&t.append(!0===r?fr([s],n,i):null===r?s:s+"[]",l(e))})),!1;return!!hr(e)||(t.append(fr(o,s,i),l(e)),!1)}const u=[],d=Object.assign(_r,{defaultVisitor:c,convertValue:l,isVisitable:hr});if(!lr.isObject(e))throw new TypeError("data must be an object");return function e(s,n){if(!lr.isUndefined(s)){if(-1!==u.indexOf(s))throw Error("Circular reference detected in "+n.join("."));u.push(s),lr.forEach(s,(function(s,i){!0===(!(lr.isUndefined(s)||null===s)&&o.call(t,s,lr.isString(i)?i.trim():i,n,d))&&e(s,n?n.concat(i):[i])})),u.pop()}}(e),t}function gr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function yr(e,t){this._pairs=[],e&&mr(e,this,t)}const br=yr.prototype;function vr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wr(e,t,s){if(!t)return e;const n=s&&s.encode||vr;lr.isFunction(s)&&(s={serialize:s});const o=s&&s.serialize;let i;if(i=o?o(t,s):lr.isURLSearchParams(t)?t.toString():new yr(t,s).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}br.append=function(e,t){this._pairs.push([e,t])},br.toString=function(e){const t=e?function(t){return e.call(this,t,gr)}:gr;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class kr{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){lr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const Er={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sr={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:yr,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},xr="undefined"!=typeof window&&"undefined"!=typeof document,Cr="object"==typeof navigator&&navigator||void 0,Or=xr&&(!Cr||["ReactNative","NativeScript","NS"].indexOf(Cr.product)<0),Ar="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Tr=xr&&window.location.href||"http://localhost",Ir={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xr,hasStandardBrowserEnv:Or,hasStandardBrowserWebWorkerEnv:Ar,navigator:Cr,origin:Tr},Symbol.toStringTag,{value:"Module"})),...Sr};function Rr(e){function t(e,s,n,o){let i=e[o++];if("__proto__"===i)return!0;const r=Number.isFinite(+i),a=o>=e.length;if(i=!i&&lr.isArray(n)?n.length:i,a)return lr.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!r;n[i]&&lr.isObject(n[i])||(n[i]=[]);return t(e,s,n[i],o)&&lr.isArray(n[i])&&(n[i]=function(e){const t={},s=Object.keys(e);let n;const o=s.length;let i;for(n=0;n<o;n++)i=s[n],t[i]=e[i];return t}(n[i])),!r}if(lr.isFormData(e)&&lr.isFunction(e.entries)){const s={};return lr.forEachEntry(e,((e,n)=>{t(function(e){return lr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,s,0)})),s}return null}const Nr={transitional:Er,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,o=lr.isObject(e);o&&lr.isHTMLForm(e)&&(e=new FormData(e));if(lr.isFormData(e))return n?JSON.stringify(Rr(e)):e;if(lr.isArrayBuffer(e)||lr.isBuffer(e)||lr.isStream(e)||lr.isFile(e)||lr.isBlob(e)||lr.isReadableStream(e))return e;if(lr.isArrayBufferView(e))return e.buffer;if(lr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return mr(e,new Ir.classes.URLSearchParams,{visitor:function(e,t,s,n){return Ir.isNode&&lr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=lr.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return mr(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,s){if(lr.isString(e))try{return(t||JSON.parse)(e),lr.trim(e)}catch(pv){if("SyntaxError"!==pv.name)throw pv}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Nr.transitional,s=t&&t.forcedJSONParsing,n="json"===this.responseType;if(lr.isResponse(e)||lr.isReadableStream(e))return e;if(e&&lr.isString(e)&&(s&&!this.responseType||n)){const s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(pv){if(s){if("SyntaxError"===pv.name)throw cr.from(pv,cr.ERR_BAD_RESPONSE,this,null,this.response);throw pv}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ir.classes.FormData,Blob:Ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lr.forEach(["delete","get","head","post","put","patch"],(e=>{Nr.headers[e]={}}));const Lr=lr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qr=Symbol("internals");function Pr(e){return e&&String(e).trim().toLowerCase()}function Ur(e){return!1===e||null==e?e:lr.isArray(e)?e.map(Ur):String(e)}function $r(e,t,s,n,o){return lr.isFunction(n)?n.call(this,t,s):(o&&(t=s),lr.isString(t)?lr.isString(n)?-1!==t.indexOf(n):lr.isRegExp(n)?n.test(t):void 0:void 0)}let jr=class{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function o(e,t,s){const o=Pr(t);if(!o)throw new Error("header name must be a non-empty string");const i=lr.findKey(n,o);(!i||void 0===n[i]||!0===s||void 0===s&&!1!==n[i])&&(n[i||t]=Ur(e))}const i=(e,t)=>lr.forEach(e,((e,s)=>o(e,s,t)));if(lr.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(lr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let s,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),s=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!s||t[s]&&Lr[s]||("set-cookie"===s?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)})),t})(e),t);else if(lr.isObject(e)&&lr.isIterable(e)){let s,n,o={};for(const t of e){if(!lr.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[n=t[0]]=(s=o[n])?lr.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}i(o,t)}else null!=e&&o(t,e,s);return this}get(e,t){if(e=Pr(e)){const s=lr.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}(e);if(lr.isFunction(t))return t.call(this,e,s);if(lr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Pr(e)){const s=lr.findKey(this,e);return!(!s||void 0===this[s]||t&&!$r(0,this[s],s,t))}return!1}delete(e,t){const s=this;let n=!1;function o(e){if(e=Pr(e)){const o=lr.findKey(s,e);!o||t&&!$r(0,s[o],o,t)||(delete s[o],n=!0)}}return lr.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const o=t[s];e&&!$r(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,s={};return lr.forEach(this,((n,o)=>{const i=lr.findKey(s,o);if(i)return t[i]=Ur(n),void delete t[o];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,s)=>t.toUpperCase()+s))}(o):String(o).trim();r!==o&&delete t[o],t[r]=Ur(n),s[r]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return lr.forEach(this,((s,n)=>{null!=s&&!1!==s&&(t[n]=e&&lr.isArray(s)?s.join(", "):s)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach((e=>s.set(e))),s}static accessor(e){const t=(this[qr]=this[qr]={accessors:{}}).accessors,s=this.prototype;function n(e){const n=Pr(e);t[n]||(!function(e,t){const s=lr.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+s,{value:function(e,s,o){return this[n].call(this,t,e,s,o)},configurable:!0})}))}(s,e),t[n]=!0)}return lr.isArray(e)?e.forEach(n):n(e),this}};function Mr(e,t){const s=this||Nr,n=t||s,o=jr.from(n.headers);let i=n.data;return lr.forEach(e,(function(e){i=e.call(s,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function Dr(e){return!(!e||!e.__CANCEL__)}function Fr(e,t,s){cr.call(this,null==e?"canceled":e,cr.ERR_CANCELED,t,s),this.name="CanceledError"}function Br(e,t,s){const n=s.config.validateStatus;s.status&&n&&!n(s.status)?t(new cr("Request failed with status code "+s.status,[cr.ERR_BAD_REQUEST,cr.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),lr.reduceDescriptors(jr.prototype,(({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}})),lr.freezeMethods(jr),lr.inherits(Fr,cr,{__CANCEL__:!0});const zr=(e,t,s=3)=>{let n=0;const o=function(e,t){e=e||10;const s=new Array(e),n=new Array(e);let o,i=0,r=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[r];o||(o=l),s[i]=a,n[i]=l;let u=r,d=0;for(;u!==i;)d+=s[u++],u%=e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),l-o<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let s,n,o=0,i=1e3/t;const r=(t,i=Date.now())=>{o=i,s=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?r(e,t):(s=e,n||(n=setTimeout((()=>{n=null,r(s)}),i-a)))},()=>s&&r(s)]}((s=>{const i=s.loaded,r=s.lengthComputable?s.total:void 0,a=i-n,l=o(a);n=i;e({loaded:i,total:r,progress:r?i/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&i<=r?(r-i)/l:void 0,event:s,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),s)},Qr=(e,t)=>{const s=null!=e;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Hr=e=>(...t)=>lr.asap((()=>e(...t))),Vr=Ir.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Ir.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Ir.origin),Ir.navigator&&/(msie|trident)/i.test(Ir.navigator.userAgent)):()=>!0,Wr=Ir.hasStandardBrowserEnv?{write(e,t,s,n,o,i){const r=[e+"="+encodeURIComponent(t)];lr.isNumber(s)&&r.push("expires="+new Date(s).toGMTString()),lr.isString(n)&&r.push("path="+n),lr.isString(o)&&r.push("domain="+o),!0===i&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Gr(e,t,s){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Kr=e=>e instanceof jr?{...e}:e;function Yr(e,t){t=t||{};const s={};function n(e,t,s,n){return lr.isPlainObject(e)&&lr.isPlainObject(t)?lr.merge.call({caseless:n},e,t):lr.isPlainObject(t)?lr.merge({},t):lr.isArray(t)?t.slice():t}function o(e,t,s,o){return lr.isUndefined(t)?lr.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function i(e,t){if(!lr.isUndefined(t))return n(void 0,t)}function r(e,t){return lr.isUndefined(t)?lr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(s,o,i){return i in t?n(s,o):i in e?n(void 0,s):void 0}const l={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(e,t,s)=>o(Kr(e),Kr(t),0,!0)};return lr.forEach(Object.keys({...e,...t}),(function(n){const i=l[n]||o,r=i(e[n],t[n],n);lr.isUndefined(r)&&i!==a||(s[n]=r)})),s}const Zr=e=>{const t=Yr({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:r,auth:a}=t;if(t.headers=r=jr.from(r),t.url=wr(Gr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),lr.isFormData(s))if(Ir.hasStandardBrowserEnv||Ir.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(lr.isFunction(s.getHeaders)){const e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach((([e,s])=>{t.includes(e.toLowerCase())&&r.set(e,s)}))}if(Ir.hasStandardBrowserEnv&&(n&&lr.isFunction(n)&&(n=n(t)),n||!1!==n&&Vr(t.url))){const e=o&&i&&Wr.read(i);e&&r.set(o,e)}return t},Jr="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,s){const n=Zr(e);let o=n.data;const i=jr.from(n.headers).normalize();let r,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(r),n.signal&&n.signal.removeEventListener("abort",r)}let _=new XMLHttpRequest;function m(){if(!_)return;const n=jr.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders());Br((function(e){t(e),f()}),(function(e){s(e),f()}),{data:d&&"text"!==d&&"json"!==d?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:n,config:e,request:_}),_=null}_.open(n.method.toUpperCase(),n.url,!0),_.timeout=n.timeout,"onloadend"in _?_.onloadend=m:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(m)},_.onabort=function(){_&&(s(new cr("Request aborted",cr.ECONNABORTED,e,_)),_=null)},_.onerror=function(t){const n=new cr(t&&t.message?t.message:"Network Error",cr.ERR_NETWORK,e,_);n.event=t||null,s(n),_=null},_.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||Er;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),s(new cr(t,o.clarifyTimeoutError?cr.ETIMEDOUT:cr.ECONNABORTED,e,_)),_=null},void 0===o&&i.setContentType(null),"setRequestHeader"in _&&lr.forEach(i.toJSON(),(function(e,t){_.setRequestHeader(t,e)})),lr.isUndefined(n.withCredentials)||(_.withCredentials=!!n.withCredentials),d&&"json"!==d&&(_.responseType=n.responseType),p&&([l,u]=zr(p,!0),_.addEventListener("progress",l)),h&&_.upload&&([a,c]=zr(h),_.upload.addEventListener("progress",a),_.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(r=t=>{_&&(s(!t||t.type?new Fr(null,e,_):t),_.abort(),_=null)},n.cancelToken&&n.cancelToken.subscribe(r),n.signal&&(n.signal.aborted?r():n.signal.addEventListener("abort",r)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);g&&-1===Ir.protocols.indexOf(g)?s(new cr("Unsupported protocol "+g+":",cr.ERR_BAD_REQUEST,e)):_.send(o||null)}))},Xr=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,n=new AbortController;const o=function(e){if(!s){s=!0,r();const t=e instanceof Error?e:this.reason;n.abort(t instanceof cr?t:new Fr(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new cr(`timeout ${t} of ms exceeded`,cr.ETIMEDOUT))}),t);const r=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=n;return a.unsubscribe=()=>lr.asap(r),a}},ea=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let n,o=0;for(;o<s;)n=o+t,yield e.slice(o,n),o=n},ta=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},sa=(e,t,s,n)=>{const o=async function*(e,t){for await(const s of ta(e))yield*ea(s,t)}(e,t);let i,r=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return a(),void e.close();let i=n.byteLength;if(s){let e=r+=i;s(e)}e.enqueue(new Uint8Array(n))}catch(t){throw a(t),t}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},{isFunction:na}=lr,oa=(({Request:e,Response:t})=>({Request:e,Response:t}))(lr.global),{ReadableStream:ia,TextEncoder:ra}=lr.global,aa=(e,...t)=>{try{return!!e(...t)}catch(pv){return!1}},la=e=>{e=lr.merge.call({skipUndefined:!0},oa,e);const{fetch:t,Request:s,Response:n}=e,o=t?na(t):"function"==typeof fetch,i=na(s),r=na(n);if(!o)return!1;const a=o&&na(ia),l=o&&("function"==typeof ra?(e=>t=>e.encode(t))(new ra):async e=>new Uint8Array(await new s(e).arrayBuffer())),c=i&&a&&aa((()=>{let e=!1;const t=new s(Ir.origin,{body:new ia,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),u=r&&a&&aa((()=>lr.isReadableStream(new n("").body))),d={stream:u&&(e=>e.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!d[e]&&(d[e]=(t,s)=>{let n=t&&t[e];if(n)return n.call(t);throw new cr(`Response type '${e}' is not supported`,cr.ERR_NOT_SUPPORT,s)})}));const h=async(e,t)=>{const n=lr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(lr.isBlob(e))return e.size;if(lr.isSpecCompliantForm(e)){const t=new s(Ir.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return lr.isArrayBufferView(e)||lr.isArrayBuffer(e)?e.byteLength:(lr.isURLSearchParams(e)&&(e+=""),lr.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:o,method:r,data:a,signal:l,cancelToken:p,timeout:f,onDownloadProgress:_,onUploadProgress:m,responseType:g,headers:y,withCredentials:b="same-origin",fetchOptions:v}=Zr(e),w=t||fetch;g=g?(g+"").toLowerCase():"text";let k=Xr([l,p&&p.toAbortSignal()],f),E=null;const S=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let x;try{if(m&&c&&"get"!==r&&"head"!==r&&0!==(x=await h(y,a))){let e,t=new s(o,{method:"POST",body:a,duplex:"half"});if(lr.isFormData(a)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,s]=Qr(x,zr(Hr(m)));a=sa(t.body,65536,e,s)}}lr.isString(b)||(b=b?"include":"omit");const t=i&&"credentials"in s.prototype,l={...v,signal:k,method:r.toUpperCase(),headers:y.normalize().toJSON(),body:a,duplex:"half",credentials:t?b:void 0};E=i&&new s(o,l);let p=await(i?w(E,v):w(o,l));const f=u&&("stream"===g||"response"===g);if(u&&(_||f&&S)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=p[t]}));const t=lr.toFiniteNumber(p.headers.get("content-length")),[s,o]=_&&Qr(t,zr(Hr(_),!0))||[];p=new n(sa(p.body,65536,s,(()=>{o&&o(),S&&S()})),e)}g=g||"text";let C=await d[lr.findKey(d,g)||"text"](p,e);return!f&&S&&S(),await new Promise(((t,s)=>{Br(t,s,{data:C,headers:jr.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:E})}))}catch(C){if(S&&S(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new cr("Network Error",cr.ERR_NETWORK,e,E),{cause:C.cause||C});throw cr.from(C,C&&C.code,e,E)}}},ca=new Map,ua=e=>{let t=e?e.env:{};const{fetch:s,Request:n,Response:o}=t,i=[n,o,s];let r,a,l=i.length,c=ca;for(;l--;)r=i[l],a=c.get(r),void 0===a&&c.set(r,a=l?new Map:la(t)),c=a;return a};ua();const da={http:null,xhr:Jr,fetch:{get:ua}};lr.forEach(da,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(pv){}Object.defineProperty(e,"adapterName",{value:t})}}));const ha=e=>`- ${e}`,pa=e=>lr.isFunction(e)||null===e||!1===e,fa=(e,t)=>{e=lr.isArray(e)?e:[e];const{length:s}=e;let n,o;const i={};for(let r=0;r<s;r++){let s;if(n=e[r],o=n,!pa(n)&&(o=da[(s=String(n)).toLowerCase()],void 0===o))throw new cr(`Unknown adapter '${s}'`);if(o&&(lr.isFunction(o)||(o=o.get(t))))break;i[s||"#"+r]=o}if(!o){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new cr("There is no suitable adapter to dispatch the request "+(s?e.length>1?"since :\n"+e.map(ha).join("\n"):" "+ha(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return o};function _a(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fr(null,e)}function ma(e){_a(e),e.headers=jr.from(e.headers),e.data=Mr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return fa(e.adapter||Nr.adapter,e)(e).then((function(t){return _a(e),t.data=Mr.call(e,e.transformResponse,t),t.headers=jr.from(t.headers),t}),(function(t){return Dr(t)||(_a(e),t&&t.response&&(t.response.data=Mr.call(e,e.transformResponse,t.response),t.response.headers=jr.from(t.response.headers))),Promise.reject(t)}))}const ga="1.12.2",ya={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ya[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}}));const ba={};ya.transitional=function(e,t,s){function n(e,t){return"[Axios v"+ga+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,o,i)=>{if(!1===e)throw new cr(n(o," has been removed"+(t?" in "+t:"")),cr.ERR_DEPRECATED);return t&&!ba[o]&&(ba[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,o,i)}},ya.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};const va={assertOptions:function(e,t,s){if("object"!=typeof e)throw new cr("options must be an object",cr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],r=t[i];if(r){const t=e[i],s=void 0===t||r(t,i,e);if(!0!==s)throw new cr("option "+i+" must be "+s,cr.ERR_BAD_OPTION_VALUE)}else if(!0!==s)throw new cr("Unknown option "+i,cr.ERR_BAD_OPTION)}},validators:ya},wa=va.validators;let ka=class{constructor(e){this.defaults=e||{},this.interceptors={request:new kr,response:new kr}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(pv){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Yr(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:o}=t;void 0!==s&&va.assertOptions(s,{silentJSONParsing:wa.transitional(wa.boolean),forcedJSONParsing:wa.transitional(wa.boolean),clarifyTimeoutError:wa.transitional(wa.boolean)},!1),null!=n&&(lr.isFunction(n)?t.paramsSerializer={serialize:n}:va.assertOptions(n,{encode:wa.function,serialize:wa.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),va.assertOptions(t,{baseUrl:wa.spelling("baseURL"),withXsrfToken:wa.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&lr.merge(o.common,o[t.method]);o&&lr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=jr.concat(i,o);const r=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[ma.bind(this),void 0];for(e.unshift(...r),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=r.length;let h=t;for(;d<u;){const e=r[d++],t=r[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=ma.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return wr(Gr((e=Yr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};lr.forEach(["delete","get","head","options"],(function(e){ka.prototype[e]=function(t,s){return this.request(Yr(s||{},{method:e,url:t,data:(s||{}).data}))}})),lr.forEach(["post","put","patch"],(function(e){function t(t){return function(s,n,o){return this.request(Yr(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}ka.prototype[e]=t(),ka.prototype[e+"Form"]=t(!0)}));const Ea={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ea).forEach((([e,t])=>{Ea[t]=e}));const Sa=function e(t){const s=new ka(t),n=vi(ka.prototype.request,s);return lr.extend(n,ka.prototype,s,{allOwnKeys:!0}),lr.extend(n,s,null,{allOwnKeys:!0}),n.create=function(s){return e(Yr(t,s))},n}(Nr);Sa.Axios=ka,Sa.CanceledError=Fr,Sa.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const s=this;this.promise.then((e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{s.subscribe(e),t=e})).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e((function(e,n,o){s.reason||(s.reason=new Fr(e,n,o),t(s.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},Sa.isCancel=Dr,Sa.VERSION=ga,Sa.toFormData=mr,Sa.AxiosError=cr,Sa.Cancel=Sa.CanceledError,Sa.all=function(e){return Promise.all(e)},Sa.spread=function(e){return function(t){return e.apply(null,t)}},Sa.isAxiosError=function(e){return lr.isObject(e)&&!0===e.isAxiosError},Sa.mergeConfig=Yr,Sa.AxiosHeaders=jr,Sa.formToJSON=e=>Rr(lr.isHTMLForm(e)?new FormData(e):e),Sa.getAdapter=fa,Sa.HttpStatusCode=Ea,Sa.default=Sa;const{Axios:xa,AxiosError:Ca,CanceledError:Oa,isCancel:Aa,CancelToken:Ta,VERSION:Ia,all:Ra,Cancel:Na,isAxiosError:La,spread:qa,toFormData:Pa,AxiosHeaders:Ua,HttpStatusCode:$a,formToJSON:ja,getAdapter:Ma,mergeConfig:Da}=Sa,Fa="B43jkUKwmy9iEz17kO5V21KoPTmORcuBTRfltOVO",Ba=["Can I change my choice of startup entity?","Why is the selection of the form of entity important?","Can you describe fraud and abuse?","What's the difference between SIR and Deductibles?","Does LLP and LLP provides limited liability and pass through tax treatment?","First real example of cyberspace law?","What are the two general approaches to the award of money damanges in western legal tradition?",'Can you give me information about the proceeding called, "attaint"?',"What are the three general principles or doctrines of damages to determine that injury can be compensated?","What is sole proprietorships?","Is it easy to change an entity from corporate firm to sole proprietorship?","Can you give the the meaning of stand alone excess policies?"],za="1.12.5";function Qa(...e){const t=e.length;if(0===t)return(new AbortController).signal;if(1===t)return e[0];const s=new AbortController;for(const n of e)if(n&&n.addEventListener){if(n.aborted)return AbortSignal.abort(n.reason);n.addEventListener("abort",(()=>s.abort(n.reason)))}return s.signal}const Ha=Object.freeze({ASK:"ask",SEARCH:"search",RECOMMENDATION:"recommendation",INTERACTIONS:"interactions"}),Va=Object.freeze({QUESTIONS:"questions",RELATED_QUESTIONS:"related_questions",TRENDING_QUESTIONS:"trending_questions",SEARCH:"search",AUTOCOMPLETE:"autocomplete",SEARCH_AUTOCOMPLETE:"search_autocomplete",MGET:"mget",USER_TO_PRODUCTS:"user_to_products",USER_TO_CATEGORIES:"user_to_categories",USER_TO_ATTRIBUTES:"user_to_attributes",USER_TO_TRENDING:"user_to_trending",USER_TO_HISTORY:"user_to_history",PRODUCT_TO_PRODUCTS:"product_to_products",UPLOAD:"upload"}),Wa=Object.freeze(Object.defineProperty({__proto__:null,GROUP:Ha,NAME:Va},Symbol.toStringTag,{value:"Module"}));function Ga(e,t){if(!e)return;const s=e.indexOf(t);s>-1&&e.splice(s,1)}function Ka(e){return Array.isArray(e)?e:void 0===e?[]:[e]}function Ya(e){if("object"!=typeof e)return e;const t={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&void 0!==e[s]&&(t[s]=e[s]);return t}function Za(e){return null==e}function Ja(e,t,s){s="string"==typeof s?[s]:s,Object.defineProperties(e,s.reduce(((e,s)=>(e[s]={get:()=>{const e=t[s];return"function"==typeof e?e.bind(t):e}},e)),{}))}function Xa(e,t){for(const s in t)t.hasOwnProperty(s)&&Object.defineProperty(e,s,{value:t[s]})}function el(e){return e.replace(/-([a-z])/g,(e=>e[1].toUpperCase()))}function tl(e){return e.replace(/[-_][a-z]/g,(e=>e[1].toUpperCase()))}function sl(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}class nl{constructor(e,{duration:t=0,onDuration:s,offDuration:n,state:o}={}){if("function"!=typeof e)throw new Error(`Callback must be a function: ${e}`);this._callback=e,Object.defineProperty(this,"durations",{value:Object.freeze({on:void 0!==s?s:t,off:void 0!==n?n:t})}),this._value=this._state=!!o,this._active=!0}get active(){return this._active}get state(){return this._state}get value(){return this._value}set value(e){if(e=!!e,this._value===e)return;!function(e){if(!e._timeout)return;clearTimeout(e._timeout),e._timeout=void 0}(this);const t=this.durations[e?"on":"off"];t?this._timeout=setTimeout((()=>ol(this,e)),t):ol(this,e),this._value=e}disconnect(){this._active=!1}}function ol(e,t){e._state!==t&&(e._state=t,e._active&&e._callback(t))}function il(e,t,{root:s=e.ownerDocument}={}){for(;e&&e!==s;e=e.parentElement){const s=t(e);if(void 0!==s)return s}}function rl(e){const{tagName:t}=e;customElements.define(t,e);for(const s of document.querySelectorAll(t))customElements.upgrade(s)}async function al(e){return new Promise(((t,s)=>{window.requestAnimationFrame((async n=>{try{await e(n),t()}catch(o){s(o)}}))}))}async function ll(e,{area:t=.5,duration:s=1e3,signal:n}={}){var o;return e="string"==typeof(o=e)?document.querySelector(o):o,new Promise(((o,i)=>{const r=new nl((e=>{e&&(r.disconnect(),a.disconnect(),o())}),{onDuration:s}),a=new IntersectionObserver((e=>{r.value=e[0].isIntersecting}),{threshold:t});a.observe(e),n&&n.addEventListener&&n.addEventListener("abort",(()=>{r.disconnect(),a.disconnect(),i(new DOMException("Aborted","AbortError"))}))}))}function cl(e){return(e=`${e}`)&&e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function ul(){return(crypto&&crypto.randomUUID?crypto.randomUUID():void 0)||function(){if(!URL||!URL.createObjectURL||URL.revokeObjectURL||!Blob)return;const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substring(t.lastIndexOf("/")+1)}()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function dl(e,t){const s=hl((()=>window.localStorage.getItem(e))),n=hl((()=>function(e){const t=`; ${document.cookie}`,s=`; ${encodeURIComponent(e)}=`,n=t.indexOf(s);if(n<0)return;const o=n+s.length,i=t.indexOf(";",o);return decodeURIComponent(i<0?t.substring(o):t.substring(o,i))}(e))),o=s||n||`${t()}`;return o&&!s&&hl((()=>window.localStorage.setItem(e,o))),o&&!n&&hl((()=>function(e,t){document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(t)}; max-age=31536000; path=/`}(e,o))),o}function hl(e){try{return e()}catch(pv){if(!function(e){return"SecurityError"===e.name}(pv))throw pv}}function pl(e){return new fl(e)}class fl{constructor(e){this._value=e;const t=e=>{this._value=e};Xa(this,{set:t,args:(...e)=>t(e),t:()=>t(!0),f:()=>t(!1),merge:e=>t({...this._value,...e})})}get value(){return this._value}}class _l{constructor(){const e=this;e.promise=new Promise(((t,s)=>{e.resolve=t,e.reject=s})),Object.freeze(this)}}class ml{constructor(){this._index=-1,this._done=!1,this._aborted=!1,this._abortReason=void 0,this._error=void 0}get aborted(){return this._aborted}get abortReason(){return this._abortReason}get done(){return this._done}update(e,t=!1){this._done||(this._value=e,this._done=t,this._index++,this._resolution&&(this._resolution.resolve(),this._resolution=void 0))}error(e){this._error=e,this._resolution&&(this._resolution.reject(e),this._resolution=void 0)}abort(e){this._aborted=!0,this._abortReason=e,this._resolution&&(e instanceof Error?this._resolution.reject(e):this._resolution.resolve(),this._resolution=void 0)}async*[Symbol.asyncIterator](){let e=0;for(;;){if(this._error)throw this._error;if(this._aborted)break;if(e>this._index&&(this._resolution||(this._resolution=new _l),await this._resolution.promise),this._aborted)break;const t=this._done,s=this._index+1;if(yield this._value,this._aborted||t)break;e=s}}}function gl(e,t){const s=window[e]||(window[e]=[]);if(s._processed)return;s._processed=!0;const n=e=>function(e,{onError:t=e=>console.error(e),transform:s=e=>e}={}){try{s(e)()}catch(pv){t(pv)}}(e,t);Object.defineProperty(s,"push",{value:n});for(const o of s)n(o)}let yl;try{yl=document.currentScript}catch(pv){}async function bl(e){try{let t=function(e){return document.head.querySelector(`link[href="${e}"]`)}(e);return t||(t=document.createElement("link"),t.rel="stylesheet",t.href=e,document.head.appendChild(t)),async function(e){await async function(e){if(e.sheet)return;return new Promise(((t,s)=>{let n;e.onerror=()=>{n&&clearInterval(n),s()},n=setInterval((()=>{e.sheet&&(n&&clearInterval(n),t())}),100)}))}(e),await async function(e){if(wl(e))return;return new Promise((t=>{let s;s=setInterval((()=>{wl(e)&&(s&&clearInterval(s),t())}),100)}))}(e)}(t)}catch(pv){console.error(pv)}}function vl(e){return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@1.12.5/dist/css/${e}.css`}function wl(e){for(const t of document.styleSheets)if(t.ownerNode===e)return!0;return!1}function kl(e){let t;return s=>{t&&clearTimeout(t),t=setTimeout((()=>{t=void 0,s()}),e)}}function El(e,{depth:t=5,...s}={}){return Sl(e,t)}function Sl(e,t,s){return t<=0?"(...)":"object"==typeof e&&e?void 0!==e.length?Array.prototype.map.call(e,(e=>Sl(e,t-1))):e instanceof Node?function(e){if(e instanceof Element)return`<${e.tagName.toLowerCase()}${e.id?` id="${e.id}"`:""}${e.className?` class="${e.className}"`:""}>`;return`[TextNode](${e.length})`}(e):function(e,t){const s={};if(t<=0)return s;for(const n in e){const o=e[n];"function"!=typeof o&&(n.startsWith("_")&&"object"==typeof o&&"Object"!==o.constructor.name||(s[n]=Sl(o,t-1)))}return s}(e,t):e}function xl(e,t){const s=Object.getOwnPropertyDescriptors(t),n=Object.getOwnPropertyDescriptors(e);for(const[o,i]of Object.entries(s))"constructor"!==o&&void 0===n[o]&&Object.defineProperty(e,o,i)}function Cl(e){const t={},s=new Set;for(let n=e;n!==Object.prototype;n=Object.getPrototypeOf(n)){const o=Object.getOwnPropertyDescriptors(n);for(const n in o){if("constructor"===n||n.startsWith("_")||s.has(n))continue;s.add(n);const{value:i}=o[n];i&&(t[n]="function"==typeof i?i.bind(e):i)}}return Object.freeze(t)}function Ol(e={},t={}){const s=e.metadata||t.metadata?Ya({...e.metadata,...t.metadata}):void 0,n=e._meta||t._meta?Ya({...e._meta,...t._meta}):void 0;return Ya({...e,...t,metadata:s,_meta:n})}function Al(e={},t={}){const s=e.context&&e.context.custom_context||t.context&&t.context.custom_context?Ya({...e.context&&e.context.custom_context,...t.context&&t.context.custom_context}):void 0,n=e.context||t.context?Ya({...e.context,...t.context,custom_context:s}):void 0;return Ya({...e,...t,context:n})}function Tl(e){const t=function({speed:e=100,acceleration:t=4}={}){if("function"==typeof e)return e;if("number"!=typeof e)throw new Error(`Invalid speed: ${e}`);if("number"!=typeof t)throw new Error(`Invalid acceleration: ${t}`);return(s,n)=>{let o=e*(Math.random()+.5);return t>0&&void 0!==n&&s>n&&(o*=1+(s-n)*t/1e3),o}}(e);return(e,s,n,o)=>{const i=t(n,s);return e+Math.max(o-n,0)*i/1e3}}const Il=Symbol.for("miso:resources");class Rl{constructor(){this._resources=new Map;const e=window[Il]||[];for(const s of e)try{const[e,t]=s;this.push([e,t])}catch(t){}}push([e,t]){Nl(this._resources,e).resolve(t)}async get(e){return Nl(this._resources,e).promise}}function Nl(e,t){if(e.has(t))return e.get(t);const s=new _l;return e.set(t,s),s}function Ll(){return window[Il]||(window[Il]=new Rl)}class ql{constructor(e,t){this._dispatchRequested=!1,this._requests=[],this._run=e,this._error=t||(e=>console.error(e)),this._bulkId=0,this._dispatch=this._dispatch.bind(this)}get info(){return{bulkId:this._bulkId,index:this._requests.length}}async run(e){const t=new _l;return this._requests.push({action:e,resolution:t}),this._requestDispatch(),t.promise}_requestDispatch(){this._dispatchRequested||(this._dispatchRequested=!0,setTimeout(this._dispatch))}_dispatch(){if(!this._dispatchRequested)return;this._dispatchRequested=!1;const e=this._requests,t=this._bulkId++;this._requests=[];try{this._run(e,{bulkId:t})}catch(pv){this._error(pv)}}}class Pl{constructor({target:e,error:t,replays:s=[]}={}){if(this._error=t||(e=>console.error(e)),!Array.isArray(s))throw new Error(`Replays option must be an array of strings: ${s}`);this._replays=new Set(s),this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={},e&&this._injectSubscribeInterface(e)}emit(e,t){const s={data:t,meta:{name:e,ts:Date.now()}},n=this._namedCallbacks[e];if(n)for(const o of n)o(s);for(const o of this._unnamedCallbacks)o(s);this._shallStoreForReplay(e)&&(this._pastEvents[e]||(this._pastEvents[e]=[])).push(s)}on(e,t){return this._checkName(e),this._checkCallback(t),this._on(e,this._wrapCallback(t))}once(e){this._checkName(e);const t=this;return new Promise(((s,n)=>{const o=t._on(e,(e=>{setTimeout((()=>o()));try{s(e)}catch(pv){n(pv)}}))}))}clear(){this._namedCallbacks={},this._unnamedCallbacks=[],this._pastEvents={}}_checkName(e){if("string"!=typeof e)throw new Error(`Event name should be a string: ${e}`)}_checkCallback(e){if("function"!=typeof e)throw new Error(`Event callback should be a function: ${e}`)}_shallStoreForReplay(e){return this._replays.has(e)}_wrapCallback(e){const t=this;return({data:s,meta:n})=>{try{e(s,n)}catch(pv){t._error(pv)}}}_on(e,t){if("*"===e?this._unnamedCallbacks.push(t):(this._namedCallbacks[e]||(this._namedCallbacks[e]=[])).push(t),"*"===e)for(const s in this._pastEvents)this._pastEvents[s].forEach(t);else this._pastEvents[e]&&this._pastEvents[e].forEach(t);return()=>this._off(e,t)}_off(e,t){if("*"===e)Ga(this._unnamedCallbacks,t);else{const s=this._namedCallbacks[e];s&&Ga(s,t)}}_injectSubscribeInterface(e){Ja(e,this,["on","once"])}}function Ul(e,t){return Object.freeze([...t&&t.meta&&t.meta.path||[],...e?[e]:[]])}class $l{constructor(e,t){const s=function(e,t){if(void 0!==e&&"string"!=typeof e&&void 0===t&&(t=e,e=void 0),void 0!==e&&("string"!=typeof e||!e))throw new Error(`Invalid Component name: "${e}"`);return Object.freeze({name:e,parent:t,path:Ul(e,t),uuid:ul()})}(e,t);Xa(this,{meta:s});const n=this._error=this._error.bind(this);this._events=new Pl({target:this,error:n,replays:["child"]}),this._warn=this._warn.bind(this),(t=s.parent)&&t._events&&t._events.emit("child",this)}_warn(...e){const t=this.meta.parent;(t&&t._warn||console.warn)(...e)}_error(...e){const t=this.meta.parent;(t&&t._error||console.error)(...e)}}!function(e,t){const s=Symbol.for(t);Object.defineProperty(e,s,{value:!0}),Object.defineProperty(e,"isTypeOf",{value:t=>t&&t instanceof e||"function"==typeof t.constructor&&!0===t.constructor[s]})}($l,"miso:component");class jl extends $l{constructor(e,t,{libName:s,keyName:n}={}){switch(super(e,t),this._events._replays.add("register"),this._libraries={},this._libResolutions={},this._libName=s,typeof n){case"string":this._keyFn=e=>e[n];break;case"function":this._keyFn=n;break;default:throw new Error(`Expect keyName to be a string or a function: ${n}`)}}isRegistered(e){return this._checkKey(e),!!this._libraries[e]}get registered(){return Object.values(this._libraries)}async whenRegistered(e){if(this.isRegistered(e))return this._libraries[e];const{promise:t}=this._libResolutions[e]||(this._libResolutions[e]=new _l);return t}register(...e){for(const t of e)this._register(t)}_checkKey(e){if("string"!=typeof e||!e)throw new Error(`Expect key to be a non-empty string: ${e}`)}_checkLib(e){if("function"!=typeof e)throw new Error(`Expect lib to be a class or function: ${e}`)}_register(e){this._checkLib(e);const t=this._keyFn(e);this._checkKey(t);const s=this._libraries||(this._libraries={});s[t],s[t]=e,this._libResolutions[t]&&this._libResolutions[t].resolve(e),this._events.emit("register",e)}}class Ml{constructor(e,t){this._callback=e,this._options=t||{},!1!==t&&(this._intersection=new IntersectionObserver(this._handleIntersection.bind(this),{threshold:t.area||.5}),this._continuity=new nl(this._handleContinuity.bind(this),{onDuration:t.duration||1e3})),this._displayed=void 0,this._intersecting=!1,this._triggered=new Set}observe(e){!1!==this._options&&this._intersection.observe(e)}unobserve(e){!1!==this._options&&this._intersection.unobserve(e)}display(e){!1!==this._options&&(this._triggered.has(e)&&(e=void 0),this._displayed!==e&&(this._displayed=e,this._continuity.value=!1,this._syncContinuity()))}disconnect(){!1!==this._options&&(this._continuity.disconnect(),this._intersection.disconnect())}get triggeredCount(){return this._triggered.size}get triggered(){return new Set(this._triggered)}_syncContinuity(){this._continuity.value=this._intersecting&&void 0!==this._displayed}_handleIntersection(e){this._intersecting=e[0].isIntersecting,this._syncContinuity()}_handleContinuity(e){const t=this._displayed;if(e&&void 0!==t){if(this._triggered.has(t))return;this._triggered.add(t),this._displayed=void 0,this._callback(t)}}}class Dl{constructor(e){this._ac=new AbortController,this._timeout=e,this.touch()}clear(){void 0!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}touch(){this.clear(),this._timeoutId=setTimeout((()=>this.abort()),this._timeout)}get signal(){return this._ac.signal}abort(e){this.clear(),this._ac.abort(e||new Error(`Stall timeout: data stay unchanged for ${this._timeout/1e3} seconds.`))}}const Fl=Object.freeze({DATA_ENDPOINT:"https://api-edge.askmiso.com/v1",EVENT_ENDPOINT:"https://api.askmiso.com/v1"});class Bl{constructor(e,t){this._client=e,this._root=t,this._bulk=new ql(this._runBulkFetch.bind(this),e._error.bind(e))}async fetch(e,t,{method:s="POST",headers:n,timeout:o}={}){const{apiKey:i,request:r={}}=this._client.options;o=o||r.timeout;const a="GET"!==s&&null!=t?JSON.stringify(t):void 0,l=o?AbortSignal.timeout(o):void 0,c=await(this._root._customFetch||window.fetch)(e,Ya({method:s,headers:n,body:a,cache:"no-cache",mode:"cors",signal:l})),u=await c.json();if(c.status>=400||u.errors){var d=new Error(u.message);throw d.data=u,d.status=c.status,d}return u}get bulkInfo(){return this._bulk.info}async fetchForBulk(e,t,s,{method:n}={}){if(n&&"POST"!==n)throw new Error(`Non-POST API is not supported in bulk mode: ${url}`);return this._bulk.run({apiGroup:e,apiName:t,payload:s})}async _runBulkFetch(e){const t=this.url(["bulk"]),s={requests:e.map((({action:{apiGroup:e,apiName:t,payload:s}})=>({api_name:`${e}/${t}`,body:s})))},{data:n}=await this.fetch(t,s);for(let o=0,i=e.length;o<i;o++){const{resolution:t}=e[o],{error:s,status_code:i,body:r}=n[o];i>=400||s?t.reject({status_code:i,body:r}):t.resolve(r)}}sendBeacon(e,t,{method:s}={}){if(s&&"POST"!==s)throw new Error(`Non-POST API is not supported in useBeacon mode: ${e}`);if(!(this._root._customSendBeacon?this._root._customSendBeacon(e,JSON.stringify(t)):window.navigator.sendBeacon(e,JSON.stringify(t))))throw new Error(`Send beacon unsuccessful: ${e}`)}url(e){const{apiKey:t}=this._client.options,s=e.filter((e=>e)).join("/");return`${`${this.getApiEndpoint(s)}/${s}`}?api_key=${window.encodeURIComponent(t)}`}getApiEndpoint(e){const{dataEndpoint:t=Fl.DATA_ENDPOINT,eventEndpoint:s=Fl.EVENT_ENDPOINT}=this._client.options;return"interactions"===e?s:t}applyUrlPasses(e,{apiGroup:t,apiName:s,url:n}){const o=this._client;for(const i of this._root._urlPasses)try{n=i({client:o,apiGroup:t,apiName:s,url:n})||n}catch(pv){(e._error||console.error)(pv)}return n}applyPayloadPasses(e,{apiGroup:t,apiName:s,payload:n}){const o=this._client;for(const i of this._root._payloadPasses)try{n=i({client:o,apiGroup:t,apiName:s,payload:n})||n}catch(pv){(e._error||console.error)(pv)}return n}applyHeaderPasses(e,{apiGroup:t,apiName:s,payload:n,headers:o,options:i}){const r=this._client;for(const a of this._root._headersPasses)try{o=a({client:r,apiGroup:t,apiName:s,payload:n,headers:o,options:i})||o}catch(pv){(e._error||console.error)(pv)}return o}}class zl extends $l{constructor(e,t){super(t,e),this._apiPath=t,this.helpers=e.helpers,this.clientOptions=e._client.options,this.context=e._client.context}async _run(e,t,s={}){const{bulk:n}=s,o=n?{bulk:this.helpers.bulkInfo}:void 0,i=this._apiPath,r=this._url({apiGroup:i,apiName:e,payload:t,options:s}),a=this._headers({apiGroup:i,apiName:e,payload:t,options:s}),l={apiGroup:i,apiName:e,payload:t=this._preprocess({apiGroup:i,apiName:e,payload:t,options:s}),url:r,headers:a,options:s};this._events.emit("request",{...l,...o});const c=await this._send(l),u={...l,response:c};return this._events.emit("response",{...u,...o}),this._postprocess(u)}_headers({apiGroup:e,apiName:t,payload:s,options:n}){return this.helpers.applyHeaderPasses(this,{apiGroup:e,apiName:t,payload:s,headers:{},options:n})}_preprocess({apiGroup:e,apiName:t,payload:s,options:n}){return this.helpers.applyPayloadPasses(this,{apiGroup:e,apiName:t,payload:s,options:n})}_url({apiGroup:e,apiName:t,options:s}){const n=this.helpers.url([e,t],s);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:t,url:n,options:s})}async _send({apiGroup:e,apiName:t,url:s,headers:n,payload:o,options:{bulk:i,...r}={}}){return i?this.helpers.fetchForBulk(e,t,o):this.helpers.fetch(s,o,{...r,headers:n})}_postprocess({response:e}){return e.data}}const{GROUP:Ql,NAME:Hl}=Wa;class Vl extends zl{constructor(e){super(e,Ql.INTERACTIONS)}async upload(e,t){try{return await this._run(Hl.UPLOAD,e,t)}catch(pv){if(!(400===pv.status&&pv.message&&pv.message.toLowerCase().indexOf("playground")>-1))throw pv;this._warn("Ignore interactions uploaded to playground app.")}}_url({apiGroup:e,apiName:t,options:s}){const n=this.helpers.url([this._apiPath],s);return this.helpers.applyUrlPasses(this,{apiGroup:e,apiName:t,url:n,options:s})}_preprocess({apiGroup:e,apiName:t,payload:s}){return t===Hl.UPLOAD&&(s=this._normalizeUploadPayload(s)),super._preprocess({apiGroup:e,apiName:t,payload:s})}_normalizeUploadPayload(e){if("object"!=typeof e)throw new Error(`Interactions payload has to be either an object or an array of objects: ${e}`);return Array.isArray(e)||(e=[e]),{data:e}}async _send({options:{useBeacon:e=!0,...t}={},...s}){if(e){const{url:e,payload:n}=s;return this.helpers.sendBeacon(e,n,t),{}}return super._send({...s,options:t})}}class Wl{constructor(e={}){this._ac=new AbortController,this._options=e}async get(e){return this._get({...this._options,...e})}_get(e){throw new Error("Not implemented")}abort(e){this._ac.abort(e)}[Symbol.asyncIterator](){let{pollingInterval:e,signal:t,stallTimeout:s=12e4,...n}=this._options;const o=new Dl(s);let i;t=Qa(this._ac.signal,o.signal,t);return function(e,{interval:t=1e3,errorLimit:s=10,onError:n,onResponse:o,signal:i}={}){if(i&&i.aborted)return[];let r,a,l=0,c=!1;function u(){r&&clearInterval(r),c=!0}const d=new ml;return r=setInterval((async()=>{let t,r,h;try{if([t,r,h]=await e(i?{signal:i}:{}),c||!Za(a)&&h<=a)return;Za(h)||(a=h),o&&o(t,r,h),l=0}catch(p){return n&&n(p),l++,void(l>s&&(u(),d.error(p)))}d.update(t,r),r&&u()}),t),i&&i.addEventListener&&i.addEventListener("abort",(()=>{u(),d.abort(i.reason)})),d}((async({signal:e}={})=>{const t=await this.get();return[t,this._isFinished(t),this._revisionOf(t)]}),{interval:e,signal:t,onResponse:(e,t)=>{t?o.clear():this._isUpdated(i,e)&&o.touch(),i=e},...n})[Symbol.asyncIterator]()}_isFinished(e){return!(!e||!e.finished)}_isUpdated(e,t){return!e||e.answer_stage!==t.answer_stage||Kl(e.answer)!==Kl(t.answer)||Kl(e.reasoning)!==Kl(t.reasoning)}_revisionOf(e){return e&&e.revision}}class Gl extends Wl{constructor(e,t,s,n){super(n),this._api=e,this._method=t,this._id=s}async _get(e){return this._api[this._method](this._id,e)}}function Kl(e=""){return e.length}const{GROUP:Yl,NAME:Zl}=Wa;let Jl=class extends zl{constructor(e){super(e,Yl.ASK)}async questions(e,t={}){if(tc(e)&&(e={question_id:e}),e.question_id)return new Xl(this,e,t);const s=await this._run(Zl.QUESTIONS,e,t);return new Xl(this,s,t)}async _questions(e,t){return this._run(Zl.QUESTIONS,e,t)}async _questionGet(e,t){return this._run(`${Zl.QUESTIONS}/${e}/answer`,void 0,{...t,method:"GET"})}async relatedQuestions(e,t={}){return this._run(Zl.RELATED_QUESTIONS,e,t)}async trendingQuestions(e,t={}){return this._run(Zl.TRENDING_QUESTIONS,e,t)}async search(e,t={}){if(tc(e)&&(e={question_id:e}),e.question_id)return new ec(this,e,t);const s=await this._run(Zl.SEARCH,e,t);return s.question_id?new ec(this,s,t):s}async _searchGet(e,t){return this._run(`${Zl.QUESTIONS}/${e}/answer`,void 0,{...t,method:"GET"})}async autocomplete(e,t){return this._run(Zl.AUTOCOMPLETE,e,t)}async searchAutocomplete(e,t){return this._run(Zl.SEARCH_AUTOCOMPLETE,e,t)}};class Xl extends Gl{constructor(e,t,s={}){super(e,"_questionGet",t.question_id,s),this._response=t}get questionId(){return this._id}}class ec extends Gl{constructor(e,t,s={}){super(e,"_searchGet",t.question_id,s),Xa(this,t),this._response=t}get questionId(){return this._id}}function tc(e){return"string"==typeof e&&"{"!==e.charAt(0)}const{GROUP:sc,NAME:nc}=Wa;let oc=class extends zl{constructor(e){super(e,sc.SEARCH)}async search(e,t){return this._run(nc.SEARCH,e,t)}async autocomplete(e,t){return this._run(nc.AUTOCOMPLETE,e,t)}async multipleGet(e,t){return this._run(nc.MGET,e,t)}};const{GROUP:ic,NAME:rc}=Wa;let ac=class extends zl{constructor(e){super(e,ic.RECOMMENDATION)}async userToProducts(e,t){return this._run(rc.USER_TO_PRODUCTS,e,t)}async userToCategories(e,t){return this._run(rc.USER_TO_CATEGORIES,e,t)}async userToAttributes(e,t){return this._run(rc.USER_TO_ATTRIBUTES,e,t)}async userToTrending(e,t){return this._run(rc.USER_TO_TRENDING,e,t)}async userToHistory(e,t){return this._run(rc.USER_TO_HISTORY,e,t)}async productToProducts(e,t){return this._run(rc.PRODUCT_TO_PRODUCTS,e,t)}};class lc extends $l{constructor(e,t){super("api",e),this._client=e,this.helpers=new Bl(e,t),this.interactions=new Vl(this),this.ask=new Jl(this),this.search=new oc(this),this.recommendation=new ac(this)}}const cc=Object.freeze(Object.defineProperty({__proto__:null,Api:lc,ApiBase:zl,ApiHelpers:Bl,Ask:Jl,Interactions:Vl,Recommendation:ac,Search:oc},Symbol.toStringTag,{value:"Module"}));let uc=class extends $l{constructor(e){super("context",e),this._client=e}};const dc={api:cc,context:{Context:uc}};class hc{constructor(e){Xa(this,{install:e})}}class pc extends jl{constructor(e){super("plugins",e,{libName:"plugin class",keyName:"id"}),this._root=e,this._currentScript=document.currentScript,this._events._replays.add("install").add("subtree"),this._installed={},this._installedResolutions={},this._useRequests={},this._subtrees=[],this.context=new fc(this,dc),this.plugins=new _c(this)}isInstalled(e){return this._checkKey(e),!!this._installed[e]}get installed(){return Object.values(this._installed)}get(e){return this._installed[e]}getPluginClass(e){return this._libraries[e]}use(e,t){if("function"==typeof e&&e.id&&"string"==typeof e.id)return this.register(e),void this.use(e.id,t);let s;if("string"==typeof e&&this.isInstalled(e))return s=this.get(e),void this._tryConfig(s,t);"string"!=typeof e||this.isRegistered(e)?(s=this._instantiate(e,t),this._install(s)):(this._useRequests[e]||(this._useRequests[e]=[])).push(t)}async install(e,t){return this.use(e,t),"string"!=typeof e||this.isRegistered(e)||await this._tryRegisterRemotely(e),this.whenInstalled(e)}async whenInstalled(e){if("function"==typeof e&&e.id&&"string"==typeof e.id&&(e=e.id),this.isInstalled(e))return this.get(e);const{promise:t}=this._installedResolutions[e]||(this._installedResolutions[e]=new _l);return t}addSubtree(e){this._subtrees.push(e),this._events.emit("subtree",e)}addPayloadPass(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._payloadPasses.push(e)}addHeadersPass(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._headersPasses.push(e)}addUrlPass(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._urlPasses.push(e)}setCustomFetch(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._customFetch=e}setCustomSendBeacon(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._customSendBeacon=e}onHubUpdate(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubUpdateCallbacks.push(e)}onHubEmit(e){if("function"!=typeof e)throw new Error(`Expect parameter to be a function: ${e}`);this._root._hubEmitCallbacks.push(e)}_tryConfig(e,t){void 0!==t&&("function"==typeof e.config?(e.config(t),this._events.emit("config",[e,t])):this._warn(`Attempt to pass options to plugin "${e.id}", which offers no config() method.`))}_instantiate(e,t){switch(typeof e){case"string":this._checkKey(e);const s=this._libraries[e];if(!s)throw new Error(`Plugin class not found: ${e}`);const n=new s;return Xa(n,{id:e}),this._tryConfig(n,t),n;case"function":return new hc(e)}throw new Error(`Unexpected parameters: ${e}`)}_install(e){if("function"!=typeof e.install)throw new Error(`Expect plugin.install to be a function: ${e}`);try{e.installed=!1,e.install(this.MisoClient,this.context),e.installed=!0}catch(pv){throw pv}e.id&&(this._installed[e.id]=e,this._installedResolutions[e.id]&&(this._installedResolutions[e.id].resolve(e),delete this._installedResolutions[e.id])),this._events.emit("install",e)}_register(e){super._register(e),this._fulfillUseRequests(e.id)}_fulfillUseRequests(e){const t=this._useRequests[e];if(t){for(const s of t)try{this.use(e,s)}catch(pv){this._error(pv)}delete this._useRequests[e]}}async _tryRegisterRemotely(e){if(e.startsWith("std:"))try{return void(await this._registerStdRemotely(e))}catch(pv){console.error(pv)}throw new Error(`Cannot register plugin remotely: ${e}`)}async _registerStdRemotely(e){const{version:t}=this._root,s="dev"===t?`plugin:${e}@dev:${this.MisoClient.uuid}`:`plugin:${e}@${t}`;if(!document.querySelector(`script[data-request="${s}"]`)){const n=document.createElement("script");n.async=!0,n.src=function(e,t,s){const n=e.slice(4);if("dev"===t){const e=s.src,t=e.indexOf("?"),o=t<0?e.length:t,i=e.lastIndexOf("/",o)+1,r=e.indexOf(".",i),a=r<0?"":e.slice(r,o);return`${e.slice(0,i)}plugins/${n}${a}`}return`https://cdn.jsdelivr.net/npm/@miso.ai/client-sdk@${t}/dist/umd/plugins/${n}.min.js`}(e,t,this._currentScript),n.setAttribute("data-request",s),document.head.appendChild(n)}const n=await(new Ll).get(s);!this.isRegistered(e)&&this.register(n)}}class fc{constructor(e,t){Ja(this,e,["getPluginClass","addSubtree","addPayloadPass","addHeadersPass","addUrlPass","setCustomFetch","setCustomSendBeacon","onHubUpdate","onHubEmit","whenInstalled","whenRegistered"]),Xa(this,{classes:t})}}class _c{constructor(e){Ja(this,e,["installed","registered","isInstalled","isRegistered","whenInstalled","whenRegistered","get","register","use","install"])}}const mc=new class extends $l{constructor(){super(),this._events._replays.add("create"),this._pluginRoot=new pc(this),this._clients=[],this._payloadPasses=[],this._headersPasses=[],this._urlPasses=[],this._customFetch=void 0,this._customSendBeacon=void 0,this._hubUpdateCallbacks=[],this._hubEmitCallbacks=[],this.version=za,this._cmdRes=new _l}get instances(){return[...this._clients]}async any(){return this._clients[0]||this._any||(this._any=(await this._events.once("create")).data)}get cmdDone(){return this._cmdRes.promise}};const gc=Object.freeze(Object.defineProperty({__proto__:null,debounce:kl,viewable:ll},Symbol.toStringTag,{value:"Module"})),{currentScript:yc}=document;let bc=class e extends $l{static attach(){(window.MisoClients||(window.MisoClients=[])).push(e),window.MisoClient?window.MisoClient!==e&&console.warn(`window.MisoClient already exists: (${window.MisoClient.version}).`):window.MisoClient=e}static debug(){}constructor(e){var t;super("client",mc),this._config(e),this.context=new uc(this),this.api=new lc(this,mc),t=this,mc._clients.push(t),mc._events.emit("create",t)}get version(){return e.version}_config(e){this.options=Object.freeze(this._normalizeOptions(e))}_normalizeOptions(e={}){if("string"==typeof e&&(e={apiKey:e}),e.readConfigFromScriptUrl&&(e={...this._readConfigFromScriptUrl(),...e}),!e.apiKey)throw new Error("Require API key to initialize miso client.");return e.request&&e.request.sendApiKeyByHeader&&console.warn('`sendApiKeyByHeader` option is deprecated. Please call `MisoClient.plugins.use("std:header-api-key");` instead.'),e.dataEndpoint=e.dataEndpoint||e.apiHost,e.eventEndpoint=e.eventEndpoint||e.apiHost,delete e.apiHost,Ya(e)}_readConfigFromScriptUrl(){const e=yc.src||yc.href;return Ya({apiKey:new URL(new Request(e).url).searchParams.get("api_key")||void 0})}};bc.helpers=gc,Xa(bc,{uuid:ul()});const vc=function(e){const t=mc._pluginRoot;return mc.MisoClient=t.MisoClient=e,Ja(e,mc,["version","instances","any","meta","on","once","cmdDone"]),Ja(e,t,["plugins"]),e}(bc),{GROUP:wc,NAME:kc}=Wa;let Ec;class Sc{constructor(e){this._plugin=e,this._props={}}get anonymous_id(){return this._props.anonymous_id||Ec||(Ec=dl("miso_anonymous_id",ul))}set anonymous_id(e){this._requireString("anonymous_id",e),this._set("anonymous_id",e)}get user_id(){return this._props.user_id}set user_id(e){this._requireString("user_id",e),this._set("user_id",e)}get user_hash(){return this._props.user_hash}set user_hash(e){this._requireString("user_hash",e),this._set("user_hash",e)}get user_type(){return this._props.user_type}set user_type(e){this._requireString("user_type",e),this._set("user_type",e)}get site(){return this._props.site}set site(e){this._requireString("site",e),this._set("site",e)}get auth(){return this._props.auth}set auth(e){this._requireString("auth",e),this._set("auth",e)}_set(e,t){this._props[e]=t,this._plugin._events.emit("set",`${e} = '${t}'`)}_requireString(e,t){if("string"!=typeof t&&void 0!==t)throw new Error(`${e} must be a string`);return t}}function xc(){const e=new URLSearchParams(window.location.search);let t=Ya({source:e.get("utm_source")||void 0,medium:e.get("utm_medium")||void 0,name:e.get("utm_campaign")||void 0,term:e.get("utm_term")||void 0,content:e.get("utm_content")||void 0});return 0===Object.keys(t).length?void 0:t}class Cc{constructor(e){this._plugin=e,this._config={search:!0},this.interface=Object.freeze({config:this.config.bind(this)})}config(e={}){if("object"!=typeof e)throw new Error(`Config options must be an object or undefined: ${e}`);for(const t of e){if(!this._config.hasOwnProperty(t))continue;const s=this._config[t],n=e[t];n!==s&&(this._config[t]=s,this._plugin._events.emit("config",`${t}: ${s} -> ${n}`))}return Object.freeze({...this._config})}}function Oc(e){const{context:t={}}=e,s={...t.custom_context,sdk_version:za};return s.uuid||(s.uuid=ul()),{...e,context:{...t,custom_context:s}}}const Ac="std:native-fetch";let Tc,Ic;const Rc=(()=>{if(window.fetch.toString().indexOf("[native code]")>-1)return Tc="original",window.fetch;try{const e=document.createElement("iframe");return e.style.display="none",document.head.appendChild(e),Tc="borrowed",e.contentWindow.fetch}catch(pv){Ic=pv}})();const Nc="std:header-api-key";const Lc="miso-logdump",qc="miso-logdump",Pc=`${qc}__download-btn`,Uc="Miso Log";class $c{constructor(e={}){this._options=e,this._logs=[]}config(e={}){this._options={...this._options,...e}}async showDownloadButton(){await async function(){return Fc||(Fc=bl(vl("logdump")))}();let e=document.getElementById(Lc);if(!e){const t=document.createElement("div");t.textContent=this._options.logDownloadButtonText||Uc,t.classList.add(Pc),t.addEventListener("click",(()=>this.download())),e=document.createElement("div"),e.id=Lc,e.classList.add(qc),e.appendChild(t),document.body.appendChild(e)}e.style.display="block"}_syncUi(){const e=document.getElementById(Lc),t=e&&e.querySelector(`.${Pc}`);t&&(t.textContent=this._options.logDownloadButtonText||Uc)}hideDownloadButton(){const e=document.getElementById(Lc);e&&(e.style.display="none")}download(){const e=this._logs,t=new Blob([Mc(e)],{type:"application/json"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=this._filename(),n.click()}_filename(){let{logFilename:e}=this._options;if("function"==typeof e){e=e({timestamp:jc()})}return e&&"string"==typeof e?e:`miso-log.${jc()}.jsonl`}clear(){this._logs=[]}}function jc(){return(new Date).toISOString().replaceAll(/[\:\.]/g,"-")}function Mc(e){return e.map((e=>JSON.stringify(El(function(e){if("<progressive-markdown>"===e[0]){const t=e.length;return[...e.slice(0,t-1),Dc(e[t-1])]}return e}(e),{depth:10})))).join("\n")}function Dc(e){return e?El(e,{depth:2}):e}let Fc;const Bc="std:debug";function zc(e){const t=typeof e;return"function"===t||"object"===t&&!Array.isArray(e)?[e]:e}function Qc(e,t){return null==t||t<=e?e:e+Math.floor(Math.random()*(t-e+1))}const Hc={"code-span":()=>["`","`"],"emphasis-1":()=>Gc(Vc(1),2),"emphasis-2":()=>Gc(Vc(2),2),"emphasis-3":()=>Gc(Vc(3),2),strikethrough:()=>["~","~"],link:({url:e="https://miso.ai"}={})=>["[",`](${e})`]};function Vc(e=[1,3]){return e="number"==typeof e?e:Qc(...e),"_*".charAt(Qc(0,1)).repeat(e)}const Wc=Object.keys(Hc);function Gc(e,t){const s=[];for(let n=0;n<t;n++)s.push("function"==typeof e?e():e);return s}new Set(Wc),vc.plugins.register(class{constructor(e={}){this._options=e,this._logs=new $c(e)}static get id(){return Bc}install(e){this._injectComponents(e),e.debug=(...e)=>this._logr(...e),e.logs=this._logs}config(e={}){this._options={...this._options,...e},this._logs.config(e),e.preserveLog&&this._log(Bc,"ua",window.navigator.userAgent)}_injectComponents(e,t=[]){e.on("child",(e=>this._injectComponents(e,t))),e.on("subtree",(s=>this._injectComponents(s,t.concat(e.meta.path)))),e.on("*",((s,n)=>this._handleEvent(e,n,s,t)))}_handleEvent(e,{name:t},s,n=[]){if("child"===t||"subtree"===t)return;const o=n.concat(e.meta.path);if(o.length||"create"!==t){switch(o[0]){case"client":if("api"===o[1])return void this._handleApiEvent(t,{...s,groupName:o[2]});break;case"plugins":return void(1===o.length?this._handlePluginsEvent(t,s):this._handlePluginSpecificEvent(o[1],o.slice(2),t,s))}this._logw(o.join("."),t,s)}else this._handleCreateClient(t,s)}_handleCreateClient(e,t){this._logw("client",e,t)}_handleApiEvent(e,{groupName:t,apiName:s,url:n,bulk:o,...i}){const r=new URL(n).pathname,a=["api",e];if(o&&a.push(`(bulk ${o.bulkId})`),a.push(`POST ${r}`),"interactions"===t){const e=i.payload.data[0],{type:t,custom_action_name:s,context:{custom_context:{property:n}={}}={}}=e,o="custom"===t&&s?`${t}:${s}`:t;a.push(n?`${o} (${n})`:`${o}`)}a.push([{...i,url:n}]),this._log(...a)}_handlePluginsEvent(e,t){let s=[];Array.isArray(t)&&(s=t.slice(1),t=t[0]),this._log("plugins",e,`${t.id||"(anonymous)"}`,[t,...s])}_handlePluginSpecificEvent(e,t,s,n){this._logw([e,t.join(".")],s,n)}_getPath(e){const t=[];for(let s=e;s;s=s.meta.parent)s.meta.name&&t.push(s.meta.name);return t.reverse()}_logw(e,t,s){void 0===s?this._log(e,t):Array.isArray(s)?this._log(e,t,...s.map(zc)):this._log(e,t,zc(s))}_log(e,t,...s){this._logr(function(e){return`<${"string"==typeof e?e:e.filter((e=>e)).join("/")}>`}(e),function(e){return`[${e}]`}(t),...s)}_logr(...e){const t=this._options.console||{};this._options.preserveLog&&this._logs._logs.push(e),console.log(function({text:e="Miso"}={}){return`%c${e}`}(t),function({color:e="#fff",background:t="#334cbb"}={}){return`color: ${e}; background-color: ${t}; padding: 2px 2px 1px 4px;`}(t),...e)}},class{constructor(e={}){this._options=e,this.id="std:dry-run",this.name="dry-run"}static get id(){return"std:dry-run"}install(e,{addUrlPass:t}){t(this._modifyUrl.bind(this))}_modifyUrl({apiGroup:e,apiName:t,url:s}){return"interactions"===e&&"upload"===t?function(e,t,s){return e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(t)+"="+encodeURIComponent(`${s}`)}(s,"dry_run","1"):s}},class{static get id(){return Ac}install(e,t){Rc?(t.setCustomFetch(Rc),e.debug(`<plugin:${Ac}>`,"[info]",`Using ${Tc} native fetch`)):e.debug(`<plugin:${Ac}>`,"[error]",`Failed to obtain native fetch: ${Ic.message}`)}},class{static get id(){return Nc}install(e,t){t.addUrlPass(this._modifyUrl.bind(this)),t.addHeadersPass(this._modifyHeaders.bind(this)),e.debug(`<plugin:${Nc}>`,"[info]","Send API key in header")}_modifyUrl({url:e}){return e.replace(/[?&]api_key=[^&]*/g,"")}_modifyHeaders({client:e,headers:t}){const{apiKey:s}=e.options;return s?{...t,"X-API-KEY":s}:t}}),vc.plugins.use(class extends $l{static get id(){return"std:context"}constructor(){super("context")}install(e,t){t.addSubtree(this),e.on("create",this._injectClient.bind(this)),t.addHeadersPass(this._modifyHeaders.bind(this)),t.addPayloadPass(this._modifyPayload.bind(this))}_injectClient(e){const t=new Sc(this);var s,n,o;s=e.context,n=t,o="string"==typeof(o=["anonymous_id","user_id","user_hash","user_type","site","auth"])?[o]:o,Object.defineProperties(s,o.reduce(((e,t)=>(e[t]={get:()=>n[t],set:e=>{n[t]=e}},e)),{}))}_modifyHeaders({client:e,headers:t}){const{auth:s}=e.context;return s&&(t={...t,Authorization:s}),t}_modifyPayload({client:e,apiGroup:t,apiName:s,payload:n}){return n?t===wc.INTERACTIONS?s===kc.UPLOAD?this._modifyPayloadForInteractions(e,n):n:this._modifyPayloadForQueries(e,n):n}_modifyPayloadForQueries(e,t){const{user_id:s,user_hash:n,user_type:o,anonymous_id:i,site:r}=e.context;return Ol(t,{...s?{user_id:s,user_type:o,user_hash:n}:{anonymous_id:i},metadata:r?{site:r}:void 0})}_modifyPayloadForInteractions(e,{data:t}){const{anonymous_id:s,user_id:n,site:o}=e.context,i={anonymous_id:s,user_id:n},r=o?{site:o}:void 0,a=r?{custom_context:r}:void 0;return{data:t=t.map((e=>Al(e,{...i,context:a})))}}}),vc.plugins.use(class{static get id(){return"std:page-info"}constructor(){}install(e,{addPayloadPass:t}){t(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:t,payload:s}){return"interactions"===e&&"upload"===t?this._modifyPayloadForInteractions(s):s}_modifyPayloadForInteractions({data:e}){return{data:e=e.map((e=>({...e,context:{...Ya({page:Ya({url:window.location.href,referrer:document.referrer||void 0,title:document.title}),campaign:xc()}),...e.context}})))}}}),vc.plugins.use(class extends $l{static get id(){return"std:auto-events"}constructor(){super("auto-events"),this._contexts=new WeakMap}install(e,t){t.addSubtree(this),e.on("create",this._injectClient.bind(this)),t.addPayloadPass(this._captureApiRequest.bind(this))}_injectClient(e){const t=new Cc(this);this._contexts.set(e,t),e.autoEvents=t.interface}_captureApiRequest({client:e,apiGroup:t,apiName:s,payload:n}){if(t===Ha.SEARCH)if(s===Va.SEARCH)this._captureSearchApiRequest(e,n)}_captureSearchApiRequest(e,{q:t}){if(!t||"*"===t)return;const s=this._contexts.get(e);s&&s._config.search&&e.api.interactions.upload({type:"search",search:{keywords:t},context:{custom_context:{channel:"miso_api"}}})}}),vc.plugins.use(class{static get id(){return"std:interactions"}constructor(){}install(e,{addPayloadPass:t}){t(this._modifyPayload.bind(this))}_modifyPayload({apiGroup:e,apiName:t,payload:s}){return"interactions"===e&&"upload"===t?this._modifyPayloadForInteractions(s):s}_modifyPayloadForInteractions({data:e}){return{data:e.map(Oc)}}}),vc.plugins.use(class extends $l{static get id(){return"std:api-patch"}constructor(){super("api-patch")}install(e,t){t.addSubtree(this),t.addPayloadPass(this._patchApiPayload.bind(this))}_patchApiPayload(e){let{payload:t,...s}=e;return t?(t=this._copyMetadataToMeta(t,s),t=this._suppressMetadata(t,s),t=this._suppressUserType(t,s),t):t}_copyMetadataToMeta(e,{apiGroup:t}){return t===Ha.ASK&&e.metadata?{...e,_meta:e.metadata}:e}_suppressMetadata(e,{apiGroup:t}){switch(t){case Ha.SEARCH:case Ha.RECOMMENDATION:const{_meta:t,metadata:s,...n}=e;return n;default:return e}}_suppressUserType(e,{apiGroup:t}){switch(t){case Ha.SEARCH:case Ha.RECOMMENDATION:const{user_type:t,...s}=e;return s;default:return e}}});const Kc="default",Yc=Object.freeze({CONTAINER:"container",BANNER:"banner",QUERY:"query",FEEDBACK:"feedback",PRODUCTS:"products",CATEGORIES:"categories",ATTRIBUTES:"attributes",RESULTS:"results",ITEMS:"items",QUESTION:"question",ANSWER:"answer",REASONING:"reasoning",IMAGES:"images",SOURCES:"sources",RELATED_RESOURCES:"related_resources",FOLLOW_UP_QUESTIONS:"follow_up_questions",QUERY_SUGGESTIONS:"query_suggestions",RELATED_QUESTIONS:"related_questions",AFFILIATION:"affiliation",KEYWORDS:"keywords",FACETS:"facets",TOTAL:"total",MORE:"more",SORT:"sort",ERROR:"error"}),Zc=new Set([Yc.PRODUCTS,Yc.CATEGORIES,Yc.ATTRIBUTES,Yc.RESULTS,Yc.ITEMS,Yc.QUESTION,Yc.ANSWER,Yc.REASONING,Yc.IMAGES,Yc.SOURCES,Yc.RELATED_RESOURCES,Yc.FOLLOW_UP_QUESTIONS,Yc.QUERY_SUGGESTIONS,Yc.RELATED_QUESTIONS,Yc.AFFILIATION,Yc.FACETS,Yc.TOTAL]);function Jc(e){return Zc.has(e)}const Xc=new Set([Yc.PRODUCTS,Yc.IMAGES,Yc.SOURCES,Yc.RELATED_RESOURCES]);const eu=Object.freeze({IMPRESSION:"impression",VIEWABLE:"viewable",CLICK:"click",SUBMIT:"submit",FEEDBACK:"feedback"}),tu=[eu.IMPRESSION,eu.VIEWABLE,eu.CLICK,eu.SUBMIT,eu.FEEDBACK],su=[eu.IMPRESSION,eu.VIEWABLE,eu.CLICK],nu=new Set(su);const ou=Object.freeze({UNTRACKED:"untracked",TRACKING:"tracking",TRIGGERED:"triggered"}),iu=Object.freeze({INITIAL:"initial",LOADING:"loading",ERRONEOUS:"erroneous",READY:"ready",ONGOING:"ongoing",DONE:"done",EMPTY:"empty",NONEMPTY:"nonempty",UNANSWERABLE:"unanswerable"}),ru=Object.freeze({ORGANIC:"_organic",SUGGESTED_QUESTIONS:"_suggested_questions",INLINE_QUESTION_LINK:"_inline_question_link"});function au(e){if(tu.indexOf(e)<0)throw new Error(`Unrecognized event type: ${e}`)}const lu=Object.freeze({API:"api",LAYOUTS:"layouts",DATA_PROCESSOR:"dataProcessor",TRACKERS:"trackers",INTERACTIONS:"interactions",FILTERS:"filters",PAGINATION:"pagination",TEMPLATES:"templates"}),cu=Object.freeze({QUERY:"query",REFINE:"refine",MORE:"more"});function uu(e,t){return Object.freeze({...e,...t,members:du(e.members,t.members),mappings:Object.freeze({...e.mappings,...t.mappings})})}function du(e=[],t=[]){return[...new Set([...e,...t])]}function hu(e,t){let s={};for(const n of e)n&&(s=t(s,n));return Ya(s)}function pu(e){if(void 0===e)throw new Error(`Expect options to be an object or a boolean value: ${e}`);return"boolean"==typeof e&&(e={active:e}),e}function fu(...e){return!1!==e[e.length-1]&&hu(e,((e,t)=>Object.assign(e,{...t,payload:Ol(e.payload,t.payload)})))}function _u(e){return e=function(e){return e.replaceAll("-","_")}(e=e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)))}function mu(e){if(void 0===e)return;let[t,s]=Ka(e);return"object"==typeof t&&(s=t,t=void 0),[t,s]}function gu(e,t){return!1===(t=mu(t))[0]?t:e&&t?[t[0]||e[0],yu(e[1],t[1])]:t||e}function yu(e,t){return{...e,...t,link:{...e&&e.link,...t&&t.link},templates:{...e&&e.templates,...t&&t.templates}}}const bu=Object.freeze({active:!0,impression:Object.freeze({active:!0}),viewable:Object.freeze({active:!0,area:.5,duration:1e3}),click:Object.freeze({active:!0,lenient:!1})});function vu(e={}){e=pu(e);const{active:t,...s}=e;for(const[n,o]of Object.entries(s))wu(o);return e}function wu(e={}){return e=pu(e)}function ku(e={},t={}){const s={...e};for(const[n,o]of Object.entries(t))void 0!==o&&(s[n]=tu.includes(n)?Eu(e[n],o):o);return s}function Eu(e={},t={}){return{...e,...t}}const Su=pu;function xu(e){return void 0===e?void 0:"function"!=typeof e?()=>e:e}const Cu=[{key:lu.API,normalize:function([e,t]=[]){if(!1===e)return{actor:!1};let s;if("object"==typeof e&&void 0===t&&(t=e,e=void 0),e&&-1!==e.indexOf("/")&&([s,e]=e.split("/")),e&&"string"!=typeof e||void 0!==t&&"object"!=typeof t)throw new Error(`Invalid arguments for useApi(): ${e}, ${t}`);return Ya({group:s,name:e,payload:t})},merge:fu},{key:lu.LAYOUTS,normalize:function(e={}){if(!1===e)return!1;const{results:t,...s}=e;void 0!==t&&(console.warn(`useLayouts({ results: ... }) is deprecated, use useLayouts({ ${Yc.PRODUCTS}: ... }) instead`),e={...s,[Yc.PRODUCTS]:t});const n={};for(const[o,i]of Object.entries(e))n[_u(o)]=mu(i);return n},merge:function(...e){return!1!==e[e.length-1]&&hu(e,((e,t)=>{for(const[s,n]of Object.entries(t))e[s]=gu(e[s],n);return e}))}},{key:lu.DATA_PROCESSOR,normalize:function(e){e=Ka(e);for(const t of e)if("function"!=typeof t)throw new Error(`Expect data processor options to be a function: ${t}`);return e},merge:function(...e){return e.flat().filter(Boolean)}},{key:lu.TRACKERS,normalize:function(e={}){e=pu(e);const{active:t,...s}=e,n={};for(const[o,i]of Object.entries(s))n[o]=vu(i);return{active:t,...n}},merge:function(...e){return!1!==e[e.length-1]&&hu(e,((e,t)=>{for(const[s,n]of Object.entries(t))void 0!==n&&(e[s]="active"===s?n:ku(e[s],n));return e}))}},{key:lu.INTERACTIONS,normalize:function(e){if(void 0===e)return;if(!1===e)return{handle:()=>{}};const t=Ka(e.preprocess);for(const s of t)if("function"!=typeof s)throw new Error(`Expect preprocess options to be a function: ${s}`);if(e.handle&&"function"!=typeof e.handle)throw new Error(`Expect handle options to be a function: ${e.handle}`);return{...e,preprocess:t}},merge:function(...e){return!1!==e[e.length-1]&&hu(e,((e,t)=>{return Object.assign(e,{...t,preprocess:(s=e.preprocess,n=t.preprocess,s&&s.length?n&&n.length?[...s,...n]:s:n)});var s,n}))}},{key:lu.FILTERS,normalize:Su,merge:function(...e){return!1!==e[e.length-1]&&hu(e,((e,t)=>Object.assign(e,t)))}},{key:lu.PAGINATION,normalize:function(e){if(void 0===e)throw new Error(`Expect pagination options to be an object or a boolean value: ${e}`);return"boolean"==typeof e&&(e={active:e}),e},merge:function(...e){return!1!==e[e.length-1]&&hu(e,((e,t)=>Object.assign(e,t)))}},{key:lu.TEMPLATES,normalize:function(e={}){const t={};for(const[s,n]of Object.entries(e))t[s]=xu(n);return t},merge:function(...e){return hu(e,((e,t)=>{for(const[n,o]of Object.entries(t))e[n]=(s=e[n],xu(o)||s);var s;return e}))}}];class Ou{constructor(){this._events=new Pl({target:this}),this._globals={}}_notify(e){this._events.emit(e),this._events.emit("_update",e)}}class Au{constructor(e={},t={}){this._events=new Pl({target:this}),this._defaults=t,this._context=e||{},this._locals={},Xa(this,{resolved:new Tu(this),defaults:t}),e&&e.on&&(this._unsubscribes=[e.on("_update",(e=>this._notify(e)))])}_notify(e){this.resolved._invalidate(e),this._events.emit(e)}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}}class Tu{constructor(e){this._options=e,this._cache={}}_invalidate(e){this._cache[e]=void 0}_get({key:e,merge:t}){if(void 0===this._cache[e]){const s=this._options,n=s._context[e];this._cache[e]=t(s._defaults[e],n&&n.get(),s._locals[e])}return this._cache[e]}}class Iu{constructor(e,t,s,n,o){this._options=e,this._store=t,this._key=s,this._normalize=e=>void 0!==e?n(e):void 0,this._merge=o}get(){return this._store[this._key]}set(e){this._set(this._normalize(e))}merge(e){this._set(this._merge(this.get(),this._normalize(e)))}_set(e){this._store[this._key]=e,this._options._notify(this._key)}}for(const fv of Cu){const{key:e,normalize:t,merge:s}=fv;Object.defineProperty(Ou.prototype,e,{get:function(){const n=`_${e}`;return this[n]||(this[n]=new Iu(this,this._globals,e,t,s))}}),Object.defineProperty(Au.prototype,e,{get:function(){const n=`_${e}`;return this[n]||(this[n]=new Iu(this,this._locals,e,t,s))}}),Object.defineProperty(Tu.prototype,e,{get:function(){return this._get(fv)}})}const Ru=[lu.API,lu.LAYOUTS,lu.DATA_PROCESSOR,lu.TRACKERS,lu.INTERACTIONS];function Nu(e,t=Ru){for(const s of t)Lu(e,s)}function Lu(e,t){if("api"===t)Object.assign(e,{useApi(...e){return this._options.api.merge(e),this},clearApi(){return this._options.api.set(),this}});else{const n=(s=t).charAt(0).toUpperCase()+s.slice(1);Object.assign(e,{[`use${n}`](e){return this._options[t].merge(e),this},[`clear${n}`](){return this._options[t].set(),this}})}var s}function qu(e={}){const{setValue:t,focus:s,param:n,sourceParam:o}=this._autoQuery=function({setValue:e=!0,focus:t=!0,updateUrl:s=!0,param:n="q",sourceParam:o="qs",...i}={}){return{setValue:e,focus:t,updateUrl:s,param:n,sourceParam:o,...i}}(e),i=new URLSearchParams(window.location.search),r=i.get(n),a=i.get(o)||void 0,{layout:l}=this._views.get(Yc.QUERY);l&&(r&&t&&(l.value=r),!r&&s&&l.focus()),r&&this.query(Ya({q:r,qs:a}))}function Pu({value:e,request:t}){if(!this._autoQuery||!this._autoQuery.updateUrl)return;const{param:s,sourceParam:n}=this._autoQuery,o=e&&(e.question||e.keyword)||t&&t.payload&&(t.payload.question||t.payload.q),i=t&&t.payload&&t.payload.metadata&&t.payload.metadata.question_source;if(!o)return;const r=new URL(window.location),a=r.searchParams.get(s),l=r.searchParams.get(n)||ru.ORGANIC;o===a&&i===l||(r.searchParams.set(s,o),i===ru.ORGANIC?r.searchParams.delete(n):r.searchParams.set(n,i),window.history.replaceState({},"",r))}class Uu extends $l{constructor(e,t,s){super(e,t),this._name=e,this._plugin=t,this._client=s,this._options=new Ou}}function $u(e){return e?`view:${e}`:"view"}Nu(Uu.prototype);class ju{constructor(e={}){(this._events=new Pl)._injectSubscribeInterface(this),this._options=e,this._states={},Xa(this,{states:new Proxy(this._states,{set(){}})})}update(e,t,s={}){this._states[e]=Object.freeze(t);const n=Object.freeze({action:"update",name:e,state:t,...s});"function"==typeof this._options.onUpdate&&this._options.onUpdate(n),s.silent||this._events.emit(e,t),"function"==typeof this._options.onEmit&&this._options.onEmit(n)}trigger(e,t){const s=Object.freeze({action:"trigger",name:e,state:t});"function"==typeof this._options.onUpdate&&this._options.onUpdate(s),this._events.emit(e,t),"function"==typeof this._options.onEmit&&this._options.onEmit(s)}}class Mu{constructor(e){this._hub=e,this._sessionIndex=0}restart(){const e=Object.freeze({uuid:ul(),index:this._sessionIndex++,meta:{}});this._hub.update("session",e)}}function Du(e,t){if(!t)return!1;const{session:s}=e.states;return s&&s.index===t.index}class Fu{constructor(e,{source:t,options:s,polling:n=!0}){this._hub=e,this._source=t,this._options=s,this._polling=n,this._unsubscribes=[e.on("session",(e=>this._handleSession(e))),e.on("request",(e=>this._handleRequest(e)))]}get active(){return!1!==this._options.resolved.api.actor}get source(){return this._source}_handleSession(e){this._session&&e.index===this._session.index||(this._ac&&this._ac.abort({type:"new-session",message:"A new session is created, discarding the old one."}),this._ac=new AbortController),this._session=e}async _handleRequest(e){if(!this.active)return;const{session:t,...s}=e;try{const{signal:n}=this._ac||{},o={...e.options,signal:n},i=await this._source({session:t,...s,options:o});if(i&&i[Symbol.asyncIterator]){if(i._response&&this._emitResponseWithSessionCheck({session:t,request:s,value:i._response}),this._polling){let e;for await(e of i){if(!Du(this._hub,t))break;this._emitResponse({session:t,request:s,value:e})}}}else this._emitResponseWithSessionCheck({session:t,request:s,value:i})}catch(n){this._error(n),this._emitResponseWithSessionCheck({session:t,request:s,error:n})}}_emitResponseWithSessionCheck(e){Du(this._hub,e.session)&&this._emitResponse(e)}_emitResponse(e){this._hub.update("response",e)}_error(e){console.error(e)}_destroy(){this._ac&&this._ac.abort({type:"data-actor-destroy",message:"Data actor is destroyed."});for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class Bu{constructor(e){this._get="function"==typeof e?e:()=>e,this._handlers=[],this._elementUpdatedHandlers=[],this.sync()}get current(){return this._element}on(e,t){if("element"===e)return this._onElementUpdated(t);const s=this._get();return s&&s.addEventListener(e,t),this._handlers.push({event:e,handler:t}),()=>this._off(e,t)}_off(e,t){const s=this._get();s&&s.removeEventListener(e,t),function(e,t){if(!e)return;const s=e.findIndex(t);s>-1&&e.splice(s,1)}(this._handlers,(e=>e.handler===t))}_onElementUpdated(e){return this._elementUpdatedHandlers.push(e),()=>{Ga(this._elementUpdatedHandlers,e)}}sync({silent:e=!1}={}){const t=this._get();if(this._element===t)return;if(this._offAllFromCurrentElement(),t)for(const{event:n,handler:o}of this._handlers)t.addEventListener(n,o);const s=this._element;if(this._element=t,!e)for(const n of this._elementUpdatedHandlers)try{n(t,s)}catch(pv){console.error(pv)}}_offAllFromCurrentElement(){if(this._element)for(const{event:e,handler:t}of this._handlers)this._element.removeEventListener(e,t)}destroy(){this._offAllFromCurrentElement()}}const{IMPRESSION:zu,VIEWABLE:Qu,CLICK:Hu}=eu,{UNTRACKED:Vu,TRIGGERED:Wu}=ou,Gu=Object.freeze({[zu]:Vu,[Qu]:Vu,[Hu]:Vu});class Ku{constructor(e){this.sessionId=e,this._states=new Map}getFullState(e){const t=this._states.get(this._getKey(e));return t?{...t}:Gu}get(e,t){const s=this._states.get(this._getKey(e));return s&&s[t]||Vu}set(e,t,s){au(t),function(e){if(e!==ou.UNTRACKED&&e!==ou.TRACKING&&e!==ou.TRIGGERED)throw new Error(`Unrecognized tracking status: ${e}`)}(s);for(const n of Ka(e))this._setOne(n,t,s)}untriggered(e,t){return e.filter((e=>this.get(e,t)!==Wu))}_getKey(e){return e.product_id||e.text||e.id||e}_setOne(e,t,s){(function(e,t,s){if(e.has(t))return e.get(t);const n=s(t);return e.set(t,n),n}(this._states,this._getKey(e),(()=>({...Gu}))))[t]=s}}const Yu=[Symbol("itemless")];class Zu{constructor({hub:e,role:t,options:s}){this._hub=e,this._role=t,this._options=s,this._states=new Ku(this._getSessionId())}get options(){return"function"==typeof this._options?this._options():this._options}getState(e){return this._states.getFullState(e)}_trigger(e,t,s){au(e);const{options:n}=this;if(!n||!1===n.active)return;this._syncSession();const{deduplicated:o=!0,itemless:i=!1}=n;if(o){if(i&&(t=Yu),0===(t=this._states.untriggered(Ka(t),e)).length)return;this._states.set(t,e,ou.TRIGGERED)}this._sendToHub({type:e,items:i?void 0:t,...s})}submit({value:e}){this._syncSession(),this._sendToHub({type:eu.SUBMIT,value:e})}_sendToHub(e){this._hub.trigger("tracker",Object.freeze(Ya({role:this._role,...e})))}_syncSession(){const e=this._getSessionId();e&&(this._states&&e===this._states.sessionId||(this._states=new Ku(e)))}_getSessionId(){const{session:e}=this._getViewState()||{};return e&&e.uuid}_getMisoId(){const e=this._getViewState();return e&&e.meta&&e.meta.miso_id||void 0}_getRequestPayload(){const{request:e}=this._getViewState()||{};return e&&e.payload}_getViewState(){return this._hub.states[$u(this._role)]}}for(const fv of su)Zu.prototype[fv]=function(e,t){this._trigger(fv,e,t)};function Ju(e){return e&&e.meta&&e.meta.empty}class Xu{constructor(e,t){this._events=new Pl({target:this}),this._views=e,this._mapping=td((e._roles.mappings||{})[t]||t),Xa(this,{role:t,interface:new ed(this)})}get hub(){return this._views._hub}get element(){return this._element}set element(e){e!==this._element&&(this._element&&this._safeApplyOnLayout("unrender",this._element),this._element=e,this._proxyElement&&this._proxyElement.sync(),this._events.emit("element",e),this.refresh({force:!0}))}get proxyElement(){return this._proxyElement||(this._proxyElement=new Bu((()=>this.element))),this._proxyElement}get layout(){return this._layout}set layout(e){if(e===this._layout)return;if(e&&"function"!=typeof e.render)throw new Error("Render function is mandatory in a layout.");const{element:t}=this;t&&this._safeApplyOnLayout("unrender",t),this._safeApplyOnLayout("destroy"),this._layout=e,e&&(e._view=this,"function"==typeof e.initialize&&e.initialize(this)),this.refresh({force:!0})}get tracker(){const{role:e}=this;if(e===Yc.CONTAINER)return this._views._getContainerTracker();if(!this._tracker){const{hub:t}=this;this._tracker=new Zu({hub:t,role:e,options:()=>this.trackerOptions})}return this._tracker}get workflow(){return this._views._workflow}get workflowOptions(){return this._views._options.resolved}get trackerOptions(){return this._views._getTrackerOptions(this.role)}get filters(){return this._views.filters}async refresh({force:e=!1,data:t}={}){if(!this._layout)return;const{element:s}=this;if(!s)return;const n=this._data;if(this._data=t=this._sliceData(t||this._views._getData()),!e&&((o=t)===(i=n)||o&&i&&o.status===i.status&&o.error===i.error&&o.value===i.value&&o.ongoing===i.ongoing&&Ju(o)===Ju(i)&&function(e,t){return e===t||e&&t&&e.uuid===t.uuid}(o.session,i.session)))return;var o,i;const{session:r,status:a,ongoing:l,request:c,meta:u,value:d}=t,h={session:r,status:a,ongoing:l,request:c,meta:u,data:d,...sd(this.role,t)},p=(e={},t)=>{!1!==e&&this.updateState({...h,...e},t)};try{await this._layout.render(s,t,{notifyUpdate:p})}catch(f){this._error(f),p({error:f})}}updateState(e,{silent:t=!1}={}){const s=e.error?iu.ERRONEOUS:e.status;e=this._state=Object.freeze(Ya({...e,status:s}));const{role:n}=this;this.hub.update($u(n),e,{silent:t})}_sliceData(e){const{value:t,error:s,status:n,meta:o,...i}=e,r={value:this._mapping(e,this),status:n,data:t,meta:o,...i};return this.role===Yc.CONTAINER&&(r.meta={...o,empty:this._isContainerEmpty(e)}),Ya(r)}_isContainerEmpty(e){const{element:t}=this;if(!t)return!1;for(const{role:s}of t.components){if(!Jc(s))continue;if(!nd(s,td((this._views._roles.mappings||{})[s]||s)(e,this)))return!1}return!0}_syncSize(){this._element&&this._safeApplyOnLayout("syncSize",this._element)}_safeApplyOnLayout(e,...t){if(this._layout&&"function"==typeof this._layout[e])try{this._layout[e](...t)}catch(pv){this._error(pv)}}_error(e){this._views._error(e)}_destroy(){this._safeApplyOnLayout("destroy"),this._proxyElement&&this._proxyElement.destroy()}}class ed{constructor(e){Ja(this,e,["role","layout","element","proxyElement","refresh","on","tracker"])}}function td(e){switch(typeof e){case"function":return e;case"string":return t=>t.value&&t.value[e];default:throw new Error(`Invalid mapping function: ${e}`)}}function sd(e,t){return function(e){return e.status===iu.READY&&!e.ongoing}(t)?{empty:!!nd(e,t&&t.value)}:{}}function nd(e,t){switch(e){case Yc.ANSWER:case Yc.REASONING:return!t||!t.value;default:return void 0===t||(Array.isArray(t)||"string"==typeof t)&&!t.length}}function od(e){if(!e)return;const{options:t=[]}=e;for(const s of t)if(s.default)return Object.freeze(s);return Object.freeze(t[0])}class id{constructor(e,{facets:t}={}){this._views=e,this._hub=e._hub;const s=this._error=this._error.bind(this);this._events=new Pl({target:this,error:s}),Xa(this,{facets:new rd(this,t)}),this._unsubscribes=[e._options.on("filters",(()=>this._syncOptions()))],this._syncOptions(),this._states=void 0}_syncOptions(){const e=this._views._options.resolved.filters;this._initialStates=function({sort:e}={}){return Ya({facets:Object.freeze({}),sort:od(e)})}(e),this.apply({silent:!0})}_getStates(){return this._states||this._initialStates}update(e){const t=this._getStates();this._states=function(e={},t={}){return Object.freeze(Ya({...e,...t,facets:Object.freeze(Ya({...e.facets,...t.facets}))}))}({...t,...e});const s=this._getStates();this._events.emit("update",{updates:e,states:s,oldStates:t})}reset({silent:e=!1}={}){const t=this._states;this._states=void 0;const s=this._getStates();this._hub.update("filters",s,{silent:e}),this._events.emit("reset",{states:s,oldStates:t})}apply({silent:e=!1}={}){const t=this._getStates();this._hub.update("filters",t,{silent:e}),!e&&this._events.emit("apply")}_error(e){this._views._error(e)}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class rd{constructor(e,t={}){this._filters=e,this._options=t}isSelected(e,t){return this._getFieldValues(e).includes(t)}select(e,t){this.isSelected(e,t)||this._select(e,t)}unselect(e,t){this.isSelected(e,t)&&this._unselect(e,t)}toggle(e,t){this.isSelected(e,t)?this._unselect(e,t):this._select(e,t)}_getFieldValues(e){return this._filters._getStates().facets[e]||[]}_select(e,t){const s=this._options.multivalued?[...this._getFieldValues(e),t]:[t];s.sort(),this._filters.update({facets:{[e]:s}})}_unselect(e,t){let s=this._getFieldValues(e).filter((e=>e!==t));0===s.length&&(s=void 0),this._filters.update({facets:{[e]:s}})}}const ad=Symbol.for("miso:tracked");function ld(e){return!!e[ad]}function cd(e){e[ad]=!0}const ud=Object.freeze({impression:Object.freeze({}),viewable:Object.freeze({area:.5,duration:1e3}),click:Object.freeze({lenient:!1})});function dd(e,t){return!!t&&{...e,...t}}class hd{constructor(e,{workflow:t,extensions:s,layouts:n,roles:o,options:i}){this._hub=e,this._workflow=t,this._workflowName=t._name,this._extensions=s,this._layoutFactory=n,this._options=i,this._roles=o,this._containers=new Map,this._containerTracker=void 0,this._views={},this._filters=new id(this);for(const a of o.members)a!==Yc.CONTAINER&&(this._views[a]=new Xu(this,a));Xa(this,{interface:new pd(this),trackers:new fd(this,o.members)});const r=()=>this.syncSize();window.addEventListener("resize",r),this._unsubscribes=[()=>window.removeEventListener("resize",r),e.on("data",(e=>this.refresh({data:e}))),i.on("layouts",(()=>this._syncLayouts()))],this._syncLayouts()}get filters(){return this._filters}addContainer(e){if(this._containers.has(e))return;const t=new Xu(this,Yc.CONTAINER);t.layout=this._createLayout(Yc.CONTAINER),t.element=e,this._containers.set(e,t);const{components:s}=e;for(const n of s)this.addComponent(n)}removeContainer(e){const t=this._containers.get(e);if(!t)return;const{components:s}=e;for(const n of s)this.removeComponent(n);t._destroy(),this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e}removeComponent(e){this._getViewByElement(e).element=void 0}updateComponentRole(e,t,s){}containsElement(e){return this._containers.has(e)||this._views[e.role]}refreshElement(e){const t=e.isContainer?this._containers.get(e):this._getViewByElement(e);t&&t.refresh({force:!0})}_getViewByElement(e){let{role:t}=e;if(!t)throw new Error("Component must have a role");return this.get(t)}_syncLayouts(){const{layouts:e}=this._options.resolved;if(!1===e){for(const e of this._containers.values())e.layout=void 0;for(const e of Object.values(this._views))e.layout=void 0}else for(let[t,[s,n]]of Object.entries(e)){const e=()=>this._layoutFactory.create(s,{...n,role:t,workflow:this._workflowName});if(t===Yc.CONTAINER)for(const t of this._containers.values())t.layout=e();else{const s=this.get(t);s&&(s.layout=e())}}}_createLayout(e){const t=this._options.resolved.layouts[e];if(!t)return;const[s,n]=t;return this._layoutFactory.create(s,{...n,role:e,workflow:this._workflowName})}get(e){return this._views[e]}get views(){return this._getViews(!0)}_getViews(e=!0){return e?[...this._containers.values(),...Object.values(this._views)]:[...Object.values(this._views),...this._containers.values()]}syncSize(){for(const e of Object.values(this._views))e._syncSize()}async refresh({force:e,data:t}={}){t=this._getData(t);let s=this._getViews(!0);await Promise.all(s.map((s=>s.refresh({force:e,data:t}))))}_getData(e){return e||this._hub.states.data}_getTrackerOptions(e){const t=this._options.resolved.trackers;return function(e){if(!1===e)return!1;if(!0===e&&(e={}),"object"!=typeof e)throw new Error(`Invalid options: ${e}`);const{impression:t={},viewable:s={},click:n={},...o}=e;return Ya({...ud,...o,impression:dd(ud.impression,t),viewable:dd(ud.viewable,s),click:dd(ud.click,n)})}(t&&t[e]||!1)}_getContainerTracker(){if(!this._containerTracker){const e=this._hub,t=Yc.CONTAINER;this._containerTracker=new Zu({hub:e,role:t,itemless:!0,options:()=>this._getTrackerOptions(t)})}return this._containerTracker}_error(e){console.error(e)}_destroy({dom:e}={}){for(const t of this._getViews(!1))t._destroy();for(const t of this._unsubscribes)t();this._unsubscribes=[],this._filters._destroy()}}class pd{constructor(e){this._actor=e,Ja(this,e,["syncSize","refresh","trackers","filters"])}get(e){return this._actor.get(e).interface}get all(){return this._actor.views.map((e=>e.interface))}}class fd{constructor(e,t){this._views=e;for(const s of t)s!==Yc.CONTAINER&&Object.defineProperty(this,s,{get:()=>e.get(s).tracker});Object.defineProperty(this,Yc.CONTAINER,{get:()=>e._getContainerTracker()})}}class _d{constructor(e){this._hub=e,this._unsubscribes=[e.on("feedback",(e=>this._trigger(e)))]}_trigger(e){this._hub.trigger("tracker",{type:eu.FEEDBACK,result_type:"answer",value:e.unselected?"unselected":e.value})}_destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}class md{constructor(e,{client:t,options:s}){this._client=t,this._options=s,this._unsubscribes=[e.on("interaction",(e=>this._handle(e)))]}_handle(e){0!==(e=Ka(e)).length&&this._client.api.interactions.upload(e,{merge:!0})}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[]}}function gd(e){return async({group:t,name:s,payload:n,options:o})=>{if(t===Ha.ASK)switch(s){case Va.QUESTIONS:return e.api.ask.questions(n,o);case Va.SEARCH:return e.api.ask.search(n,o)}return e.api[t]._run(s,n,o)}}class yd{constructor({role:e,workflow:t,...s}={}){Xa(this,{role:e,workflow:t,options:s}),this._unsubscribes=[],this._rendered=new WeakMap,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}async render(e,t,s={}){this._syncElement(e);const n=this._rendered.get(e),o=pl(!1);t=this._preprocess({state:t,rendered:n},{skip:o.t})||t,this._updatePending(t,s),o.value||this._handleInput({state:t,rendered:n},s)}_syncElement(e){this._element!==e&&this._rendered.delete(this._element),this._element=e}_preprocess({state:e}){return e}_updatePending(e,t){this._pending=[Object.freeze(e),t]}_takePending(){const e=this._pending;return this._pending=void 0,e}_handleInput(){this._requestRaf()}_requestRaf(){this._requested||(this._requested=!0,al((e=>this._doRaf(e))))}_doRaf(e){this._requested&&(this._requested=!1,this._applyRender(e))}_applyRender(e,t={}){if(!this._pending)return;let[s,{notifyUpdate:n}]=this._takePending();s=Object.freeze({...s,timestamp:e});const o=this._rendered.get(this._element),i=pl([]),r=pl({});this._render(this._element,{state:s,rendered:o,timestamp:e},{notifyUpdate:i.args,writeToState:r.merge,...t}),s=Object.freeze({...s,...r.value}),this._rendered.set(this._element,s),n&&n(...i.value),this._afterRender(this._element,s)}_render(){throw new Error("Unimplemented")}_afterRender(){}destroy(){for(const e of this._unsubscribes)e();this._unsubscribes=[],this._view=void 0,this._element=void 0,this._notifyUpdate=void 0,this._pending=void 0}}function bd(...e){return e.reduce(((e,t)=>(e[t]=function(e){return()=>{throw new Error(`Template '${e}' is not implemented.`)}}(t),e)),{})}function vd(e,t,s,n){const{templates:o}=e,[i,r]=$d(e,s);return[i,(o.indexBlock||Pd)(e,s,n),(o.infoBlock||o.articleInfoBlock||Sd)(e,s,n),r].join("")}function wd(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__item-info-container">${[(o.titleBlock||Cd)(e,t,s),(o.descriptionBlock||Ad)(e,t,s),(o.priceBlock||Nd)(e,t,s),(o.ctaBlock||Ud)(e,t,s)].join("")}</div>`}function kd(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__item-info-container">${[(o.titleBlock||Cd)(e,t,s),(o.descriptionBlock||Ad)(e,t,s),(o.priceBlock||Nd)(e,t,s)].join("")}</div>`}function Ed(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__item-info-container">${[(o.titleBlock||Cd)(e,t,s),(o.dateBlock||Td)(e,t,s),(o.descriptionBlock||Ad)(e,t,s),(o.ctaBlock||Ud)(e,t,s)].join("")}</div>`}function Sd(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__item-info-container">${[(o.titleBlock||Cd)(e,t,s),(o.authorsAndDateBlock||Rd)(e,t,s)].join("")}</div>`}function xd(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__item-info-container">${[(o.titleBlock||Cd)(e,t,s)].join("")}</div>`}function Cd({className:e},{title:t,_title_with_markups:s}){const n=Fd(s)||cl(t);return n?`<div class="${e}__item-title">${n}</div>`:""}function Od({className:e},{brand:t,brand_logo:s}){if(!t&&!s)return"";return`<div class="${e}__item-brand-container">${s?`<img class="${e}__item-brand-logo" src="${s}"${t?` alt="${t}"`:""}>`:`<div class="${e}__item-brand">${t}</div>`}</div>`}function Ad({className:e},{snippet:t,description:s}){return t?`<div class="${e}__item-snippet">${Fd(t)}</div>`:s?`<div class="${e}__item-desc">${cl(s)}</div>`:""}function Td({className:e,templates:t},{created_at:s,updated_at:n,published_at:o}){const i=o||s||n;return i?`<div class="${e}__item-date">${Dd(i,t.date)}</div>`:""}function Id({className:e},{authors:t}){return t&&Array.isArray(t)&&t.length?`<div class="${e}__item-authors">${t.join(", ")}</div>`:""}function Rd(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__item-authors-and-date-container">${[(o.authorsBlock||Id)(e,t,s),(o.dateBlock||Td)(e,t,s)].join("")}</div>`}function Nd(e,t){const{className:s,templates:n}=e,{sale_price:o,original_price:i,currency:r="USD"}=t,a=o||i;if(!a)return"";const l=void 0!==i&&void 0!==o&&o<i,c=t.discount_rate_percent||(l?Math.floor(100*(1-o/i)):void 0);let u="";if(l&&(u+=`<span class="${s}__item-original-price miso-price" data-currency="${r}">${i}</span><br>`),u+=`<span class="${s}__item-price miso-price" data-currency="${r}">${a}</span>`,c){u+=` <span class="${s}__item-discount-rate">${(n.discountRateText||Ld)(e,{...t,discount_rate_percent:c})}</span>`}return`<div class="${s}__item-price-container">${u}</div>`}function Ld(e,{discount_rate_percent:t}){return`(${t}% off)`}function qd(e,t,s={}){const{className:n,templates:o}=e,{cover_image:i,image_src:r,image_alt:a}=t;if(!i&&!r)return"";const l=r?"image":"cover-image";return`<div class="${n}__item-${l}-container">${"image"===l?`<img class="${n}__item-${l}" src="${r}"${a?` alt="${a}"`:""}>`:`<img class="${n}__item-${l}" src="${i}">`}${"cover-image"===l&&s.brand?(o.brandBlock||Od)(e,t,s):""}</div>`}function Pd({className:e},t,{index:s}){return`<div class="${e}__item-index-container"><span class="${e}__item-index miso-citation-index" data-index="${s+1}"></span></div>`}function Ud(e,t,s){const{className:n,templates:o}=e,i=Bd.asFunction(o.cta)(e,t,s);return i?`<div class="${n}__item-cta-container">${i}</div>`:""}function $d({className:e,options:t={}},{product_id:s,url:n},{classSuffix:o="item-body",role:i="item",...r}={}){const a=!1!==r.link&&n?"a":"div";return[`<${a} class="${e}__${o}" ${i?`data-role="${i}"`:""} ${s?`data-miso-product-id="${s}"`:""} ${!1!==r.link&&n?`href="${n}" ${function(e={}){const{target:t="_blank",rel:s="noopener",open:n=!0}=e;let o="";n&&(t&&(o+=` target="${t}"`),s&&(o+=` rel="${s}"`));return o}(t.link)}`:""}>`,`</${a}>`]}const jd=Object.freeze({locale:"en-US",year:"numeric",month:"short",day:"numeric"}),Md="en-US";function Dd(e,t=jd){switch(typeof t){case"function":return t(e);case"string":return new Date(e).toLocaleDateString(t);case"object":return new Date(e).toLocaleDateString(t.locale||jd.locale,t);default:throw new Error(`Invalid date format: ${t}`)}}function Fd(e){return e&&e.replace(/<\/mark>\s+<mark>/g,"</mark>&nbsp;<mark>")}const Bd=Object.freeze({tagPair:$d,formatDate:Dd,formatNumber:function(e,t=Md){switch(typeof t){case"function":return t(e);case"string":return new Intl.NumberFormat(t).format(e);case"object":return new Intl.NumberFormat(t.locale||Md.locale,t).format(e);default:throw new Error(`Invalid number format: ${t}`)}},formatHtmlWithMarkup:Fd,escapeHtml:cl,asFunction:function(e=""){return"function"==typeof e?e:()=>e}});class zd extends yd{constructor({className:e,templates:t,...s}={}){super(s),Xa(this,{className:e,templates:{...bd("root"),...t,helpers:Bd}})}_preprocess({state:e}){const t=this.templates.root(this,e);return{...e,html:t}}_render(e,{state:t}){e.innerHTML=t.html}}class Qd extends HTMLElement{static get tagName(){return"miso-banner"}async connectedCallback(){Qd.MisoClient.ui.layouts.create("banner").render(this)}}class Hd{constructor(){this._entries=new WeakMap}isTracked(e){return this._entries.has(e)}async track(e,t={}){if(!t)return!1;if(this._entries.get(e))return!1;const s=new AbortController,{signal:n}=s;this._entries.set(e,{ac:s});let o=!1;try{await ll(e,{...t,signal:n}),o=!0}catch(pv){if("AbortError"!==pv.name)throw pv}finally{this._entries.delete(e)}return o}untrack(e){const t=this._entries.get(e);t&&(t.ac.abort(),this._entries.delete(e))}}class Vd extends yd{static get type(){return"container"}constructor({logo:e="auto",...t}={}){super({logo:e,...t}),this._impression=!1,this._viewables=new Hd}_syncElement(e){this._element!==e&&this._viewables.untrack(this._element),super._syncElement(e)}_render(e,t){this._syncBanner(e),this._syncStatus(e,t),this._trackInteractions(e,t)}_afterRender(e,t){this._trackInteractions(e,t)}_syncBanner(e){const t=Qd.tagName,s=this._shallRenderBanner(e),n=e.querySelector(t);s&&!n?e.insertAdjacentHTML("beforeend",`<${t} visible-when="ready"></${t}>`):!s&&n&&n.remove()}_shallRenderBanner(e){const{logo:t}=this.options,{logo:s}=e,n=void 0!==s&&"auto"!==s?s:t;return"auto"===n?e.components.some((({role:e})=>function(e){return e===Yc.PRODUCTS||e===Yc.ANSWER}(e))):!!n}_syncStatus(e,{state:t}){if(!e)return;const{status:s,ongoing:n,meta:{miso_id:o,empty:i=!1,unanswerable:r=!1}={}}=t,a=[s,i?iu.EMPTY:iu.NONEMPTY];s===iu.READY&&a.push(n?iu.ONGOING:iu.DONE),r&&a.push(iu.UNANSWERABLE),e.setAttribute("status",a.join(" ")),o?e.setAttribute("miso-id",o):e.removeAttribute("miso-id")}_trackInteractions(e,t){const{status:s}=t;s===iu.READY&&(this._trackImpression(),this._trackViewable(e))}_trackImpression(){const{impression:e}=this._view.tracker.options||{};e&&(this._impression||(this._impression=!0,this._view.tracker.impression()))}async _trackViewable(e){const{viewable:t}=this._view.tracker.options||{};t&&await this._viewables.track(e,t)&&this._view.tracker.viewable()}}const Wd=Object.freeze({root:function(e,t){const{className:s,templates:n}=e,{status:o,value:i}=t;return"erroneous"!==o?"":`<div class="${s}"><div class="${s}__message">${n.message(e,i)}</div></div>`},message:function(e,t){return`Error: ${t.message||t}`}});class Gd extends zd{static get type(){return"error"}static get defaultTemplates(){return Wd}constructor({className:e="miso-error",templates:t,...s}={}){super({className:e,templates:{...Wd,...t},...s})}}const Kd=Object.freeze({root:function(e){const{className:t,templates:s}=e;return`<div class="${t}"><div class="${t}__logo">${s.logo(e)}</div></div>`},logo:()=>'<svg viewBox="0 0 500 200"><path d="M131.1,39.4 C144.3,39.4 155,43.8 163.2,52.7 C171.3,61.3 175.2,72.9 175.2,87.6 L175.2,159.1 L140.4,159.1 L140.4,90.6 C140.4,78.7 134.6,71.5 123.7,71.5 C112.3,71.5 105.5,79.7 105.5,93.4 L105.5,159.1 L70.7,159.1 L70.7,90.6 C70.7,78.7 64.9,71.5 54,71.5 C42.6,71.5 35.8,79.7 35.8,93.4 L35.8,159.1 L1,159.1 L1,42.7 L35.8,42.7 L35.8,53.4 C42.1,44.1 52.6,39.4 67,39.4 C80.5,39.4 90.7,44.5 97.4,54.8 C104.6,44.5 115.8,39.4 131.1,39.4 Z M202,42.4 L238.4,42.4 L238.4,159.1 L202,159.1 Z M202,0 L238.4,0 L202,36.4 Z M302.6,76.6 C302.6,81.2 311.7,83.8 323,86.8 C339.2,90.3 360.5,98.7 360.3,124 C360.3,136.6 355.6,146.1 346.2,152.6 C336.8,158.9 325.3,162.1 311.5,162.1 C286.9,162.1 270,152.8 261.1,134.5 L291.6,117.3 C294.6,126.3 301.4,131 311.5,131 C319.9,131 324.2,128.7 324.2,123.8 C324.2,119.1 315,116.3 303.8,113.5 C287.6,109.1 266.5,101.2 266.5,77.5 C266.5,65.4 270.9,56.1 279.6,49.4 C288.5,42.6 299.5,39.4 312.4,39.4 C331.9,39.4 348.6,48.2 358.2,64.3 L328.2,80.3 C324.4,73.6 319.2,70.1 312.4,70.1 C305.9,70.1 302.6,72.2 302.6,76.6 Z M480.4,144.5 C468.4,156.3 453.7,162.1 436.3,162.1 C419,162.1 404.2,156.3 392.2,144.5 C380.3,132.6 374.2,118 374.2,100.8 C374.2,83.6 380.3,69.1 392.2,57.3 C404.2,45.4 419,39.4 436.3,39.4 C453.7,39.4 468.4,45.4 480.4,57.3 C492.4,69.1 498.5,83.6 498.5,100.8 C498.5,118 492.4,132.6 480.4,144.5 Z M417.1,120.5 C422.2,125.6 428.6,128.2 436.3,128.2 C444.1,128.2 450.4,125.6 455.5,120.5 C460.7,115.4 463.3,108.9 463.3,100.8 C463.3,92.6 460.7,86.1 455.5,81 C450.4,75.9 444.1,73.3 436.3,73.3 C428.6,73.3 422.2,75.9 417.1,81 C411.9,86.1 409.3,92.6 409.3,100.8 C409.3,108.9 411.9,115.4 417.1,120.5 Z" /></svg>'});function Yd(e,t){const s=[];for(const n of t.entries){const t=e.e2b.get(n.element);t&&t.key===n.key||s.push(n)}return s}class Zd{constructor(){this._k2b=new Map,this._e2b=new Map,this._entries=[]}get entries(){return[...this._entries]}get(e){return this._e2b.get(e)||void 0}find(e){return this._k2b.get(e)||void 0}update(e,t,s){const n=function(e,t,s){const n=new Map,o=new Map,i=[];for(let r=0;r<e.length;r++){const a=e[r],l=s[r],c=t[r],u=Object.freeze({index:r,key:a,value:c,element:l});n.set(a,u),o.set(l,u),i.push(u)}return{k2b:n,e2b:o,entries:i}}(e,t,s),o={k2b:this._k2b,e2b:this._e2b,entries:this._entries},i=Yd(o,n),r=Yd(n,o);return this._k2b=n.k2b,this._e2b=n.e2b,this._entries=n.entries,{bounds:i,unbounds:r}}clear(){const e=this._entries;return this._k2b=new Map,this._e2b=new Map,this._entries=[],{bounds:[],unbounds:e}}}function Jd(e){xl(e,Xd.prototype)}class Xd{_initTrackable(){this._bindings=new Zd,this._viewables=new Hd}_syncBindings(e,t){const s=this._getItems(t)||[],n=s.map((e=>this._getItemKey(e))),o=this._getItemElements(e),{bounds:i,unbounds:r}=this._bindings.update(n,s,o);this._onBindingsUpdate(i,r)}_clearBindings(){const{bounds:e,unbounds:t}=this._bindings.clear();this._onBindingsUpdate(e,t)}_getItemKey(e){return e.product_id||e.text||e.id||e}_getItems(e){throw new Error("Not implemented.")}_getItemElements(e){throw new Error("Not implemented.")}_onBindingsUpdate(e,t){this._trackImpressions(e),this._untrackViewables(t),this._trackViewables(e)}_trackImpressions(e){if(0===e.length)return;const{impression:t}=this._view.tracker.options||{};t&&this._view.tracker.impression(e.map((({value:e})=>e)))}_untrackViewables(e){for(const{element:t}of e)this._viewables.untrack(t)}_trackViewables(e){if(0===e.length)return;const{viewable:t}=this._view.tracker.options||{};if(t)for(const{value:s,element:n}of e)(async()=>{await this._viewables.track(n,t)&&this._view.tracker.viewable([s])})()}_trackClick(e,t){const{click:s}=this._view.tracker.options||{};(function(e={},t){return!!e&&("function"==typeof e.validate?e.validate(t):!!e.lenient||!ld(t)&&0===t.button&&!t.defaultPrevented&&!!il(t.target,(e=>"A"===e.tagName&&e.href||void 0)))})(s,e)&&(cd(e),this._view.tracker.click([t.value]))}_destroyTrackable(){const{unbounds:e}=this._bindings.clear();this._untrackViewables(e)}}class eh{_initTriggerable(){this._trigger=void 0}_syncTrigger(e,t){if(!this.options.infiniteScroll)return;const s=this._view.workflowOptions.pagination;s.active&&"infiniteScroll"===s.mode&&(t.status===iu.READY?this._trackTrigger(e):this._untrackTrigger())}async _trackTrigger(e){if(this._trigger)return;const t=e.querySelector('[data-role="trigger"]');if(!t)return;const s=new AbortController;this._trigger=Object.freeze({element:t,ac:s});let n=!1;try{await ll(t,{area:1,duration:0,signal:s.signal}),n=!0}catch(pv){if("AbortError"!==pv.name)throw pv}finally{this._trigger=void 0}n&&this._onTrigger()}_onTrigger(){this._view.hub.trigger("more")}_untrackTrigger(){this._trigger&&(this._trigger.ac&&this._trigger.ac.abort(),this._trigger=void 0)}_destroyTriggerable(){this._untrackTrigger()}}const th=Object.freeze({product:function(e,t,s,n){const{templates:o}=e,[i,r]=$d(e,s);return[i,(o.imageBlock||qd)(e,s,n),(o.infoBlock||o.productInfoBlock||kd)(e,s,n),r].join("")},article:function(e,t,s,n){const{templates:o}=e,[i,r]=$d(e,s);return[i,(o.imageBlock||qd)(e,s,n),(o.infoBlock||o.articleInfoBlock||Ed)(e,s,n),(o.indexBlock||Pd)(e,s,n),r].join("")},compactArticle:vd,image:function(e,t,s,n){const{templates:o}=e,[i,r]=$d(e,s);return[i,(o.imageBlock||qd)(e,s,n),(o.infoBlock||o.imageInfoBlock||xd)(e,s,n),r].join("")},question:function(e,t,s){const[n,o]=$d(e,s);return`${n}${s.value||s.text||s}${o}`},root:function(e,t){const{className:s,role:n,templates:o,options:i}=e,{status:r}=t;return`<div class="${s} ${r}"${n?` data-role="${n}"`:""}${i.itemType?` data-item-type="${i.itemType}"`:""}>${r===iu.READY?o[r](e,t):""}${o.trigger(e,t)}${o.loading(e,t)}</div>`},[iu.READY]:function(e,t){const{templates:s}=e,n=e._getItems(t)||[];return n.length>0||t.ongoing?s.body(e,t,n):s.empty(e,t)},empty:()=>"",body:function(e,t,s){return e.templates.list(e,t,s)},list:function(e,t,s){const{className:n,templates:o,options:i}=e,r=o.ordered?"ol":"ul";return`<${r} class="${n}__list" data-role="list"${i.itemType?` data-item-type="${i.itemType}"`:""}>${o.items(e,t,s)}</${r}>`},ordered:!1,items:function(e,t,s,{offset:n=0}={}){const{templates:o}=e;let i=n;return s.map((s=>o.item(e,t,s,i++))).join("")},item:function(e,t,s,n){const{className:o,templates:i,options:r}=e,{itemType:a}=r;return`<li class="${o}__item">${i[a](e,t,s,{index:n})}</li>`},productInfoBlock:kd,articleInfoBlock:Ed,compactArticleInfoBlock:Sd,imageInfoBlock:xd,brandBlock:Od,titleBlock:Cd,descriptionBlock:Ad,dateBlock:Td,authorsBlock:Id,authorsAndDateBlock:Rd,priceBlock:Nd,discountRateText:Ld,ctaBlock:Ud,cta:function(e,t,s){const{templates:n}=e,{url:o}=t;if(!o)return"";const[i,r]=$d(e,{url:o},{classSuffix:"item-cta",role:"cta"}),a=Bd.asFunction(n.ctaText)(e,t,s);return a?`${i}${a}${r}`:""},imageBlock:qd,indexBlock:Pd,trigger:function(e,t){const{className:s}=e;return`<div class="${s}__trigger" data-role="trigger"></div>`},loading:function(){return'<div class="miso-loading" aria-label="Loading" data-role="loading"></div>'}});class sh extends zd{static get defaultTemplates(){return th}constructor({templates:e,itemType:t="product",...s}){super({templates:{...th,...e},itemType:t,...s}),this._initTrackable(),this._initTriggerable()}initialize(e){this._unsubscribes.push(e.proxyElement.on("click",this._onClick.bind(this)))}_preprocess({state:e,rendered:t}){const s=this._shallRenderIncrementally(e,t),n=this._html(e,t,s);return{...e,incremental:s,html:n}}_shallRenderIncrementally(e,t){return this.options.incremental&&t&&t.value&&t.value.length>0&&e.value&&e.value.length>=t.value.length&&e.session&&t.session&&e.session.id===t.session.id}_html(e,t,s){if(s){const s=t.value.length,n=(this._getItems(e)||[]).slice(s);return n.length>0?this.templates.items(this,e,n,{offset:s}):""}return this.templates.root(this,e)}_render(e,{state:t},{notifyUpdate:s}){const{incremental:n,html:o}=t;if(n)if(o){this._getListElement(e).insertAdjacentHTML("beforeend",o)}else s(!1);else e.innerHTML=o}_afterRender(e,t){this._syncBindings(e,t),this._syncTrigger(e,t)}_unrender(){this._clearBindings(),this._untrackTrigger()}_getItems(e){return e.value&&(e.value.products||e.value)}_getListElement(e){return e.querySelector('[data-role="list"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="item"]')):[]}_onClick(e){const t=e.target.closest('[data-role="item"]');if(!t)return;const s=this._bindings.get(t);s&&(this._trackClick(e,s),this._emitClickEvent(e,s))}_emitClickEvent(e,t){const{session:s}=this._view._state,{value:n,element:o}=t;this._view._events.emit("click",{session:s,value:n,element:o,domEvent:e})}destroy(){this._destroyTrackable(),this._destroyTriggerable(),this._view=void 0,super.destroy()}}Jd(sh.prototype),xl(sh.prototype,eh.prototype);const nh="miso-list";class oh extends sh{static get type(){return"list"}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return nh}constructor({className:e=nh,...t}={}){super({className:e,...t})}}const ih="miso-horizontal";class rh extends sh{static get type(){return"horizontal"}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return ih}constructor({className:e=ih,...t}={}){super({className:e,...t})}}const ah="miso-cards";function lh(e,t,s){void 0===s?e.removeAttribute(t):e.setAttribute(t,s)}function ch(e,t,s){s?e.classList.add(t):e.classList.remove(t)}function uh(e){if("number"==typeof e)return e;const[t,s]=function(e){const t=e.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*)$/);if(!t)throw new Error(`Invalid length: ${e}`);const s=parseFloat(t[1]),n=t[2]||"";return[s,n]}(e);switch(s){case"":case"px":return t;case"rem":return function(e=1){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}(t);default:throw new Error(`Unsupported unit: ${s}`)}}function dh(e){return void 0===e||e instanceof hh?e:new hh(e)}class hh{constructor(e){switch(this._width=NaN,this._height=NaN,typeof e){case"number":this._width=e,this._height=1;break;case"object":Array.isArray(e)&&(this._width=parseFloat(e[0]),this._height=parseFloat(e[1]));break;case"string":const t=e.indexOf("/");t<0?(this._width=parseFloat(e),this._height=1):(this._width=parseFloat(e.slice(0,t).trim()),this._height=parseFloat(e.slice(t+1).trim()))}if(NaN===this._width||NaN===this._height)throw new Error(`Invalid aspect ratio value: ${e}`)}get width(){return this._width}get height(){return this._height}get floatValue(){return this._width/this._height}scaleBy(e){return e=dh(e),dh([e._width*this._width,e._height*this._height])}toString(){return 1===this._height?`${this._width}`:`${this._width} / ${this._height}`}}class ph{_initSwipeable(){this._swipeableContext={itemCount:void 0,itemIndex:void 0,displayedCount:void 0,displayedIndex:void 0,displayEventIndex:void 0}}get itemIndex(){return this._swipeableContext.itemIndex}set itemIndex(e){const t=this._swipeableContext;void 0!==t.itemCount&&(e<0?e=t.itemCount-1:e>=t.itemCount&&(e=0),t.itemIndex=e,al((()=>this._syncDisplayedSwipeableItemIndex())))}next(){void 0!==this._swipeableContext.itemCount&&this.itemIndex++}previous(){void 0!==this._swipeableContext.itemCount&&this.itemIndex--}_renderSwipeable(e,t,s){this._syncSwipeableItemCount(t),this._syncDisplayedSwipeableItemCount(),this._syncDisplayedSwipeableItemIndex()}_afterRenderSwipeable(){this._emitSwipeableDisplayEvent()}_syncSwipeableItemCount({state:e}={}){const t=this._swipeableContext,s=this._getItems(e),n=t.itemCount,o=t.itemCount=s?s.length:void 0;o!==n&&(void 0===o?t.itemIndex=void 0:void 0===n&&(t.itemIndex=0))}_syncDisplayedSwipeableItemCount(){const e=this._swipeableContext,{itemCount:t}=e;if(t===e.displayedCount)return;let{element:s}=this._view;s=s.firstElementChild,s&&(lh(s,"data-item-count",t),e.displayedCount=t)}_syncDisplayedSwipeableItemIndex(){const e=this._swipeableContext,{itemIndex:t}=e;t!==e.displayedIndex&&(e.displayedIndex=t,this._syncSwipeableListIndex(t),this._syncSwipeableIndicatorIndex(t))}_syncSwipeableListIndex(e){const{element:t}=this._view,s=t&&this._getListElement(t);s&&(s.style.left=100*-e+"%")}_syncSwipeableIndicatorIndex(e){const{element:t}=this._view,s=t&&this._getSwipeableIndicatorElement(t);if(!s)return;let n=0;for(const o of s.children)ch(o,"active",n===e),n++}_getSwipeableIndicatorElement(e){return e.querySelector('[data-role="index-indicator"]')}_emitSwipeableDisplayEvent(){const e=this._swipeableContext,t=e.displayedIndex;e.displayEventIndex!==t&&(e.displayEventIndex=t,this._view._events.emit("display",{index:t}))}_onClickSwipeable(e){const{target:t}=e;t.closest('[data-role="previous"]')&&(e.preventDefault(),this.previous()),t.closest('[data-role="next"]')&&(e.preventDefault(),this.next())}}const fh="miso-ui-icon",_h=`${fh}-svg-${"1.12.5".replaceAll(".","_")}`,mh={SEND:"send",SEARCH:"search",TRIANGLE:"triangle",TRIANGLE_EQ:"triangle-eq",CHEVRON:"chevron",CHEVRON_NEGATIVE:"chevron-negative",BULB:"bulb"},gh=`<symbol id="${fh}-${mh.SEND}" viewBox="0 0 32 32"><path fill="currentColor" d="M11.499,19.173l5.801,-5.849c0.389,-0.392 1.022,-0.394 1.414,-0.006c0.392,0.389 0.395,1.022 0.006,1.414l-5.798,5.847l5.306,8.002c0.207,0.313 0.572,0.483 0.945,0.441c0.373,-0.042 0.691,-0.289 0.824,-0.64l9.024,-23.904c0.138,-0.366 0.05,-0.78 -0.226,-1.058c-0.276,-0.278 -0.689,-0.369 -1.057,-0.233l-24.004,8.892c-0.353,0.13 -0.602,0.448 -0.646,0.821c-0.044,0.373 0.125,0.74 0.438,0.948l7.973,5.325Z"/></symbol>`,yh=`<symbol id="${fh}-${mh.SEARCH}" viewBox="0 0 24 24"><path fill="currentColor" d="M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"/></symbol>`,bh=`<symbol id="${fh}-${mh.TRIANGLE}" viewBox="-5 -5 105 105"><path d="${function(e){const t=100,s=e*Math.tan(3*Math.PI/8),n=s*Math.sin(Math.PI/4);return`M${e} 0L${t-s} 0A${e} ${e} 0 0 1 ${t-n} ${n}L${n} ${t-n}A${e} ${e} 0 0 1 0 ${t-s}L0 ${e}Z`}(5)}"/></symbol>`,vh=`<svg id="${_h}" style="display:none;">${[gh,yh,bh,`<symbol id="${fh}-${mh.TRIANGLE_EQ}" viewBox="-100 -100 200 200"><path d="M12.99 -77.5A15 15,0,0,0,-12.99 -77.5L-73.61 27.5A15 15,0,0,0,-60.62 50L60.62 50A15 15,0,0,0,73.61 27.5L12.99 -77.5Z"/></symbol>`,`<symbol id="${fh}-${mh.CHEVRON}" viewBox="-100 -100 200 200"><path d="M10.61 -43.94A15 15,0,0,0,-10.61 -43.94L-60.61 6.06A15 15,0,0,0,-39.39 27.27L0 -12.12L39.39 27.27A15 15,0,0,0,60.61 6.06L10.61 -43.94Z"/></symbol>`,`<symbol id="${fh}-${mh.CHEVRON_NEGATIVE}" viewBox="-100 -100 200 200"><path d="M100 100V-200H-200V200H200ZM-10.61 -43.94A15 15,0,0,1,10.61 -43.94L60.61 6.06A15 15,0,0,1,39.39 27.27L0 -12.12L-39.39 27.27A15 15,0,0,1,-60.61 6.06L-10.61 -43.94Z"/></symbol>`,`<symbol id="${fh}-${mh.BULB}" viewBox="0 0 16 16"><path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a2 2 0 0 0-.453-.618A5.98 5.98 0 0 1 2 6m6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1"/></symbol>`].join("")}</svg>`;let wh=!1;function kh(e){return`<svg class="miso-ui-icon miso-ui-icon-${e}"><use href="#${fh}-${e}"></use></svg>`}wh||document.head.querySelector(`#${_h}`)||(wh=!0,document.head.insertAdjacentHTML("beforeend",vh));const Eh=new Set(Object.values(mh));const Sh=kh(mh.TRIANGLE),xh=kh(mh.CHEVRON),Ch=kh(mh.CHEVRON_NEGATIVE),Oh=kh(mh.BULB),Ah="miso-carousel",Th=Object.freeze({body:function(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__viewport"><div class="${n}__viewport-inner">${o.list(e,t,s)}</div></div>${o.controls(e,t,s)}`},controls:function(e,t,s){const{templates:n}=e;return`${n.controlContainer(e,t,"previous")}${n.controlContainer(e,t,"next")}${n.indexIndicator(e,t,s)}`},controlContainer:function(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__control-container-${s}">${o.control(e,t,s)}</div>`},control:function(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__control-${s}" data-role="${s}">${o.controlIcon(e,t,s)}</div>`},controlIcon:function(e){return"image"===e.options.itemType?Ch:xh},indexIndicator:function(e,t,s){const{className:n,templates:o}=e;return`<ul class="${n}__index-indicator" data-role="index-indicator">${s.map((s=>`<li class="${n}__index-indicator-item">${o.indexIndicatorItem(e,t,s)}</li>`)).join("")}</ul>`},indexIndicatorItem:()=>"",trigger:()=>""}),Ih=Object.freeze({...sh.defaultTemplates,...Th});class Rh extends sh{static get type(){return"carousel"}static get defaultTemplates(){return Ih}static get defaultClassName(){return Ah}constructor({className:e=Ah,templates:t,...s}={}){super({className:e,templates:{...Th,...t},...s}),this._initSwipeable()}_render(e,t,s){super._render(e,t,s),this._renderSwipeable(e,t,s)}_afterRender(e,t){super._afterRender(e,t),this._afterRenderSwipeable(e,t)}_onClick(e){this._onClickSwipeable(e),super._onClick(e)}}!function(e){xl(e,ph.prototype)}(Rh.prototype);const Nh="16rem",Lh=Object.freeze({...sh.defaultTemplates,item:function(e,t,s,n){const{className:o,templates:i,options:r}=e,{itemType:a}=r,l=i[a](e,t,s,{index:n});return`<li class="${o}__item${s._size?` ${o}__item-${s._size}`:""}">${l}</li>`}}),qh="miso-gallery";class Ph extends sh{static get type(){return"gallery"}static get defaultTemplates(){return Lh}static get defaultClassName(){return qh}constructor({className:e=qh,templates:t,...s}={}){super({className:e,templates:{...Lh,...t},...s}),this._galleryContext={itemAspectRatio:void 0,itemCount:void 0,columnCount:void 0}}syncSize(){const{element:e}=this._view,t=e&&this._getListElement(e);t&&(this._syncListAspectRatio(t),this._syncItemSizes(t))}_preprocess({state:e,rendered:t}){const s=this._shallRenderIncrementally(e,t),n=s?void 0:this._bodyHtml(e),o=this._itemsHtml(e,t);return{...e,...Ya({incremental:s,bodyHtml:n,itemsHtml:o})}}_bodyHtml(e){return this.templates.root(this,{...e,value:[]})}_itemsHtml(e,t){const s=t&&t.value&&t.value.length||0,n=(this._getItems(e)||[]).slice(s);return n.length>0?this.templates.items(this,e,n,{offset:s}):""}_render(e,t,s){this._syncItemCount(t),this._syncCssVariables();const n=this._renderListElement(e,t,s);n&&(this._syncListAspectRatio(n),this._renderItems(n,t,s))}_renderListElement(e,{state:t}){const{incremental:s,bodyHtml:n}=t;return s||(e.innerHTML=n),this._getListElement(e)}_renderItems(e,t){t.state.incremental?this._appendItems(e,t):this._updateItems(e,t)}_updateItems(e,{state:t}){const{itemSizes:s}=this._galleryContext,n=this._writeItemSizes(this._getItems(t)||[],s);e.innerHTML=this.templates.items(this,t,n)}_appendItems(e,{state:t}){const{itemSizes:s}=this._galleryContext;this._syncItemSizes(e);const n=e.children.length,o=this._writeItemSizes((this._getItems(t)||[]).slice(n),s,n);e.insertAdjacentHTML("beforeend",this.templates.items(this,t,o,{offset:n}))}_writeItemSizes(e,[t=0,s=0]=[],n=0){let o=0;n>0&&(o=Math.min(n,t),n-=o,t-=o),n>0&&(o=Math.min(n,s),n-=o,s-=o);const i=[];for(const r of e){let e="small";t>0?(e="large",t--):s>0&&(e="medium",s--),i.push({...r,_size:e})}return i}_syncCssVariables(){const e=this._galleryContext;let{itemAspectRatio:t=1}=this.options;t=e.itemAspectRatio=dh(t);const{element:s}=this._view;s&&(s.style.setProperty("--miso-gallery-item-1x1-aspect-ratio",`${t}`),s.style.setProperty("--miso-gallery-item-1x2-aspect-ratio",`${t.scaleBy([1,2])}`))}_syncListAspectRatio(e){const t=this._galleryContext,{itemCount:s,itemAspectRatio:n}=t,{height:o=Nh}=this.options,i=uh(o),r=e.clientWidth;if(0===r)return t.columnCount=void 0,void(t.itemSizes=void 0);const a=t.columnCount=Math.round(r*n.width*2/(i*n.height));t.itemSizes=function(e,t){const s=2*t;let n=Math.max(s-e,0),o=e;const i=Math.min(Math.floor(n/3),o);o-=i,n-=3*i;const r=Math.min(n,o);return o-=r,n-=r,[i,r,o]}(s,a),e.style.aspectRatio=`${a} / 2`,e.style.height=s>0?"auto":"0"}_syncItemCount({state:e}={}){const t=this._getItems(e);this._galleryContext.itemCount=t?t.length:void 0}_syncItemSizes(e){const{itemSizes:t=[]}=this._galleryContext;let[s=0,n=0]=t;const{className:o}=this;for(const i of e.children){let e=!1,t=!1;s>0?(e=!0,s--):n>0&&(t=!0,n--),ch(i,`${o}__item-large`,e),ch(i,`${o}__item-medium`,t),ch(i,`${o}__item-small`,!e&&!t)}}}const Uh="miso-search-box";const $h=Object.freeze({root:function(e){const{className:t,templates:s,role:n,options:o,autocomplete:i}=e,{placeholder:r}=o;return`\n<div class="${t}" ${n?`data-role="${n}"`:""}>\n  <div class="${t}__input-group">\n    <input class="${t}__input" type="text" data-role="input" ${r?`placeholder="${r}"`:""}>\n    <button class="${t}__button" type="submit" data-role="submit">${s.buttonContent(e)}</button>\n  </div>\n  <div class="${i.className}" data-role="autocomplete"></div>\n</div>`.trim()},buttonContent:function(e){const{templates:t,options:s}=e;if(s.buttonText)return s.buttonText;const{buttonText:n,buttonIcon:o}=t;var i;return("function"==typeof n?n(e):`${n}`)+("function"==typeof o?o(e):(i=o,(Eh.has(i)?kh(i):"")||`${o}`))},buttonText:"",buttonIcon:"search",completions:function(e,t){const{templates:s,workflow:n,autocomplete:o}=e;e={templates:s,workflow:n,...o};const i=[],r=[];for(const a of t)(a.product?i:r).push(a);return s.queries(e,r)+(r.length>0&&i.length>0?"<hr>":"")+s.products(e,i)},completionList:function(e,t,s){const{className:n,templates:o}=e;return`<ul class="${n}__${t}-list" data-role="${t}-list">${s.map((s=>o.completionItem(e,t,s))).join("")}</ul>`},completionItem:function(e,t,s){const{className:n,templates:o}=e;return`\n<li class="${n}__${t}-item" data-role="${t}-item" data-index="${s._index}" tabindex="0">\n  ${o[t](e,s)}\n</li>`.trim()},queries:function(e,t){const{templates:s}=e;return s.completionList(e,"query",t)},products:function(e,t){const{templates:s}=e;return s.completionList(e,"product",t)},query:function(e,{text:t,text_with_inverted_markups:s}={}){return s||cl(t)},product:function(e,{product:t}){const{templates:s}=e,[n,o]=s.helpers.tagPair(e,t,{role:!1});return[n,s.imageBlock(e,t),s.productInfoBlock(e,t),o].join("")},imageBlock:qd,productInfoBlock:kd}),jh=Object.freeze({className:"miso-autocomplete",debounce:300});class Mh extends zd{static get type(){return"search-box"}static get defaultTemplates(){return $h}static get defaultClassName(){return Uh}constructor({className:e=Uh,templates:t,autocomplete:s,...n}={}){super({className:e,templates:{...$h,...t},...n}),Xa(this,{autocomplete:{...jh,...s}}),this._contexts=new WeakMap,this._prevInput=void 0,this._debounce=kl(this.autocomplete.debounce)}initialize(e){const{proxyElement:t,hub:s}=e;this._unsubscribes=[...this._unsubscribes,t.on("input",(e=>this._syncInput(e))),t.on("keydown",(e=>this._handleKeyDown(e))),t.on("click",(e=>this._handleClick(e))),t.on("focusin",(e=>this._handleFocusIn(e))),t.on("focusout",(e=>this._handleFocusOut(e))),s.on("completions",(()=>e.refresh({force:!0})))]}focus(){this._element?this._context().focus():this._focusRequested=!0}open(){this._element.classList.add("open")}close(){this._element.classList.remove("open")}set value(e){this._element?this._context().value=e:this._valueRequested=e}_preprocess({state:e}){return e=super._preprocess({state:e}),{...e,completions:this._view.hub.states.completions}}_render(e,t,s){0===e.childElementCount&&super._render(e,t,s),this._updateCompletions(e,t,s)}_afterRender(e,t){this._fullfillFocusRequest(e),this._fullfillValueRequest(e)}_updateCompletions(e,{state:t,rendered:s},{writeToState:n}){if(!t.completions)return;const{status:o=iu.INITIAL,session:i,value:r}=t.completions,{index:a}=i;if(s&&s.completions.index===a&&s.completions.status===o)return;const l=this._context(e),{autocompleteElement:c}=l;if(!c)return;const u=l.trackItems(r);ch(e,"nonempty",u.length>0),c.setAttribute("data-status",o),c.innerHTML=this.templates.completions(this,u),n({completions:{index:a,status:o}})}_fullfillFocusRequest(e){e&&this._focusRequested&&(this._focusRequested=!1,this._context(e).focus())}_fullfillValueRequest(e){e&&this._valueRequested&&(this._context(e).value=this._valueRequested,this._valueRequested=void 0)}_context(e){if(!(e=e||this._view.element))return Dh.empty();let t=this._contexts.get(e);return t||this._contexts.set(e,t=new Dh(e)),t}_syncInput(){const{inputElement:e}=this._context();if(!e)return;const t=e.value.trim();if(this._prevInput===t)return;this._prevInput=t;const s=this;this._debounce((()=>s._view.hub.update("input",{value:t})))}_handleFocusIn({target:e}){this._element&&e.matches('[data-role="input"]')&&(this._syncInput(),this.open())}_handleFocusOut({relatedTarget:e}){this._element&&(e&&il(e,(e=>e===this._element||void 0))||this.close())}_handleKeyDown({key:e,target:t,isComposing:s}){!s&&"Enter"===e&&t.matches('[data-role="input"]')&&(this._submit(t.value),t.blur())}_handleClick(e){const{target:t}=e,{inputElement:s}=this._context();for(let n=t;n&&n!==this._element;n=n.parentElement){if(n.matches('[data-role="submit"]')||n.matches('[data-role="button"]')||n.matches('[type="submit"]'))return void(s&&(s.blur(),this._submit(s.value)));if(n.matches('[data-role="query-item"]')){const t=n.getAttribute("data-index"),o=this._context().data.get(parseInt(t)),i=o&&o.text;return i&&(s&&(s.value=i),this._view._events.emit("select",Object.freeze({value:o,index:t,domEvent:e})),e.defaultPrevented||this._submit(i)),void this.close()}if(n.matches('[data-role="product-item"]'))return void this._view._events.emit("select",Object.freeze({value:item,index:index,domEvent:e}))}}async _submit(e){e&&e.trim()&&(this.close(),this._view.hub.update("query",{q:e}),this._trackSubmit(e))}_trackSubmit(e){const{[eu.SUBMIT]:t}=this._view.tracker.options||{};t&&this._view.tracker.submit({value:e})}}class Dh{static empty(){return Dh._empty||(Dh._empty=new Dh)}constructor(e){this._element=e,this._cache={},this._data=new Map}get inputElement(){return this._get("input")}get autocompleteElement(){return this._get("autocomplete")}get data(){return this._data}trackItems(e){let t=0;const s=this._data=new Map,n=[];for(const o in e)for(const i of e[o])i.product&&!i.product.url||(i._index=t,i._field=o,s.set(t,i),n.push(i),t++);return n}focus(){if(!this._element)return;const{inputElement:e}=this;e&&e.focus()}set value(e){if(!this._element)return;const{inputElement:t}=this;t&&(t.value=e)}_get(e){return this._element?this._cache[e]||(this._cache[e]=this._element.querySelector(`[data-role="${e}"]`)):void 0}}const Fh="miso-option-list";const Bh=Object.freeze({root:function(e,t){const{className:s,role:n,templates:o}=e;return`\n<div class="${s}" ${n?`data-role="${n}"`:""}>\n  ${o.options(e,t)}\n</div>\n`},options:function(e,t){const{className:s,templates:n}=e;return`\n<ol class="${s}__options" data-role="options">\n  ${(t.value||[]).map(((t,s)=>n.option(e,t,{index:s}))).join("")}\n</ol>\n`},option:function(e,t){const{className:s}=e;return`<li class="${s}__option" data-role="option" tabindex="0">${cl(t.text||t)}</li>`}});class zh extends zd{static get type(){return"option-list"}static get defaultTemplates(){return Bh}static get defaultClassName(){return Fh}constructor({className:e=Fh,templates:t,...s}={}){super({className:e,templates:{...Bh,...t},...s}),this._initTrackable()}initialize(e){const{proxyElement:t}=e;this._unsubscribes=[...this._unsubscribes,t.on("click",(e=>this._handleClick(e)))]}_render(e,t,s){super._render(e,t,s);const{state:n}=t;this._syncOptionValues(e,n)}_afterRender(e,t){this._syncBindings(e,t)}_unrender(){this._clearBindings()}_syncOptionValues(e,t){const s=e&&this._getOptionsElement(e);if(!s)return;ch(s,"empty",0===(this._getItems(t)||[]).length)}_getItems(e){return e.value}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){const t=e.target.closest('[data-role="option"]');if(!t)return;const s=this._bindings.get(t),n=s&&s.value;n&&(this._trackClick(e,s),this._select(n.text))}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}Jd(zh.prototype);const Qh=Object.freeze({...bd("options"),root:function(e){const{className:t,role:s,templates:n}=e;return`\n<div class="${t}" ${s?`data-role="${s}"`:""}>\n  ${n.options(e)}\n</div>\n`},option:function(e,t){const{className:s,templates:n}=e;return`\n<div role="button" class="${s}__option" data-value="${t.value}">\n  ${n.content(e,t)}\n</div>\n`}});class Hh extends zd{static get defaultTemplates(){return Qh}constructor({className:e,templates:t,field:s,defaultValue:n,...o}={}){super({className:e,templates:{...Qh,...t},...o}),this._field=s,this._defaultValue=n}initialize(e){const{proxyElement:t}=e;this._unsubscribes=[...this._unsubscribes,e.hub.on(this._field,(()=>this._refresh())),t.on("click",(e=>this._handleClick(e)))],this._defaultValue?this._select(this._defaultValue,{silent:!0}):this._clear({silent:!0})}_preprocess(e,t){return e.rendered&&t.skip(),super._preprocess(e,t)}_handleClick({target:e}){const t=il(e,(e=>e.hasAttribute("data-value")?e:void 0));if(!t)return;let{unselected:s,value:n}=this._view.hub.states[this._field];s=s||void 0===n;const o=t.getAttribute("data-value");s||void 0===n||n!==o?this._select(o):this._clear()}_refresh(){this._state=this._view.hub.states[this._field],al((()=>this._syncValueAttribute()))}_syncValueAttribute(){if(!this._state||!this._view)return;const{element:e}=this._view,t=e&&e.children[0];if(!t)return;let{unselected:s,value:n}=this._state;s?t.removeAttribute("data-selected"):t.setAttribute("data-selected",n),this._state=void 0}_select(e,t){this._submit({value:e},t)}_clear(e){this._submit({unselected:!0},e)}async _submit(e,t){this._view.hub.update(this._field,e,t)}}const Vh="miso-feedback",Wh=["helpful","unhelpful"];const Gh=Object.freeze({options:function(e){const{templates:t}=e;return Wh.map((s=>t.option(e,{value:s}))).join("")},content:function(e,{value:t}){const{className:s,templates:n,options:o={}}=e;return`\n${!1!==o.icon?`<i class="${s}__icon">${n.icon(e,t)}</i>`:""}\n${!1!==o.text?`<span class="${s}__text">${n.text(e,t)}</span>`:""}\n`},icon:function(e,t){switch(t){case"helpful":case"unhelpful":return'<svg viewBox="0 0 16 16"><path d="M8.342 3.652 4.979 5.708a1 1 0 0 0-.479.852v5.561a1 1 0 0 0 .87.992l6.029.79a1 1 0 0 0 1.042-.583l2.534-5.65a1 1 0 0 0-.74-1.394l-3.543-.623.9-3.1A2.097 2.097 0 0 0 10.297 0L8.719 3.237a1 1 0 0 1-.377.415ZM1 6.5a1.5 1.5 0 0 1 3 0v6a1.5 1.5 0 0 1-3 0Z"/></svg>';default:return""}},text:function(e,t){switch(t){case"helpful":return"Helpful";case"unhelpful":return"Not helpful";default:return""}}});class Kh extends Hh{static get type(){return"feedback"}static get defaultTemplates(){return Gh}static get defaultClassName(){return Vh}constructor({className:e=Vh,templates:t,...s}={}){if(super({className:e,templates:{...Gh,...t},field:"feedback",...s}),!1===s.text&&!1===s.icon)throw new Error("At least one of options.text or options.icon must be enabled")}}const Yh="miso-text";const Zh=Object.freeze({root:function(e,{value:t}){const{className:s,role:n,options:{raw:o=!1,tag:i}}=e,r=n?`data-role="${n}"`:"",a=void 0!==t?cl(function(e){let{format:t}=e.options;const{formatDate:s,formatNumber:n}=e.templates.helpers;if(!t)return e=>`${e}`;switch(typeof t){case"function":return t;case"string":t=[t]}let[o,i]=t;switch(o){case"date":return e=>s(e,i);case"number":return e=>n(e,i);default:return e=>`${e}`}}(e)(t)):"";return o?a:`<${i} class="${s}" ${r}>${a}</${i}>`}});class Jh extends zd{static get type(){return"text"}static get defaultTemplates(){return Zh}static get defaultClassName(){return Yh}constructor({className:e=Yh,templates:t,tag:s="p",...n}={}){super({className:e,templates:{...Zh,...t},tag:s,...n})}}class Xh extends yd{constructor(e){super(e)}_takePending(){return this._pending}_applyRender(e,t={}){const s=pl(!1);super._applyRender(e,{...t,loop:s.t}),s.value&&this._requestRaf()}}class ep{clear(e){return e.innerText="",{cursor:0,done:!1}}update(e,{value:t,cursor:s},{value:n,cursor:o,done:i}){const r=n.length;o=Math.min(o,r);const a=!!i&&o===r,l=t.substring(0,s),c=!n.startsWith(l);return a||c?e.innerText=n:e.insertAdjacentText("beforeend",n.substring(s,o)),a&&e.classList.add("done"),{cursor:o,done:a}}}function tp(e,t,{status:s}){if(!t)return;0===t.children.length&&(t.innerHTML=function(e){let{className:t,role:s,options:{tag:n,format:o,builtInStyles:i=!0}}=e;"auto"===n&&(n="markdown"===o?"div":"p");const r=s?`data-role="${s}"`:"",a=[t,sp(t)];i&&"markdown"===o&&a.push("miso-markdown");return`<${n} class="${a.join(" ")}" ${r} data-format="${o}"></${n}>`}(e));const n=t.children[0];return n.setAttribute("data-status",s||iu.INITIAL),n}function sp(e){return`${e}__cursor`}function np(e){if(!0===e)return function(e=performance.now()){return function({summary:t,timestamp:s,elapsed:n,ref:o,operation:i,conflict:r}){var a;MisoClient.debug("<progressive-markdown>",`[${a=s-e,Math.floor(a)/1e3+"s"}](${op(n[0])}, ${op(n[1])})`,t,`${i}`,o,r)}}();if(e){if("function"==typeof e)return e;throw new Error("onDebug must be a function or a boolean")}}function op(e){return Math.floor(100*e)/100+"ms"}const ip="miso-typewriter";class rp extends Xh{static get type(){return"typewriter"}static get defaultClassName(){return ip}constructor({className:e=ip,tag:t="auto",format:s="markdown",tooltip:n=!1,speed:o,acceleration:i,nextCursorFn:r,...a}={}){super({tag:t,format:s,tooltip:n,...a}),Xa(this,{className:e}),this._prevState=void 0,this._getNextCursor="function"==typeof r?r:Tl({speed:o,acceleration:i}),this._readiness=new _l,"markdown"===s&&rp.MisoClient.plugins.install("std:ui-markdown")}initialize(){this._setup()}async _setup(){try{if("plaintext"===this.options.format)await this._setupForPlaintext();else await this._setupForMarkdown();this._readiness.resolve()}catch(pv){this._readiness.reject(pv)}}async _setupForMarkdown(){const e=await this._view._views._extensions.require("markdown");if(!this._view)return;const t=sp(this.className),{onDebug:s,onCitationLink:n,variant:o}=this.options;this._renderer=e.createRenderer({cursorClass:t,getSource:e=>this._getSource(e),onCitationLink:n,onDebug:np(s),variant:o}),this._unsubscribes.push(this._view.proxyElement.on("click",(e=>this._onClick(e))))}_getSource(e){const{data:t={}}=this._view._data,{sources:s=[]}=t;return s[e]}async _setupForPlaintext(){this._renderer=new ep}async _ready(){return this._readiness.promise}async render(...e){await this._ready(),await super.render(...e)}_preprocess({state:e}){const t=this._prevState,{value:{value:s="",stage:n,finished:o}={},session:i,status:r}=e,a=(c=e,(l=t)&&c&&l.session&&c.session&&l.session.uuid===c.session.uuid);var l,c;const u=a&&n===t.stage,d=t?u?t.streak:t.streak+1:0,h=a&&t&&t.doneAt||(r===iu.READY&&o?performance.now():void 0),p=void 0!==h;return this._prevState=Object.freeze(Ya({session:i,status:r,value:s,stage:n,streak:d,doneAt:h,done:p}))}_render(e,{state:t,rendered:s},{notifyUpdate:n,writeToState:o,loop:i}){const r=tp(this,e,t);let a;const l=!s||t.streak!==s.streak;if(l)a=this._renderer.clear(r,s);else{const e=this._getNextCursor(s.cursor,t.doneAt,s.timestamp,t.timestamp);a=this._renderer.update(r,s,{...t,cursor:e})}o(a);const c=t.status===iu.READY&&!a.done;n({ongoing:c},{silent:c&&(!s||s.status===iu.READY)&&!l}),c&&i()}_onClick(e){const{target:t}=e,s=t.closest('[data-role="citation-link"]');if(s){const t=parseInt(s.dataset.index);return void(Number.isNaN(t)||this._view._events.emit("citation-click",{event:e,index:t}))}const n=t.closest('[data-role="follow-up-link"]');if(n){let{q:t}=n.dataset;return t=t?t.trim():void 0,void(t&&this._view._events.emit("follow-up-click",{event:e,q:t}))}const o=t.closest("a");if(o){if(!e.defaultPrevented){const{href:t,innerText:s,className:n}=o;t&&this._view._events.emit("link-click",Ya({event:e,url:t,text:s?s.trim():"",className:n||"",attributes:ap(o)}))}}else;}}function ap(e){const{attributes:t}=e,s={};for(const{name:n,value:o}of t)n.startsWith("data-")&&(s[n]=o);try{return JSON.stringify(s)}catch(pv){return"{}"}}const lp="miso-affiliation";const cp=Object.freeze({root:function(e,t){const{className:s,role:n,templates:o,options:i}=e,{status:r}=t,a=n?` data-role="${n}"`:"",l=t.value||{},c=l.channel?` data-channel="${l.channel}"`:"",u=e._getItems(t),d=u?u.length:void 0,h=void 0!==d?` data-item-count="${d}"`:"";return`<div class="${s} ${r}"${a}${c}${i.itemType?` data-item-type="${i.itemType}"`:""}${h}>${r===iu.READY?o[r](e,t):""}</div>`},[iu.READY]:function(e,t){const{templates:s}=e,n=e._getItems(t);return n&&n.length>0?s.controlContainer(e,t,"previous")+s.body(e,t)+s.controlContainer(e,t,"next"):s.empty(e,t)},controlContainer:function(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__control-${s}-container">${o.control(e,t,s)}</div>`},control:function(e,t,s){const{className:n,templates:o}=e;return`<div class="${n}__control-${s}" data-role="${s}">${o.controlIcon(e,t,s)}</div>`},controlIcon:function(e,t,s){return Sh},body:function(e,t){const{className:s,templates:n}=e,o=e._getItems(t);return`<div class="${s}__body">${n.list(e,t,o)}</div>`},item:function(e,t,s,n){const{className:o,templates:i,options:r}=e,{itemType:a}=r;return`<li class="${o}__item"><div class="${o}__item-inner">${i.itemHeader(e,t,s,{index:n})}${i[a](e,t,s,{index:n})}</div></li>`},itemHeader:function(e,t,s,n){const{className:o,templates:i}=e;let{itemHeaderLeftText:r,itemHeaderRightText:a}=i;return r=Bd.asFunction(r)(e,t,s,n),a=Bd.asFunction(a)(e,t,s,n),`<div class="${o}__item-header">\n  <div class="${o}__item-header-left">${r}</div>\n  <div class="${o}__item-header-right">${a}</div>\n</div>`},affiliation:function(e,t,s,n){const{templates:o}=e,[i,r]=$d(e,s,{link:!1});return[i,(o.infoBlock||o.affiliationInfoBlock||wd)(e,s,n),(o.imageBlock||qd)(e,s,{brand:!0,...n}),r].join("")},ctaText:"View deal",itemHeaderLeftText:"Today's best deals",itemHeaderRightText:function(e,t,s,n){const{className:o,templates:i}=e,r=Bd.asFunction(i.logoText)(e,t,s,n)||"",a=Bd.asFunction(i.logoImg)(e,t,s,n);return a?`<span class="${o}__item-header-logo-text">${r}</span>${a}`:""},logoImg:function(e,t,s,n){const{className:o,templates:i}=e,r=Bd.asFunction(i.logoUrl)(e,t,s,n);if(!r)return"";const a=Bd.asFunction(i.logoAltText)(e,t,s,n);return`<img class="${o}__item-header-logo" src="${r}"${a?` alt="${a}"`:""}>`},logoText:"Selected by"}),up=Object.freeze({...sh.defaultTemplates,...cp});class dp extends sh{static get type(){return"affiliation"}static get defaultTemplates(){return up}static get defaultClassName(){return lp}constructor({className:e=lp,templates:t,autoplay:s,...n}={}){super({className:e,itemType:"affiliation",templates:{...cp,...t},...n}),this._itemCount=void 0,this._itemIndex=0,this._displayedCount=void 0,this._displayedIndex=void 0,this._viewable=void 0}initialize(e){super.initialize(e);const{viewable:t}=this._view.tracker.options||{};this._viewable=new Ml(this._onViewable.bind(this),t)}get itemIndex(){return this._itemIndex}set itemIndex(e){void 0!==this._itemCount&&(e<0?e=this._itemCount-1:e>=this._itemCount&&(e=0),this._itemIndex=e,al((()=>this._syncItemIndex())))}next(){void 0!==this._itemCount&&this.itemIndex++}previous(){void 0!==this._itemCount&&this.itemIndex--}_render(e,t,s){super._render(e,t,s),this._syncItemCount(t),this._syncItemIndex()}_syncElement(e){const t=this._element;super._syncElement(e),this._syncViewableElement(t,e)}_syncViewableElement(e,t){e!==t&&(e&&this._viewable.unobserve(e),t&&this._viewable.observe(t))}_syncItemCount({state:e}={}){const t=this._getItems(e),s=this._itemCount=t?t.length:void 0;if(s===this._displayedCount)return;let{element:n}=this._view;n=n.firstElementChild,n&&(lh(n,"data-item-count",s),this._displayedCount=s)}_syncItemIndex(){const e=this._itemIndex;if(e===this._displayedIndex)return;const{element:t}=this._view,s=t&&this._getListElement(t);s&&(this._displayedIndex=e,s.style.left=100*-e+"%",this._viewable.display(e),this._view._events.emit("display",{index:e}))}_onViewable(e){const t=this._getRenderedItemData(e);t&&this._view.tracker.viewable([t])}_getRenderedItemData(e){const{value:t}=this._rendered.get(this._element)||{};if(!t)return;const{products:s=[]}=t;return s[e]}_trackViewables(){}_onClick(e){const t=e.target;t.closest('[data-role="previous"]')?this.previous():t.closest('[data-role="next"]')?this.next():super._onClick(e)}}const hp="miso-facets",pp="miso-facet",fp="custom_attributes.";const _p=Object.freeze({root:function(e,t){const{className:s,role:n,templates:o}=e;return`<div class="${s}" ${n?`data-role="${n}"`:""}>${o.facets(e,t)}</div>`},facets:function(e,t){const{templates:s}=e,{facet_fields:n={}}=t.value||{};return Object.keys(n).map((o=>s.facet(e,{field:o,entries:n[o]},t)))},facet:function(e,t,s){const{facetClassName:n=pp,templates:o}=e,{field:i}=t;return`<div class="${n}" data-role="facet" data-field="${cl(i)}">${o.header(e,t,s)}${o.options(e,t,s)}</div>`},header:function(e,t,s){const{facetClassName:n=pp,templates:o}=e;return`<div class="${n}__header">${o.title(e,t,s)}</div>`},title:function(e,{field:t}){return t.startsWith(fp)&&(t=t.substring(18)),cl(t)},options:function(e,{field:t,entries:s},n){const{facetClassName:o=pp,templates:i}=e;return`<ul class="${o}__options" data-role="options">${s.map((([s,o])=>i.option(e,{field:t,value:s,count:o},n))).join("")}</ul>`},option:function(e,t,s){const{facetClassName:n=pp,templates:o}=e;return`\n<li class="${n}__option" data-role="option" tabindex="0">\n  <span class="${n}__value">${o.value(e,t,s)}</span>\n  <span class="${n}__count">${o.count(e,t,s)}</span>\n</li>`},value:function(e,{value:t},s){return cl(t)},count:function(e,{count:t},s){return e.templates.helpers.formatNumber(t)}});function mp(e,t){return`${e}:::${t}`}function gp(e){const t={};for(const s in e)t[s]=new Set(e[s]);return t}class yp extends zd{static get type(){return"facets"}static get defaultTemplates(){return _p}static get defaultClassName(){return hp}constructor({className:e=hp,templates:t,...s}={}){super({className:e,templates:{..._p,...t},...s}),this._bindings=new Zd}initialize(e){const{proxyElement:t,filters:s}=e;this._unsubscribes=[...this._unsubscribes,t.on("click",(e=>this._handleClick(e))),s.on("update",(e=>this._updateSelections(e))),s.on("reset",(()=>this._syncSelections()))]}_render(e,t,s){super._render(e,t,s)}_afterRender(e,t){this._syncBindings(e,t),this._syncSelections()}_unrender(){this._clearBindings()}_syncSelections(){const e=gp(this._view.hub.states.filters.facets);for(const{value:{field:t,value:s},element:n}of this._bindings.entries)this._setSelected(n,e[t]&&e[t].has(s))}_updateSelections({updates:e}){const t=gp(e.facets);for(const{value:{field:s,value:n},element:o}of this._bindings.entries)t[s]&&this._setSelected(o,t[s].has(n))}_setSelected(e,t){e&&(t?e.classList.add("selected"):e.classList.remove("selected"))}_syncBindings(e,t){if(!e||!t.value)return;const s=this._getItems(t),n=[],o=[],i=[];for(const r of this._getFacetElements(e)){const e=r.getAttribute("data-field"),t=s[e];if(!t)continue;const a=this._getItemElements(r);for(let s=0;s<a.length;s++){const r=a[s],l=t[s];if(!l)break;n.push(mp(e,l)),o.push({field:e,value:l}),i.push(r)}}this._bindings.update(n,o,i)}_clearBindings(){this._bindings.clear()}_getItems({value:e}={}){const{facet_fields:t={}}=e||{},s={};for(const n in t)s[cl(n)]=t[n].map((([e])=>e));return s}_getFacetElements(e){return Array.from(e.querySelectorAll('[data-role="facet"]'))}_getFacetElement(e,t){return e.querySelector(`[data-role="facet"][data-field="${t}"]`)}_getItemElements(e){return Array.from(e.querySelectorAll('[data-role="option"]'))}_handleClick(e){if(0!==e.button)return;const t=e.target.closest('[data-role="option"]');if(!t)return;const s=this._bindings.get(t),n=s&&s.value;if(!n)return;const{field:o,value:i}=n;this._view.filters.facets.toggle(o,i),this._view.filters.apply()}destroy(){this._bindings.clear(),super.destroy()}}const bp="miso-select";const vp=Object.freeze({root:function(e,t){const{className:s,role:n,templates:o}=e,i=n?`data-role="${n}"`:"",r=e._getItems(t),a=r.find((e=>e.selected))||r[0];return`\n<div class="${s}" ${i}>\n  ${o.button(e,a)}\n  ${o.options(e,t)}\n</div>`},button:function(e,t){const{className:s,templates:n}=e;return`<button class="${s}__button" data-role="button" tabindex="0">${n.text(e,t)}</button>`},options:function(e,t){const{className:s,templates:n}=e;return`<ul class="${s}__options">${e._getItems(t).map(((t,s)=>n.option(e,t,{index:s}))).join("")}</ul>`},option:function(e,t){const{className:s,templates:n}=e;return`<li class="${s}__option ${t.selected?"selected":""}" data-role="option" tabindex="0">${n.text(e,t)}</li>`},text:function(e,t){return cl(t&&t.text&&t.text.replace(/[-_]([a-zA-Z])/g,((e,t)=>` ${t}`))||t||"")}});class wp extends zd{static get type(){return"select"}static get defaultTemplates(){return vp}static get defaultClassName(){return bp}constructor({className:e=bp,templates:t,...s}={}){super({className:e,templates:{...vp,...t},...s}),this._initTrackable()}initialize(e){const{proxyElement:t}=e;this._unsubscribes=[...this._unsubscribes,t.on("click",(e=>this._handleClick(e)))]}_afterRender(e,t){this._syncBindings(e,t)}_unrender(){this._clearBindings()}_getItems(e){return e.value||[]}_getOptionsElement(e){return e.querySelector('[data-role="options"]')}_getItemElements(e){return e?Array.from(e.querySelectorAll('[data-role="option"]')):[]}_handleClick(e){if(this._element)for(let t=e.target;t&&t!==this._element;t=t.parentElement){const{role:e}=t.dataset;switch(e){case"button":this._toggle();break;case"option":const e=this._bindings.get(t);this._select(e&&e.value)}}}_toggle(){if(!this._element)return;const e=this._element.children[0];e&&e.classList.toggle("open")}async _select(e){e&&this._view._events.emit("select",{value:e})}destroy(){this._destroyTrackable(),super.destroy()}}Jd(wp.prototype);const kp="miso-more-button";const Ep=Object.freeze({root:function(e,t){const{className:s,role:n,templates:o}=e;return`\n<div class="${s}"${n?` data-role="${n}"`:""}${t.status!==iu.READY?" disabled":""}>\n  ${o.text(e)}\n</div>\n`},text:function(e){return"More"}});class Sp extends zd{static get type(){return"more-button"}static get defaultTemplates(){return Ep}static get defaultClassName(){return kp}constructor({className:e=kp,templates:t,...s}={}){super({className:e,templates:{...Ep,...t},...s})}initialize(e){this._unsubscribes=[...this._unsubscribes,e.proxyElement.on("click",(e=>this._handleClick(e)))]}_handleClick(e){if(0!==e.button)return;const t=e.target.closest('[data-role="more"]');t&&!t.disabled&&this._view.hub.trigger("more")}}const xp=Object.freeze(Object.defineProperty({__proto__:null,AffiliationLayout:dp,BannerLayout:class extends zd{static get type(){return"banner"}static get defaultTemplates(){return Kd}constructor({className:e="miso-banner",templates:t,...s}={}){super({className:e,templates:{...Kd,...t},...s})}},CardsLayout:class extends sh{static get type(){return"cards"}static get defaultTemplates(){return super.defaultTemplates}static get defaultClassName(){return ah}constructor({className:e=ah,...t}={}){super({className:e,...t})}},CarouselLayout:Rh,CollectionLayout:sh,ContainerLayout:Vd,ErrorLayout:Gd,FacetsLayout:yp,FeedbackLayout:Kh,GalleryLayout:Ph,HorizontalLayout:rh,ListLayout:oh,MoreButtonLayout:Sp,OptionListLayout:zh,SearchBoxLayout:Mh,SelectLayout:wp,TemplateBasedLayout:zd,TextLayout:Jh,TypewriterLayout:rp},Symbol.toStringTag,{value:"Module"}));function Cp({qs:e,...t}={}){return Ol(t,{metadata:{question_source:e||ru.ORGANIC}})}function Op(e){return e&&e.value&&e.value.revision}function Ap(e){const t=function(e){if(!e)return iu.INITIAL;const{request:t,error:s,value:n}=e;return s?iu.ERRONEOUS:n?iu.READY:t?iu.LOADING:iu.INITIAL}(e);return Ya({status:t,ongoing:t===iu.READY?e.ongoing:void 0,...e})}function Tp(e){const{session:t,value:s}=e;if(!t||!s)return;const{miso_id:n}=s;n&&(t.meta.miso_id=n)}function Ip(e){const{request:t,value:s}=e;if(!t)return e;const{payload:n}=t||{},{q:o}=n||{};return o?{...e,value:{...s,keywords:o}}:e}function Rp(e){const{role:t,type:s,items:n}=e,o={type:"viewable"===s?"viewable_impression":s,context:{custom_context:Ya({property:t})}};switch(function(e){return nu.has(e)}(s)&&(!function(e,t=[]){return function(e){return Xc.has(e)}(e)||t.length>0&&"object"==typeof t[0]&&t[0].product_id}(t,n)?(o.product_ids=[],o.context.custom_context.items=(n||[]).map((e=>e.text||e.id||e))):o.product_ids=(n||[]).map((e=>"string"==typeof e?e:e.product_id)).filter((e=>e))),s){case eu.SUBMIT:o.context.custom_context.value=e.value;break;case eu.FEEDBACK:o.context.custom_context.value=o.value=e.value,o.context.custom_context.result_type=o.result_type=e.result_type}return Ya(o)}function Np(e,t){return e=function(e,t){if(t.role!==Yc.ANSWER)return e;const{items:s=[]}=t;return Al(e,{context:{custom_context:{urls:s.map((e=>e.url)),texts:s.map((e=>e.text)),class_names:s.map((e=>e.className)),attributes:s.map((e=>e.attributes))}}})}(e=function(e={},{data:t}={}){if(!t)return e;const{request:s={},value:n={}}=t,{question_source:o}=s.payload&&s.payload.metadata||{},{question_id:i}=n;return Al(e,{context:{custom_context:{question_source:o,question_id:i}}})}(e,t),t),e=function(e,{event_target:t}={}){if(!t)return e;return Al(e,{context:{custom_context:{event_target:t}}})}(e,t)}const Lp=Object.freeze({}),qp=Object.freeze({[Yc.CONTAINER]:Vd.type,[Yc.ERROR]:Gd.type}),Pp=Object.freeze({}),Up=Object.freeze({api:Lp,layouts:qp,trackers:Pp}),$p=Object.freeze({mappings:{[Yc.ERROR]:e=>e.error}});class jp extends $l{constructor(e){super(e.name||"workflow",e.plugin);let{context:t,plugin:s,client:n,defaults:o,options:i,extraOptions:r}=e;this._context=t,this._plugin=s=s||t._plugin,this._client=n=n||t._client,e=Object.freeze({...e,plugin:s,client:n}),this._name=e.name,this._roles=e.roles,this._extensions=s._getExtensions(n),this._defaults=o,this._options=i||new Au(t&&t._options,o),this._extraOptions=r||{},this._hub=new ju({onUpdate:e=>this._onHubUpdate(e),onEmit:e=>this._onHubEmit(e)}),this._sessionContext=new WeakMap,n._events.emit("workflow",this),this._initProperties(e),this._initActors(e),this._initSubscriptions(e),this._initSession(e)}_initProperties(){}_initActors({roles:e}){const t=this._hub,s=this._client,n=this._options,o=this._extensions,i=this._plugin.layouts;this._sessions=new Mu(t),this._data=new Fu(t,{source:gd(s),options:n,...this._extraOptions.api}),this._views=new hd(t,{extensions:o,layouts:i,roles:e,options:n,workflow:this}),this._interactions=new md(t,{client:s,options:n})}_initSubscriptions({roles:e}){this._unsubscribes=[this._hub.on("session",(e=>this._onSession(e))),this._hub.on("response",(e=>this.updateData(e))),this._hub.on("tracker",(e=>this._onTracker(e)))],e.main&&this._unsubscribes.push(this._hub.on($u(e.main),(e=>this._onMainViewUpdate(e))))}_initSession(){this.restart()}_getSessionContext(e){let t=this._sessionContext.get(e);return t||this._sessionContext.set(e,t={}),t}_onHubUpdate(e){this._runCallbacks(this._client.meta.parent._hubUpdateCallbacks,e)}_onHubEmit(e){this._runCallbacks(this._client.meta.parent._hubEmitCallbacks,e),this._emitAsWorkflowEvent(e)}_emitAsWorkflowEvent({action:e,name:t,state:s,silent:n}){n||this._emit(t,{_action:e,...s})}get uuid(){return this.session&&this.session.uuid}get session(){return this._hub.states.session}get states(){return this._hub.states}get status(){const e=this._hub.states.data;return e&&e.status}get views(){return this._views.interface}restart(){return this._emitInterruptEventIfNecessary(),this._sessions.restart(),this}_emitInterruptEventIfNecessary(){const{main:e}=this._roles;if(!e)return;const t=this._hub.states[$u(e)]||{};t.session&&t.status===iu.LOADING&&(this._emitLifecycleEvent("interrupt",t),this._emitLifecycleEvent("finally",t))}_onSession(e){this.updateData({session:e})}_onMainViewUpdate(e){const{status:t}=e,s=t===iu.READY,n=t===iu.ERRONEOUS,o=n?"error":t;this._emitLifecycleEvent(o,e),s&&this._emitLifecycleEvent("done",e),(s||n)&&this._emitLifecycleEvent("finally",e)}_shallEmitLifecycleEvent(e,{session:t}){const s=this._getSessionContext(t),n=s.lifecycleEvents||(s.lifecycleEvents=new Set),o=n.has(e);return n.add(e),!o}_emitLifecycleEvent(e,t){this._shallEmitLifecycleEvent(e,t)&&this._emit(e,t)}_request(e={}){const{session:t}=this,s=fu(this._options.resolved.api,e);this.updateData({session:t,request:s}),this._hub.update("request",{...s,session:t})}updateData(e){if(!e)throw new Error("Data is required.");const{session:t}=e;if(!t)throw new Error("Session is required to update data.");if(!this.session)throw new Error("No session is created yet. Call workflow.restart() to start a new session.");if(t.uuid!==this.session.uuid)return;const s=Op(e);if(!Za(s)){const e=Op(this._hub.states.data);if(!Za(e)&&s<=e)return}return this._updateData(e),this}_updateData(e){const t=this._hub.states.data;e=this._defaultProcessData(e,t);for(const s of this._options.resolved.dataProcessor)e=s(e,t);this._updateDataInHub(e,t)}_defaultProcessData(e,t){return e=function(e,t){if(!e||!e.value||e.request||!t||!t.request)return e;const{request:s}=t;return{...e,request:s}}(e,t),e=function(e){const{value:t}=e;if(!t)return e;const{miso_id:s}=t;return s?{...e,meta:{...e.meta,miso_id:s}}:e}(e=Ap(e))}_updateDataInHub(e){this._hub.update("data",e)}notifyViewUpdate(e,t){return t={status:iu.READY,session:this.session,...t},this._hub.update($u(e),t),this}get trackers(){return this._views.trackers}_onTracker(e){const t=this._hub.states.data,s=this._buildInteraction({...e,data:t,workflow:this});this._sendInteraction(s)}_buildInteraction(e){let t=Rp(e);t=this._defaultProcessInteraction(t,e);const{preprocess:s=[]}=this._options.resolved.interactions;for(const n of s)t=n(t,e);return t}_defaultProcessInteraction(e,t){return e=this._writeApiInfoToInteraction(e,t),e=function(e,t){const{data:s}=t;if(!s)return e;const n=s.request&&s.request.payload;if(!n)return e;const{question:o,q:i,fq:r}=n;return Al(e,{context:{custom_context:{question:o,q:i,fq:r}}})}(e=this._writeMisoIdToInteraction(e,t),t),e=function(e,t){const{data:s}=t;if(!s)return e;const n=s.request&&s.request.payload&&s.request.payload.metadata;return n?Al(e,{context:{custom_context:n}}):e}(e,t),e=function(e,t){if(t.role!==Yc.AFFILIATION)return e;const{items:s}=t;return Al(e,{context:{custom_context:{channel:s[0]&&s[0].channel||void 0,positions:s.map((e=>e.position))}}})}(e,t),e}_writeApiInfoToInteraction(e){const{group:t,name:s}=this._options.resolved.api;return Al(e,{context:{custom_context:{api_group:t,api_name:s}}})}_writeMisoIdToInteraction(e,t){const s=this._hub.states[$u(t.role)]||{},n=s.meta&&s.meta.miso_id||void 0;return n?Al(e,{miso_id:n}):e}_sendInteraction(e){const{handle:t}=this._options.resolved.interactions;"function"==typeof t?t(e):this._hub.trigger("interaction",e)}destroy(e){this._emit("destroy"),this._destroy(e)}get destroyed(){return!!this._destroyed}_destroy({dom:e}={}){for(const t of this._unsubscribes||[])t();this._unsubscribes=[],this._views._destroy({dom:e}),this._data._destroy(),this._destroyed=!0}_runCallbacks(e,t){for(const s of e)try{s({workflow:this,...t})}catch(pv){this._error(pv)}}_emit(e,t){this._events.emit(e,{_event:e,...t}),this._context&&this._context._events.emit(e,{workflow:this,_event:e,...t})}}function Mp(e){if(e.affiliation_products){const{affiliation_products:s,...n}=e;e={...n,affiliation:(t=s,{channel:"miso",products:t})}}else if(e.sovrn_aff){const{sovrn_aff:t,...s}=e;e={...s,affiliation:Dp(t)}}var t;return function(e){const{affiliation:t}=e;if(!t)return e;let{channel:s,products:n}=t;if(!n)return e;n=n.map((e=>({...e})));let o=0;for(const i of n)s&&(i.channel=s),i.position=o++;return{...e,affiliation:{...t,products:n}}}(e)}function Dp({products:e,...t}){return{channel:"sovrn",...t,products:e.map(Fp)}}function Fp({id:e,deeplink:t,headline:s,description:n,currency:o,retailPrice:i,salePrice:r,discountRate:a,image:l,thumbnail:c,merchant:u,...d}){return Ya({id:`sovrn-${e}`,title:s,description:n,cover_image:l,url:t,currency:o,original_price:i,sale_price:r,discount_rate_percent:a,brand:u&&u.name,brand_logo:u&&u.logo,custom_attributes:Bp({sovrn_id:e,thumbnail:c,merchant:u,...d})})}function Bp(e,t=""){return Object.keys(e).reduce(((s,n)=>{const o=e[n];if(void 0===o)return s;const i=t?`${t}_${n}`:n;return"object"==typeof o?{...s,...Bp(o,i)}:{...s,[i]:o}}),{})}function zp(e){xl(e,Qp.prototype)}Nu(jp.prototype),Object.assign(jp,{DEFAULT_API_OPTIONS:Lp,DEFAULT_LAYOUTS:qp,DEFAULT_TRACKERS:Pp,DEFAULT_OPTIONS:Up,ROLES_OPTIONS:$p});class Qp{useLink(e,t={}){if("function"!=typeof e&&!1!==e)throw new Error("useLink(fn) expects fn to be a function or false");return this._linkFn=!!e&&[e,t],this}_submitToPage(e={}){if(!this._linkFn)return;const t=this._getSubmitUrl(e),[s,n={}]=this._linkFn;if(!1===n.open)window.location.href=t;else{const e=n.target||"_blank",s=n.windowFeatures||"";window.open(t,e,s)}}_getSubmitUrl({q:e,...t}={}){if(!this._linkFn)throw new Error("useLink(fn) must be called before _getSubmitUrl()");return this._linkFn[0](e,t)}}const Hp=Object.freeze({...jp.DEFAULT_API_OPTIONS,group:Ha.ASK,payload:{...jp.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at"],cite_link:1,cite_start:"[",cite_end:"]"}}),Vp=Object.freeze({actor:!1,api:{group:Ha.ASK,name:Va.AUTOCOMPLETE}}),Wp=Object.freeze({...jp.DEFAULT_LAYOUTS,[Yc.QUERY]:[Mh.type,{placeholder:"Ask a question"}],[Yc.QUESTION]:[Jh.type,{tag:"h2"}],[Yc.ANSWER]:rp.type,[Yc.FEEDBACK]:Kh.type,[Yc.IMAGES]:[Ph.type,{incremental:!0,itemType:"image"}],[Yc.SOURCES]:[oh.type,{incremental:!0,itemType:"article",templates:{ordered:!0}}],[Yc.AFFILIATION]:[dp.type,{incremental:!0,itemType:"affiliation",link:{rel:"noopener nofollow"}}]}),Gp=Object.freeze({...jp.DEFAULT_TRACKERS,[Yc.ANSWER]:{active:!0,itemless:!0,deduplicated:!1,click:bu.click},[Yc.IMAGES]:bu,[Yc.SOURCES]:bu,[Yc.AFFILIATION]:bu,[Yc.PRODUCTS]:bu}),Kp=Object.freeze({...jp.DEFAULT_OPTIONS,api:Hp,autocomplete:Vp,layouts:Wp,trackers:Gp}),Yp=uu(jp.ROLES_OPTIONS,{main:Yc.ANSWER,members:Object.keys(Wp),mappings:{[Yc.ANSWER]:function(e){if(!e||!e.value)return;const{answer:t="",answer_stage:s,finished:n}=e.value;return Object.freeze({value:t,stage:s,finished:!!n})},[Yc.REASONING]:function(e){if(!e||!e.value)return;const{reasoning:t="",reasoning_finished:s}=e.value;return Object.freeze({value:t,stage:"reasoning",finished:!!s})}}});class Zp extends jp{_initProperties(e){super._initProperties(e),this._questionId=void 0,this._autoQuery=!1}_initActors(e){super._initActors(e),this._feedback=new _d(this._hub)}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on("query",(e=>this._query(e))),this._views.get(Yc.ANSWER).on("citation-click",(e=>this._onCitationClick(e))),this._views.get(Yc.ANSWER).on("link-click",(e=>this._onAnswerLinkClick(e)))]}restart(){this._questionId&&(this._questionId=void 0),super.restart()}_shallEmitLifecycleEvent(e,t){return"answer-stage"===e||super._shallEmitLifecycleEvent(e,t)}_emitInterruptEventIfNecessary(){const e=this._hub.states[$u(this._roles.main)]||{};e.session&&e.status!==iu.INITIAL&&(e.status!==iu.READY||e.ongoing)&&(this._emitLifecycleEvent("interrupt",e),this._emitLifecycleEvent("finally",e))}_onMainViewUpdate(e){const{status:t,session:s}=e,n=t===iu.READY&&!e.ongoing,o=t===iu.ERRONEOUS,i=n?"done":o?"error":t,r=this._getSessionContext(s),a=r.answerStage,l=e.meta&&e.meta.answer_stage;l&&l!==a&&(this._emitLifecycleEvent("answer-stage",Object.freeze({...e,answer_stage:l})),r.answerStage=l),this._emitLifecycleEvent(i,e),(n||o)&&this._emitLifecycleEvent("finally",e)}get questionId(){return this._questionId}autoQuery(e={}){qu.call(this,e)}query(e){if(!e.q&&!e.questionId)throw new Error("q is required in query() call");this._hub.update("query",e)}_query(e={}){if(this._linkFn)return void this._submitToPage(e);this.restart(),this._writeQuestionSourceToSession(e);const t=this._buildPayload(e);this._request({payload:t})}_writeQuestionSourceToSession(e){this.session.meta.question_source=e.qs||ru.ORGANIC}_buildPayload(){throw new Error("Not implemented")}_writeWikiLinkTemplateToPayload(e){return this._autoQuery&&this._autoQuery.param&&"q"!==this._autoQuery.param?{...e,wiki_link_template:`?${this._autoQuery.param}=%s`}:e}_updateData(e){this._writeQuestionIdFromData(e),!e.value||e.value.answer_stage?(super._updateData(e),Pu.call(this,e)):this._handleHeadResponse(e)}_handleHeadResponse(e){}_defaultProcessData(e,t){return e=function(e){const{value:t}=e;if(!t)return e;const{answer_stage:s}=t;return s?{...e,ongoing:!t.finished,meta:{...e.meta,answer_stage:s}}:e}(e=function(e){if(!e||!e.value)return e;const{value:t}=e;return{...e,value:Mp(t)}}(e=super._defaultProcessData(e,t)))}_writeQuestionIdFromData({value:e}){e&&this._writeQuestionId(e.question_id)}_defaultProcessInteraction(e,t){return e=Np(e=super._defaultProcessInteraction(e,t),t)}_getQuestionSourceFromViewState(e){const{request:t}=this._hub.states[$u(e.role)]||{},{payload:s}=t||{};return s&&s.metadata&&s.metadata.question_source||void 0}_onCitationClick({index:e,event:t}){if(0!==t.button)return;if(ld(t))return;const{value:s}=this._hub.states.data||{},{sources:n}=s||{},o=n&&n[e-1];o&&o.product_id&&(cd(t),this._views.trackers.sources.click([o.product_id],{event_target:"citation-link"}))}_onAnswerLinkClick({event:e,...t}){0===e.button&&(ld(e)||(cd(e),this._views.trackers.answer.click([],{items:[t]})))}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e)}_clearQuestionId(){this._questionId=void 0}_destroy(e){this._feedback._destroy(),super._destroy(e)}}zp(Zp.prototype),Object.assign(Zp,{DEFAULT_API_OPTIONS:Hp,DEFAULT_AUTOCOMPLETE_OPTIONS:Vp,DEFAULT_LAYOUTS:Wp,DEFAULT_TRACKERS:Gp,DEFAULT_OPTIONS:Kp,ROLES_OPTIONS:Yp});const Jp=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:"miso-ask-combo",CONAINER_TAG:"miso-ask"},Symbol.toStringTag,{value:"Module"})),Xp=Object.freeze(Object.defineProperty({__proto__:null,followUpQuestions:"Related questions you can explore",question:"You asked...",relatedResources:"Go beyond, and learn more about this topic",sources:"This reply is based on the following articles",thoughts:"Thoughts"},Symbol.toStringTag,{value:"Module"}));let ef=class{constructor({helpers:e}){this._helpers=e}errorSection(e){const{section:t,container:s}=this._helpers;return t(e,{name:"error"},[s(e,{name:"error",visibleWhen:"erroneous"},"<miso-error></miso-error>")])}answerGroup(e){return[this.answer(e),this.affiliation(e),this.sources(e)]}answer(e){const{container:t}=this._helpers;return t(e,{name:"answer",visibleWhen:"ready"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}question(e){const{phrase:t}=this._helpers;return[t(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"]}sources(e){const{container:t,phrase:s}=this._helpers;return t(e,{name:"sources",visibleWhen:"nonempty"},[s(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}affiliation(e){const{container:t}=this._helpers,{affiliation:s=!0}=e||{};return s?t(e,{name:"affiliation",visibleWhen:"nonempty"},["<miso-affiliation></miso-affiliation>"]):""}};class tf{constructor(e){this._context=e,Xa(this,{lowerCamelToKebab:sl,kebabToLowerCamel:el,kebabOrSnakeToLowerCamel:tl})}normalizeOptions({classPrefix:e,circledCitationIndex:t=!0,phrases:s,...n}={}){return{classPrefix:e=e||this._context.CLASS_PREFIX,circledCitationIndex:t,phrases:s=this.normalizePhraseOptions(s),...n}}normalizePhraseOptions(e={}){if(!e)return{};const t={};for(const s in e)t[this.normalizePhraseOptionKey(s)]=e[s];return t}normalizePhraseOptionKey(e){return"relatedQuestions"===(e=tl(e))||"querySuggestions"===e?"followUpQuestions":e}phrase(e,{name:t,extraNames:s=[],tag:n="div",inline:o=!1}){const{classPrefix:i}=e;return`<${n} class="${o?`${i}__phrase-inline`:`${i}__phrase`} ${[t,...s].map((e=>`${i}__${e}-phrase`)).join(" ")}">${this.phraseText(e,el(t))}</${n}>`}phraseText(e,t){const{phrases:s={}}=e,n=s[t]||this._context.DEFAULT_PHRASES[t];switch(typeof n){case"function":return n(e);case"string":return n;default:return""}}section({classPrefix:e},{name:t},s){return this.element("section",{classes:[`${e}__section`,`${e}__${t}`]},s)}container({classPrefix:e,circledCitationIndex:t,parentQuestionId:s,workflow:n},{name:o,extraNames:i=[],visibleWhen:r,trait:a,logo:l=!1},c){const u=[o,...i].map((t=>`${e}__${t}-container`));return t&&u.push("miso-circled-citation-index"),this.element(this._context.CONAINER_TAG,{classes:u,visibleWhen:r,trait:a,logo:l,parentQuestionId:s,workflow:n},c)}element(e,t={},s=""){return`<${e}${this.attrs(t)}>${Array.isArray(s)?s.join(""):s}</${e}>`}attrs({classes:e=[],...t}={}){let s="";e.length&&(s+=` class="${e.join(" ")}"`);for(const n in t){const e=t[n];void 0!==e&&(s+=` ${sl(n)}="${e}"`)}return s}}const sf=Cl(new tf({...Jp,DEFAULT_PHRASES:Xp})),nf=Cl(new class extends ef{constructor(){super({helpers:sf})}answerGroup(e){const{container:t}=this._helpers;return[this.question(e),this.reasoning(e),this.answer(e),this.affiliation(e),this.sources(e),this.followUpQuestions(e),t(e,{name:"bottom-spacing",visibleWhen:"ongoing"})]}question(e){const{container:t,phrase:s}=this._helpers;return t(e,{name:"question",visibleWhen:"ready"},[e.parentQuestionId?"<hr>":"",s(e,{name:"question",tag:"div"}),"<miso-question></miso-question>"])}answer(e){const{container:t}=this._helpers;return t(e,{name:"answer",visibleWhen:"ready"},["<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}reasoning(e={}){const{phrases:t,reasoning:s={}}=e,{container:n,element:o,phraseText:i}=this._helpers,r=[];return s.expand&&r.push("expanded"),n(e,{name:"reasoning",visibleWhen:"nonempty"},[o("miso-stub",{classes:r,trait:"collapsible","data-role":"reasoning-box"},[o("div",{classes:["miso-collapsible__header"],"data-role":"toggle-expand"},[`<div class="miso-collapsible__icon">${s.icon||Oh}</div>`,`<div class="miso-collapsible__title" data-role="title">${i(t,"thoughts")}</div>`,`<div class="miso-collapsible__toggle">${xh}</div>`]),o("div",{classes:["miso-collapsible__body"]},["<miso-reasoning></miso-reasoning>"])])])}sources(e){const{container:t,phrase:s}=this._helpers;return t(e,{name:"sources",visibleWhen:"nonempty"},["<hr>",s(e,{name:"sources",tag:"h3"}),"<miso-sources></miso-sources>"])}followUpQuestions(e){const{container:t,phrase:s}=this._helpers,n="follow-up-questions",o=["query-suggestions"];return t(e,{name:n,extraNames:o,visibleWhen:"nonempty"},[s(e,{name:n,extraNames:o,tag:"h3"}),"<miso-follow-up-questions></miso-follow-up-questions>"])}followUps(e){const{features:t={}}=e;return!1===t.followUpQuestions?"":'<miso-follow-ups id="miso-ask-combo__follow-ups" class="miso-ask-combo__follow-ups"></miso-follow-ups>'}relatedResourcesSection(e){const{container:t,phrase:s,section:n}=this._helpers,{features:o={},logo:i=!0}=e;return n(e,{name:"related-resources"},!1===o.relatedResources?"":t({...e,workflow:"active"},{name:"related-resources",visibleWhen:"nonempty",logo:i},[s(e,{name:"related-resources",tag:"h2"}),"<miso-related-resources></miso-related-resources>"]))}}({helpers:sf}));function of(e={}){const{normalizeOptions:t,section:s,container:n}=sf,{answerGroup:o}=nf;return s(e=t(e),{name:"follow-up"},[n(e,{name:"query",visibleWhen:"initial loading"},"<miso-query></miso-query>"),...o(e)])}const rf=Object.freeze(Object.defineProperty({__proto__:null,followUp:of,helpers:sf,root:function(e={}){const{normalizeOptions:t,section:s,container:n}=sf,{followUps:o,relatedResourcesSection:i,answerGroup:r}=nf;return[s(e=t(e),{name:"question"},[n(e,{name:"query"},"<miso-query></miso-query>")]),s(e,{name:"answer"},r(e)),o(e),i(e)].join("")},sections:nf},Symbol.toStringTag,{value:"Module"})),af=Object.freeze({...Zp.DEFAULT_API_OPTIONS,name:Va.QUESTIONS,payload:{...Zp.DEFAULT_API_OPTIONS.payload,related_resource_fl:["cover_image","url","created_at","updated_at","published_at"]}}),lf=Object.freeze({...Zp.DEFAULT_LAYOUTS,[Yc.QUERY]:[Mh.type,{templates:{buttonIcon:"send"}}],[Yc.REASONING]:rp.type,[Yc.RELATED_RESOURCES]:[oh.type,{incremental:!0,itemType:"article"}],[Yc.QUERY_SUGGESTIONS]:zh.type,[Yc.FOLLOW_UP_QUESTIONS]:zh.type}),cf=Object.freeze({...Zp.DEFAULT_TRACKERS,[Yc.RELATED_RESOURCES]:bu,[Yc.QUERY_SUGGESTIONS]:{...bu,click:{...bu.click,validate:e=>0===e.button}}}),uf=Object.freeze({followUp:of}),df=Object.freeze({...Zp.DEFAULT_OPTIONS,api:af,layouts:lf,trackers:cf,templates:uf}),hf=uu(Zp.ROLES_OPTIONS,{members:Object.keys(lf),mappings:{[Yc.QUERY_SUGGESTIONS]:function(e,{workflow:t}={}){const s=t.previous,n=s&&s.states.data.value,o=n&&(n.suggested_followup_questions||n.followup_questions||[]);return o&&o.map((e=>({text:e})))},[Yc.FOLLOW_UP_QUESTIONS]:function(e){if(e&&e.value)return(e.value.followup_questions||[]).map((e=>({text:e})))}}});class pf extends Zp{constructor(e,t){super({name:"ask",context:e,roles:hf,defaults:df,parentQuestionId:t})}_initProperties(e){super._initProperties(e);const{parentQuestionId:t}=e;Xa(this,{parentQuestionId:t})}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on($u(Yc.REASONING),(e=>this._onReasoningViewUpdate(e))),this._views.get(Yc.ANSWER).on("follow-up-click",(e=>this._onFollowUpClick(e))),this._views.get(Yc.FOLLOW_UP_QUESTIONS).on("select",(e=>this._onFollowUpQuestionSelect(e))),this._views.get(Yc.QUERY_SUGGESTIONS).on("select",(e=>this._onQuerySuggestionSelect(e)))]}_initSession(e){e.parentQuestionId&&this._context._byPqid.set(e.parentQuestionId,this),this._context._events.emit("create",this),super._initSession(e)}restart(){const{next:e}=this;e&&e.destroy(),this._questionId&&this._context._byQid.delete(this._questionId),super.restart()}get rootQuestionId(){return this._context.root.questionId}get previous(){const{parentQuestionId:e}=this;return e?this._context.getByQuestionId(e):void 0}get next(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e):void 0}getOrCreateNext(){const{questionId:e}=this;return e?this._context.getByParentQuestionId(e,{autoCreate:!0}):void 0}_buildPayload({q:e,qs:t,questionId:s,...n}={}){if(s)return Ya({...n,question_id:s});const{parentQuestionId:o}=this;let i=Ya({...n,question:e,parent_question_id:o});return i=Cp({...i,qs:t}),i=this._writeWikiLinkTemplateToPayload(i),i}_updateData(e){super._updateData(e),this._triggerSuggestionsRefreshIfNecessary()}_triggerSuggestionsRefreshIfNecessary(){const{next:e}=this;if(!e)return;const t=e._views.get(Yc.QUERY_SUGGESTIONS);t&&t.refresh()}_onReasoningViewUpdate({status:e,ongoing:t}){if(e!==iu.READY||t)return;const s=this._getReasoningBoxElement();s&&s.classList.add("done")}_defaultProcessInteraction(e,t){return e=super._defaultProcessInteraction(e,t),e=this._writeAdditionalAskPropertiesToInteraction(e,t)}_writeAdditionalAskPropertiesToInteraction(e,t){const s=this.rootQuestionId;let n,o,i,{property:r}=e.context&&e.context.custom_context||{};return t.role!==Yc.FOLLOW_UP_QUESTIONS&&t.role!==Yc.QUERY_SUGGESTIONS||(r="suggested_followup_questions"),t.role===Yc.QUERY_SUGGESTIONS?(o=this.previous&&this.previous.parentQuestionId,n=this.parentQuestionId,i=this.previous&&this.previous.session.meta.question_source):o=this.parentQuestionId,Al(e,{context:{custom_context:Ya({property:r,root_question_id:s,parent_question_id:o,question_id:n,question_source:i})}})}_onFollowUpClick({q:e,event:t}={}){0===t.button&&this._submitFollowUpQuestion({q:e,qs:ru.INLINE_QUESTION_LINK})}_onFollowUpQuestionSelect({value:e}){this._submitFollowUpQuestion({q:e,qs:ru.SUGGESTED_QUESTIONS})}_submitFollowUpQuestion({q:e="",qs:t}={}){if(!(e=e.trim()))return;this.getOrCreateNext().query({q:e,qs:t})}_onQuerySuggestionSelect({value:e}){e&&this.query({q:e,qs:ru.SUGGESTED_QUESTIONS})}_writeQuestionId(e){!this._questionId&&e&&(this._questionId=e,this._context._byQid.set(e,this))}_clearQuestionId(){this._questionId&&(this._context._byQid.delete(this._questionId),this._questionId=void 0)}_getReasoningBoxElement(){const e=this._views.get(Yc.REASONING),t=e&&e.element;return t&&t.closest('[data-role="reasoning-box"]')}_destroy(e){const{next:t,parentQuestionId:s,questionId:n}=this;t&&t.destroy(e),s&&this._context._byPqid.delete(s),n&&this._context._byQid.delete(n),super._destroy(e)}}const ff={event:"done"};class _f extends Uu{constructor(e,t){super("asks",e,t),this._byQid=new Map,this._byPqid=new Map,this._root=new pf(this),this._events.on("*",(e=>this._createNextIfNecessary(e))),this._events.on("loading",(e=>this._setActive(e.workflow))),this._events.on("destroy",(()=>this._requestEmitAfterDestroy())),this._events.on("after-destroy",(()=>this._syncActiveOnAfterDestroy())),this._autoNextFn=void 0,this._active=this._root}get root(){return this._root}get workflows(){return[this._root,...this._byPqid.values()]}get active(){return this._active}getByQuestionId(e){if("string"!=typeof e)throw new Error(`Required ID to be a string: ${e}`);return this._byQid.get(e)}getByParentQuestionId(e,{autoCreate:t=!1}={}){if(void 0===e)return this._root;if("string"!=typeof e)throw new Error(`Required ID to be a string: ${e}`);let s=this._byPqid.get(e);return!s&&t&&(s=new pf(this,e)),s}reset({root:e=!0,events:t,...s}={}){void 0===t&&(t=!!e),t&&this._events.clear();for(const n of this._byPqid.values())n.destroy(s);e&&this._root.restart()}autoNext(e){this._autoNextFn=function(e=ff){switch(!0===e&&(e=ff),"string"==typeof e&&(e={event:e}),typeof e){case"object":return t=>t&&e.event===t._event;case"function":return e;default:return()=>!1}}(e)}_createNextIfNecessary(e){if(!this._autoNextFn||!this._autoNextFn(e))return;const{workflow:t}=e;t&&t.getOrCreateNext()}_requestEmitAfterDestroy(){this._emitAfterDestroyRequested||(this._emitAfterDestroyRequested=!0,setTimeout((()=>{this._emitAfterDestroyRequested=!1,this._events.emit("after-destroy",{})}),0))}_syncActiveOnAfterDestroy(){if(!this._active.destroyed)return;let e=this._root;for(;e.next&&e.next.status!==iu.INITIAL;e=e.next);this._setActive(e)}_setActive(e){e!==this._active&&(this._active=e,this._events.emit("active",{workflow:e}))}}Nu(_f.prototype,[lu.TEMPLATES]);const mf=Object.freeze({...jp.DEFAULT_API_OPTIONS,group:Ha.SEARCH,payload:{...jp.DEFAULT_API_OPTIONS.payload,fl:["cover_image","url","created_at","updated_at","published_at","title"],rows:10}}),gf=Object.freeze({...jp.DEFAULT_LAYOUTS,[Yc.QUERY]:[Mh.type],[Yc.PRODUCTS]:[oh.type,{incremental:!0,infiniteScroll:!0}],[Yc.KEYWORDS]:[Jh.type,{raw:!0}],[Yc.TOTAL]:[Jh.type,{raw:!0,format:"number"}],[Yc.FACETS]:[yp.type],[Yc.SORT]:[wp.type],[Yc.MORE]:[Sp.type]}),yf=Object.freeze({...jp.DEFAULT_TRACKERS,[Yc.PRODUCTS]:bu}),bf=Object.freeze({active:!1,mode:"infiniteScroll",pageLimit:10}),vf=Object.freeze({...jp.DEFAULT_OPTIONS,api:mf,layouts:gf,trackers:yf,pagination:bf}),wf=uu(jp.ROLES_OPTIONS,{main:Yc.PRODUCTS,members:Object.keys(gf),mappings:{[Yc.FACETS]:"facet_counts",[Yc.SORT]:function(e,{hub:t,workflowOptions:s={}}={}){const{sort:{options:n=[]}={}}=s.filters||{};if(!n.length)return[];const{sort:o}=t.states.filters||{},i=o&&o.field||function(e){for(const t of e)if(t.default)return t;return e[0]}(n).field;return i?n.map((e=>({...e,selected:e.field===i}))):n}}});class kf extends jp{_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._hub.on("query",(e=>this._query(e))),this._hub.on("filters",(()=>this._refine())),this._hub.on("more",(()=>this._more())),this._views.get(Yc.SORT).on("select",(e=>this._handleSortSelect(e)))]}restart(){super.restart(),this._page=0}get exhausted(){const e=this._hub.states.data;return!!(e&&e.meta&&e.meta.exhausted)}get page(){return this._page}autoQuery(e={}){qu.call(this,e)}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update("query",e)}_query(e){const t=cu.QUERY;this._views.filters.reset({silent:!0}),this.restart({type:t});const s=this._buildPayload(e,t);this._request({payload:s,type:t})}_refine(){const e=cu.REFINE,{facet_counts:t}=this._hub.states.data.value||{};this._currentFacetCounts=t,this.restart({type:e});const s=this._getQuery(),n=this._buildPayload(s,e);this._request({payload:n,type:e})}_more(){if(this.status!==iu.READY)throw new Error("Can not call more() while loading.");if(this.exhausted||this._page>=9)return;this._page++;const e=cu.MORE,t=this._getQuery(),s=this._buildPayload(t,e);this._request({payload:s,type:e})}_getQuery(){return this._hub.states.query}_getPageSize(){return this._options.resolved.api.payload.rows}_buildPayload(e,t){return e=this._writeFiltersToPayload(e),e=this._writePageInfoToPayload(e),t===cu.MORE&&(e=this._processPayloadForMoreRequest(e)),e}_writeFiltersToPayload(e){const t=this._hub.states.filters,{facets:s,sort:n}=t||{};return Ya({...e,facet_filters:this._buildFacetFilters(s),order_by:this._buildOrderBy(n)})}_buildFacetFilters(e){if(!e)return;const t={};for(const s in e){const n=e[s];n&&n.length&&(t[s]={terms:n})}return Object.keys(t).length?t:void 0}_buildOrderBy(e){if(e)return Ka(e)}_writePageInfoToPayload(e){return{...e,metadata:{...e.metadata,page:this._page}}}_processPayloadForMoreRequest(e={}){const t=this._hub.states.data,{[this._roles.main]:s=[]}=t&&t.value||{},n=s.map((e=>e.product_id)).filter((e=>e)),o=[...e.exclude||[],...n];return 0===o.length?e:{...e,exclude:o}}_defaultProcessData(e,t){return e=function(e,{role:t=Yc.PRODUCTS}={}){const{status:s,request:n,value:o}=e;if(s!==iu.READY||!n||!o)return e;const{[t]:i}=o;if(!i)return e;const{rows:r}=n.payload,{length:a}=i;return a<r?{...e,meta:{...e.meta,exhausted:!0}}:e}(e=function(e,t){if(!t)return e;const{status:s,value:n}=e;switch(s){case iu.INITIAL:case iu.LOADING:break;default:return e}return n&&n.facet_counts?e:{...e,value:{...n,facet_counts:t}}}(e=Ip(e=super._defaultProcessData(e,t)),this._currentFacetCounts),{role:this._roles.main})}_updateData(e){super._updateData(e),Pu.call(this,e)}_updateDataInHub(e,t){e=this._appendResultsFromMoreRequest(e),super._updateDataInHub(e,t)}_appendResultsFromMoreRequest(e){const{request:t}=e;if(!t)return e;const{metadata:s}=t.payload;if(!s||!s.page)return function(e){const{value:t}=e;if(!t)return e;const{miso_id:s}=t;return s?{...e,value:{...t,root_miso_id:s}}:e}(e);return function(e,t,{role:s=Yc.PRODUCTS}={}){if(!t.value)return e;const{[s]:n=[],facet_counts:o,total:i,root_miso_id:r}=e.value,{[s]:a=[]}=t.value;return{...t,value:{...t.value,facet_counts:o,total:i,root_miso_id:r,[s]:[...n,...a]}}}(this._hub.states.data,e,{role:this._roles.main})}_handleSortSelect({value:e}={}){e&&(this._views.filters.update({sort:e}),this._views.filters.apply())}_defaultProcessInteraction(e,t){return e=super._defaultProcessInteraction(e,t),e=this._writeRootMisoIdToInteraction(e)}_writeRootMisoIdToInteraction(e){const t=this._hub.states.data,{root_miso_id:s}=t&&t.value||{};return s?Al(e,{context:{custom_context:{root_miso_id:s}}}):e}}Nu(kf.prototype,[lu.PAGINATION,lu.FILTERS]),Object.assign(kf,{DEFAULT_API_OPTIONS:mf,DEFAULT_LAYOUTS:gf,DEFAULT_TRACKERS:yf,DEFAULT_PAGINATION:bf,DEFAULT_OPTIONS:vf,ROLES_OPTIONS:wf});const Ef=Zp.ROLES_OPTIONS;class Sf extends Zp{constructor(e){super({name:"hybrid-search/answer",plugin:e._plugin,client:e._client,options:e._options,defaults:e._defaults,roles:Ef,superworkflow:e})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow}_initSession(){}_doLoading(e){const{session:t}=this;this.updateData({...e,session:t})}_queryWithQuestionId(e){const{session:t}=this,{request:s,value:n}=e;this.updateData({...e,session:t});const{question_id:o}=n;if(!o)return;const i={...s.payload,question_id:o};void 0!==i.metadata.page&&delete i.metadata.page,this._hub.update("request",{...s,payload:i,session:t})}_defaultProcessData(e,t){return e=function(e){const{value:t}=e;return t?!t.finished||"success"!==t.finish_reason||t.sources&&t.sources.length>0?e:{...e,meta:{...e.meta,unanswerable:!0}}:e}(e=function(e){const{session:t,value:s}=e;if(!t||!s)return e;const{meta:{miso_id:n}={}}=t;return n?{...e,meta:{...e.meta,miso_id:n}}:e}(e=Ip(e=super._defaultProcessData(e,t))))}_handleHeadResponse(e){super._handleHeadResponse(e),Tp(e)}_onTracker(e){this._superworkflow._onTracker(e)}}const xf=kf.ROLES_OPTIONS.members;class Cf{constructor(e){this._subviews=e,this._containers=new Set}get filters(){return this._subviews.results.filters}get(e){return this._getSubviews(e).get(e)}addContainer(e){if(this._containers.has(e))return;this._containers.add(e);const{components:t}=e;for(const s of t)this.addComponent(s)}removeContainer(e){for(const t of this._getAllSubviews())t.removeContainer(e);this._containers.delete(e)}addComponent(e){this._getViewByElement(e).element=e,this._addContainerToSubviews(e._container,e)}removeComponent(e){this._getViewByElement(e).element=void 0,this._removeContainerFromSubviewsIfNecessary(e._container)}updateComponentRole(e,t,s){}refreshElement(e){const t=e.isContainer?this._containers.get(e):this._getViewByElement(e);t&&t.refresh({force:!0})}_getAllSubviews(){return Object.values(this._subviews)}_getSubviews(e){return this._subviews[function(e){return xf.includes(e)?"results":"answer"}(e)]}_getViewByElement(e){let{role:t}=e;if(!t)throw new Error("Component must have a role");return this.get(t)}_addContainerToSubviews(e,t){if(!e)return;const{role:s}=t,n=this._getSubviews(s);if(!n._containers.has(e)){for(const s of this._getAllSubviews())if(s!==n&&s._containers.has(e)){for(const n of e.components)if(s.containsElement(n))throw new Error(`<${e.tagName.toLowerCase()}> cannot contain both <${n.tagName.toLowerCase()}> and <${t.tagName.toLowerCase()}>, for they don't share the same data lifecycle.`);throw new Error(`Failed to add container <${e.tagName.toLowerCase()}> with child component <${t.tagName.toLowerCase()}>.`)}n.addContainer(e)}}_removeContainerFromSubviewsIfNecessary(e){if(e&&!(e.components.length>0))for(const t of this._getAllSubviews())t.removeContainer(e)}}const Of=Object.freeze({members:[]});function Af({layouts:e,trackers:t,...s}={}){return{active:!1,...s,layouts:{},trackers:{}}}function Tf(e){return e&&e.value&&e.value.trim()||void 0}class If extends jp{constructor(e,{defaults:t,...s}={}){super({name:"autocomplete",plugin:e._plugin,client:e._client,defaults:Af(t),roles:Of,superworkflow:e,...s})}_initProperties(e){super._initProperties(e),this._superworkflow=e.superworkflow,this._active=e.defaults.active}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,e.superworkflow._hub.on("input",(e=>this._query(e)))]}get enabled(){return this._active}enable(){this._active=!0}disable(){this._active=!1}_query(e){if(!this._active||(t=e,s=this._args,Tf(t)===Tf(s)))return;var t,s;this._args=e,this.restart();const{session:n}=this;if(n.meta.input=e,!Tf(e))return void this._updateCompletions({session:n,status:iu.INITIAL});const o=this._buildPayload(e);this._request({payload:o})}_buildPayload(e){return{q:Tf(e)}}_updateDataInHub(e){e.value&&(e={...e,value:e.value.completions}),this._updateCompletions(e)}_updateCompletions(e){this._superworkflow.updateCompletions(e)}}function Rf(e){xl(e,Nf.prototype)}class Nf{_initAutocomplete(e){this._autocomplete=new If(this,{defaults:e.defaults.autocomplete})}get autocomplete(){return this._autocomplete}updateCompletions(e){return this._hub.update("completions",e),this}_destroyAutocomplete(){this._autocomplete&&this._autocomplete._destroy(),this._autocomplete=void 0}}const Lf=Object.freeze({group:Ha.ASK,name:Va.SEARCH,payload:{...Zp.DEFAULT_API_OPTIONS.payload,...kf.DEFAULT_API_OPTIONS.payload,source_fl:["cover_image","url","created_at","updated_at","published_at","title","authors"]}}),qf=Object.freeze({...Zp.DEFAULT_LAYOUTS,...kf.DEFAULT_LAYOUTS,[Yc.QUERY]:[Mh.type,{placeholder:""}],[Yc.QUESTION]:[Jh.type,{raw:!0}],[Yc.SOURCES]:[rh.type,{incremental:!0,itemType:"article",templates:{ordered:!0,article:vd,articleInfoBlock:Sd}}]}),Pf=Object.freeze({...Zp.DEFAULT_TRACKERS,...kf.DEFAULT_TRACKERS}),Uf=Object.freeze({...kf.DEFAULT_PAGINATION,active:!0}),$f=Object.freeze({api:{group:Ha.ASK,name:Va.SEARCH_AUTOCOMPLETE,payload:{completion_fields:["suggested_queries"]}}}),jf=Object.freeze({sort:{options:[{field:"relevance",text:"Relevance",default:!0},{field:"published_at",text:"Date"}]}}),Mf=Object.freeze({...Zp.DEFAULT_OPTIONS,...kf.DEFAULT_OPTIONS,api:Lf,layouts:qf,trackers:Pf,autocomplete:$f,pagination:Uf,filters:jf}),Df=Object.freeze({main:Yc.PRODUCTS,members:Object.keys(qf),mappings:Object.freeze({...Zp.ROLES_OPTIONS.mappings,...kf.ROLES_OPTIONS.mappings})}),Ff=Object.freeze({api:Object.freeze({polling:!1})});class Bf extends kf{constructor(e,t){super({name:"hybrid-search",plugin:e,client:t,roles:Df,defaults:Mf,extraOptions:Ff})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e),this._answer=new Sf(this)}_initActors(e){super._initActors(e),this._views=new Cf({results:this._views,answer:this._answer._views})}restart({type:e}={}){super.restart(),e&&e!==cu.QUERY||this._answer.restart()}get answer(){return this._answer}get questionId(){return this._answer.questionId}_buildPayload(e,t){return e=function(e,t){return t===cu.QUERY?e:{...e,answer:!1}}(e=super._buildPayload(e,t),t),e=Cp(e),!1!==(e=this._writeQuestionIdToPayload(e,t)).answer&&(e=Zp.prototype._writeWikiLinkTemplateToPayload.call(this,e)),e}_buildOrderBy(e){if(e)return e.field}_writeQuestionIdToPayload(e,t){if(t===cu.QUERY)return e;const s=this._answer.questionId;return s?Ol(e,{metadata:{question_id:s}}):e}_defaultProcessData(e,t){return Tp(e=super._defaultProcessData(e,t)),e}_updateDataInHub(e,t){this._dispatchDataToAnswerWorkflow(e),e=function(e,t){const{question_id:s}=t&&t.value||{};return s?{...e,value:{...e.value,question_id:s}}:e}(e,t),super._updateDataInHub(e,t)}_dispatchDataToAnswerWorkflow(e){const{request:t}=e;if(!t)return;const{type:s,payload:n}=t;if(s===cu.QUERY&&n&&!1!==n.answer)switch(e.status){case iu.LOADING:this._answer._doLoading(e);break;case iu.READY:this._answer._queryWithQuestionId(e)}}_defaultProcessInteraction(e,t){return e=Np(e=super._defaultProcessInteraction(e,t),t)}_destroy(){this._answer.destroy(),super._destroy()}}Nu(Bf.prototype,[lu.PAGINATION,lu.FILTERS]),Rf(Bf.prototype);const zf=Object.freeze({group:Ha.SEARCH,name:Va.SEARCH,payload:{fl:["*"]}}),Qf=Object.freeze({api:{group:Ha.SEARCH,name:Va.AUTOCOMPLETE,payload:{completion_fields:["suggested_queries","title"],fl:["title","url","cover_image"]}}}),Hf=Object.freeze({...kf.DEFAULT_LAYOUTS}),Vf=Object.freeze({...kf.DEFAULT_TRACKERS}),Wf=Object.freeze({...kf.DEFAULT_OPTIONS,api:zf,autocomplete:Qf,layouts:Hf,trackers:Vf}),Gf=kf.ROLES_OPTIONS;class Kf extends kf{constructor(e,t){super({name:"search",plugin:e,client:t,roles:Gf,defaults:Wf})}_initProperties(e){super._initProperties(e),this._initAutocomplete(e)}notifyViewUpdate(e=Yc.PRODUCTS,...t){return super.notifyViewUpdate(e,...t),this}_destroy(e){this._destroyAutocomplete(),super._destroy(e)}}Rf(Kf.prototype);class Yf extends Uu{constructor(e,t,s){super(e,t,s),this._members=new Map}workflows(){return[...this._members.values()]}create(e=Kc){if(this._members.has(e))throw new Error(`Unit already exists: ${e}`);return this._create(e)}has(e=Kc){return this._members.has(e)}get(e=Kc){if("string"!=typeof e)throw new Error(`Required unit ID to be a string: ${e}`);return this._members.get(e)||this._create(e)}_create(e){throw new Error("Not implemented")}}class Zf extends jp{_initProperties(e){super._initProperties(e);const{id:t}=e;Xa(this,{id:t})}_initSession(e){this._context._members.set(e.id,this),super._initSession(e)}_defaultProcessInteraction(e,t){return e=super._defaultProcessInteraction(e,t),e=this._writeUnitIdToInteraction(e,t)}_writeUnitIdToInteraction(e){return Al(e,{context:{custom_context:{unit_id:this.id,unit_instance_uuid:this.uuid}}})}_destroy(e){this._context._members.delete(this.id),super._destroy(e)}}Object.assign(Zf,{DEFAULT_API_OPTIONS:jp.DEFAULT_API_OPTIONS,DEFAULT_LAYOUTS:jp.DEFAULT_LAYOUTS,DEFAULT_TRACKERS:jp.DEFAULT_TRACKERS,DEFAULT_OPTIONS:jp.DEFAULT_OPTIONS,ROLES_OPTIONS:jp.ROLES_OPTIONS});const Jf=Object.freeze({...Zf.DEFAULT_API_OPTIONS,group:Ha.RECOMMENDATION,name:Va.USER_TO_PRODUCTS,payload:{...Zf.DEFAULT_API_OPTIONS.payload,fl:["*"]}}),Xf=Object.freeze({...Zf.DEFAULT_LAYOUTS,[Yc.PRODUCTS]:oh.type}),e_=Object.freeze({...Zf.DEFAULT_TRACKERS,[Yc.PRODUCTS]:bu}),t_=Object.freeze({...Zf.DEFAULT_OPTIONS,api:Jf,layouts:Xf,trackers:e_}),s_=uu(Zf.ROLES_OPTIONS,{main:Yc.PRODUCTS,members:Object.keys(Xf)});class n_ extends Zf{constructor(e,t){super({name:"recommendation",context:e,roles:s_,defaults:t_,id:t})}start(){return this._request(),this}notifyViewUpdate(e=Yc.PRODUCTS,...t){return super.notifyViewUpdate(e,...t),this}}class o_ extends Yf{constructor(e,t){super("recommendations",e,t)}_create(e){return new n_(this,e)}}const i_=Object.freeze({...Zf.DEFAULT_API_OPTIONS,group:Ha.ASK,name:Va.RELATED_QUESTIONS}),r_=Object.freeze({...Zf.DEFAULT_LAYOUTS,[Yc.RELATED_QUESTIONS]:[oh.type,{itemType:"question",link:{rel:"noopener nofollow"}}],[Yc.QUERY]:[Mh.type,{placeholder:"Ask a question"}]}),a_=Object.freeze({...Zf.DEFAULT_TRACKERS,[Yc.RELATED_QUESTIONS]:bu,[Yc.CONTAINER]:{...bu,itemless:!0},[Yc.QUERY]:{[eu.SUBMIT]:{active:!0}}}),l_=Object.freeze({...Zf.DEFAULT_OPTIONS,api:i_,layouts:r_,trackers:a_}),c_=uu(Zf.ROLES_OPTIONS,{main:Yc.RELATED_QUESTIONS,members:Object.keys(r_)});class u_ extends Zf{constructor(e,t){super({name:"explore",context:e,roles:c_,defaults:l_,id:t})}_initProperties(e){super._initProperties(e),this._productId=void 0,this._linkFn=void 0}_initSubscriptions(e){super._initSubscriptions(e),this._unsubscribes=[...this._unsubscribes,this._views.get(Yc.RELATED_QUESTIONS).on("click",(e=>this._handleRelatedQuestionClick(e))),this._hub.on("query",(e=>this._query(e)))]}set productId(e){console.warning("DEPRECATED: use useApi() instead"),this.useApi({product_id:e})}useApi(...e){const t=("object"==typeof e[0]?e[0]:e[1])||{},{product_id:s}=t;return s&&(this._productId=s),super.useApi(...e)}useLink(e,t){return Qp.prototype.useLink.call(this,e,t),t&&this.useLayouts({[Yc.RELATED_QUESTIONS]:{link:t}}),this}start({relatedQuestions:e=!0}={}){if(void 0===this._linkFn)throw new Error("Must define link mapping function with useLink(fn) before calling start()");if(e)this._request();else{const{session:e}=this;this.updateData({session:e,request:{},value:{related_questions:[]}})}return this}notifyViewUpdate(e=Yc.RELATED_QUESTIONS,...t){return super.notifyViewUpdate(e,...t),this}_defaultProcessData(e,t){return e=super._defaultProcessData(e,t),e=this._addUrlToRelatedQuestions(e)}_addUrlToRelatedQuestions(e){const{value:t}=e;if(!t||!t.related_questions)return e;const s=this._linkFn&&this._linkFn[0],n=t.related_questions.map(s?e=>({text:e,url:this._getSubmitUrl({q:e,generated:!0})}):e=>({text:e}));return{...e,value:{...t,related_questions:n}}}_handleRelatedQuestionClick({value:e,...t}){this._events.emit("select",Object.freeze({...t,question:e}))}query(e){if(!e.q)throw new Error("q is required in query() call");this._hub.update("query",e)}_query(e){this._submitToPage({...e,generated:!1})}_getSubmitUrl(e){let t=Qp.prototype._getSubmitUrl.call(this,e);return e.generated&&this._productId?`${t}&qs=${encodeURIComponent(this._productId)}`:t}}zp(u_.prototype);class d_ extends Yf{constructor(e,t){super("explores",e,t)}_create(e){return new u_(this,e)}}let h_=class extends $l{constructor({name:e,plugin:t,MisoClient:s,...n}){super(e||"combo",t),this._name=e,this._plugin=t,this._MisoClient=s,this._options=n}get MisoClient(){return this._MisoClient}get element(){return this._element}async waitForElement(){return this._element||(this._elementRes||(this._elementRes=new _l)).promise}set element(e){this._element=e,this._elementRes&&this._elementRes.resolve(e)}start(e){this._started||(this._started=!0,e&&this.config(e),this._start())}_start(){throw new Error("Unimplemented")}};const p_=Object.freeze(Jp),f_=Object.freeze(Xp),__=Object.freeze(rf),m_=Object.freeze(Object.defineProperty({__proto__:null,constants:p_,phrases:f_,templates:__,wireFollowUps:function(e,t,s){if(!e)throw new Error("client is required");!function(e,{template:t=of,...s}={}){if("function"!=typeof t)throw new Error("template must be a function or undefined");const n=Object.keys(s).length>0;if(t===of&&!n)return;e.ui.asks.useTemplates({followUp:n?e=>t({...s,...e}):t})}(e,s),function(e){if(!e||"miso-follow-ups"===e.tagName.toLowerCase())return;const t=document.createElement("miso-follow-ups");for(const{name:s,value:n}of e.attributes)t.setAttribute(s,n);e.parentNode.replaceChild(t,e)}(t)},wireRelatedResources:function(e,t){if(!e)throw new Error("client is required");if(t)for(const s of t.querySelectorAll("miso-ask"))s.setAttribute("workflow","active")}},Symbol.toStringTag,{value:"Module"})),{currentScript:g_}=document,y_=Object.freeze({templates:__,autostart:!0}),b_=["templates","phrases","features"];class v_{constructor(){this._defaults=y_,this._scriptSrc=function(){if(!g_||!g_.src)return{};const e=document.createElement("a");e.href=g_.src;const t={};for(const[s,n]of new URLSearchParams(e.search))"q"!==s&&(t[s]=E_(n));return t}(),this._pageUrl=function(){const e={};for(const[t,s]of new URLSearchParams(window.location.search))t.startsWith("miso_")&&t.length>5&&"miso_api_key"!==t?e[t.substring(5)]=E_(s):"q"===t&&(e.q=s);return e}()}resolve(e){return function({api_key:e,api_host:t,templates:s,phrases:n,...o}={}){return Ya({apiKey:e,apiHost:t,templates:S_(s),phrases:n,...o})}(w_(this._defaults,this._scriptSrc,e,this._pageUrl))}}function w_(...e){let t={};for(const s of e)s&&(t=k_(t,s));return t}function k_(e,t){if(!t)return e;Object.assign(e,t);for(const s of b_)s in t&&(e[s]={...e[s],...t[s]});return e}function E_(e){return""===e||"false"!==e&&e}function S_(e){if(null==e)return e;switch(typeof e){case"function":return e;case"string":case"number":return()=>e;case"object":return Array.isArray(e)?e.map(S_):function(e,t){const s={};for(const[n,o]of Object.entries(e))s[n]=t(o);return s}(e,S_);default:throw new Error(`Unsupported template type: ${e}`)}}class x_{constructor(e,{classPrefix:t=p_.CLASS_PREFIX}={}){if(!e)throw new Error("Root element is required");Xa(this,{root:e,followUpsSection:e.querySelector(`.${t}__follow-ups`),relatedResourcesSection:e.querySelector(`.${t}__related-resources`),relatedResourcesContainer:e.querySelector(`.${t}__related-resources miso-ask`)})}}class C_ extends h_{constructor(e,t){super({name:"ask-combo",plugin:e,MisoClient:t}),this._options=new v_,this._localOptions={}}config(e={}){e=w_(this._localOptions,e);const t=this._options.resolve(e);return this._localOptions=e,this._resolvedOptions=t,this}get resolvedOptions(){return this._resolvedOptions||(this._resolvedOptions=this._options.resolve(this._localOptions))}get client(){return this._client}get elements(){return this._elements}autoStart(){this.resolvedOptions.autostart&&this.start()}async _start(){await async function(){"loading"===document.readyState&&await new Promise((e=>{document.addEventListener("DOMContentLoaded",e,{once:!0})}))}(),await this.waitForElement(),await this._setupMisoClient(),this._renderRootContent(),this._createClientInstance(),this._setupWorkflows()}async _setupMisoClient(){const{MisoClient:e,resolvedOptions:t}=this,{version:s}=e;Xa(e,{name:"miso-ask-combo"});("dev"===s||s.indexOf("beta")>0||t.debug)&&e.plugins.use("std:debug"),t.dry_run&&e.plugins.use("std:dry-run"),t.lorem&&await e.plugins.install("std:lorem")}_renderRootContent(){const{element:e,resolvedOptions:t}=this,{templates:s={}}=t;e.innerHTML=s.root(t),this._elements=new x_(e,t)}async _createClientInstance(){this._client=new MisoClient(this.resolvedOptions)}async _setupWorkflows(){const{MisoClient:e,client:t,elements:s,resolvedOptions:n}=this,{wireFollowUps:o,wireRelatedResources:i}=e.ui.defaults.ask,{templates:r={},features:a={},api:l}=n,c=t.ui.asks,u=t.ui.ask;l&&c.useApi(l),!1!==a.followUpQuestions&&o(t,s.followUpsSection,{...n,template:r.followUp}),!1!==a.relatedResources&&!1!==a.followUpQuestions&&i(t,s.relatedResourcesSection),u.autoQuery()}}class O_ extends jl{constructor(e){super("layouts",e,{libName:"layout",keyName:e=>e.type}),this._plugin=e}get(e){return this._libraries[e]}create(e,t){if(!1!==e)switch(typeof e){case"function":return{render:e};case"string":const s=this.get(e);if(!s)throw new Error(`Layout of name '${e}' not found.`);return new s(t);default:throw new Error(`Expect a string, a render function, or boolean value false: ${e}`)}}}const A_="trait",T_=Object.freeze([A_]);class I_ extends HTMLElement{static get tagName(){return"miso-stub"}static get observedAttributes(){return T_}constructor(){super(),this._traits=[]}connectedCallback(){this._syncTraits()}disconnectedCallback(){for(const e of this._traits)this._destroyTrait(e);this._traits=[]}attributeChangedCallback(e){if(e===A_)this._syncTraits()}_syncTraits(){const e=(this.getAttribute(A_)||"").split(/\s+/).filter(Boolean),t=[];for(const s of this._traits)e.includes(s.constructor.traitName)?t.push(s):this._destroyTrait(s);if(e.length>0){const s=function(e){const t=e.ui&&e.ui.traits||{};return Object.values(t).reduce(((e,t)=>(e[t.traitName]=t,e)),{})}(I_.MisoClient);for(const n of e){if(this._traits.find((e=>e.constructor.traitName===n)))continue;const e=s[n];if(!e){console.warn(`Unknown trait: ${n}`);continue}const o=new e(this);t.push(o)}}this._traits=t}_destroyTrait(e){try{e._destroy&&e._destroy()}catch(t){console.error(t)}}}let R_,N_,L_;async function q_(e){const t=await async function(e){return e.MisoClient||window.MisoClient||R_||(R_=async function(){return new Promise((e=>{(window.misocmd||(window.misocmd=[])).push((()=>e(window.MisoClient)))}))}())}(e);var s;return N_=N_||t.any(),L_=L_||await N_,L_.ui||await(s=0,new Promise((e=>setTimeout(e,s)))),L_}const P_="logo",U_="auto",$_=Object.freeze([...I_.observedAttributes,P_]);function j_(e){if(!e)return U_;switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Invalid logo attribute value: ${e}.`)}}class M_ extends I_{static get observedAttributes(){return $_}constructor(){super(),this._workflow=void 0,this._components=new Set}get isContainer(){return!0}get workflow(){return this._workflow}set workflow(e){this._setWorkflow(e)}get logo(){return j_(this.getAttribute(P_))}set logo(e){if(this.logo===e)return;const t=function(e){switch(e){case U_:return;case!0:return"true";case!1:return"false";default:throw new Error(`Invalid logo property value: ${e}.`)}}(e);t?this.setAttribute(P_,t):this.removeAttribute(P_)}async connectedCallback(){super.connectedCallback();const e=this._client=await q_(M_);document.body.contains(this)&&(this._setWorkflow(this._getWorkflow(e)),this._onConnected(e))}disconnectedCallback(){this._setWorkflow(void 0),super.disconnectedCallback()}_onConnected(e){}_getWorkflow(e){throw new Error("Unimplemented")}_setWorkflow(e){this._workflow!==e&&(this._workflow&&this._workflow._views.removeContainer(this),e&&e._views.addContainer(this),this._workflow=e)}attributeChangedCallback(e,t,s){if(e===P_)this._handleLogoUpdate(t,s);else super.attributeChangedCallback(e,t,s)}_handleLogoUpdate(e,t){j_(e)!==j_(t)&&this._workflow&&this._workflow._views.refreshElement(this)}get components(){return[...this._components]}_addComponent(e){this._components.has(e)||(this._components.add(e),this._workflow&&this._workflow._views.addComponent(e))}_removeComponent(e){this._components.has(e)&&(this._workflow&&this._workflow._views.removeComponent(e),this._components.delete(e))}_updateComponentRole(e,t,s){this._workflow&&this._workflow._views.updateComponentRole(e,t,s)}}const D_="workflow",F_="parent-question-id",B_=Object.freeze([...M_.observedAttributes,D_,F_]);const z_="unit-id",Q_=Object.freeze([...M_.observedAttributes,z_]);class H_ extends M_{static get observedAttributes(){return Q_}_getWorkflow(e){return this._getWorkflowByUnitId(e,this.unitId)}_getWorkflowByUnitId(e,t){throw new Error("Not implemented")}get unitId(){return this.getAttribute(z_)||void 0}set unitId(e){(e=e&&`${e}`)?this.setAttribute(z_,e):this.removeAttribute(z_)}attributeChangedCallback(e,t,s){if(e===z_)this._handleUnitIdUpdate(t,s);else super.attributeChangedCallback(e,t,s)}_handleUnitIdUpdate(e,t){e!==t&&this._client&&this._setWorkflow(this._getWorkflowByUnitId(this._client,t))}}const V_=Object.freeze(Object.defineProperty({__proto__:null,MisoAskElement:class extends M_{static get tagName(){return"miso-ask"}static get observedAttributes(){return B_}_getWorkflow(e){return this.boundToActiveWorkflow?e.ui.asks.active:this._getWorkflowByParentQuestionId(e,this.parentQuestionId)}_getWorkflowByParentQuestionId(e,t){return e.ui.asks.getByParentQuestionId(t,{autoCreate:!0})}get parentQuestionId(){return this.getAttribute(F_)||void 0}set parentQuestionId(e){(e=void 0!==e?`${e}`:void 0)!==this.parentQuestionId&&(e?this.setAttribute(F_,e):this.removeAttribute(F_))}get boundToActiveWorkflow(){return"active"===this.getAttribute(D_)}_setWorkflow(e){this._workflow!==e&&(super._setWorkflow(e),e&&(this.parentQuestionId=e.parentQuestionId))}async connectedCallback(){if(await super.connectedCallback(),document.body.contains(this)){const e=this._client.ui.asks;this._unsubscribes=[...this._unsubscribes||[],e.on("active",(e=>{this.boundToActiveWorkflow&&(this.workflow=e.workflow)}))]}}disconnectedCallback(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],super.disconnectedCallback()}attributeChangedCallback(e,t,s){switch(e){case F_:this._handleParentQuestionIdUpdate(t,s);break;case D_:this._handleQuestionUpdate(t,s);break;default:super.attributeChangedCallback(e,t,s)}}_handleQuestionUpdate(e,t){(e=e||void 0)!==(t=t||void 0)&&this._client&&t===ATTR_VALUE_ACTIVE&&this._setWorkflow(this._getWorkflow(this._client))}_handleParentQuestionIdUpdate(e,t){(e=e||void 0)!==(t=t||void 0)&&this._client&&this._setWorkflow(this._getWorkflowByParentQuestionId(this._client,t))}},MisoExploreElement:class extends H_{static get tagName(){return"miso-explore"}static get observedAttributes(){return H_.observedAttributes}_getWorkflowByUnitId(e,t){return e.ui.explores.get(t)}},MisoHybridSearchElement:class extends M_{static get tagName(){return"miso-hybrid-search"}static get observedAttributes(){return M_.observedAttributes}_getWorkflow(e){return e.ui.hybridSearch}},MisoRecommendationElement:class extends H_{static get tagName(){return"miso-recommendation"}static get observedAttributes(){return H_.observedAttributes}_getWorkflowByUnitId(e,t){return e.ui.recommendations.get(t)}},MisoSearchElement:class extends M_{static get tagName(){return"miso-search"}static get observedAttributes(){return M_.observedAttributes}_getWorkflow(e){return e.ui.search}}},Symbol.toStringTag,{value:"Module"})),W_="role",G_=Object.freeze([W_]);class K_ extends HTMLElement{static get tagName(){return"miso-component"}static get observedAttributes(){return G_}constructor({role:e}={}){super(),e&&Object.defineProperty(this,"_role",{value:e,writable:!1})}get role(){return this._role}connectedCallback(){const e=function(e){for(let t=e;t;t=t.parentNode)if(t.isContainer)return t;throw new Error(`${e.tagName} needs to be placed under a workflow container element.`)}(this);this._container&&this._container!==e&&this._container._removeComponent(this),this._syncRole(),e._addComponent(this),this._container=e,this._containerResolution&&this._containerResolution.resolve(e)}_syncRole(){const e=this.getAttribute(W_);if(e)this._role?console.warn(`Element <${this.tagName}>' already has a predefined role '${this._role}', so attribute '${W_}="${e}"' is ignored.`):this._role=e;else if(!this._role)throw new Error(`An attribute '${W_}' is required for element <${this.tagName}>`)}disconnectedCallback(){this._container&&(this._container._removeComponent(this),this._container=void 0,this._containerResolution=void 0)}attributeChangedCallback(e,t,s){t!==s&&e===W_&&this._container&&this._container._updateComponentRole(this,t,s)}}const Y_=Object.freeze(Object.defineProperty({__proto__:null,MisoAffiliationElement:class extends K_{constructor(){super({role:Yc.AFFILIATION})}static get tagName(){return"miso-affiliation"}},MisoAnswerElement:class extends K_{constructor(){super({role:Yc.ANSWER})}static get tagName(){return"miso-answer"}},MisoComponentElement:K_,MisoErrorElement:class extends K_{constructor(){super({role:Yc.ERROR})}static get tagName(){return"miso-error"}},MisoFacetsElement:class extends K_{constructor(){super({role:Yc.FACETS})}static get tagName(){return"miso-facets"}},MisoFeedbackElement:class extends K_{constructor(){super({role:Yc.FEEDBACK})}static get tagName(){return"miso-feedback"}},MisoFollowUpQuestionsElement:class extends K_{constructor(){super({role:Yc.FOLLOW_UP_QUESTIONS})}static get tagName(){return"miso-follow-up-questions"}},MisoImagesElement:class extends K_{constructor(){super({role:Yc.IMAGES})}static get tagName(){return"miso-images"}},MisoKeywordsElement:class extends K_{constructor(){super({role:Yc.KEYWORDS})}static get tagName(){return"miso-keywords"}},MisoMoreElement:class extends K_{constructor(){super({role:Yc.MORE})}static get tagName(){return"miso-more"}},MisoProductsElement:class extends K_{constructor(){super({role:Yc.PRODUCTS})}static get tagName(){return"miso-products"}},MisoQueryElement:class extends K_{constructor(){super({role:Yc.QUERY})}static get tagName(){return"miso-query"}},MisoQuerySuggestionsElement:class extends K_{constructor(){super({role:Yc.QUERY_SUGGESTIONS})}static get tagName(){return"miso-query-suggestions"}},MisoQuestionElement:class extends K_{constructor(){super({role:Yc.QUESTION})}static get tagName(){return"miso-question"}},MisoReasoningElement:class extends K_{constructor(){super({role:Yc.REASONING})}static get tagName(){return"miso-reasoning"}},MisoRelatedQuestionsElement:class extends K_{constructor(){super({role:Yc.RELATED_QUESTIONS})}static get tagName(){return"miso-related-questions"}},MisoRelatedResourcesElement:class extends K_{constructor(){super({role:Yc.RELATED_RESOURCES})}static get tagName(){return"miso-related-resources"}},MisoResultsElement:class extends K_{constructor(){super({role:Yc.PRODUCTS})}connectedCallback(){console.warn("Element <miso-results> is deprecated. Please use <miso-products> instead."),super.connectedCallback()}static get tagName(){return"miso-results"}},MisoSortElement:class extends K_{constructor(){super({role:Yc.SORT})}static get tagName(){return"miso-sort"}},MisoSourcesElement:class extends K_{constructor(){super({role:Yc.SOURCES})}static get tagName(){return"miso-sources"}},MisoTotalElement:class extends K_{constructor(){super({role:Yc.TOTAL})}static get tagName(){return"miso-total"}}},Symbol.toStringTag,{value:"Module"}));class Z_ extends I_{static get observedAttributes(){return I_.observedAttributes}constructor(){super(),this._context=void 0}get context(){return this._context}set context(e){this._setContext(e)}async connectedCallback(){super.connectedCallback();const e=this._client=await q_(Z_);document.body.contains(this)&&this._setContext(this._getContext(e))}disconnectedCallback(){this._setContext(void 0),super.disconnectedCallback()}_getContext(e){throw new Error("Unimplemented")}_setContext(e){if(this._context===e)return;const t=this._context;this._context=e,this._onContext(e,t)}_onContext(){}}const J_=Object.freeze(Object.defineProperty({__proto__:null,MisoFollowUpsElement:class extends Z_{static get tagName(){return"miso-follow-ups"}static get observedAttributes(){return Z_.observedAttributes}constructor(){super(),this._elementToWorkflow=new WeakMap,this._unsubscribes=[]}_getContext(e){return e.ui.asks}_onContext(e,t){e!==t&&(this._unwire(),this._wire(e))}_unwire(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[]}_wire(e){e&&(e._autoNextFn||e.autoNext(),this._unsubscribes.push(e.on("create",(e=>{const{parentQuestionId:t}=e,s=e._options.resolved.templates.followUp;if(!t||!s)return;const n=this.children.length;this.insertAdjacentHTML("beforeend",s({parentQuestionId:t}));const o=this.children.length;for(const i of Array.prototype.slice.call(this.children,n,o))this._elementToWorkflow.set(i,e)}))),this._unsubscribes.push(e.on("loading",(({workflow:e})=>{for(const t of this.children)if(this._elementToWorkflow.get(t)===e){t.scrollIntoView({behavior:"smooth",block:"start"});break}}))),this._unsubscribes.push(e.on("destroy",(({workflow:e})=>{for(const t of this.children)this._elementToWorkflow.get(t)===e&&(this._elementToWorkflow.delete(t),t.remove())}))))}}},Symbol.toStringTag,{value:"Module"}));class X_ extends HTMLElement{constructor(){super()}async connectedCallback(){document.body.contains(this)&&this._setCombo(this._getCombo(X_.MisoClient))}disconnectedCallback(){}_getCombo(e){throw new Error("Unimplemented")}_setCombo(e){this._combo!==e&&(this._combo=e,e.element=this,e.autoStart())}}const em=Object.freeze(Object.defineProperty({__proto__:null,MisoAskComboElement:class extends X_{static get tagName(){return"miso-ask-combo"}constructor(){super()}_getCombo(e){return e.ui.combo.ask}}},Symbol.toStringTag,{value:"Module"})),tm=Object.freeze(Object.defineProperty({__proto__:null,MisoBannerElement:Qd,MisoStubElement:I_,combos:em,containers:V_,contexts:J_,roles:Y_},Symbol.toStringTag,{value:"Module"})),sm="miso-hybrid-search-combo",nm=Object.freeze(Object.defineProperty({__proto__:null,CLASS_PREFIX:sm,CONAINER_TAG:"miso-hybrid-search"},Symbol.toStringTag,{value:"Module"})),om="Show more",im="Show less",rm=Object.freeze(Object.defineProperty({__proto__:null,keywords:"You searched for ${value}",question:"You asked ${value}",showLess:im,showMore:om,sources:"Sources",total:"${value} Results"},Symbol.toStringTag,{value:"Module"}));const am=Cl(new tf({...nm,DEFAULT_PHRASES:rm})),lm=Cl(new class extends ef{constructor(){super({helpers:am})}answer(e){const{container:t}=this._helpers;return t(e,{name:"answer",visibleWhen:"ready !unanswerable"},[...this.question(e),"<miso-answer></miso-answer>","<miso-feedback></miso-feedback>"])}answerBox(e){const{element:t}=this._helpers,{classPrefix:s}=e;return t("div",{classes:[`${s}__answer-box`]},[t("div",{classes:[`${s}__answer-box-inner`]},this.answerGroup(e)),this.answerBoxToggle(e)])}question(e){const{phrase:t}=this._helpers;return t(e,{name:"question",tag:"div"}).replaceAll("${value}","<miso-question></miso-question>")}answerBoxToggle(e){const{element:t}=this._helpers,{classPrefix:s}=e;return t("div",{classes:[`${s}__answer-box-toggle-container`]},[t("div",{classes:[`${s}__answer-box-toggle`],"data-role":"answer-box-toggle"})])}searchResultsGroup(e){const{container:t}=this._helpers;return t(e,{name:"search-results",visibleWhen:"loading ready"},[this.searchResultsInfoGroup(e),this.searchResultsFilters(e),"<miso-products></miso-products>",this.more(e)])}searchResultsInfoGroup(e){const{element:t}=this._helpers,{classPrefix:s}=e;return t("div",{classes:[`${s}__search-results-info`]},[this.keywords(e),this.total(e)])}searchResultsFilters(e){const{element:t}=this._helpers,{classPrefix:s}=e;return t("div",{classes:[`${s}__search-results-filters`]},["<miso-facets></miso-facets>","<miso-sort></miso-sort>"])}keywords(e){const{phrase:t}=this._helpers;return t(e,{name:"keywords",tag:"div",inline:!0}).replaceAll("${value}","<miso-keywords></miso-keywords>")}total(e){const{phrase:t}=this._helpers;return t(e,{name:"total",tag:"div",inline:!0}).replaceAll("${value}","<miso-total></miso-total>")}more(e){if(!e.moreButton)return"";const{element:t}=this._helpers,{classPrefix:s}=e;return t("div",{classes:[`${s}__search-results-more-container`]},["<miso-more></miso-more>"])}}({helpers:am}));const cm=Object.freeze(Object.defineProperty({__proto__:null,helpers:am,root:function(e={}){const{normalizeOptions:t,section:s,container:n}=am;e=t(e);const{answerBox:o,answerGroup:i,searchResultsGroup:r}=lm,{answerBox:a=!1}=e;return[s(e,{name:"question"},[n(e,{name:"query"},"<miso-query></miso-query>")]),s(e,{name:"answer"},a?[o(e)]:i(e)),s(e,{name:"search-results"},r(e))].join("")},sections:lm},Symbol.toStringTag,{value:"Module"})),um="answer-box-open",dm="answer-box-shown",hm='[data-role="answer-box-toggle"]';class pm{constructor(e,t,{classPrefix:s=sm,phrases:n={},hideWhenUnanswerable:o=!0}={}){this._client=e,this._workflow=e.ui.hybridSearch,this._element=t,this._classPrefix=s,this._phrases=n,this._hideWhenUnanswerable=o,this._init()}_init(){const e=this._element,t=this._workflow;t.answerBox=this,t._unsubscribes.push((()=>{t.answerBox===this&&(this.destroy(),t.answerBox=void 0)}));const s=e=>this._handleClick(e);e.addEventListener("click",s),this._syncWofkflowStatus(),this._syncButtonText(),this._unsubscribes=[()=>e.removeEventListener("click",s),t._answer._hub.on("data",(()=>this._syncWofkflowStatus()))]}_handleClick({target:e,button:t}){0===t&&e.closest(hm)&&this.toggleOpen()}_syncWofkflowStatus(){const{status:e}=this._workflow._answer,{meta:{unanswerable:t=!1}={}}=this._workflow._answer._hub.states.data;switch(e){case iu.ERRONEOUS:case iu.READY:t&&this._hideWhenUnanswerable?this.hide():this.show();break;default:this.hide()}}_updateBoxStatus(e,t){this._element.classList[e](`${this._classPrefix}__${t}`)}_syncButtonText(){const e=this.isOpen?this._phrases.showLess||im:this._phrases.showMore||om;for(const t of this._element.querySelectorAll(hm))t.textContent=e}_syncScroll(){this.isOpen||this._element.scrollIntoView({behavior:"smooth"})}destroy(){for(const t of this._unsubscribes)t();const e=this._workflow;e&&e.answerBox===this&&delete e.answerBox}}const fm={isOpen:um,shown:dm},_m={toggleOpen:["toggle",um],open:["add",um],close:["remove",um],toggleHidden:["toggle",dm],show:["add",dm],hide:["remove",dm]};for(const[fv,_v]of Object.entries(fm))Object.defineProperty(pm.prototype,fv,{get(){return this._element.classList.contains(`${this._classPrefix}__${_v}`)}});for(const[fv,[_v,mv]]of Object.entries(_m))pm.prototype[fv]=function(){this._updateBoxStatus(_v,mv),mv===um&&(this._syncButtonText(),this._syncScroll())};const mm=Object.freeze(nm),gm=Object.freeze(rm),ym=Object.freeze(cm),bm=Object.freeze(Object.defineProperty({__proto__:null,constants:mm,phrases:gm,templates:ym,wireAnswerBox:function(e,t,s={}){if(!e)throw new Error("client is required");t&&new pm(e,t,s)}},Symbol.toStringTag,{value:"Module"})),vm=Object.freeze(m_),wm=Object.freeze(bm),km=Object.freeze(Object.defineProperty({__proto__:null,ask:vm,hybridSearch:wm},Symbol.toStringTag,{value:"Module"}));function Em(e){const t=e._element;if(!t)return()=>{};const s=t=>e._handleClick(t);return t.addEventListener("click",s),()=>t.removeEventListener("click",s)}const Sm="miso-collapsible",xm="expanded",Cm=[{action:"expand",classAction:"add",className:xm},{action:"collapse",classAction:"remove",className:xm}];class Om{static get traitName(){return"collapsible"}constructor(e){this._element=e,e.collapsible=this,e.classList.add(Sm),this._unsubscribes=[Em(this)]}_destroy(){for(const e of this._unsubscribes||[])e();this._unsubscribes=[],delete this._element.collapsible,this._element.classList.remove(Sm),this._element=void 0}toggle(){this.expanded?this.collapse():this.expand()}}!function(e,t){for(const s of t)Object.defineProperty(e,s,{get(){return this._element&&this._element.classList.contains(s)}})}(Om.prototype,[xm]),function(e,t){for(const{action:s,classAction:n,className:o}of t)e[s]=function(){this._element&&this._element.classList[n](o),this[`_${s}`]&&this[`_${s}`]()}}(Om.prototype,Cm),function(e,t){e._handleClick=function(e){const{target:s,button:n}=e;if(0===n)for(let{role:o,selector:i,action:r}of t)if(i=i||`[data-role="${o}"]`,i&&s.closest(i))return this[r](),void e.stopPropagation()}}(Om.prototype,[{role:"expand",action:"expand"},{role:"collapse",action:"collapse"},{role:"toggle-expand",action:"toggle"}]);const Am=Object.freeze(Object.defineProperty({__proto__:null,CollapsibleTrait:Om},Symbol.toStringTag,{value:"Module"}));let Tm,Im;async function Rm(){return Im||(Im=bl(Tm||(Tm=vl("ui"))))}class Nm{constructor(e,t){this._plugin=e,this._client=t,this._contexts={}}async require(e){if(this._contexts[e])return this._contexts[e];const t=await this._plugin.requireExtension(e);return this._contexts[e]=t.getContext(this._client)}}class Lm{constructor(e,t){this._plugin=e,this._client=t,Xa(this,{sources:{api:gd(t)}})}get recommendations(){return this._recommendations||(this._recommendations=this._plugin._getRecommendations(this._client))}get recommendation(){return this.recommendations.get()}get search(){return this._search||(this._search=new Kf(this._plugin,this._client))}get asks(){return this._asks||(this._asks=this._plugin._getAsks(this._client))}get ask(){return this.asks.root}get hybridSearch(){return this._hybridSearch||(this._hybridSearch=new Bf(this._plugin,this._client))}get explores(){return this._explores||(this._explores=this._plugin._getExplores(this._client))}get explore(){return this.explores.get()}get ready(){return this._plugin._ready.promise}}class qm{constructor(e,t){this._plugin=e,this._MisoClient=t}get ask(){return this._ask||(this._ask=new C_(this._plugin,this._MisoClient))}}vc.plugins.use(class extends $l{static get id(){return"std:ui"}constructor(){super("ui"),this.layouts=new O_(this),this._recommendations=new WeakMap,this._explores=new WeakMap,this._asks=new WeakMap,this._extensions=new WeakMap,this._ready=new _l}async install(e,t){t.addSubtree(this),e.on("create",this._injectClient.bind(this));const s={defaults:km,traits:Am};Ja(s,this,["layouts","combo","ready"]),Xa(this,{MisoClient:e}),Xa(e,{ui:s}),this.combo=new qm(this,e);const n=Object.values(xp).filter((e=>e.type));for(const d of n)d.MisoClient=e;for(const d of n)this.layouts.register(d);const{containers:o,roles:i,combos:r,contexts:a,...l}=tm,c=[...Object.values(r),...Object.values(a),...Object.values(o),...Object.values(i),...Object.values(l)],u=[M_,Z_,X_];for(const d of[...u,...c])d.MisoClient=e;await Rm();for(const d of c)rl(d);this._ready.resolve()}async requireExtension(e){if("markdown"===e)return await this.MisoClient.plugins.install("std:ui-markdown");throw new Error(`Unknown extension: ${e}`)}get ready(){return Promise.all([this._ready.promise,MisoClient.any()]).then((()=>{}))}_injectClient(e){Xa(e,{ui:new Lm(this,e)})}_getExtensions(e){if(this._extensions.has(e))return this._extensions.get(e);const t=new Nm(this,e);return this._extensions.set(e,t),t}_getRecommendations(e){let t=this._recommendations.get(e);return t||this._recommendations.set(e,t=new o_(this,e)),t}_getExplores(e){let t=this._explores.get(e);return t||this._explores.set(e,t=new d_(this,e)),t}_getAsks(e){let t=this._asks.get(e);return t||this._asks.set(e,t=new _f(this,e)),t}}),vc.attach(),function(e){const t=[];function s(e){t.push(e)}gl("misodev",{transform:e=>()=>e({addCmdTransform:s})});const n=e=>{for(const s of t)e=s(e);return e};setTimeout((()=>{gl("misocmd",{transform:n}),e&&e()}))}((function(){mc._cmdRes.resolve()}));const Pm=["url","created_at","updated_at","published_at","authors","tags"],Um=new vc(Fa);let $m=null,jm=null,Mm=null;Um.ui.asks.useApi({source_fl:Pm,related_resource_fl:Pm}),Um.ui.asks.useApi(!1),Um.ui.asks.useLayouts({sources:["list",{templates:{article:(e,t,s,n)=>{const{templates:{indexBlock:o,helpers:{tagPair:i,formatDate:r}}}=e,{data:{question_id:a}}=t,{product_id:l,title:c,published_at:u,created_at:d,updated_at:h,snippet:p}=s,[f,_]=i(e,s),m=u||d||h;return`\n${f}\n  <div class="mfa-source-item__main-block">\n    <div class="mfa-source-item__title">${c}</div>\n    ${m?`<div class="mfa-source-item__date">${r(m)}</div>`:""}\n    <div class="mfa-source-item__snippet">${p}</div>\n\n  </div>\n  ${o(e,s,n)}\n${_}\n<div class="mfa-source-item__action-button" data-question-id="${a}" data-product-id="${l}"></div>\n  `}}}],query:{placeholder:"Ask a follow-up question",buttonText:"Ask"},query_suggestions:{templates:{option:(e,{text:t})=>`\n<li class="mfa-question-option" data-role="option" tabindex="0">\n  <span class="mfa-question-option__text">${t}</span>\n</li>\n  `}}}),Um.ui.asks.on("request",(async({workflow:e,session:t})=>{$m=e,jm=t,Mm=null}));const Dm=({userId:e,userType:t})=>{e&&(Um.context.user_id=e),t&&(Um.context.user_type=t)},Fm=()=>{const{user_id:e,user_type:t}=Um.context,s={};return e&&(s.user_id=e),e&&t&&(s.user_type=t),s},Bm=e=>{Um.ui.asks.on("request",e)},zm=e=>{Um.ui.asks.on("done",e)},Qm=()=>{Um.ui.ask.restart(),Um.ui.asks.useApi({fq:"type:ReferenceBook"}),$m=Um.ui.ask,jm=Um.ui.ask.session,Mm=null},Hm=e=>{Um.ui.asks.useApi({fq:`product_id:${e}`})},Vm=e=>{Um.ui.ask.query({q:e})},Wm=e=>{$m.updateData({session:jm,value:e}),Mm=e},Gm=()=>Mm,Km=e=>{if(!e||!$m)return;const t=$m.getOrCreateNext();t&&t.query({q:e})};let Ym=null;const Zm=Sa.create({baseURL:"https://api-edge.askmiso.com/v1",headers:{"Content-Type":"application/json"},params:{api_key:Fa}});let Jm=!1;const Xm=(e=null)=>({parentQuestionId:e,questionId:null,query:null,hiddenSourceBecauseEmpty:!1,hiddenRelatedQuestionsBecauseEmpty:!1,isUserTypedFollowUp:!1}),eg=ot({threadQuestions:[Xm()],activeQuestionIndex:0,pollingIntervalId:null,isDone:!1,teleportList:[],relatedBooks:[],relatedQuestions:[]}),tg=Ro((()=>eg.threadQuestions[eg.activeQuestionIndex].questionId)),sg=e=>{eg.threadQuestions[eg.activeQuestionIndex].questionId=e},ng=()=>{og(),eg.threadQuestions=[Xm()],eg.activeQuestionIndex=0,eg.isDone=!1,eg.teleportList=[],eg.relatedBooks=[],eg.relatedQuestions=[]},og=()=>{eg.pollingIntervalId&&(clearInterval(eg.pollingIntervalId),eg.pollingIntervalId=null)},ig=async e=>{ng(),Qm(),Vm(e)},rg=async(e,t)=>{ng(),Qm(),Hm(e),Vm(t)};Bm((({payload:e})=>{const{parent_question_id:t}=e;eg.relatedBooks=[],t&&(eg.threadQuestions.push(Xm(t)),eg.activeQuestionIndex=eg.threadQuestions.length-1),Jm&&(eg.threadQuestions[eg.activeQuestionIndex].isUserTypedFollowUp=!0,Jm=!1),ag(e),eg.isDone=!1})),zm((()=>{eg.isDone=!0;const e=Gm(),{sources:t,followup_questions:s}=e;t&&0!==t.length||(eg.threadQuestions[eg.activeQuestionIndex].hiddenSourceBecauseEmpty=!0),s&&0!==s.length||(eg.threadQuestions[eg.activeQuestionIndex].hiddenRelatedQuestionsBecauseEmpty=!0)}));const ag=async e=>{try{const t=await(async e=>(await Zm.post("/ask/questions",{...e,...Fm(),...Ym})).data)(e),{question_id:s}=t.data;sg(s),cg()}catch(t){console.error(t)}},lg=async e=>{ng(),Qm(),sg(e),cg()},cg=()=>{eg.pollingIntervalId||(ug(),eg.pollingIntervalId=setInterval((()=>{ug()}),1e3))},ug=async()=>{const e=tg.value;var t;if(e)try{const s=await(async e=>(await Zm.post(`/ask/questions/${e}/answer`,{...Ym})).data)(e),{data:n}=s,{finished:o,question:i,sources:r,related_resources:a,followup_questions:l}=n;i&&(t=i,eg.threadQuestions[eg.activeQuestionIndex].query=t),Wm(n),r&&Array.isArray(r)&&r.forEach((({product_id:t})=>{const s=`.mfa-source-item__action-button[data-question-id='${e}'][data-product-id='${t}']`;eg.teleportList.includes(s)||eg.teleportList.push(s)})),a&&Array.isArray(a)&&(eg.relatedBooks=a),l&&Array.isArray(l)&&(eg.relatedQuestions=l),o&&og()}catch(s){og(),console.error(s)}},dg=e=>{Jm=!0,Km(e)},hg=Ro((()=>eg.threadQuestions[0])),pg=Ro((()=>eg.threadQuestions.slice(1).filter((({questionId:e})=>e)))),fg=Ro((()=>eg.threadQuestions[eg.threadQuestions.length-1].questionId)),_g=()=>({isDone:kt(eg,"isDone"),teleportList:kt(eg,"teleportList"),relatedBooks:kt(eg,"relatedBooks"),relatedQuestions:kt(eg,"relatedQuestions"),rootQuestion:hg,followUpQuestions:pg,latestQuestionId:fg,startNewThread:ig,startNewBookThread:rg,retrieveAnswer:lg,askFollowUpQuestion:dg}),mg=ot({suggestions:{},isLoading:!1,cache:new Map,cancelTokenSource:null,debounceTimer:null}),gg=()=>{mg.cancelTokenSource&&(mg.cancelTokenSource.cancel("New request started"),mg.cancelTokenSource=null)},yg=()=>{mg.debounceTimer&&(clearTimeout(mg.debounceTimer),mg.debounceTimer=null)},bg=()=>{mg.suggestions={},mg.isLoading=!1,mg.cache.clear(),gg(),yg()},vg=async e=>{const t=e.trim();if(yg(),!t)return mg.suggestions={},void(mg.isLoading=!1);const s=(e=>{const t=mg.cache.get(e);return t?Date.now()-t.timestamp>3e5?(mg.cache.delete(e),null):(mg.cache.delete(e),mg.cache.set(e,t),t.data):null})(t);if(s)return mg.suggestions=s,void(mg.isLoading=!1);mg.debounceTimer=setTimeout((async()=>{try{gg(),mg.cancelTokenSource=Sa.CancelToken.source(),mg.isLoading=!0;const e=await(async(e,t)=>{const{user_id:s=""}=Fm();return(await Zm.post("/ask/search_autocomplete",{q:e,user_id:s,completion_fields:["title","authors"],rows:5,fl:["title"],fq:"type:ReferenceBook",...Ym},{cancelToken:t})).data})(t,mg.cancelTokenSource.token);mg.suggestions=e.data||{},((e,t)=>{if(mg.cache.size>=10){const e=mg.cache.keys().next().value;mg.cache.delete(e)}mg.cache.set(e,{data:t,timestamp:Date.now()})})(t,mg.suggestions),mg.isLoading=!1,mg.cancelTokenSource=null}catch(e){if(Sa.isCancel(e))return;console.error(e),mg.suggestions={},mg.isLoading=!1,mg.cancelTokenSource=null}}),300)},wg=ot({historyList:[],currentPage:1,pageSize:10,hasMore:!0,isLoading:!1}),kg=async()=>{if(!wg.isLoading&&wg.hasMore)try{wg.isLoading=!0;const e=await(async({page:e=1,pageSize:t=10})=>{const{user_id:s=""}=Fm();return(await Zm.post("/ask/alm/user_history",{user_id:s,offset:(e-1)*t,rows:t,...Ym})).data})({page:wg.currentPage,pageSize:wg.pageSize}),{data:t}=e;t&&Array.isArray(t)?(wg.historyList.push(...t),t.length<wg.pageSize&&(wg.hasMore=!1)):wg.hasMore=!1,wg.isLoading=!1}catch(e){console.error(e),wg.hasMore=!1,wg.isLoading=!1}},Eg=async()=>{!wg.isLoading&&wg.hasMore&&(wg.currentPage+=1,await kg())},Sg=async e=>{try{await(async e=>(await Zm.post("/ask/alm/user_history/delete",{ids:[e],...Ym})).data)(e);const t=wg.historyList.findIndex((t=>t.id===e));t>-1&&wg.historyList.splice(t,1);const s=(wg.currentPage-1)*wg.pageSize;wg.historyList.splice(s,wg.pageSize),await kg()}catch(t){console.error(t)}},xg=async e=>{Cg(),wg.pageSize=e,await kg()},Cg=()=>{wg.historyList=[],wg.currentPage=1,wg.pageSize=10,wg.hasMore=!0,wg.isLoading=!1},Og=()=>({historyList:kt(wg,"historyList"),hasMore:kt(wg,"hasMore"),isLoading:kt(wg,"isLoading"),initWithPageSize:xg,fetchNextPage:Eg,removeHistory:Sg}),Ag=ot({exploreQuestions:[],isLoading:!1}),Tg=async e=>{if(!Ag.isLoading)try{Ag.isLoading=!0;const t=await(async e=>(await Zm.post("/ask/related_questions",{product_id:e,...Fm(),...Ym})).data)(e),{data:s}=t,{related_questions:n}=s;n&&Array.isArray(n)&&(Ag.exploreQuestions=n),Ag.isLoading=!1}catch(t){console.error(t),Ag.isLoading=!1}},Ig=()=>{Ag.exploreQuestions=[],Ag.isLoading=!1},Rg=e=>e.replace("book_",""),Ng=e=>`book_${e}`,Lg=e=>{if(!e||"object"!=typeof e)return{};const t={};return Object.keys(e).forEach((s=>{t[Ng(s)]=e[s]})),t},qg=(e=3)=>Ba.slice().sort((()=>Math.random()-.5)).slice(0,e),Pg=(e,t)=>{const s=e.__vccOpts||e;for(const[n,o]of t)s[n]=o;return s},Ug={class:"mfa-ask-bar"},$g=["placeholder"],jg=Pg({__name:"AskBar",props:{placeholder:{type:String,default:""}},emits:["submit"],setup(e,{emit:t}){const s=t,n=_t(""),o=()=>{const e=n.value.trim();e&&(s("submit",e),n.value="")};return(t,s)=>(Yn(),eo("div",Ug,[Yt(ro("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),placeholder:e.placeholder,class:"mfa-ask-bar__input",onKeydown:pi(o,["enter"]),name:"query",autocomplete:"off","data-1p-ignore":""},null,40,$g),[[di,n.value]]),ro("button",{type:"button",class:"mfa-ask-bar__button",onClick:o},"Ask")]))}},[["__scopeId","data-v-f15576e4"]]),Mg={class:"mfa-dropdown__label"},Dg={class:"mfa-dropdown__value"},Fg={key:0,class:"mfa-dropdown__options mfa-card"},Bg=["onClick"],zg=Pg({__name:"BaseDropdown",props:{label:{type:String,default:""},options:{type:Array,required:!0,validator:e=>e.every((e=>"object"==typeof e&&"value"in e&&"label"in e))},modelValue:{type:[String,Number],default:null}},emits:["update:modelValue","change"],setup(e,{emit:t}){const s=e,n=t,o=_t(null),i=_t(!1),r=Ro((()=>{if(null!==s.modelValue){const e=s.options.find((e=>e.value===s.modelValue));return e?e.label:s.modelValue}return s.options[0]?.label||""})),a=e=>{o.value&&!o.value.contains(e.target)&&(i.value=!1)};return Ss((()=>{document.addEventListener("click",a)})),As((()=>{document.removeEventListener("click",a)})),(t,s)=>(Yn(),eo("div",{ref_key:"dropdownRef",ref:o,class:"mfa-dropdown__container"},[ro("div",{class:"mfa-dropdown",onClick:s[0]||(s[0]=e=>i.value=!i.value)},[ro("span",Mg,V(e.label)+":",1),ro("span",Dg,V(r.value),1),s[1]||(s[1]=ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"6",viewBox:"0 0 10 6",fill:"none"},[ro("path",{d:"M5.00048 3.78145L8.30048 0.481445L9.24315 1.42411L5.00048 5.66678L0.757812 1.42411L1.70048 0.481445L5.00048 3.78145Z",fill:"#333333"})],-1))]),i.value?(Yn(),eo("div",Fg,[(Yn(!0),eo(Qn,null,Us(e.options,(e=>(Yn(),eo("div",{key:e.value,class:"mfa-dropdown__option",onClick:t=>(e=>{n("update:modelValue",e.value),n("change",e),i.value=!1})(e)},V(e.label),9,Bg)))),128))])):uo("",!0)],512))}},[["__scopeId","data-v-e913092d"]]),Qg={class:"miso-loading","aria-label":"Loading","data-role":"loading"};const Hg=Pg({},[["render",function(e,t){return Yn(),eo("div",Qg)}],["__scopeId","data-v-47950ebe"]]),Vg={class:"mfa-load-more-button__container"},Wg=Pg({__name:"LoadMoreButton",emits:["click"],setup:e=>(e,t)=>(Yn(),eo("div",Vg,[ro("button",{type:"button",class:"mfa-load-more-button",onClick:t[0]||(t[0]=t=>e.$emit("click"))},"Load more")]))},[["__scopeId","data-v-b93d7ba6"]]),Gg={class:"mfa-my-answers"},Kg={class:"mfa-my-answers__main mfa-card"},Yg={class:"mfa-my-answers__example-questions"},Zg={class:"mfa-my-answers__example-questions-list"},Jg=["onClick"],Xg={class:"mfa-my-answers__history"},ey={class:"mfa-my-answers__history-header"},ty={class:"mfa-my-answers__history-list"},sy=["onClick"],ny={class:"mfa-my-answers__history-item-info-block-question"},oy={class:"mfa-my-answers__history-item-info-block-date"},iy={class:"mfa-my-answers__history-item-actions-block"},ry=["onClick"],ay=["onClick"],ly=Pg({__name:"MyAnswers",setup(e){const t=[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"}],s=bi(),n=Og(),{historyList:o,isLoading:i,hasMore:r}=n,a=_t(qg(8)),l=_t(10);Ss((()=>{n.initWithPageSize(l.value)})),In(l,(e=>{n.initWithPageSize(e)}));return(e,c)=>(Yn(),eo("div",Gg,[ro("div",Kg,[c[3]||(c[3]=ro("h2",{class:"mfa-my-answers__main-title"},"Ask a Question",-1)),c[4]||(c[4]=ro("p",{class:"mfa-my-answers__main-description"}," Ask an open question and we will provide the best answer based on our data base. ",-1)),ao(jg,{placeholder:"What can we answer for you?",onSubmit:gt(s).onAsk},null,8,["onSubmit"]),ro("div",Yg,[c[2]||(c[2]=ro("h4",{class:"mfa-my-answers__example-questions-title"}," Here are some examples of what you can ask ",-1)),ro("div",Zg,[(Yn(!0),eo(Qn,null,Us(a.value,(e=>(Yn(),eo("div",{key:e,class:"mfa-example-question--sm",onClick:t=>gt(s).onAsk(e.trim())},V(e.trim()),9,Jg)))),128))])])]),ro("div",Xg,[ro("div",ey,[ao(zg,{label:"Show",options:t,modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=e=>l.value=e)},null,8,["modelValue"])]),ro("div",ty,[(Yn(!0),eo(Qn,null,Us(gt(o),(e=>{return Yn(),eo("div",{key:e.id,class:"mfa-my-answers__history-item mfa-card"},[ro("div",{class:"mfa-my-answers__history-item-info-block",onClick:t=>gt(s).onSelectHistoryQuestion(e.question_id)},[ro("div",ny," "+V(e.question)+" ",1),ro("div",oy,[c[5]||(c[5]=co(" Date Asked: ",-1)),ro("span",null,V((t=e.time,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))),1)])],8,sy),ro("div",iy,[ro("button",{type:"button",class:"mfa-my-answers__history-item-actions-button",onClick:t=>gt(s).onAsk(e.question)},[...c[6]||(c[6]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},[ro("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.000489235 4.36191C2.40786 4.36191 4.35942 2.41035 4.35942 0.00297832C4.35942 0.00198547 4.35942 0.000992697 4.35942 0H6.10265C6.10265 0.000992697 6.10265 0.00198547 6.10265 0.00297832C6.10265 2.4103 8.05413 4.36183 10.4614 4.36191V6.10514C8.05501 6.10522 6.10408 8.05532 6.10265 10.4614H4.35942C4.35799 8.05527 2.40698 6.10514 0.000489235 6.10514C0.000326155 6.10514 0.000163076 6.10514 0 6.10514V4.36191C0.000163076 4.36191 0.000326155 4.36191 0.000489235 4.36191Z",fill:"#001129"}),ro("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.9998 11.0605C16.9993 11.0605 16.9988 11.0605 16.9983 11.0605C15.1731 11.0605 13.6934 9.58133 13.6927 7.75635H12.3708C12.37 9.58094 10.891 11.0599 9.06641 11.0606V12.3826C10.8914 12.3834 12.3706 13.863 12.3706 15.6882C12.3706 15.6887 12.3706 15.6892 12.3706 15.6898H13.6927C13.6927 15.6892 13.6927 15.6887 13.6927 15.6882C13.6927 13.8626 15.1726 12.3826 16.9983 12.3826C16.9988 12.3826 16.9993 12.3826 16.9998 12.3826V11.0605Z",fill:"#001129"})],-1),co(" Update ",-1)])],8,ry),ro("button",{type:"button",class:"mfa-my-answers__history-item-actions-button",onClick:t=>gt(n).removeHistory(e.id)},[...c[7]||(c[7]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"17",viewBox:"0 0 18 17",fill:"none"},[ro("path",{d:"M2.33366 5.16699H15.667V16.0003C15.667 16.2213 15.5792 16.4333 15.4229 16.5896C15.2666 16.7459 15.0547 16.8337 14.8337 16.8337H3.16699C2.94598 16.8337 2.73402 16.7459 2.57774 16.5896C2.42146 16.4333 2.33366 16.2213 2.33366 16.0003V5.16699ZM4.00033 6.83366V15.167H14.0003V6.83366H4.00033ZM6.50033 8.50033H8.16699V13.5003H6.50033V8.50033ZM9.83366 8.50033H11.5003V13.5003H9.83366V8.50033ZM4.83366 2.66699V1.00033C4.83366 0.779312 4.92146 0.56735 5.07774 0.41107C5.23402 0.25479 5.44598 0.166992 5.66699 0.166992H12.3337C12.5547 0.166992 12.7666 0.25479 12.9229 0.41107C13.0792 0.56735 13.167 0.779312 13.167 1.00033V2.66699H17.3337V4.33366H0.666992V2.66699H4.83366ZM6.50033 1.83366V2.66699H11.5003V1.83366H6.50033Z",fill:"#001129"})],-1),co(" Delete ",-1)])],8,ay)])]);var t})),128)),gt(i)?(Yn(),to(Hg,{key:0})):uo("",!0),!gt(i)&&gt(r)?(Yn(),to(Wg,{key:1,onClick:c[1]||(c[1]=e=>gt(n).fetchNextPage())})):uo("",!0)])])]))}},[["__scopeId","data-v-ecba42ec"]]);const cy=new class{constructor(){this.instances=new Map}register(e,t){this.instances.set(e,[t])}registerMultiple(e,t){this.instances.set(e,t)}unmountAll(){this.instances.forEach((e=>{e.forEach((e=>{e&&"function"==typeof e.unmount&&e.unmount()}))})),this.instances.clear()}},uy="miso-my-answers",dy=Pg({__name:"PoweredByTag",props:{customClass:{type:String,default:""}},setup:e=>(t,s)=>(Yn(),eo("div",{class:B(["mfa-powered-by-ai-tag",e.customClass])},[...s[0]||(s[0]=[ro("span",null,"Powered by AI",-1)])],2))},[["__scopeId","data-v-fd3ff256"]]),hy={class:"mfa-autocomplete-panel"},py={class:"mfa-autocomplete-panel__block"},fy={key:0,class:"mfa-autocomplete-panel__suggestions-block"},_y={class:"mfa-autocomplete-panel__suggestions-block-content"},my=["onClick"],gy={key:1,class:"mfa-autocomplete-panel__suggestions-block"},yy={class:"mfa-autocomplete-panel__suggestions-block-content"},by=["onClick"],vy={class:"mfa-autocomplete-panel__answer-block"},wy={class:"mfa-autocomplete-panel__answer-block-header"},ky={class:"mfa-autocomplete-panel__answer-block-list"},Ey=["onClick"],Sy={class:"mfa-autocomplete-panel__block"},xy=Pg({__name:"SearchBar",setup(e){const t=bi(),{suggestions:s,isLoading:n,fetchAutocomplete:o,resetAutocomplete:i}={suggestions:kt(mg,"suggestions"),isLoading:kt(mg,"isLoading"),fetchAutocomplete:vg,resetAutocomplete:bg},r=_t(null),a=_t(!1),l=_t(""),c=_t(qg(3)),u=Ro((()=>l.value.trim()));Ss((()=>{i()})),In(u,(e=>{o(e)}));const d=e=>Array.isArray(e)&&e.length>0,h=()=>{l.value=""},p=e=>{setTimeout((()=>{const{relatedTarget:t}=e;r.value.contains(t)||(a.value=!1)}),100)},f=e=>{e&&(t.onSearch(e),a.value=!1)},_=e=>{e&&(t.onAsk(e),a.value=!1)};return(e,t)=>(Yn(),eo("div",{ref_key:"searchBarRef",ref:r,class:"mfa-search-bar"},[Yt(ro("input",{type:"text",name:"query",autocomplete:"off",class:"mfa-search-bar__input","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),placeholder:"Title, Author, Keywords, ISBN",onFocus:t[1]||(t[1]=e=>a.value=!0),onBlur:p,onKeydown:t[2]||(t[2]=pi((e=>f(u.value)),["enter"]))},null,544),[[di,l.value]]),Yt(ro("button",{type:"button",class:"mfa-search-bar__clear-button",onClick:h},[...t[6]||(t[6]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"11",viewBox:"0 0 11 11",fill:"none"},[ro("path",{d:"M5.49962 4.32129L9.62462 0.196289L10.803 1.37462L6.67796 5.49962L10.803 9.62462L9.62462 10.803L5.49962 6.67796L1.37462 10.803L0.196289 9.62462L4.32129 5.49962L0.196289 1.37462L1.37462 0.196289L5.49962 4.32129Z",fill:"#66707E"})],-1)])],512),[[Bo,l.value.length>0]]),ro("button",{type:"button",class:"mfa-search-bar__search-button",onClick:t[3]||(t[3]=e=>f(u.value))},[...t[7]||(t[7]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25",fill:"none"},[ro("path",{d:"M18.531 17.117L22.814 21.399L21.399 22.814L17.117 18.531C15.5237 19.8082 13.542 20.5029 11.5 20.5C6.532 20.5 2.5 16.468 2.5 11.5C2.5 6.532 6.532 2.5 11.5 2.5C16.468 2.5 20.5 6.532 20.5 11.5C20.5029 13.542 19.8082 15.5237 18.531 17.117ZM16.525 16.375C17.7941 15.0699 18.5029 13.3204 18.5 11.5C18.5 7.633 15.367 4.5 11.5 4.5C7.633 4.5 4.5 7.633 4.5 11.5C4.5 15.367 7.633 18.5 11.5 18.5C13.3204 18.5029 15.0699 17.7941 16.375 16.525L16.525 16.375Z",fill:"#66707E"})],-1)])]),Yt(ro("div",hy,[ro("div",py,[gt(n)?(Yn(),to(Hg,{key:0})):(Yn(),eo(Qn,{key:1},[d(gt(s).completions?.title)?(Yn(),eo("div",fy,[t[8]||(t[8]=ro("div",{class:"mfa-autocomplete-panel__suggestions-block-title"},"Books",-1)),ro("div",_y,[(Yn(!0),eo(Qn,null,Us(gt(s).completions.title,(e=>(Yn(),eo("div",{key:e.text,class:"mfa-autocomplete-panel__suggestion-option",onClick:t=>f(e.text.trim())},V(e.text.trim()),9,my)))),128))])])):uo("",!0),d(gt(s).completions?.authors)?(Yn(),eo("div",gy,[t[9]||(t[9]=ro("div",{class:"mfa-autocomplete-panel__suggestions-block-title"},"Authors",-1)),ro("div",yy,[(Yn(!0),eo(Qn,null,Us(gt(s).completions.authors,(e=>(Yn(),eo("div",{key:e.text,class:"mfa-autocomplete-panel__suggestion-option",onClick:t=>f(e.text.trim())},V(e.text.trim()),9,by)))),128))])])):uo("",!0),ro("div",vy,[ro("div",wy,[t[10]||(t[10]=ro("div",{class:"mfa-autocomplete-panel__answer-block-header-title"},"Ask a question",-1)),ao(dy)]),ro("div",ky,[(Yn(!0),eo(Qn,null,Us(c.value,(e=>(Yn(),eo("div",{key:e,class:"mfa-example-question--sm",onClick:t=>_(e.trim())},V(e.trim()),9,Ey)))),128))]),ro("button",{type:"button",class:"mfa-autocomplete-panel__ask-button",onClick:t[4]||(t[4]=e=>_(u.value))}," Ask a question ")])],64))]),ro("div",Sy,[ro("button",{type:"button",class:"mfa-see-results-button",onClick:t[5]||(t[5]=e=>f(u.value))}," See results ")])],512),[[Bo,a.value&&(gt(n)||gt(s).miso_id)]])],512))}},[["__scopeId","data-v-043cd7a5"]]),Cy="miso-search-bar";let Oy=null;const Ay={class:"mfa-card mfa-mini-answer-summary"},Ty={class:"mfa-mini-answer-summary__actions"},Iy=Pg({__name:"MiniAnswerSummary",props:{query:{type:String,required:!0}},setup(e){const t=e,s=bi(),n=_g();return Ss((()=>{n.startNewThread(t.query)})),(e,n)=>{const o=Ls("miso-answer"),i=Ls("miso-ask"),r=Ls("miso-feedback");return Yn(),eo("div",Ay,[n[2]||(n[2]=ro("div",{class:"mfa-mini-answer-summary__title"},"Mini Answers Overview",-1)),ao(i,{class:"miso-ask-combo__answer-container miso-circled-citation-index",".visible-when":e.ready,".logo":!1},{default:Kt((()=>[ao(o)])),_:1},40,[".visible-when"]),ro("div",Ty,[ro("button",{class:"mfa-mini-answer-summary__learn-more-button",onClick:n[0]||(n[0]=e=>gt(s).onAsk(t.query))},[...n[1]||(n[1]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15",viewBox:"0 0 16 15",fill:"none"},[ro("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.5 4.42319V5.96173C0.500125 5.96173 0.500251 5.96173 0.500376 5.96173C2.62455 5.96173 4.34653 7.68371 4.34653 9.80789C4.34653 9.8079 4.34653 9.80791 4.34653 9.80792H5.88499C5.88499 9.80791 5.88499 9.8079 5.88499 9.80789C5.88499 7.68384 7.60677 5.96194 9.73077 5.96173V4.42327C7.60678 4.42307 5.88501 2.70118 5.88499 0.577148H4.3466C4.34655 2.70127 2.62459 4.42319 0.500451 4.42319C0.500301 4.42319 0.50015 4.42319 0.5 4.42319Z",fill:"currentColor"}),ro("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.5 10.3384V11.505C10.1104 11.5056 11.4157 12.8112 11.4157 14.4217C11.4157 14.4222 11.4157 14.4226 11.4157 14.423H12.5822C12.5822 14.4226 12.5822 14.4222 12.5822 14.4217C12.5822 12.8109 13.888 11.505 15.4989 11.505C15.4993 11.505 15.4997 11.505 15.5002 11.505V10.3385C15.4997 10.3385 15.4993 10.3385 15.4989 10.3385C13.8884 10.3385 12.5827 9.03324 12.5822 7.42285H11.4156C11.415 9.03281 10.11 10.3378 8.5 10.3384Z",fill:"currentColor"})],-1),co(" Learn more with Answers ",-1)])]),ao(i,{".visible-when":e.ready,".logo":!1},{default:Kt((()=>[ao(r)])),_:1},40,[".visible-when"])])])}}},[["__scopeId","data-v-a513bee3"]]),Ry=Pg({__name:"AskTheBookButton",props:{productId:{type:String,required:!0}},setup(e){const t=e,s=bi(),n=()=>{s.onAskTheBook(Rg(t.productId))};return(e,t)=>(Yn(),eo("button",{class:"mfa-ask-the-book-button",onClick:n},[...t[0]||(t[0]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"14",viewBox:"0 0 15 14",fill:"none"},[ro("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.00045085 3.84856C2.12462 3.84856 3.8466 2.12658 3.8466 0.00240469C3.8466 0.00160307 3.8466 0.000801506 3.8466 0H5.38499C5.38499 0.000826854 5.38499 0.00165377 5.38499 0.00248075C5.38499 2.12653 7.10677 3.84843 9.23077 3.84863V5.38672C7.10737 5.3868 5.3859 7.10761 5.38477 9.23077H3.8466C3.84547 7.10756 2.12392 5.38672 0.00045085 5.38672C0.000300564 5.38672 0.000150281 5.38672 0 5.38672V3.84856C0.000150281 3.84856 0.000300564 3.84856 0.00045085 3.84856Z",fill:"currentColor"}),ro("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 9.75934V10.9259C9.61039 10.9265 10.9157 12.2321 10.9157 13.8426C10.9157 13.8431 10.9157 13.8435 10.9157 13.8439H12.0822C12.0822 13.8435 12.0822 13.8431 12.0822 13.8426C12.0822 12.2318 13.388 10.9259 14.9989 10.9259C14.9993 10.9259 14.9997 10.9259 15.0002 10.9259V9.75944C14.9997 9.75944 14.9993 9.75944 14.9989 9.75944C13.3884 9.75944 12.0827 8.45414 12.0822 6.84375H10.9156C10.915 8.45371 9.60996 9.75872 8 9.75934Z",fill:"currentColor"})],-1),co(" Ask the book anything ",-1)])]))}},[["__scopeId","data-v-16bcc783"]]),Ny={class:"mfa-mini-answer-interaction"},Ly={key:0,class:"mfa-card mfa-sources-card"},qy={key:1,class:"mfa-card"},Py={class:"mfa-related-questions-header"},Uy={class:"mfa-mini-answer-interaction__related-questions-list"},$y=["onClick"],jy=Pg({__name:"MiniAnswerInteraction",props:{query:{type:String,required:!0}},setup(e){const t=e,s=bi(),n=_g(),{isDone:o,latestQuestionId:i,rootQuestion:r,teleportList:a,relatedQuestions:l}=n,c=_t([]);let u=null;As((()=>{u&&(clearInterval(u),u=null)})),In((()=>a.value.length),(()=>{d()}));const d=()=>{u||(u=setInterval((()=>{const e=a.value.filter((e=>!c.value.includes(e)));if(0===e.length)return clearInterval(u),void(u=null);e.forEach((e=>{document.querySelector(e)&&c.value.push(e)}))}),500))};return(e,n)=>{const a=Ls("miso-sources"),u=Ls("miso-ask");return Yn(),eo(Qn,null,[ro("div",Ny,[gt(r).hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",Ly,[n[1]||(n[1]=ro("h3",{class:"mfa-card__title"},"Sources from My Bookshelf",-1)),ao(u,{class:"miso-circled-citation-index",".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(a)])),_:1},40,[".visible-when"])])),gt(o)&&gt(r).questionId===gt(i)&&!gt(r).hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",qy,[ro("div",Py,[n[2]||(n[2]=ro("h3",{class:"mfa-card__title"},"Ask a question",-1)),ao(dy)]),n[3]||(n[3]=ro("div",{class:"mfa-mini-answer-interaction__ask-description"}," Ask an open question and we will provide the best answer based on our data base. ",-1)),n[4]||(n[4]=ro("div",{class:"mfa-mini-answer-interaction__related-questions-title"}," Related questions you can explore ",-1)),ro("div",Uy,[(Yn(!0),eo(Qn,null,Us(gt(l),((e,t)=>(Yn(),eo("div",{key:t,class:"mfa-mini-answer-interaction__related-question mfa-example-question",onClick:t=>gt(s).onAsk(e)},V(e),9,$y)))),128))]),ro("button",{class:"mfa-mini-answer-interaction__ask-button",onClick:n[0]||(n[0]=e=>gt(s).onAsk(t.query))}," Ask a question ")])):uo("",!0)]),(Yn(!0),eo(Qn,null,Us(c.value,(e=>(Yn(),to(rs,{key:e,to:e},[ao(Ry,{"product-id":e.match(/data-product-id='([^']+)'/)[1]},null,8,["product-id"])],8,["to"])))),128))],64)}}},[["__scopeId","data-v-cf90d832"]]),My="miso-mini-answer__summary",Dy="miso-mini-answer__interaction",Fy={class:"mfa-buy-this-book-link"};const By=Pg({},[["render",function(e,t){return Yn(),eo("a",Fy,[...t[0]||(t[0]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",viewBox:"0 0 18 19",fill:"none"},[ro("path",{d:"M2.33366 12.3332V2.33317H0.666992V0.666504H3.16699C3.38801 0.666504 3.59997 0.754301 3.75625 0.910582C3.91253 1.06686 4.00033 1.27882 4.00033 1.49984V11.4998H14.3653L16.032 4.83317H5.66699V3.1665H17.1003C17.227 3.16651 17.352 3.19539 17.4658 3.25095C17.5797 3.30651 17.6793 3.3873 17.7573 3.48716C17.8352 3.58702 17.8893 3.70334 17.9156 3.82726C17.9418 3.95119 17.9394 4.07946 17.9087 4.20234L15.8253 12.5357C15.7802 12.7159 15.6761 12.8758 15.5297 12.9901C15.3832 13.1044 15.2028 13.1665 15.017 13.1665H3.16699C2.94598 13.1665 2.73402 13.0787 2.57774 12.9224C2.42146 12.7661 2.33366 12.5542 2.33366 12.3332ZM4.00033 18.1665C3.5583 18.1665 3.13437 17.9909 2.82181 17.6783C2.50925 17.3658 2.33366 16.9419 2.33366 16.4998C2.33366 16.0578 2.50925 15.6339 2.82181 15.3213C3.13437 15.0088 3.5583 14.8332 4.00033 14.8332C4.44235 14.8332 4.86628 15.0088 5.17884 15.3213C5.4914 15.6339 5.66699 16.0578 5.66699 16.4998C5.66699 16.9419 5.4914 17.3658 5.17884 17.6783C4.86628 17.9909 4.44235 18.1665 4.00033 18.1665ZM14.0003 18.1665C13.5583 18.1665 13.1344 17.9909 12.8218 17.6783C12.5093 17.3658 12.3337 16.9419 12.3337 16.4998C12.3337 16.0578 12.5093 15.6339 12.8218 15.3213C13.1344 15.0088 13.5583 14.8332 14.0003 14.8332C14.4424 14.8332 14.8663 15.0088 15.1788 15.3213C15.4914 15.6339 15.667 16.0578 15.667 16.4998C15.667 16.9419 15.4914 17.3658 15.1788 17.6783C14.8663 17.9909 14.4424 18.1665 14.0003 18.1665Z",fill:"currentColor"})],-1),co(" Buy this Book ",-1)])])}],["__scopeId","data-v-85022879"]]),zy=["href"],Qy=Pg({__name:"SeeFreeChapterLink",props:{bookUrl:{type:String,required:!0}},setup(e){const t=e,s=/(\/book-reader\/\d+)(?:\/[^/]*)?$/,n=Ro((()=>{if(t.bookUrl){const e=t.bookUrl.match(s);if(e)return t.bookUrl.replace(s,`${e[1]}/ch001s001`)}return t.bookUrl}));return(e,t)=>(Yn(),eo("a",{class:"mfa-see-free-chapter-link",href:n.value,target:"_blank"},[...t[0]||(t[0]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"16",viewBox:"0 0 20 16",fill:"none"},[ro("path",{d:"M10.0002 0.5C14.4935 0.5 18.2319 3.73333 19.016 8C18.2327 12.2667 14.4935 15.5 10.0002 15.5C5.50687 15.5 1.76854 12.2667 0.984375 8C1.76771 3.73333 5.50687 0.5 10.0002 0.5ZM10.0002 13.8333C11.6998 13.833 13.3489 13.2557 14.6776 12.196C16.0063 11.1363 16.936 9.65689 17.3144 8C16.9346 6.34442 16.0043 4.86667 14.6757 3.80835C13.3471 2.75004 11.6988 2.17377 10.0002 2.17377C8.30162 2.17377 6.65328 2.75004 5.32469 3.80835C3.99609 4.86667 3.06585 6.34442 2.68604 8C3.06446 9.65689 3.9941 11.1363 5.32283 12.196C6.65155 13.2557 8.30065 13.833 10.0002 13.8333ZM10.0002 11.75C9.00565 11.75 8.05182 11.3549 7.34856 10.6516C6.6453 9.94839 6.25021 8.99456 6.25021 8C6.25021 7.00544 6.6453 6.05161 7.34856 5.34835C8.05182 4.64509 9.00565 4.25 10.0002 4.25C10.9948 4.25 11.9486 4.64509 12.6519 5.34835C13.3551 6.05161 13.7502 7.00544 13.7502 8C13.7502 8.99456 13.3551 9.94839 12.6519 10.6516C11.9486 11.3549 10.9948 11.75 10.0002 11.75ZM10.0002 10.0833C10.5527 10.0833 11.0826 9.86384 11.4733 9.47314C11.864 9.08244 12.0835 8.55253 12.0835 8C12.0835 7.44747 11.864 6.91756 11.4733 6.52686C11.0826 6.13616 10.5527 5.91667 10.0002 5.91667C9.44767 5.91667 8.91777 6.13616 8.52707 6.52686C8.13637 6.91756 7.91687 7.44747 7.91687 8C7.91687 8.55253 8.13637 9.08244 8.52707 9.47314C8.91777 9.86384 9.44767 10.0833 10.0002 10.0833Z",fill:"currentColor"})],-1),co(" See Free Chapter ",-1)])],8,zy))}},[["__scopeId","data-v-a97cef07"]]),Hy=Pg({__name:"AddToWishlistButton",props:{productId:{type:String,required:!0},defaultIsInWishlist:{type:Boolean,required:!0}},setup(e){const t=e,s=_t(t.defaultIsInWishlist),n=bi();return(e,o)=>(Yn(),eo("button",{class:"mfa-add-to-wishlist-button",onClick:o[0]||(o[0]=e=>s.value?(n.removeFromWishlist(t.productId),void(s.value=!1)):(n.addToWishlist(t.productId),void(s.value=!0)))},[s.value?(Yn(),eo(Qn,{key:0},[o[1]||(o[1]=ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"16",viewBox:"0 0 18 16",fill:"none"},[ro("path",{d:"M9.00116 1.77415C10.9587 0.0166499 13.9837 0.0749834 15.8695 1.96415C17.7545 3.85415 17.8195 6.86415 16.0662 8.82748L8.9995 15.9042L1.9345 8.82748C0.181164 6.86415 0.246997 3.84915 2.13116 1.96415C4.01866 0.0774834 7.03783 0.0141499 9.00116 1.77415Z",fill:"currentColor"})],-1)),o[2]||(o[2]=co(" Remove from Wishlist ",-1))],64)):(Yn(),eo(Qn,{key:1},[o[3]||(o[3]=ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"16",viewBox:"0 0 18 16",fill:"none"},[ro("path",{d:"M9.00116 1.77415C10.9587 0.0166499 13.9837 0.0749834 15.8695 1.96415C17.7545 3.85415 17.8195 6.86415 16.0662 8.82748L8.9995 15.9042L1.9345 8.82748C0.181164 6.86415 0.246997 3.84915 2.13116 1.96415C4.01866 0.0774834 7.03783 0.0141499 9.00116 1.77415ZM14.6895 3.14165C13.4395 1.88998 11.4228 1.83915 10.1145 3.01415L9.002 4.01248L7.88866 3.01498C6.57616 1.83832 4.56366 1.88998 3.31033 3.14332C2.06866 4.38498 2.00616 6.37248 3.15033 7.68582L9.00033 13.545L14.8503 7.68665C15.9953 6.37248 15.9328 4.38748 14.6895 3.14165Z",fill:"currentColor"})],-1)),o[4]||(o[4]=co(" Add to Wishlist ",-1))],64))]))}},[["__scopeId","data-v-75a613d7"]]),Vy={class:"mfa-answer-thread"},Wy={class:"mfa-answer-group"},Gy={class:"mfa-answer-group__main-block"},Ky={class:"mfa-card mfa-answer-card"},Yy={class:"mfa-query"},Zy={class:"mfa-answer-group__info-block"},Jy={key:0,class:"mfa-card mfa-sources-card"},Xy={key:1,class:"mfa-card"},eb={class:"mfa-related-questions-header"},tb={class:"mfa-answer-group__main-block"},sb={class:"mfa-card mfa-answer-card"},nb={key:0,class:"mfa-query"},ob={class:"mfa-answer-group__info-block"},ib={key:0,class:"mfa-card mfa-sources-card"},rb={key:1,class:"mfa-card"},ab={class:"mfa-related-questions-header"},lb={key:0,class:"mfa-related-books"},cb={class:"mfa-related-books__list"},ub={class:"mfa-related-book__info-block"},db={class:"mfa-related-book__title"},hb={class:"mfa-related-book__details-container"},pb={key:0,class:"mfa-related-book__authors"},fb={class:"mfa-related-book__topics"},_b={class:"mfa-related-book__action-buttons"},mb=Pg({__name:"AnswerView",props:{query:{type:String,required:!0}},setup(e){const t=e,s=bi(),n=_g(),{isDone:o,latestQuestionId:i,rootQuestion:r,followUpQuestions:a,teleportList:l,relatedBooks:c}=n,u=_t([]),d=_t({});let h=null;Ss((()=>{n.startNewThread(t.query)})),As((()=>{h&&(clearInterval(h),h=null)})),In((()=>l.value.length),(()=>{p()})),In((()=>c.value.length),(()=>{f()}));const p=()=>{h||(h=setInterval((()=>{const e=l.value.filter((e=>!u.value.includes(e)));if(0===e.length)return clearInterval(h),void(h=null);e.forEach((e=>{document.querySelector(e)&&u.value.push(e)}))}),500))},f=async()=>{const e=c.value.map((e=>Rg(e.product_id)));if(0===e.length)return void(d.value={});const t=await s.isInWishlist(e);d.value=Lg(t)};return(t,s)=>{const l=Ls("miso-answer"),h=Ls("miso-ask"),p=Ls("miso-sources"),f=Ls("miso-follow-up-questions");return Yn(),eo(Qn,null,[ro("div",Vy,[ro("div",Wy,[ro("div",Gy,[ro("div",Ky,[ao(dy,{"custom-class":"right-top-tag"}),ro("h1",Yy,[s[0]||(s[0]=co(" You asked about ",-1)),ro("strong",null,""+V(e.query)+"",1)]),ao(h,{class:"miso-ask-combo__answer-container miso-circled-citation-index",".visible-when":t.ready,".logo":!1},{default:Kt((()=>[ao(l)])),_:1},40,[".visible-when"]),gt(o)&&gt(r).questionId===gt(i)?(Yn(),to(jg,{key:0,onSubmit:gt(n).askFollowUpQuestion,placeholder:"Ask a follow-up question"},null,8,["onSubmit"])):uo("",!0)])]),ro("div",Zy,[gt(r).hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",Jy,[s[1]||(s[1]=ro("h3",{class:"mfa-card__title"},"Sources from My Bookshelf",-1)),ao(h,{class:"miso-circled-citation-index",".visible-when":t.nonempty,".logo":!1},{default:Kt((()=>[ao(p)])),_:1},40,[".visible-when"])])),gt(o)&&gt(r).questionId===gt(i)&&!gt(r).hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",Xy,[ro("div",eb,[s[2]||(s[2]=ro("h3",{class:"mfa-card__title"},"Related questions you can explore",-1)),ao(dy)]),ao(h,{class:"miso-ask-combo__follow-up-questions-container miso-ask-combo__query-suggestions-container miso-circled-citation-index",".visible-when":t.nonempty,".logo":!1},{default:Kt((()=>[ao(f)])),_:1},40,[".visible-when"])])):uo("",!0)])]),(Yn(!0),eo(Qn,null,Us(gt(a),(e=>(Yn(),eo("div",{key:e.questionId,class:"mfa-answer-group"},[ro("div",tb,[ro("div",sb,[e.query?(Yn(),eo("h2",nb,[co(V(e.isUserTypedFollowUp?"Follow-up Question":"Related Question")+": ",1),ro("strong",null,""+V(e.query)+"",1)])):uo("",!0),ao(h,{class:"miso-ask-combo__answer-container miso-circled-citation-index","parent-question-id":e.parentQuestionId,".visible-when":t.ready,".logo":!1},{default:Kt((()=>[ao(l)])),_:1},40,["parent-question-id",".visible-when"]),gt(o)&&e.questionId===gt(i)?(Yn(),to(jg,{key:1,onSubmit:gt(n).askFollowUpQuestion,placeholder:"Ask a follow-up question"},null,8,["onSubmit"])):uo("",!0)])]),ro("div",ob,[e.hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",ib,[s[3]||(s[3]=ro("h3",{class:"mfa-card__title"},"Sources from My Bookshelf",-1)),ao(h,{class:"miso-circled-citation-index","parent-question-id":e.parentQuestionId,".visible-when":t.nonempty,".logo":!1},{default:Kt((()=>[ao(p)])),_:1},40,["parent-question-id",".visible-when"])])),gt(o)&&e.questionId===gt(i)&&!e.hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",rb,[ro("div",ab,[s[4]||(s[4]=ro("h3",{class:"mfa-card__title"},"Related questions you can explore",-1)),ao(dy)]),ao(h,{class:"miso-ask-combo__follow-up-questions-container miso-ask-combo__query-suggestions-container miso-circled-citation-index","parent-question-id":e.parentQuestionId,".visible-when":t.nonempty,".logo":!1},{default:Kt((()=>[ao(f)])),_:1},40,["parent-question-id",".visible-when"])])):uo("",!0)])])))),128))]),gt(c).length>0?(Yn(),eo("div",lb,[s[8]||(s[8]=ro("h3",{class:"mfa-related-books__title"},"Books related to this topic",-1)),ro("div",cb,[(Yn(!0),eo(Qn,null,Us(gt(c),(e=>{return Yn(),eo("div",{key:e.product_id,class:"mfa-related-book mfa-card"},[ro("div",ub,[s[7]||(s[7]=ro("div",{class:"mfa-related-book__tags"},[ro("span",null,"ebook")],-1)),ro("div",db,V(e.title),1),ro("div",hb,[e.authors&&Array.isArray(e.authors)&&e.authors.length>0?(Yn(),eo("div",pb,[s[5]||(s[5]=co(" Author: ",-1)),ro("span",null,V(e.authors.join(" | ")),1)])):uo("",!0),ro("div",fb,[s[6]||(s[6]=co(" Topic: ",-1)),ro("span",null,V(e.tags.join(" | ")),1)])])]),ro("div",_b,[ao(By),ao(Qy,{"book-url":e.url},null,8,["book-url"]),(t=e.product_id,d.value&&"object"==typeof d.value&&Object.keys(d.value).includes(t)?(Yn(),to(Hy,{key:0,"product-id":e.product_id,"default-is-in-wishlist":d.value[e.product_id]},null,8,["product-id","default-is-in-wishlist"])):uo("",!0))])]);var t})),128))])])):uo("",!0),(Yn(!0),eo(Qn,null,Us(u.value,(e=>(Yn(),to(rs,{key:e,to:e},[ao(Ry,{"product-id":e.match(/data-product-id='([^']+)'/)[1]},null,8,["product-id"])],8,["to"])))),128))],64)}}},[["__scopeId","data-v-363e0a29"]]),gb="miso-ask-combo",yb={class:"mfa-previously-asked"},bb={class:"mfa-previously-asked__list"},vb=["onClick"],wb=["onClick"],kb=Pg({__name:"PreviouslyAsked",setup(e){const t=bi(),s=Og(),{historyList:n,hasMore:o,isLoading:i}=s;return Ss((()=>{s.initWithPageSize(15)})),(e,r)=>(Yn(),eo("div",yb,[ro("div",bb,[(Yn(!0),eo(Qn,null,Us(gt(n),(e=>(Yn(),eo("div",{key:e.id,class:"mfa-previously-asked__item"},[ro("div",{class:"mfa-previously-asked__question mfa-example-question",onClick:s=>gt(t).onSelectHistoryQuestion(e.question_id)},V(e.question),9,vb),ro("button",{type:"button",class:"mfa-previously-asked__remove-button",onClick:t=>gt(s).removeHistory(e.id)},[...r[0]||(r[0]=[ro("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[ro("path",{d:"M8.00048 7.05781L11.3005 3.75781L12.2431 4.70048L8.94315 8.00048L12.2431 11.3005L11.3005 12.2431L8.00048 8.94315L4.70048 12.2431L3.75781 11.3005L7.05781 8.00048L3.75781 4.70048L4.70048 3.75781L8.00048 7.05781Z",fill:"#001129"})],-1)])],8,wb)])))),128))]),gt(i)?(Yn(),to(Hg,{key:0})):uo("",!0),!gt(i)&&gt(o)?(Yn(),to(Wg,{key:1,onClick:gt(s).fetchNextPage},null,8,["onClick"])):uo("",!0)]))}},[["__scopeId","data-v-12ea43a0"]]),Eb="miso-previously-asked";let Sb=null;const xb={class:"mfa-answer-thread"},Cb={class:"mfa-answer-group"},Ob={class:"mfa-answer-group__main-block"},Ab={class:"mfa-card mfa-answer-card"},Tb={key:0,class:"mfa-query"},Ib={class:"mfa-answer-group__info-block"},Rb={key:0,class:"mfa-card mfa-sources-card"},Nb={key:1,class:"mfa-card"},Lb={class:"mfa-related-questions-header"},qb={class:"mfa-answer-group__main-block"},Pb={class:"mfa-card mfa-answer-card"},Ub={key:0,class:"mfa-query"},$b={class:"mfa-answer-group__info-block"},jb={key:0,class:"mfa-card mfa-sources-card"},Mb={key:1,class:"mfa-card"},Db={class:"mfa-related-questions-header"},Fb={key:0,class:"mfa-related-books"},Bb={class:"mfa-related-books__list"},zb={class:"mfa-related-book__info-block"},Qb={class:"mfa-related-book__title"},Hb={class:"mfa-related-book__details-container"},Vb={key:0,class:"mfa-related-book__authors"},Wb={class:"mfa-related-book__topics"},Gb={class:"mfa-related-book__action-buttons"},Kb=Pg({__name:"PreviousAnswer",props:{questionId:{type:String,required:!0}},setup(e){const t=e,s=bi(),n=_g(),{isDone:o,latestQuestionId:i,rootQuestion:r,followUpQuestions:a,teleportList:l,relatedBooks:c}=n,u=_t([]),d=_t({});let h=null;Ss((()=>{n.retrieveAnswer(t.questionId)})),As((()=>{h&&(clearInterval(h),h=null)})),In((()=>l.value.length),(()=>{p()})),In((()=>c.value.length),(()=>{f()}));const p=()=>{h||(h=setInterval((()=>{const e=l.value.filter((e=>!u.value.includes(e)));if(0===e.length)return clearInterval(h),void(h=null);e.forEach((e=>{document.querySelector(e)&&u.value.push(e)}))}),500))},f=async()=>{const e=c.value.map((e=>Rg(e.product_id)));if(0===e.length)return void(d.value={});const t=await s.isInWishlist(e);d.value=Lg(t)};return(e,t)=>{const s=Ls("miso-answer"),l=Ls("miso-ask"),h=Ls("miso-sources"),p=Ls("miso-follow-up-questions");return Yn(),eo(Qn,null,[ro("div",xb,[ro("div",Cb,[ro("div",Ob,[ro("div",Ab,[ao(dy,{"custom-class":"right-top-tag"}),gt(r).query?(Yn(),eo("h1",Tb,[t[0]||(t[0]=co(" You asked about ",-1)),ro("strong",null,""+V(gt(r).query)+"",1)])):uo("",!0),ao(l,{class:"miso-ask-combo__answer-container miso-circled-citation-index",".visible-when":e.ready,".logo":!1},{default:Kt((()=>[ao(s)])),_:1},40,[".visible-when"]),gt(o)&&gt(r).questionId===gt(i)?(Yn(),to(jg,{key:1,onSubmit:gt(n).askFollowUpQuestion,placeholder:"Ask a follow-up question"},null,8,["onSubmit"])):uo("",!0)])]),ro("div",Ib,[gt(r).hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",Rb,[t[1]||(t[1]=ro("h3",{class:"mfa-card__title"},"Sources from My Bookshelf",-1)),ao(l,{class:"miso-circled-citation-index",".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(h)])),_:1},40,[".visible-when"])])),gt(o)&&gt(r).questionId===gt(i)&&!gt(r).hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",Nb,[ro("div",Lb,[t[2]||(t[2]=ro("h3",{class:"mfa-card__title"},"Related questions you can explore",-1)),ao(dy)]),ao(l,{class:"miso-ask-combo__follow-up-questions-container miso-ask-combo__query-suggestions-container miso-circled-citation-index",".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(p)])),_:1},40,[".visible-when"])])):uo("",!0)])]),(Yn(!0),eo(Qn,null,Us(gt(a),(r=>(Yn(),eo("div",{key:r.questionId,class:"mfa-answer-group"},[ro("div",qb,[ro("div",Pb,[r.query?(Yn(),eo("h2",Ub,[co(V(r.isUserTypedFollowUp?"Follow-up Question":"Related Question")+": ",1),ro("strong",null,""+V(r.query)+"",1)])):uo("",!0),ao(l,{class:"miso-ask-combo__answer-container miso-circled-citation-index","parent-question-id":r.parentQuestionId,".visible-when":e.ready,".logo":!1},{default:Kt((()=>[ao(s)])),_:1},40,["parent-question-id",".visible-when"]),gt(o)&&r.questionId===gt(i)?(Yn(),to(jg,{key:1,onSubmit:gt(n).askFollowUpQuestion,placeholder:"Ask a follow-up question"},null,8,["onSubmit"])):uo("",!0)])]),ro("div",$b,[r.hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",jb,[t[3]||(t[3]=ro("h3",{class:"mfa-card__title"},"Sources from My Bookshelf",-1)),ao(l,{class:"miso-circled-citation-index","parent-question-id":r.parentQuestionId,".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(h)])),_:1},40,["parent-question-id",".visible-when"])])),gt(o)&&r.questionId===gt(i)&&!r.hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",Mb,[ro("div",Db,[t[4]||(t[4]=ro("h3",{class:"mfa-card__title"},"Related questions you can explore",-1)),ao(dy)]),ao(l,{class:"miso-ask-combo__follow-up-questions-container miso-ask-combo__query-suggestions-container miso-circled-citation-index","parent-question-id":r.parentQuestionId,".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(p)])),_:1},40,["parent-question-id",".visible-when"])])):uo("",!0)])])))),128))]),gt(c).length>0?(Yn(),eo("div",Fb,[t[8]||(t[8]=ro("h3",{class:"mfa-related-books__title"},"Books related to this topic",-1)),ro("div",Bb,[(Yn(!0),eo(Qn,null,Us(gt(c),(e=>{return Yn(),eo("div",{key:e.product_id,class:"mfa-related-book mfa-card"},[ro("div",zb,[t[7]||(t[7]=ro("div",{class:"mfa-related-book__tags"},[ro("span",null,"ebook")],-1)),ro("div",Qb,V(e.title),1),ro("div",Hb,[e.authors&&Array.isArray(e.authors)&&e.authors.length>0?(Yn(),eo("div",Vb,[t[5]||(t[5]=co(" Author: ",-1)),ro("span",null,V(e.authors.join(" | ")),1)])):uo("",!0),ro("div",Wb,[t[6]||(t[6]=co(" Topic: ",-1)),ro("span",null,V(e.tags.join(" | ")),1)])])]),ro("div",Gb,[ao(By),ao(Qy,{"book-url":e.url},null,8,["book-url"]),(s=e.product_id,d.value&&"object"==typeof d.value&&Object.keys(d.value).includes(s)?(Yn(),to(Hy,{key:0,"product-id":e.product_id,"default-is-in-wishlist":d.value[e.product_id]},null,8,["product-id","default-is-in-wishlist"])):uo("",!0))])]);var s})),128))])])):uo("",!0),(Yn(!0),eo(Qn,null,Us(u.value,(e=>(Yn(),to(rs,{key:e,to:e},[ao(Ry,{"product-id":e.match(/data-product-id='([^']+)'/)[1]},null,8,["product-id"])],8,["to"])))),128))],64)}}},[["__scopeId","data-v-b26b97a9"]]),Yb="miso-ask-combo",Zb={class:"mfa-ask-this-book__search-bar-container"},Jb={key:0,class:"mfa-ask-this-book__description"},Xb={key:0,class:"mfa-ask-this-book__explore-questions"},ev=["onClick"],tv={key:1,class:"mfa-ask-this-book__answer-thread"},sv={class:"mfa-ask-this-book__answer-group"},nv={key:0,class:"mfa-ask-this-book__query"},ov={key:1,class:"mfa-ask-this-book__sources"},iv={key:2,class:"mfa-ask-this-book__related-questions"},rv={class:"mfa-ask-this-book__related-questions-header"},av={key:0,class:"mfa-ask-this-book__query"},lv={key:1,class:"mfa-ask-this-book__sources"},cv={key:2,class:"mfa-ask-this-book__related-questions"},uv={class:"mfa-ask-this-book__related-questions-header"},dv=Pg({__name:"AskThisBook",props:{productId:{type:String,required:!0}},setup(e){const t=e,s={exploreQuestions:kt(Ag,"exploreQuestions"),isLoading:kt(Ag,"isLoading"),fetchExploreQuestions:Tg,resetExploreQuestions:Ig},{exploreQuestions:n,isLoading:o}=s,i=_g(),{isDone:r,latestQuestionId:a,rootQuestion:l,followUpQuestions:c,teleportList:u}=i,d=_t(!0),h=_t([]);let p=null;Ss((()=>{s.fetchExploreQuestions(t.productId)})),As((()=>{s.resetExploreQuestions(),p&&(clearInterval(p),p=null)})),In((()=>u.value.length),(()=>{_()}));const f=e=>{i.startNewBookThread(t.productId,e),d.value=!1},_=()=>{p||(p=setInterval((()=>{const e=u.value.filter((e=>!h.value.includes(e)));if(0===e.length)return clearInterval(p),void(p=null);e.forEach((e=>{document.querySelector(e)&&h.value.push(e)}))}),500))};return(e,t)=>{const s=Ls("miso-answer"),u=Ls("miso-ask"),p=Ls("miso-sources"),_=Ls("miso-follow-up-questions");return Yn(),eo(Qn,null,[ro("div",Zb,[ao(jg,{placeholder:"What can we answer for you?",onSubmit:f}),d.value?uo("",!0):(Yn(),eo("div",Jb," Responses generated by AI using content from this book. "))]),d.value?(Yn(),eo("div",Xb,[gt(o)?(Yn(),to(Hg,{key:0})):uo("",!0),(Yn(!0),eo(Qn,null,Us(gt(n),((e,t)=>(Yn(),eo("div",{key:t,class:"mfa-ask-this-book__explore-question mfa-example-question",onClick:t=>f(e)},V(e),9,ev)))),128))])):(Yn(),eo("div",tv,[ro("div",sv,[gt(l).query?(Yn(),eo("div",nv," "+V(gt(l).query)+" ",1)):uo("",!0),ao(u,{class:"miso-ask-combo__answer-container miso-circled-citation-index",".visible-when":e.ready,".logo":!1},{default:Kt((()=>[ao(s)])),_:1},40,[".visible-when"]),gt(l).hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",ov,[t[0]||(t[0]=ro("div",{class:"mfa-ask-this-book__sources-title"},"Sources from My Bookshelf",-1)),ao(u,{class:"miso-circled-citation-index",".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(p)])),_:1},40,[".visible-when"])])),gt(r)&&gt(l).questionId===gt(a)&&!gt(l).hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",iv,[ro("div",rv,[t[1]||(t[1]=ro("div",{class:"mfa-ask-this-book__related-questions-title"}," Related questions you can explore ",-1)),ao(dy)]),ao(u,{class:"miso-ask-combo__follow-up-questions-container miso-ask-combo__query-suggestions-container miso-circled-citation-index",".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(_)])),_:1},40,[".visible-when"])])):uo("",!0),gt(r)&&gt(l).questionId===gt(a)?(Yn(),to(jg,{key:3,onSubmit:gt(i).askFollowUpQuestion,placeholder:"Ask a follow-up question"},null,8,["onSubmit"])):uo("",!0)]),(Yn(!0),eo(Qn,null,Us(gt(c),(n=>(Yn(),eo("div",{key:n.questionId,class:"mfa-ask-this-book__answer-group"},[n.query?(Yn(),eo("div",av," "+V(n.query)+" ",1)):uo("",!0),ao(u,{class:"miso-ask-combo__answer-container miso-circled-citation-index","parent-question-id":n.parentQuestionId,".visible-when":e.ready,".logo":!1},{default:Kt((()=>[ao(s)])),_:1},40,["parent-question-id",".visible-when"]),n.hiddenSourceBecauseEmpty?uo("",!0):(Yn(),eo("div",lv,[t[2]||(t[2]=ro("div",{class:"mfa-ask-this-book__sources-title"},"Sources from My Bookshelf",-1)),ao(u,{class:"miso-circled-citation-index","parent-question-id":n.parentQuestionId,".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(p)])),_:1},40,["parent-question-id",".visible-when"])])),gt(r)&&n.questionId===gt(a)&&!n.hiddenRelatedQuestionsBecauseEmpty?(Yn(),eo("div",cv,[ro("div",uv,[t[3]||(t[3]=ro("div",{class:"mfa-ask-this-book__related-questions-title"}," Related questions you can explore ",-1)),ao(dy)]),ao(u,{class:"miso-ask-combo__follow-up-questions-container miso-ask-combo__query-suggestions-container miso-circled-citation-index","parent-question-id":n.parentQuestionId,".visible-when":e.nonempty,".logo":!1},{default:Kt((()=>[ao(_)])),_:1},40,["parent-question-id",".visible-when"])])):uo("",!0),gt(r)&&n.questionId===gt(a)?(Yn(),to(jg,{key:3,onSubmit:gt(i).askFollowUpQuestion,placeholder:"Ask a follow-up question"},null,8,["onSubmit"])):uo("",!0)])))),128))])),(Yn(!0),eo(Qn,null,Us(h.value,(e=>(Yn(),to(rs,{key:e,to:e},[ao(Ry,{"product-id":e.match(/data-product-id='([^']+)'/)[1]},null,8,["product-id"])],8,["to"])))),128))],64)}}},[["__scopeId","data-v-741dc1a8"]]),hv="miso-ask-combo";!function(e){const t={setUserInfo(e){e&&Dm(e)},setAuthToken(e){e&&(e=>{Ym={jwt_token:e}})(e)},clearAuthToken(){Ym=null},setActionHooks(e){var t;(t=e)&&"object"==typeof t&&gi.forEach((e=>{t[e]&&"function"==typeof t[e]&&(yi[e]=t[e])}))},renderMyAnswers(){(()=>{const e=document.getElementById(uy);if(!e)return void console.warn(`[MisoForALM] Element with id '${uy}' not found.`);cy.unmountAll();const t=mi(ly);t.mount(e),cy.register("myAnswers",t)})()},renderSearchBar(){(()=>{Oy&&(Oy.unmount(),Oy=null);const e=document.getElementById(Cy);e?(Oy=mi(xy),Oy.mount(e)):console.warn(`[MisoForALM] Element with id '${Cy}' not found.`)})()},renderMiniAnswer(e){e&&(e=>{const t=document.getElementById(My);if(!t)return void console.warn(`[MisoForALM] Element with id '${My}' not found.`);const s=document.getElementById(Dy);if(!s)return void console.warn(`[MisoForALM] Element with id '${Dy}' not found.`);cy.unmountAll();const n=mi(Iy,{query:e}),o=mi(jy,{query:e});n.mount(t),o.mount(s),cy.registerMultiple("miniAnswer",[n,o])})(e)},renderAnswer(e){e?(e=>{const t=document.getElementById(gb);if(!t)return void console.warn(`[MisoForALM] Element with id '${gb}' not found.`);cy.unmountAll();const s=mi(mb,{query:e});s.mount(t),cy.register("answer",s)})(e):console.warn("[MisoForALM] renderAnswer called without query")},renderPreviouslyAsked(){(()=>{Sb&&(Sb.unmount(),Sb=null);const e=document.getElementById(Eb);e?(Sb=mi(kb),Sb.mount(e)):console.warn(`[MisoForALM] Element with id '${Eb}' not found.`)})()},renderPreviousAnswer(e){e?(e=>{const t=document.getElementById(Yb);if(!t)return void console.warn(`[MisoForALM] Element with id '${Yb}' not found.`);cy.unmountAll();const s=mi(Kb,{questionId:e});s.mount(t),cy.register("previousAnswer",s)})(e):console.warn("[MisoForALM] renderPreviousAnswer called without questionId")},renderAskThisBook(e){e?(e=>{const t=document.getElementById(hv);if(!t)return void console.warn(`[MisoForALM] Element with id '${hv}' not found.`);cy.unmountAll();const s=mi(dv,{productId:Ng(e)});s.mount(t),cy.register("askThisBook",s)})(e):console.warn("[MisoForALM] renderAskThisBook called without bookId")}};e.MisoForALM||(e.MisoForALM=t)}(window)}();
